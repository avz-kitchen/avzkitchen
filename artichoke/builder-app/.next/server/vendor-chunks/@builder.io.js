"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@builder.io";
exports.ids = ["vendor-chunks/@builder.io"];
exports.modules = {

/***/ "(ssr)/./node_modules/@builder.io/react/dist/builder-react.es5.js":
/*!******************************************************************!*\
  !*** ./node_modules/@builder.io/react/dist/builder-react.es5.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   Builder: () => (/* reexport safe */ _builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder),\n/* harmony export */   BuilderAsyncRequestsContext: () => (/* binding */ BuilderAsyncRequestsContext),\n/* harmony export */   BuilderBlock: () => (/* binding */ BuilderBlock),\n/* harmony export */   BuilderBlockComponent: () => (/* binding */ BuilderBlock$1),\n/* harmony export */   BuilderBlocks: () => (/* binding */ BuilderBlocks),\n/* harmony export */   BuilderComponent: () => (/* binding */ BuilderComponent),\n/* harmony export */   BuilderContent: () => (/* binding */ BuilderContent),\n/* harmony export */   BuilderMetaContext: () => (/* binding */ BuilderMetaContext),\n/* harmony export */   BuilderPage: () => (/* binding */ BuilderComponent),\n/* harmony export */   BuilderStoreContext: () => (/* binding */ BuilderStoreContext),\n/* harmony export */   Button: () => (/* binding */ Button),\n/* harmony export */   Columns: () => (/* binding */ Columns),\n/* harmony export */   Content: () => (/* binding */ BuilderComponent),\n/* harmony export */   CustomCode: () => (/* binding */ CustomCode),\n/* harmony export */   Dropzone: () => (/* binding */ Slot),\n/* harmony export */   Embed: () => (/* binding */ Embed),\n/* harmony export */   Form: () => (/* binding */ Form),\n/* harmony export */   FormInput: () => (/* binding */ FormInput),\n/* harmony export */   FormSelect: () => (/* binding */ FormSelect),\n/* harmony export */   FormSubmitButton: () => (/* binding */ FormSubmitButton),\n/* harmony export */   Fragment: () => (/* binding */ Fragment),\n/* harmony export */   Image: () => (/* binding */ Image),\n/* harmony export */   Img: () => (/* binding */ Img),\n/* harmony export */   Label: () => (/* binding */ Label),\n/* harmony export */   Mutation: () => (/* binding */ Mutation),\n/* harmony export */   PersonalizationContainer: () => (/* binding */ PersonalizationContainer),\n/* harmony export */   RawText: () => (/* binding */ RawText),\n/* harmony export */   Router: () => (/* binding */ Router),\n/* harmony export */   Section: () => (/* binding */ Section),\n/* harmony export */   StateProvider: () => (/* binding */ StateProvider),\n/* harmony export */   Symbol: () => (/* binding */ Symbol$1),\n/* harmony export */   Text: () => (/* binding */ Text),\n/* harmony export */   TextArea: () => (/* binding */ TextArea),\n/* harmony export */   Video: () => (/* binding */ Video),\n/* harmony export */   builder: () => (/* reexport safe */ _builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.builder),\n/* harmony export */   \"default\": () => (/* reexport safe */ _builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.builder),\n/* harmony export */   getSrcSet: () => (/* binding */ getSrcSet),\n/* harmony export */   noWrap: () => (/* binding */ noWrap),\n/* harmony export */   onChange: () => (/* binding */ onChange),\n/* harmony export */   stringToFunction: () => (/* binding */ stringToFunction),\n/* harmony export */   updateMetadata: () => (/* binding */ updateMetadata),\n/* harmony export */   useIsPreviewing: () => (/* binding */ useIsPreviewing),\n/* harmony export */   withBuilder: () => (/* binding */ withBuilder),\n/* harmony export */   withChildren: () => (/* binding */ withChildren)\n/* harmony export */ });\n/* harmony import */ var _builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @builder.io/sdk */ \"(ssr)/./node_modules/@builder.io/sdk/dist/index.esm.js\");\n/* harmony import */ var _emotion_core__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @emotion/core */ \"(ssr)/./node_modules/@emotion/core/dist/core.esm.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! react-dom */ \"(ssr)/./node_modules/next/dist/server/route-modules/app-page/vendored/ssr/react-dom.js\");\n/* harmony import */ var react_dom__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(react_dom__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var hash_sum__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! hash-sum */ \"(ssr)/./node_modules/hash-sum/hash-sum.js\");\n/* harmony import */ var hash_sum__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(hash_sum__WEBPACK_IMPORTED_MODULE_4__);\nvar SDK_VERSION=\"8.0.4\",_a;\"undefined\"!=typeof window&&(null===(_a=window.parent)||void 0===_a||_a.postMessage({type:\"builder.isReactSdk\",data:{value:!0,supportsPatchUpdates:\"v4\",supportsCustomBreakpoints:!0,supportsGlobalSymbols:!0,blockLevelPersonalization:!0,version:SDK_VERSION}},\"*\"));var extendStatics=function(e,t){return(extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function __extends(e,t){if(\"function\"!=typeof t&&null!==t)throw new TypeError(\"Class extends value \"+String(t)+\" is not a constructor or null\");function n(){this.constructor=e}extendStatics(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var __assign=function(){return(__assign=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function __rest(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&\"function\"==typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(e);r<i.length;r++)t.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(e,i[r])&&(n[i[r]]=e[i[r]])}return n}function __decorate(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a}function __metadata(e,t){if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function __awaiter(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{l(i.next(e))}catch(e){o(e)}}function s(e){try{l(i.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}l((i=i.apply(e,t||[])).next())}))}function __generator(e,t){var n,i,r,o,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},\"function\"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(l){return function(s){if(n)throw new TypeError(\"Generator is already executing.\");for(;o&&(o=0,s[0]&&(a=0)),a;)try{if(n=1,i&&(r=2&s[0]?i.return:s[0]?i.throw||((r=i.return)&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,i=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){a.label=s[1];break}if(6===s[0]&&a.label<r[1]){a.label=r[1],r=s;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(s);break}r[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,l])}}}function __spreadArray(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))}\"function\"==typeof SuppressedError&&SuppressedError;var fastClone=function(e){return JSON.parse(JSON.stringify(e))},omit$2=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var i=Object.assign({},e),r=0,o=t;r<o.length;r++){var a=o[r];delete i[a]}return i},sizeNames=[\"xsmall\",\"small\",\"medium\",\"large\"],sizes={xsmall:{min:0,default:0,max:0},small:{min:320,default:321,max:640},medium:{min:641,default:642,max:991},large:{min:990,default:991,max:1200},getWidthForSize:function(e){return this[e].default},getSizeForWidth:function(e){for(var t=0,n=sizeNames;t<n.length;t++){var i=n[t];if(e<=this[i].max)return i}return\"large\"}},getSizesForBreakpoints=function(e){var t=e.small,n=e.medium,i=__assign(__assign({},sizes),fastClone(sizes));if(!t||!n)return i;var r=Math.floor(t/2);i.small={max:t,min:r,default:r+1};var o=i.small.max+1;i.medium={max:n,min:o,default:o+1};var a=i.medium.max+1;return i.large={max:2e3,min:a,default:a+1},i},set=function(e,t,n){if(Object(e)!==e)return e;var i=Array.isArray(t)?t:t.toString().match(/[^.[\\]]+/g);return i.slice(0,-1).reduce((function(e,t,n){return Object(e[t])===e[t]?e[t]:e[t]=Math.abs(Number(i[n+1]))>>0==+i[n+1]?[]:{}}),e)[i[i.length-1]]=n,e},noop=function(){return null},safeDynamicRequire;if(\"function\"==typeof(null===globalThis||void 0===globalThis?void 0:globalThis.require)||_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isServer&&\"function\"==\"function\")try{safeDynamicRequire=eval(\"require\")}catch(e){safeDynamicRequire=(null===globalThis||void 0===globalThis?void 0:globalThis.require)?globalThis.require:noop}function isDebug(){return Boolean(\"undefined\"!=typeof process&&void 0!==process.env&&process.env.DEBUG)}function isNodeRuntime(){var e;return\"undefined\"!=typeof process&&Boolean(null===(e=null===process||void 0===process?void 0:process.versions)||void 0===e?void 0:e.node)}null!=safeDynamicRequire||(safeDynamicRequire=noop);var shouldForceBrowserRuntimeInNode=function(){var e;if(!isNodeRuntime())return!1;var t=\"arm64\"===process.arch,n=process.version.startsWith(\"v20\"),i=null===(e=process.env.NODE_OPTIONS)||void 0===e?void 0:e.includes(\"--no-node-snapshot\");return!(!t||!n||i)&&(console.log(\"Skipping usage of `isolated-vm` to avoid crashes in Node v20 on an arm64 machine.\\n    If you would like to use the `isolated-vm` package on this machine, please provide the `NODE_OPTIONS=--no-node-snapshot` config to your Node process.\\n    See https://github.com/BuilderIO/builder/blob/main/packages/react/README.md#node-v20--m1-macs-apple-silicon-support for more information.\\n    \"),!0)},fnCache={},api=function(e){return _builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.builder};function stringToFunction(e,t,n,i){if(void 0===t&&(t=!0),!e||!e.trim())return function(){};var r=e+\":\"+t;if(fnCache[r])return fnCache[r];var o=t&&!(e.includes(\";\")||e.includes(\" return \")||e.trim().startsWith(\"return \"))||e.trim().startsWith(\"builder.run\"),a=function(){};try{_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser&&(a=new Function(\"state\",\"event\",\"block\",\"builder\",\"Device\",\"update\",\"Builder\",\"context\",\"\\n          var names = [\\n            'state',\\n            'event',\\n            'block',\\n            'builder',\\n            'Device',\\n            'update',\\n            'Builder',\\n            'context'\\n          ];\\n          var rootState = state;\\n          if (typeof Proxy !== 'undefined') {\\n            rootState = new Proxy(rootState, {\\n              set: function () {\\n                return false;\\n              },\\n              get: function (target, key) {\\n                if (names.includes(key)) {\\n                  return undefined;\\n                }\\n                return target[key];\\n              }\\n            });\\n          }\\n          /* Alias */\\n          var ctx = context;\\n          var log = console.log.bind(console);\\n          with (rootState) {\\n            \".concat(o?\"return (\".concat(e,\");\"):e,\";\\n          }\\n        \")))}catch(t){n&&n.push(t);var s=t&&t.message;s&&\"string\"==typeof s&&i&&-1===i.indexOf(s)&&i.push(s),_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser&&console.warn(\"Function compile error in \".concat(e),t)}var l=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];try{if(_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser||shouldForceBrowserRuntimeInNode())return a.apply(void 0,t);var r=getIsolateContext(),s=safeDynamicRequire(\"isolated-vm\"),l=r.evalClosureSync(makeFn(e,o),t.map((function(e,t){return\"object\"==typeof e?new s.Reference(t===indexOfBuilderInstance?__assign(__assign({},e),{getUserAttributes:function(){return e.getUserAttributes(\"\")}}):e):null})));try{var u=JSON.parse(l);return u}catch(e){return l}}catch(t){return _builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser?console.warn(\"Builder custom code error:\",t.message||t,\"in\",e,t.stack||t):isDebug()&&console.debug(\"Builder custom code error:\",t.message||t,\"in\",e,t.stack||t),n&&n.push(t),null}};return _builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser&&(fnCache[r]=l),l}var indexOfBuilderInstance=3,makeFn=function(e,t,n){var i=n||[\"state\",\"event\",\"block\",\"builder\",\"Device\",\"update\",\"Builder\",\"context\"];return\"\\n\".concat(\"\\n  var refToProxy = (obj) => {\\n    if (typeof obj !== 'object' || obj === null) {\\n      return obj;\\n    }\\n    return new Proxy({}, {\\n        get(target, key) {\\n            if (key === 'copySync') {\\n              return () => obj.copySync();\\n            }\\n            const val = obj.getSync(key);\\n            if (typeof val?.copySync === 'function') {\\n                return JSON.parse(stringify(val));\\n            }\\n            return val;\\n        },\\n        set(target, key, value) {\\n            obj.setSync(key, value);\\n        },\\n        deleteProperty(target, key) {\\n            obj.deleteSync(key);\\n        }\\n      })\\n  }\\n\",\"\\n\").concat(\"\\n    var stringify = (val) => {\\n      if (typeof val === 'object' && val !== null) {\\n        return JSON.stringify(val.copySync ? val.copySync() : val);\\n      }\\n      return val;\\n    }\\n  \",\"\\n\").concat(i.map((function(e,t){return\"var \".concat(e,\" = refToProxy($\").concat(t,\");\")})).join(\"\\n\")).concat(\"\\n\".concat(i.includes(\"context\")?\"var ctx = context;\":\"\",\"\\nvar endResult = function() {\\n  \").concat(t?\"return (\".concat(e,\");\"):e,\";\\n};\\n\\nreturn stringify(endResult());\\n\"))},getIsolateContext=function(){var e=_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.serverContext;e||(e=new(safeDynamicRequire(\"isolated-vm\").Isolate)({memoryLimit:128}).createContextSync(),_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.setServerContext(e));var t=e.global;return t.setSync(\"global\",t.derefInto()),t.setSync(\"log\",(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];isDebug()&&console.log.apply(console,e)})),e},isPromise=function(e){return\"function\"==typeof e.then},isRequestInfo=function(e){return!isPromise(e)},BuilderAsyncRequestsContext=react__WEBPACK_IMPORTED_MODULE_2___default().createContext({requests:[],errors:[],logs:[]}),BuilderStoreContext=react__WEBPACK_IMPORTED_MODULE_2___default().createContext({state:{},rootState:{},content:{},context:{},update:function(e){return null}}),applyPatchWithMinimalMutationChain=function(e,t,n){if(void 0===n&&(n=!1),Object(e)!==e)return e;var i=t.path,r=t.op,o=t.value,a=i.split(/\\//);\"\"===a[0]&&a.shift();for(var s=n?e:__assign({},e),l=s,u=0;u<a.length;u++){var d=u===a.length-1,c=a[u];if(d){if(\"replace\"===r)l[c]=o;else if(\"add\"===r){var p=Number(c);Array.isArray(l)?\"-\"===c?l.push(o):l.splice(p,0,o):l[c]=o}else if(\"remove\"===r){p=Number(c);Array.isArray(l)?l.splice(p,1):delete l[c]}}else{var f=a[u+1],m=Object(l[c])===l[c]?l[c]:String(Number(f))===f?[]:{};l=l[c]=Array.isArray(m)?__spreadArray([],m,!0):__assign({},m)}}return s},htmlEscape=function(e){return e.replace(/&/g,\"&amp;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\"/g,\"&quot;\")},blockToHtmlString=function(e){var t;return\"<\".concat(htmlEscape(e.tagName||\"div\"),' \\n    class=\"builder-block ').concat(e.id,\" \").concat(e.class||\"\",'\"\\n    builder-id=\"').concat(e.id,'\"\\n  ').concat(Object.keys(e.properties||{}).map((function(t){return\"\".concat(htmlEscape(t),'=\"').concat(htmlEscape(e.properties[t]),'\"')})).join(\" \"),\"\\n  >\").concat(\"Text\"===(null===(t=null==e?void 0:e.component)||void 0===t?void 0:t.name)?e.component.options.text:e.children?e.children.map((function(e){return blockToHtmlString(e)})).join(\"\"):\"\",\"</\").concat(e.tagName||\"div\",\">\").replace(/\\s+/g,\" \")},Link=function(e){return react__WEBPACK_IMPORTED_MODULE_2___default().createElement(BuilderStoreContext.Consumer,null,(function(t){return t.renderLink?t.renderLink(e):react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"a\",__assign({},e))}))};function traverse(e,t,n,i,r){void 0===n&&(n=null),void 0===i&&(i=null),void 0===r&&(r=new WeakSet),null!=e&&\"object\"==typeof e?r.has(e)||(r.add(e),Array.isArray(e)?e.forEach((function(n,i){t(n,(function(t){e[i]=t})),traverse(n,t,e,i,r)})):Object.entries(e).forEach((function(n){var i=n[0],o=n[1];t(o,(function(t){e[i]=t})),traverse(o,t,e,i,r)}))):t(e,(function(e){null!==n&&null!==i&&(n[i]=e)}))}var isLocalizedField=function(e){return e&&\"object\"==typeof e&&\"@builder.io/core:LocalizedValue\"===e[\"@type\"]},containsLocalizedValues=function(e){if(!e||!Object.getOwnPropertyNames(e).length)return!1;var t=!1;return traverse(e,(function(e){isLocalizedField(e)&&(t=!0)})),t},extractLocalizedValues=function(e,t){return e&&Object.getOwnPropertyNames(e).length?(traverse(e,(function(e,n){var i;isLocalizedField(e)&&n(null!==(i=e[t])&&void 0!==i?i:void 0)})),e):{}},camelCaseToKebabCase=function(e){return e?e.replace(/([A-Z])/g,(function(e){return\"-\".concat(e[0].toLowerCase())})):\"\"},kebabCaseToCamelCase=function(e){return void 0===e&&(e=\"\"),e.replace(/-([a-z])/g,(function(e){return e[1].toUpperCase()}))},Device={desktop:0,tablet:1,mobile:2};function deepCloneWithConditions(e){if(null===e||\"object\"!=typeof e)return e;if(Array.isArray(e))return e.map((function(e){return deepCloneWithConditions(e)}));if(\"@builder.io/sdk:Element\"===e[\"@type\"])return e;var t={};for(var n in e)\"meta\"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=deepCloneWithConditions(e[n]));return t}var voidElements=new Set([\"area\",\"base\",\"br\",\"col\",\"embed\",\"hr\",\"img\",\"input\",\"link\",\"meta\",\"param\",\"source\",\"track\",\"wbr\",\"textarea\"]),last=function(e){return e[e.length-1]};function omit$1(e,t){for(var n=Object.assign({},e),i=0,r=t;i<r.length;i++){delete n[r[i]]}return n}var cssCase=function(e){if(!e)return e;var t=camelCaseToKebabCase(e);return e[0]===e[0].toUpperCase()&&(t=\"-\"+t),t};function capitalize(e){if(e)return e[0].toUpperCase()+e.slice(1)}var BuilderBlock$1=function(_super){function BuilderBlock(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.hydrated=!1,_this.state={hasError:!1,updates:0},_this.privateState={state:{},rootState:{},context:{},update:function(){}},_this.onWindowMessage=function(event){var message=event.data;if(message)switch(message.type){case\"builder.selectionChange\":var data=message.data;if(!data)break;var selection=data.selection,id=_this.block&&_this.block.id;id&&Array.isArray(selection)&&selection.indexOf(id)>-1&&setTimeout((function(){window.$block=_this,window.$blocks||(window.$blocks=[]),window.$blocks.push(_this)}));break;case\"builder.patchUpdates\":var data=message.data;if(!data||!data.data)break;var patches=data.data[_this.block.id];if(!patches)return;location.href.includes(\"builder.debug=true\")&&eval(\"debugger\");for(var _i=0,patches_1=patches;_i<patches_1.length;_i++){var patch=patches_1[_i];applyPatchWithMinimalMutationChain(_this.props.block,patch,!0)}_this.setState({updates:_this.state.updates+1})}},_this}return __extends(BuilderBlock,_super),Object.defineProperty(BuilderBlock.prototype,\"store\",{get:function(){return this.privateState},enumerable:!1,configurable:!0}),BuilderBlock.getDerivedStateFromError=function(e){return{hasError:!0}},BuilderBlock.prototype.componentDidCatch=function(e,t){console.error(\"Builder block error:\",e,t)},BuilderBlock.prototype.stringToFunction=function(e,t){return void 0===t&&(t=!0),stringToFunction(e,t,this._errors,this._logs)},Object.defineProperty(BuilderBlock.prototype,\"block\",{get:function(){return this.props.block},enumerable:!1,configurable:!0}),BuilderBlock.prototype.emotionCss=function(e){var t,n,i,r,o,a=this.block,s=a.animations&&a.animations[0];if(s&&\"hover\"!==s.trigger){var l=s&&s.steps&&s.steps[0],u=l&&l.styles;u&&(o=u)}var d=sizeNames.slice().reverse(),c={};if(e)for(var p=0,f=d;p<f.length;p++){var m=f[p];if(\"large\"===m)this.props.emailMode||(c[\"&.builder-block\"]=Object.assign({},e[m],o));else{var h=getSizesForBreakpoints((null===(n=null===(t=this.privateState.context.builderContent)||void 0===t?void 0:t.meta)||void 0===n?void 0:n.breakpoints)||{});c[\"@media only screen and (max-width: \".concat(h[m].max,\"px)\")]={\"&.builder-block\":e[m]}}}var v=a.animations&&a.animations.find((function(e){return\"hover\"===e.trigger}));return v&&(c[\":hover\"]=(null===(r=null===(i=v.steps)||void 0===i?void 0:i[1])||void 0===r?void 0:r.styles)||{},c.transition=\"all \".concat(v.duration,\"s \").concat(camelCaseToKebabCase(v.easing)),v.delay&&(c.transitionDelay=v.delay+\"s\")),c},BuilderBlock.prototype.eval=function(e){return this.stringToFunction(e)(this.privateState.state,void 0,this.block,_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.builder,Device,this.privateState.update,_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder,this.privateState.context)},BuilderBlock.prototype.componentWillUnmount=function(){_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing&&removeEventListener(\"message\",this.onWindowMessage)},BuilderBlock.prototype.componentDidMount=function(){var e,t=this;this.hydrated=!0;var n=this.block,i=n&&n.animations;if(_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing&&addEventListener(\"message\",this.onWindowMessage),i){var r={animations:fastClone(i)};if(n.bindings)for(var o in n.bindings)if((null===(e=o.trim)||void 0===e?void 0:e.call(o))&&o.startsWith(\"animations.\")){var a=this.stringToFunction(n.bindings[o]);void 0!==a&&set(r,o,a(this.privateState.state,null,n,_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.builder,null,null,_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder,this.privateState.context))}_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.animator.bindAnimations(r.animations.filter((function(e){return\"hover\"!==e.trigger})).map((function(e){return __assign(__assign({},e),{elementId:t.block.id})})))}},BuilderBlock.prototype.getElement=function(e,t){var n,i,r,o,a,s,l=this;void 0===e&&(e=0),void 0===t&&(t=this.privateState.state);var u=this.props;u.child,u.fieldName;var d,c=this.block,p=(c.tagName||\"div\").toLowerCase();if(\"template\"===p){var f=c.children?c.children.map((function(e){return blockToHtmlString(e)})).join(\" \"):\"\";return console.debug(\"template html\",f),(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"template\",__assign({},c.properties,{dangerouslySetInnerHTML:{__html:f}}))}var m=c.component&&(c.component.name||c.component.component),h=null;c.component&&!c.component.class&&(c.component&&c.component.tag?d=c.component.tag:(h=_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.components.find((function(e){return e.name===m}))||null)&&h.class?d=h.class:h&&h.tag?d=h.tag:(null==m?void 0:m.startsWith(\"Builder:\"))?console.warn(\"Missing @builder.io/widgets installation, please install and import @builder.io/widgets to use \".concat(m.split(\":\")[1],\" in your content, more info here: https://github.com/BuilderIO/builder/tree/main/packages/widgets\")):m&&console.warn(\"Missing registration for \".concat(m,\", have you included the registration in your bundle?\")));var v=__assign(__assign({},c.properties),{style:{},responsiveStyles:fastClone(c.responsiveStyles||{})});if(v=__assign(__assign({},v.properties),v),c.component&&(v.component=deepCloneWithConditions(c.component)),c.bindings)for(var g in c.bindings)if(null===(i=g.trim)||void 0===i?void 0:i.call(g)){var b=this.stringToFunction(c.bindings[g]);set(v,g,b(t,null,c,api(),Device,null,_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder,this.privateState.context))}if(v.hide)return null;if(delete v.hide,(\"show\"in v||c.bindings&&c.bindings.show)&&!v.show)return null;if(delete v.show,c.actions){var y=function(e){if(!(null===(r=e.trim)||void 0===r?void 0:r.call(e)))return\"continue\";var n=c.actions[e];v[\"on\"+capitalize(e)]=function(e){var i=t;return\"undefined\"!=typeof Proxy&&(i=new Proxy(t,{set:function(e,t,n){return e[t]=n,l.privateState.rootState[t]=n,!0}})),l.stringToFunction(n,!1)(i,e,l.block,_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.builder,Device,l.privateState.update,_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder,l.privateState.context)}};for(var g in c.actions)y(g)}var _=(v.component||v.options)&&__assign(__assign({},v.options),v.component.options||v.component.data);containsLocalizedValues(_)&&(this.privateState.state.locale||console.warn(\"[Builder.io] In order to use localized fields in Builder, you must pass a locale prop to the BuilderComponent or to options object while fetching the content to resolve localized fields. Learn more: https://www.builder.io/c/docs/localization-inline#targeting-and-inline-localization\"),_=extractLocalizedValues(_,null!==(o=this.privateState.state.locale)&&void 0!==o?o:\"Default\"));var S=voidElements.has(p),x=h&&(h.fragment||h.noWrap),B=(null===(a=v.attr)||void 0===a?void 0:a.style)||(\"string\"==typeof v.style?v.style:\"\")||\"\";if(\"string\"==typeof B){\"object\"!=typeof v.style&&(v.style={});for(var k=0,w=B.split(\";\");k<w.length;k++){var C=w[k].split(\":\");if(!C.length)return;g=C[0],b=C[1];g&&(C.length>2&&(b=C.slice(1).join(\":\")),v.style[kebabCaseToCamelCase(g)]=b)}}var E=__assign(__assign(__assign({},omit$1(v,[\"class\",\"component\",\"attr\",\"responsiveStyles\"])),((n={})[\"string\"!=typeof p||p.includes(\"-\")?\"class\":\"className\"]=\"builder-block \".concat(this.id).concat(c.class?\" \".concat(c.class):\"\").concat(!c.component||[\"Image\",\"Video\",\"Banner\"].indexOf(m)>-1?\"\":\" builder-has-component\")+(v.class?\" \"+v.class:\"\")+(this.hydrated&&_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing&&(null===(s=this.privateState.state._spacer)||void 0===s?void 0:s.parent)===c.id?\" builder-spacer-parent\":\"\"),n.key=this.id+e,n[\"builder-id\"]=this.id,n)),0!==e&&{\"builder-index\":e});_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing&&this.hydrated&&(E[\"builder-inline-styles\"]=v.attr&&v.attr.style?Object.keys(v.style).reduce((function(e,t){return(e?\"\".concat(e,\";\"):\"\")+\"\".concat(cssCase(t),\":\").concat(v.style[t],\";\")}),\"\"):\"\"),(E.properties&&E.properties.href||E.href)&&\"div\"===p&&(p=\"a\"),\"a\"===p&&(p=Link);var R=c.children||E.children||[];return (0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)((react__WEBPACK_IMPORTED_MODULE_2___default().Fragment),null,(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(_emotion_core__WEBPACK_IMPORTED_MODULE_1__.ClassNames,null,(function(e){var t=e.css;if(e.cx,!l.props.emailMode){var n=\" \"+t(l.emotionCss(v.responsiveStyles));E.class&&(E.class+=n),E.className&&(E.className+=n)}return (0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(BuilderAsyncRequestsContext.Consumer,null,(function(e){return l._asyncRequests=e&&e.requests,l._errors=e&&e.errors,l._logs=e&&e.logs,S?(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(p,__assign({},E)):d&&(x||l.props.emailMode)?(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(d,__assign({},_,{attributes:E,builderBlock:c,builderState:l.privateState})):(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(p,__assign({},E),d&&(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(d,__assign({builderState:l.privateState,builderBlock:c},_)),c.text||v.text?v.text:!d&&R&&Array.isArray(R)&&R.length?R.map((function(e,t){return (0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(BuilderBlock,{key:(l.id||\"\")+t,block:e,index:t,size:l.props.size,fieldName:l.props.fieldName,child:l.props.child,emailMode:l.props.emailMode})})):null)}))})))},Object.defineProperty(BuilderBlock.prototype,\"id\",{get:function(){var e=this.block;return e.id.startsWith(\"builder\")?e.id:\"builder-\"+e.id},enumerable:!1,configurable:!0}),BuilderBlock.prototype.contents=function(e){var t=this,n=this.block;if(this.privateState=e,n.repeat&&n.repeat.collection){var i=n.repeat.collection,r=last((i||\"\").trim().split(\"(\")[0].trim().split(\".\")),o=n.repeat.itemName||(r?r+\"Item\":\"item\"),a=this.stringToFunction(i)(e.state,null,n,api(),Device,null,_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder,this.privateState.context);return Array.isArray(a)?a.map((function(n,i){var r,a=__assign(__assign({},e.state),((r={$index:i,$item:n})[o]=n,r[\"$\".concat(o,\"Index\")]=i,r));return (0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(BuilderStoreContext.Provider,{key:i,value:__assign(__assign({},e),{state:a})},t.getElement(i,a))})):null}return this.getElement()},BuilderBlock.prototype.render=function(){var e=this;return this.state.hasError?(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"span\",{css:{display:\"inline-block\",padding:5,color:\"#999\",fontSize:11,fontStyle:\"italic\"}},\"Builder block error :( Check console for details\"):(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(BuilderStoreContext.Consumer,null,(function(t){return e.contents(t)}))},BuilderBlock}((react__WEBPACK_IMPORTED_MODULE_2___default().Component)),BuilderBlocks=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hydrated=!1,t.onClickEmptyBlocks=function(){var e;_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isIframe&&t.noBlocks&&(null===(e=window.parent)||void 0===e||e.postMessage({type:\"builder.clickEmptyBlocks\",data:{parentElementId:t.parentId,dataPath:t.path}},\"*\"))},t.onHoverEmptyBlocks=function(){var e;_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing&&t.noBlocks&&(null===(e=window.parent)||void 0===e||e.postMessage({type:\"builder.hoverEmptyBlocks\",data:{parentElementId:t.parentId,dataPath:t.path}},\"*\"))},t}return __extends(t,e),Object.defineProperty(t.prototype,\"isRoot\",{get:function(){return!this.props.child},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"noBlocks\",{get:function(){var e=this.props.blocks;return!(e&&e.length)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"path\",{get:function(){var e=this.props.dataPath||\"\";return e.trim()&&(e.startsWith(\"this.\")?e=e.replace(\"this.\",\"\"):e.startsWith(\"component.options.\")||(e=\"component.options.\"+e)),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"parentId\",{get:function(){return this.props.parentElementId?this.props.parentElementId:this.props.parent&&this.props.parent.id},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){this.hydrated=!0},t.prototype.render=function(){var e=this,t=this.props.blocks,n=this.props.emailMode?\"span\":\"div\";return (0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(n,__assign({className:\"builder-blocks\"+(this.noBlocks?\" no-blocks\":\"\")+(this.props.child?\" builder-blocks-child\":\"\")+(this.props.className?\" \"+this.props.className:\"\"),\"builder-type\":\"blocks\",\"builder-path\":_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isIframe&&this.hydrated?this.path:void 0,\"builder-parent-id\":this.parentId,css:__assign(__assign({},!this.props.emailMode&&{display:\"flex\",flexDirection:\"column\",alignItems:\"stretch\"}),this.props.style),onClick:function(){e.noBlocks&&e.onClickEmptyBlocks()}},_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing&&{onMouseEnter:function(){return e.onHoverEmptyBlocks()}}),t&&Array.isArray(t)&&t.map((function(t,n){return t&&\"@builder.io/sdk:Element\"===t[\"@type\"]?(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(BuilderBlock$1,{key:t.id,block:t,index:n,fieldName:e.props.fieldName,child:e.props.child,emailMode:e.props.emailMode}):t}))||t)},t.renderInto=function(e,n,i){if(void 0===n&&(n={}),e){var r=null;return\"string\"==typeof e?r=document.querySelector(e):e instanceof Element&&(r=e),react_dom__WEBPACK_IMPORTED_MODULE_3___default().render((0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(BuilderStoreContext.Provider,{value:i},(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(t,__assign({},n))),r)}},t}((react__WEBPACK_IMPORTED_MODULE_2___default().Component)),NoWrap=function(e){return e.children};function getData(e){if(void 0!==(null==e?void 0:e.data)){var t=e.data,n=t.blocks,i=t.blocksString,r=Array.isArray(n)||\"string\"==typeof i,o=__assign(__assign({},e.data),r&&{blocks:n||JSON.parse(i)});return delete o.blocksString,o}}var variantsScript=function(e,t){return\"\\n(function() {\\n  if (window.builderNoTrack || !navigator.cookieEnabled) {\\n    return;\\n  }\\n\\n  var variants = \".concat(e,\";\\n  function removeVariants() {\\n    variants.forEach(function (template) {\\n      document.querySelector('template[data-template-variant-id=\\\"' + template.id + '\\\"]').remove();\\n    });\\n    document.getElementById('variants-script-\").concat(t,'\\').remove();\\n  }\\n\\n  if (typeof document.createElement(\"template\").content === \\'undefined\\') {\\n    removeVariants();\\n    return ;\\n  }\\n\\n  function setCookie(name,value,days) {\\n    var expires = \"\";\\n    if (days) {\\n        var date = new Date();\\n        date.setTime(date.getTime() + (days*24*60*60*1000));\\n        expires = \"; expires=\" + date.toUTCString();\\n    }\\n    document.cookie = name + \"=\" + (value || \"\")  + expires + \"; path=/\" + \"; Secure; SameSite=None\";\\n  }\\n\\n  function getCookie(name) {\\n    var nameEQ = name + \"=\";\\n    var ca = document.cookie.split(\\';\\');\\n    for(var i=0;i < ca.length;i++) {\\n        var c = ca[i];\\n        while (c.charAt(0)==\\' \\') c = c.substring(1,c.length);\\n        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);\\n    }\\n    return null;\\n  }\\n  var cookieName = \\'builder.tests.').concat(t,\"';\\n  var variantInCookie = getCookie(cookieName);\\n  var availableIDs = variants.map(function(vr) { return vr.id }).concat('\").concat(t,\"');\\n  var variantId;\\n  if (availableIDs.indexOf(variantInCookie) > -1) {\\n    variantId = variantInCookie;\\n  }\\n  if (!variantId) {\\n    var n = 0;\\n    var random = Math.random();\\n    for (var i = 0; i < variants.length; i++) {\\n      var variant = variants[i];\\n      var testRatio = variant.testRatio;\\n      n += testRatio;\\n      if (random < n) {\\n        setCookie(cookieName, variant.id);\\n        variantId = variant.id;\\n        break;\\n      }\\n    }\\n    if (!variantId) {\\n      variantId = \\\"\").concat(t,'\";\\n      setCookie(cookieName, \"').concat(t,'\");\\n    }\\n  }\\n  if (variantId && variantId !== \"').concat(t,\"\\\") {\\n    var winningTemplate = document.querySelector('template[data-template-variant-id=\\\"' + variantId + '\\\"]');\\n    if (winningTemplate) {\\n      var parentNode = winningTemplate.parentNode;\\n      var newParent = parentNode.cloneNode(false);\\n      newParent.appendChild(winningTemplate.content.firstChild);\\n      parentNode.parentNode.replaceChild(newParent, parentNode);\\n    }\\n  } else if (variants.length > 0) {\\n    removeVariants();\\n  }\\n})()\").replace(/\\s+/g,\" \")},VariantsProvider=function(e){var t=e.initialContent,n=e.children;if(_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser&&!_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.builder.canTrack)return n([t]);if(!Boolean(Object.keys((null==t?void 0:t.variations)||{}).length))return n([t]);var i=Object.keys(t.variations).map((function(e){return __assign(__assign({id:e},t.variations[e]),{data:getData(t.variations[e])})})),r=__spreadArray(__spreadArray([],i,!0),[t],!1);if(_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isServer){var o=JSON.stringify(Object.keys(t.variations||{}).map((function(e){return{id:e,testRatio:t.variations[e].testRatio}})));return react__WEBPACK_IMPORTED_MODULE_2__.createElement(react__WEBPACK_IMPORTED_MODULE_2__.Fragment,null,n(r,(function(){return react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"script\",{id:\"variants-script-\".concat(t.id),dangerouslySetInnerHTML:{__html:variantsScript(o,t.id)}})})))}var a=\"builder.tests.\".concat(t.id),s=_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.builder.getCookie(a);if(!s&&_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser)for(var l=0,u=Math.random(),d=0;d<i.length;d++){var c=i[d];if(u<(l+=c.testRatio)){_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.builder.setCookie(a,c.id),s=c.id;break}}return s||(s=t.id,_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.builder.setCookie(a,s)),n([r.find((function(e){return e.id===s}))])},BuilderContent=function(_super){function BuilderContent(){var _this=null!==_super&&_super.apply(this,arguments)||this;return _this.ref=null,_this.state={loading:!_this.props.content,data:getContentWithInfo(_this.props.content),updates:1},_this.onWindowMessage=function(event){var _a,_b,isTrusted=_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isTrustedHostForEvent(event);if(isTrusted){var message=event.data;if(message)switch(message.type){case\"builder.patchUpdates\":if(null===(_a=_this.props.options)||void 0===_a?void 0:_a.noEditorUpdates)return;var data=message.data;if(!data||!data.data)break;var patches=data.data[null===(_b=_this.state.data)||void 0===_b?void 0:_b.id];if(!patches||!patches.length)return;location.href.includes(\"builder.debug=true\")&&eval(\"debugger\");for(var newData=_this.state.data,_i=0,patches_1=patches;_i<patches_1.length;_i++){var patch=patches_1[_i];newData=applyPatchWithMinimalMutationChain(newData,patch,!1)}_this.setState({updates:_this.state.updates+1,data:newData}),_this.props.contentLoaded&&_this.props.contentLoaded(newData.data,newData)}}},_this.subscriptions=new _builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Subscription,_this.firstLoad=!0,_this.clicked=!1,_this.trackedImpression=!1,_this.intersectionObserver=null,_this.onClick=function(e){var t=e.nativeEvent,n=_this.data;n&&(_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.builder.autoTrack&&_this.builder.trackInteraction(n.id,_this.renderedVariantId,_this.clicked,t,{content:n}),_this.clicked||(_this.clicked=!0))},_this}return __extends(BuilderContent,_super),Object.defineProperty(BuilderContent.prototype,\"builder\",{get:function(){return this.props.builder||_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.builder},enumerable:!1,configurable:!0}),Object.defineProperty(BuilderContent.prototype,\"name\",{get:function(){var e=this.props;return\"model\"in e?e.model:e.modelName},enumerable:!1,configurable:!0}),Object.defineProperty(BuilderContent.prototype,\"renderedVariantId\",{get:function(){var e,t,n=this.props.isStatic?this.builder.getCookie(\"builder.tests.\".concat(null===(e=this.data)||void 0===e?void 0:e.id)):null===(t=this.data)||void 0===t?void 0:t.variationId;if(null!==n)return n},enumerable:!1,configurable:!0}),Object.defineProperty(BuilderContent.prototype,\"options\",{get:function(){var e,t,n=__assign({},this.props.options||{});return n.key||!(null===(e=this.props.content)||void 0===e?void 0:e.id)||_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing||_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isPreviewing||(n.key=this.props.content.id),!this.props.content||(null===(t=n.initialContent)||void 0===t?void 0:t.length)||!this.props.inline&&_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isPreviewing||(n.initialContent=[this.props.content]),n},enumerable:!1,configurable:!0}),Object.defineProperty(BuilderContent.prototype,\"data\",{get:function(){var e=(this.props.inline||!_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser||this.firstLoad)&&this.options.initialContent&&this.options.initialContent[0]||this.state.data;return getContentWithInfo(e)},enumerable:!1,configurable:!0}),BuilderContent.prototype.componentDidMount=function(){var e,t;if(!this.props.inline||_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing||_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isPreviewing)this.subscribeToContent();else if(this.props.inline&&(null===(t=null===(e=this.options)||void 0===e?void 0:e.initialContent)||void 0===t?void 0:t.length)){var n=this.options.initialContent[0];(null==n?void 0:n.id)&&this.builder.trackImpression(n.id,this.renderedVariantId,void 0,{content:n})}_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing&&addEventListener(\"message\",this.onWindowMessage)},BuilderContent.prototype.subscribeToContent=function(){var e=this;\"_inline\"!==this.name&&this.subscriptions.add(this.builder.queueGetContent(this.name,this.options).subscribe((function(t){var n=t&&t[0];e.setState({data:n,loading:!1});var i=(e.builder.editingModel||e.builder.previewingModel)===e.name;if(!e.props.inline&&e.props.content&&e.firstLoad&&i&&(e.firstLoad=!1,e.subscriptions.unsubscribe(),e.subscribeToContent()),n&&e.firstLoad&&(e.firstLoad=!1,_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.builder.autoTrack&&!_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing)){var r=!1;if(\"function\"==typeof IntersectionObserver&&e.ref)try{(e.intersectionObserver=new IntersectionObserver((function(t,i){t.forEach((function(t){t.intersectionRatio>0&&!e.trackedImpression&&(e.builder.trackImpression(n.id,e.renderedVariantId,void 0,{content:e.data}),e.data,e.trackedImpression=!0,e.ref&&i.unobserve(e.ref))}))}))).observe(e.ref),r=!0}catch(e){console.warn(\"Could not bind intersection observer\")}r||(e.trackedImpression=!0,e.builder.trackImpression(n.id,e.renderedVariantId,void 0,{content:n}))}e.props.contentLoaded&&e.props.contentLoaded(n&&n.data,n)}),(function(t){e.props.contentError&&(e.props.contentError(t),e.setState({loading:!1}))})))},BuilderContent.prototype.componentWillUnmount=function(){_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing&&removeEventListener(\"message\",this.onWindowMessage),this.subscriptions.unsubscribe(),this.intersectionObserver&&this.ref&&this.intersectionObserver.unobserve(this.ref)},BuilderContent.prototype.render=function(){var e=this;if(this.props.dataOnly)return null;var t=this.state.loading,n=this.data,i=this.props.dataOnly?NoWrap:\"div\";return react__WEBPACK_IMPORTED_MODULE_2___default().createElement(VariantsProvider,{initialContent:n},(function(r,o){return react__WEBPACK_IMPORTED_MODULE_2___default().createElement((react__WEBPACK_IMPORTED_MODULE_2___default().Fragment),null,r.map((function(a,s){var l=s===r.length-1?(react__WEBPACK_IMPORTED_MODULE_2___default().Fragment):\"template\";return react__WEBPACK_IMPORTED_MODULE_2___default().createElement((react__WEBPACK_IMPORTED_MODULE_2___default().Fragment),{key:String((null==a?void 0:a.id)+s)},\"template\"!==l&&(null==o?void 0:o()),react__WEBPACK_IMPORTED_MODULE_2___default().createElement(l,__assign({key:String((null==a?void 0:a.id)+s)},\"template\"===l&&{\"data-template-variant-id\":null==a?void 0:a.id}),react__WEBPACK_IMPORTED_MODULE_2___default().createElement(i,__assign({},0===s&&!e.props.dataOnly&&{ref:function(t){return e.ref=t}},{className:\"builder-content\",onClick:e.onClick,\"builder-content-id\":null==a?void 0:a.id,\"builder-model\":e.name}),e.props.children(null==a?void 0:a.data,!e.props.inline&&t,n))))})))}))},BuilderContent}((react__WEBPACK_IMPORTED_MODULE_2___default().Component)),getContentWithInfo=function(e){var t;if(e){var n=_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.builder.getCookie(\"builder.tests.\".concat(e.id)),i=n===e.id?e:null===(t=e.variations)||void 0===t?void 0:t[n],r=(null==i?void 0:i.name)||((null==i?void 0:i.id)===e.id?\"Default variation\":\"\");return __assign(__assign({},e),{variationId:n,testVariationId:n,testVariationName:r})}return null};function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,\"default\")?e.default:e}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var onChange_1=createCommonjsModule((function(e,t){Object.defineProperty(t,\"__esModule\",{value:!0});var n=Symbol(\"target\"),i=Symbol(\"unsubscribe\"),r=function(e,t){return t&&t.toString&&(e&&(e+=\".\"),e+=t.toString()),e},o=function(e){return Array.isArray(e)?e.slice():Object.assign({},e)},a=function(e,t,a){if(\"undefined\"==typeof Proxy)return e;void 0===a&&(a={});var s,l,u=Symbol(\"ProxyTarget\"),d=!1,c=!1,p=!1,f=a.equals||Object.is,m=new WeakMap,h=new WeakMap,v=new WeakMap,g=function(e,n,i,a){if(!p)if(d){if(d&&l&&void 0!==i&&void 0!==a&&\"length\"!==n){var u=l;e!==s&&function(e,t){for(var n;e;)-1===(n=e.indexOf(\".\"))&&(n=e.length),t(e.slice(0,n)),e=e.slice(n+1)}(e=e.replace(s,\"\").slice(1),(function(e){u[e]=o(u[e]),u=u[e]})),u[n]=i}c=!0}else t(r(e,n),a,i)},b=function(e,t){var n=m?m.get(e):void 0;n&&n.delete(t)},y=function(e,t){if(p)return e;h.set(e,t);var n=v.get(e);return void 0===n&&(n=new Proxy(e,S),v.set(e,n)),n},_=function(e){return p||!0===a.ignoreSymbols&&\"symbol\"==typeof e},S={get:function(e,t,o){if(t===u||t===n)return e;if(t===i&&\"\"===h.get(e))return function(e){return p=!0,m=null,h=null,v=null,e}(e);var s=Reflect.get(e,t,o);if(function(e){return null===e||\"object\"!=typeof e&&\"function\"!=typeof e}(s)||function(e){return e instanceof RegExp||e instanceof Number}(s)||\"constructor\"===t||!0===a.isShallow)return s;var l=function(e,t){var n=m?m.get(e):void 0;if(n)return n;n=new Map,m.set(e,n);var i=n.get(t);return i||(i=Reflect.getOwnPropertyDescriptor(e,t),n.set(t,i)),i}(e,t);if(l&&!l.configurable){if(l.set&&!l.get)return;if(!1===l.writable)return s}return y(s,r(h.get(e),t))},set:function(e,t,n,i){n&&void 0!==n[u]&&(n=n[u]);var r=_(t),o=r?null:Reflect.get(e,t,i),a=Reflect.set(e[u]||e,t,n);return r||f(o,n)||g(h.get(e),t,o,n),a},defineProperty:function(e,t,n){var i=Reflect.defineProperty(e,t,n);return _(t)||(b(e,t),g(h.get(e),t,void 0,n.value)),i},deleteProperty:function(e,t){if(!Reflect.has(e,t))return!0;var n=_(t),i=n?null:Reflect.get(e,t),r=Reflect.deleteProperty(e,t);return n||(b(e,t),g(h.get(e),t,i)),r},apply:function(e,t,n){var i=t instanceof Date;if(i&&(t=t[u]),!d){d=!0,i&&(l=t.valueOf()),(Array.isArray(t)||\"[object Object]\"===toString.call(t))&&(l=o(t[u])),s=(s=h.get(e)).slice(0,Math.max(s.lastIndexOf(\".\"),0));var r=Reflect.apply(e,t,n);return d=!1,(c||i&&!f(l,t.valueOf()))&&(g(s,\"\",l,t[u]||t),l=null,c=!1),r}return Reflect.apply(e,t,n)}},x=y(e,\"\");return t=t.bind(x),x};a.target=function(e){return e[n]||e},a.unsubscribe=function(e){return e[i]||e},e.exports=a,t.default=a})),onChange=unwrapExports(onChange_1),nextTick=_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.nextTick;function debounceNextTick(e,t,n){return void 0===t&&\"function\"==typeof e?debounceNextTickImpl(e):{configurable:!0,enumerable:n.enumerable,get:function(){return Object.defineProperty(this,t,{configurable:!0,enumerable:n.enumerable,value:debounceNextTickImpl(n.value)}),this[t]}}}function debounceNextTickImpl(e){var t=null,n=null;return function(){var e=t;if(t=[].slice.call(arguments),n=this,null!==e)return;nextTick(i)};function i(){e.apply(n,t),t=null,n=null}}function throttle(e,t,n){var i,r,o;void 0===n&&(n={});var a=null,s=0,l=function(){s=!1===n.leading?0:Date.now(),a=null,o=e.apply(i,r),a||(i=r=null)};return function(){var u=Date.now();s||!1!==n.leading||(s=u);var d=t-(u-s);return i=this,r=arguments,d<=0||d>t?(a&&(clearTimeout(a),a=null),s=u,o=e.apply(i,r),a||(i=r=null)):a||!1===n.trailing||(a=setTimeout(l,d)),o}}var BuilderMetaContext=react__WEBPACK_IMPORTED_MODULE_2___default().createContext({emailMode:!1,ampMode:!1,isServer:!1}),tryEval=function(e,t,n){void 0===t&&(t={});var i=e;if(\"string\"==typeof i&&i.trim()){var r=!(i.includes(\";\")||i.includes(\" return \")),o=function(){};try{_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser&&(o=new Function(\"state\",\"var rootState = state;\\n        if (typeof Proxy !== 'undefined') {\\n          rootState = new Proxy(rootState, {\\n            set: function () {\\n              return false;\\n            },\\n            get: function (target, key) {\\n              if (key === 'state') {\\n                return state;\\n              }\\n              return target[key]\\n            }\\n          });\\n        }\\n        with (rootState) {\\n          \".concat(r?\"return (\".concat(e,\");\"):e,\";\\n        }\")))}catch(e){_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser&&console.warn(\"Could not compile javascript\",e)}try{if(_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser||shouldForceBrowserRuntimeInNode())return o(t||{});var a=safeDynamicRequire(\"isolated-vm\"),s=getIsolateContext(),l=makeFn(e,r,[\"state\"]),u=s.evalClosureSync(l,[new a.Reference(t||{})]);try{return JSON.parse(u)}catch(e){return u}}catch(t){n&&n.push(t),_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser?console.warn(\"Builder custom code error:\",t.message,\"in\",e,t.stack):isDebug()&&console.debug(\"Builder custom code error:\",t.message,\"in\",e,t.stack)}}};function toError(e){return e instanceof Error?e:new Error(String(e))}function getBuilderPixel(e){return{id:\"builder-pixel-\"+Math.random().toString(36).split(\".\")[1],\"@type\":\"@builder.io/sdk:Element\",tagName:\"img\",properties:{role:\"presentation\",\"aria-hidden\":\"true\",src:\"https://cdn.builder.io/api/v1/pixel?apiKey=\".concat(e)},responsiveStyles:{large:{height:\"0\",width:\"0\",display:\"inline-block\",opacity:\"0\",overflow:\"hidden\",pointerEvents:\"none\"}}}}function pick(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i={};return t.forEach((function(t){i[t]=e[t]})),i}function omit(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var i=__assign({},e);return t.forEach((function(e){delete i[e]})),i}var instancesMap=new Map,wrapComponent=function(e){return function(t){var n,i=t.builderTag||\"div\",r=[\"children\"].concat((null===(n=e.inputs)||void 0===n?void 0:n.map((function(e){return e.name})))||[]),o=omit.apply(void 0,__spreadArray(__spreadArray([t],r,!1),[\"attributes\"],!1)),a=t;return e.noWrap?react__WEBPACK_IMPORTED_MODULE_2___default().createElement(e.class,__assign({attributes:o},a)):react__WEBPACK_IMPORTED_MODULE_2___default().createElement(i,__assign({},o),react__WEBPACK_IMPORTED_MODULE_2___default().createElement(e.class,__assign({},a)))}},size$1=function(e){return Object.keys(e).length};function debounce(e,t,n){var i;return void 0===n&&(n=!1),function(){var r=this,o=arguments;clearTimeout(i),i=setTimeout((function(){i=null,n||e.apply(r,o)}),t),n&&!i&&e.apply(r,o)}}var fontsLoaded=new Set,fetch$1;globalThis.fetch&&(fetch$1=globalThis.fetch),null!=fetch$1||(fetch$1=__webpack_require__(/*! node-fetch */ \"(ssr)/./node_modules/node-fetch/lib/index.mjs\"));var sizeMap={desktop:\"large\",tablet:\"medium\",mobile:\"small\"},fetchCache={};function searchToObject$1(e){var t=(e.search||\"\").substring(1).split(\"&\"),n={};for(var i in t)if(t[i]&&\"string\"==typeof t[i]){var r=t[i].split(\"=\");n[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return n}var BuilderComponent=function(e){function t(t){var n,i,r=this;(r=e.call(this,t)||this).subscriptions=new _builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Subscription,r.onStateChange=new _builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.BehaviorSubject(null),r.asServer=_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isServer,r.contentRef=null,r.styleRef=null,r.rootState=_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isServer?{}:onChange({},(function(){return r.updateState()})),r.lastJsCode=\"\",r.lastHttpRequests={},r.httpSubscriptionPerKey={},r.firstLoad=!0,r.ref=null,r.messageListener=function(e){var t;if(_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isTrustedHostForEvent(e)){var n=e.data;switch(n.type){case\"builder.configureSdk\":var i=n.data;if(!i.contentId||i.contentId!==(null===(t=r.useContent)||void 0===t?void 0:t.id))return;r.sizes=getSizesForBreakpoints(i.breakpoints||{}),r.setState({state:Object.assign(r.rootState,{deviceSize:r.deviceSizeState,device:r.device}),updates:(r.state&&r.state.updates||0)+1,breakpoints:i.breakpoints});break;case\"builder.updateSpacer\":var o=n.data;r.rootState._spacer,r.updateState((function(e){e._spacer=o}));break;case\"builder.resetState\":var a=n.data,s=a.state;if(a.model===r.name){for(var l in r.rootState)\"function\"!=typeof r.rootState[l]&&delete r.rootState[l];Object.assign(r.rootState,s),r.setState(__assign(__assign({},r.state),{state:r.rootState,updates:(r.state&&r.state.updates||0)+1}))}break;case\"builder.resetSymbolState\":var u=n.data.state,d=(s=u.state,u.model,u.id);if(r.props.builderBlock&&r.props.builderBlock===d){for(var l in r.rootState)delete r.rootState[l];Object.assign(r.rootState,s),r.setState(__assign(__assign({},r.state),{state:r.rootState,updates:(r.state&&r.state.updates||0)+1}))}}}},r.resizeFn=function(){var e=r.deviceSizeState;e!==r.state.state.deviceSize&&r.setState(__assign(__assign({},r.state),{updates:(r.state&&r.state.updates||0)+1,state:Object.assign(r.rootState,__assign(__assign({},r.state.state),{deviceSize:e}))}))},r.resizeListener=_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing?throttle(r.resizeFn,200):debounce(r.resizeFn,400),r.mounted=!1,r.updateState=function(e){var t=r.rootState;e&&e(t),r.mounted?r.setState({update:r.updateState,state:t,updates:(r.state&&r.state.updates||0)+1}):r.state=__assign(__assign({},r.state),{update:r.updateState,state:t,updates:(r.state&&r.state.updates||0)+1}),r.notifyStateChange()},r.onContentLoaded=function(e,t){if(\"page\"===r.name&&_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser&&e){var n=e.title,i=e.pageTitle,o=e.description,a=e.pageDescription;if((n||i)&&(document.title=n||i),o||a){var s=document.querySelector('meta[name=\"description\"]');s||((s=document.createElement(\"meta\")).setAttribute(\"name\",\"description\"),document.head.appendChild(s)),s.setAttribute(\"content\",o||a)}}if(_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing&&r.notifyStateChange(),r.props.contentLoaded&&r.props.contentLoaded(e,t),e&&e.inputs&&Array.isArray(e.inputs)&&e.inputs.length&&(e.state||(e.state={}),e.inputs.forEach((function(t){t&&t.name&&void 0!==t.defaultValue&&void 0===e.state[t.name]&&(e.state[t.name]=t.defaultValue)}))),e&&e.state){var l=__assign(__assign({},r.state),{updates:(r.state&&r.state.updates||0)+1,state:Object.assign(r.rootState,__assign(__assign(__assign(__assign(__assign({},r.state.state),{location:r.locationState,device:r.device}),e.state),r.externalState),{deviceSize:r.deviceSizeState}))});r.mounted?r.setState(l):r.state=l}if(e&&e.jsCode&&!r.options.codegen){var u=!1;if(_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing&&(r.lastJsCode===e.jsCode?u=!0:r.lastJsCode=e.jsCode),!u){var d=r.state.state;try{new Function(\"data\",\"ref\",\"state\",\"update\",\"element\",\"Builder\",\"builder\",\"context\",e.jsCode)(e,r,d,r.state.update,r.ref,_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder,_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.builder,r.state.context)}catch(t){var c=toError(t);_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser?console.warn(\"Builder custom code error:\",c.message,\"in\",e.jsCode,c.stack):isDebug()&&console.debug(\"Builder custom code error:\",c.message,\"in\",e.jsCode,c.stack)}}}if(e&&e.httpRequests&&!r.props.noAsync&&!(u=!1)){var p=function(t){var n=e.httpRequests[t];if(n&&(!r.data[t]||_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing))if(_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser){var i=r.evalExpression(n);if(_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing&&r.lastHttpRequests[t]===i)return\"continue\";r.lastHttpRequests[t]=i;var o=n.match(/builder\\.io\\/api\\/v2\\/([^\\/\\?]+)/i);o&&o[1],r.handleRequest(t,i);var a=r.httpSubscriptionPerKey[t];a&&a.unsubscribe();var s=r.httpSubscriptionPerKey[t]=r.onStateChange.subscribe((function(){var e=r.evalExpression(n);e!==i&&(r.handleRequest(t,e),r.lastHttpRequests[t]=e)}));r.subscriptions.add(s)}else r.handleRequest(t,r.evalExpression(n))};for(var f in e.httpRequests)p(f)}};var o=r.inlinedContent;o&&o.content&&(o=o.content),r.sizes=getSizesForBreakpoints((null===(n=null==o?void 0:o.meta)||void 0===n?void 0:n.breakpoints)||{});var a=null===(i=r.inlinedContent)||void 0===i?void 0:i.data;a&&Array.isArray(a.inputs)&&a.inputs.length>0&&(a.state||(a.state={}),a.inputs.forEach((function(e){e&&e.name&&void 0!==e.defaultValue&&void 0===a.state[e.name]&&(a.state[e.name]=e.defaultValue)}))),r.state={context:__assign(__assign({},t.context),{apiKey:r.props.apiKey||_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.builder.apiKey}),state:Object.assign(r.rootState,__assign(__assign(__assign(__assign({},r.inlinedContent&&r.inlinedContent.data&&r.inlinedContent.data.state),{isBrowser:_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser,isServer:!_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser,_hydrate:t.hydrate,location:r.locationState,deviceSize:r.deviceSizeState,device:r.device}),r.getHtmlData()),t.data)),updates:0,key:0,update:r.updateState};var s=r.props.apiKey;if(s&&s!==r.builder.apiKey&&!instancesMap.has(s)){var l=new _builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder(s,void 0,void 0,!0);instancesMap.set(s,l)}if(r.inlinedContent){var u=r.inlinedContent.content||r.inlinedContent;r.onContentLoaded(null==u?void 0:u.data,getContentWithInfo(u))}return r.registerCustomComponents(),r}return __extends(t,e),Object.defineProperty(t.prototype,\"options\",{get:function(){return __assign(__assign({},t.defaults),this.props)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"name\",{get:function(){return this.props.model||this.props.modelName||this.props.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"element\",{get:function(){return this.ref},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"inlinedContent\",{get:function(){if(!this.isPreviewing||this.props.inlineContent)return this.props.content},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"builder\",{get:function(){return this.props.apiKey&&instancesMap.get(this.props.apiKey)||this.props.builder||_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.builder},enumerable:!1,configurable:!0}),t.prototype.getHtmlData=function(){var e=this.inlinedContent&&this.inlinedContent.id||this.props.entry,t=e&&_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser&&document.querySelector('script[data-builder-json=\"'.concat(e,'\"],script[data-builder-state=\"').concat(e,'\"]'));if(t)try{return JSON.parse(t.innerText)}catch(e){console.warn(\"Could not parse Builder.io HTML data transfer\",e,t.innerText)}return{}},Object.defineProperty(t.prototype,\"device\",{get:function(){return this.builder.getUserAttributes().device||\"desktop\"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"locationState\",{get:function(){return __assign(__assign({},pick(this.location,\"pathname\",\"hostname\",\"search\",\"host\")),{path:this.location.pathname&&this.location.pathname.split(\"/\").slice(1)||\"\",query:searchToObject$1(this.location)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"deviceSizeState\",{get:function(){return _builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser?this.sizes.getSizeForWidth(window.innerWidth):sizeMap[this.device]||\"large\"},enumerable:!1,configurable:!0}),t.renderInto=function(e,n,i,r){if(void 0===n&&(n={}),void 0===i&&(i=!0),void 0===r&&(r=!1),console.debug(\"BuilderPage.renderInto\",e,n,i,this),e){var o=null;if(\"string\"==typeof e?o=document.querySelector(e):e instanceof Element&&(o=e),o){var a=o.classList.contains(\"builder-hydrated\");if(!a||r){o.classList.add(\"builder-hydrated\");var s=i&&o.innerHTML.includes(\"builder-block\");if(!o.classList.contains(\"builder-component\")){var l=o.querySelector(\".builder-api-styles\")||(o.previousElementSibling&&o.previousElementSibling.matches(\".builder-api-styles\")?o.previousElementSibling:null),u=\"\";if(l)l.innerHTML.replace(/\\/\\*start:([^\\*]+?)\\*\\/([\\s\\S]*?)\\/\\*end:([^\\*]+?)\\*\\//g,(function(e,t,n){var i=null;try{i=document.querySelector('[data-emotion-css=\"'.concat(t,'\"]'))}catch(e){console.warn(e)}return i?i.innerHTML=n:_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing||(u+=e),e})),_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.nextTick((function(){l.innerHTML=u}));var d=o.querySelector(\".builder-component\");d?o=d:s=!1}location.search.includes(\"builder.debug=true\")&&console.debug(\"hydrate\",s,o);var c=o;if(!a){var p=document.createElement(\"div\");o.insertAdjacentElement(\"beforebegin\",p),p.appendChild(o),c=p}if((_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing||_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser&&location.search.includes(\"builder.preview=\"))&&(s=!1),s&&o){var f=react_dom__WEBPACK_IMPORTED_MODULE_3___default().render(react__WEBPACK_IMPORTED_MODULE_2___default().createElement(t,__assign({},n)),c,c.builderRootRef);return c.builderRootRef=f,f}var m=react_dom__WEBPACK_IMPORTED_MODULE_3___default().render(react__WEBPACK_IMPORTED_MODULE_2___default().createElement(t,__assign({},n)),c,c.builderRootRef);return c.builderRootRef=m,m}console.debug(\"Tried to hydrate multiple times\")}}},t.prototype.registerCustomComponents=function(){if(this.props.customComponents)for(var e=0,t=this.props.customComponents;e<t.length;e++){var n=t[e];if(n){var i=n.component,r=__rest(n,[\"component\"]);_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.registerComponent(i,r)}}},t.prototype.componentDidMount=function(){var e,t=this;this.mounted=!0,this.asServer&&(this.asServer=!1,this.updateState((function(e){e.isBrowser=!0,e.isServer=!1}))),_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isIframe&&(null===(e=window.parent)||void 0===e||e.postMessage({type:\"builder.sdkInjected\",data:{modelName:this.name}},\"*\")),_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser&&(window.addEventListener(\"resize\",this.resizeListener),_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing&&window.addEventListener(\"message\",this.messageListener),(_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing||_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isPreviewing)&&_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.nextTick((function(){t.firstLoad=!1,t.reload()})),setTimeout((function(){window.dispatchEvent(new CustomEvent(\"builder:component:load\",{detail:{ref:t}}))})))},Object.defineProperty(t.prototype,\"isPreviewing\",{get:function(){return(_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isServer||_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser&&_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isPreviewing&&!this.firstLoad)&&(_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.builder.previewingModel===this.name||\"BUILDER_STUDIO\"===_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.builder.previewingModel)},enumerable:!1,configurable:!0}),t.prototype.notifyStateChange=function(){if(!_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isServer&&this&&this.state){var e=this.state.state;this.props.onStateChange&&this.props.onStateChange(e),_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser&&window.dispatchEvent(new CustomEvent(\"builder:component:stateChange\",{detail:{state:e,ref:this}})),this.onStateChange.next(e)}},t.prototype.processStateFromApi=function(e){return e},Object.defineProperty(t.prototype,\"location\",{get:function(){return this.props.location||(_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser?location:{})},enumerable:!1,configurable:!0}),t.prototype.getCssFromFont=function(e,t){var n=e.family+(e.kind&&!e.kind.includes(\"#\")?\", \"+e.kind:\"\"),i=n.split(\",\")[0],r=e.fileUrl?e.fileUrl:e.files&&e.files.regular,o=\"\";if(r&&n&&i&&(o+='\\n@font-face {\\n  font-family: \"'.concat(n,'\";\\n  src: local(\"').concat(i,\"\\\"), url('\").concat(r,\"') format('woff2');\\n  font-display: fallback;\\n  font-weight: 400;\\n}\\n        \").trim()),e.files)for(var a in e.files){if(String(Number(a))===a){var s=e.files[a];s&&s!==r&&(o+='\\n@font-face {\\n  font-family: \"'.concat(n,\"\\\";\\n  src: url('\").concat(s,\"') format('woff2');\\n  font-display: fallback;\\n  font-weight: \").concat(a,\";\\n}\\n          \").trim())}}return o},t.prototype.componentWillUnmount=function(){this.unsubscribe(),_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser&&(window.removeEventListener(\"resize\",this.resizeListener),window.removeEventListener(\"message\",this.messageListener))},t.prototype.getFontCss=function(e){var t=this;return this.builder.allowCustomFonts&&(null==e?void 0:e.customFonts)&&e.customFonts.length&&e.customFonts.map((function(n){return t.getCssFromFont(n,e)})).join(\" \")||\"\"},t.prototype.ensureFontsLoaded=function(e){if(this.builder.allowCustomFonts&&(null==e?void 0:e.customFonts)&&Array.isArray(e.customFonts))for(var t=0,n=e.customFonts;t<n.length;t++){var i=n[t],r=i.fileUrl?i.fileUrl:i.files&&i.files.regular;if(!fontsLoaded.has(r)){var o=this.getCssFromFont(i,e);if(fontsLoaded.add(r),!o)continue;var a=document.createElement(\"style\");a.className=\"builder-custom-font\",a.setAttribute(\"data-builder-custom-font\",r),a.innerHTML=o,document.head.appendChild(a)}}},t.prototype.getCss=function(e){var t,n=null===(t=this.useContent)||void 0===t?void 0:t.id,i=(null==e?void 0:e.cssCode)||\"\";return n&&(i=i.replace(/&/g,\".builder-component-\".concat(n))),i+this.getFontCss(e)},Object.defineProperty(t.prototype,\"data\",{get:function(){var e,t=__assign(__assign(__assign({},this.inlinedContent&&(null===(e=this.inlinedContent.data)||void 0===e?void 0:e.state)),this.externalState),this.state.state);return Object.assign(this.rootState,t),t},enumerable:!1,configurable:!0}),t.prototype.componentDidUpdate=function(e){var t=this;this.props.data&&e.data!==this.props.data&&this.state.update((function(e){Object.assign(e,t.externalState)})),this.props.customComponents&&this.props.customComponents!==e.customComponents&&this.registerCustomComponents(),_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing&&this.inlinedContent&&e.content!==this.inlinedContent&&this.onContentLoaded(this.inlinedContent.data,this.inlinedContent)},t.prototype.checkStyles=function(e){if(this.styleRef){var t=this.getCss(e);this.styleRef.innerHTML!==t&&(this.styleRef.innerHTML=t)}},t.prototype.reload=function(){this.setState({key:this.state.key+1})},Object.defineProperty(t.prototype,\"content\",{get:function(){var e=this.inlinedContent;return e&&e.content&&(e=__assign(__assign({},e),{data:e.content})),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"externalState\",{get:function(){return __assign(__assign({},this.props.data),this.props.locale?{locale:this.props.locale}:{})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"useContent\",{get:function(){return this.content||this.state.context.builderContent},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e,t=this,n=this.content,i=_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser&&this.externalState&&size$1(this.externalState)&&hash_sum__WEBPACK_IMPORTED_MODULE_4___default()(this.externalState),r=_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing?this.name:this.props.entry;r&&!_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing&&i&&i.length<300&&(r+=\":\"+i);var o=this.props.dataOnly?(react__WEBPACK_IMPORTED_MODULE_2___default().Fragment):\"div\",a=null===(e=this.useContent)||void 0===e?void 0:e.id;return react__WEBPACK_IMPORTED_MODULE_2___default().createElement(o,{onClick:function(e){!_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing||t.props.isChild||t.props.stopClickPropagationWhenEditing||e.stopPropagation()},className:\"builder-component \".concat(a?\"builder-component-\".concat(a):\"\"),\"data-name\":this.name,\"data-source\":\"Rendered by Builder.io\",key:this.state.key,ref:function(e){return t.ref=e}},react__WEBPACK_IMPORTED_MODULE_2___default().createElement(BuilderMetaContext.Consumer,null,(function(e){return react__WEBPACK_IMPORTED_MODULE_2___default().createElement(BuilderMetaContext.Provider,{value:\"boolean\"==typeof t.props.ampMode?__assign(__assign({},e),{ampMode:t.props.ampMode}):e},react__WEBPACK_IMPORTED_MODULE_2___default().createElement(BuilderAsyncRequestsContext.Consumer,null,(function(e){var i;return t._asyncRequests=e&&e.requests,t._errors=e&&e.errors,t._logs=e&&e.logs,react__WEBPACK_IMPORTED_MODULE_2___default().createElement(BuilderContent,{isStatic:t.props.isStatic||_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isStatic,key:(null===(i=t.inlinedContent)||void 0===i?void 0:i.id)||(\"content\"in t.props&&!t.isPreviewing?\"null-content-prop\":\"no-content-prop\"),builder:t.builder,ref:function(e){return t.contentRef=e},contentLoaded:function(e,n){return t.onContentLoaded(e,n)},options:__assign(__assign(__assign(__assign(__assign(__assign({key:r,entry:t.props.entry},n&&{initialContent:[n]}),!n&&\"content\"in t.props&&!t.isPreviewing&&{initialContent:[]}),t.props.url&&{url:t.props.url}),t.props.options),t.props.locale?{locale:t.props.locale}:{}),t.options.codegen&&{format:\"react\"}),inline:t.props.inlineContent||!t.isPreviewing&&\"content\"in t.props,contentError:t.props.contentError,modelName:t.name||\"page\"},(function(e,n,i){var r;if(t.props.dataOnly)return null;i&&i.id&&(t.state.breakpoints&&(i.meta=i.meta||{},i.meta.breakpoints=t.state.breakpoints),t.state.context.builderContent=i),_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser&&_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.nextTick((function(){t.checkStyles(e)}));var o=t.options.codegen;if(o&&!t.Component&&(null==e?void 0:e.blocksJs)){var a=Array.from(new Set(_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.components.map((function(e){return e.name})))),s=_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.components.slice().reverse(),l=a.map((function(e){return s.find((function(t){return t.class&&t.name===e}))})),u=a.map((function(e){return(e||\"\").replace(/[^\\w]+/gi,\"\")})),d=l.map((function(e){return wrapComponent(e)}));t.Component=(new(Function.bind.apply(Function,__spreadArray(__spreadArray([void 0,\"jsx\",\"_css\",\"Builder\",\"builder\",\"React\",\"useBuilderState\"],u,!1),[e.blocksJs],!1)))).apply(void 0,__spreadArray([_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.css,_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder,_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.builder,(react__WEBPACK_IMPORTED_MODULE_2___default()),function(e){var t=react__WEBPACK_IMPORTED_MODULE_2___default().useState(0)[1];return react__WEBPACK_IMPORTED_MODULE_2___default().useState((function(){return onChange(e,(function(){t((function(e){return e+1}))}))}))[0]}],d,!1))}var c=(null==e?void 0:e.blocks)||[],p=c.find((function(e){var t;return null===(t=e.id)||void 0===t?void 0:t.startsWith(\"builder-pixel\")}));return e&&!p&&c.length>0&&c.push(getBuilderPixel(_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.builder.apiKey)),e?react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\",__assign({\"data-builder-component\":t.name,\"data-builder-content-id\":i.id},t.isPreviewing?{\"data-builder-variation-id\":i.testVariationId||i.variationId||i.id}:{}),!o&&t.getCss(e)&&react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"style\",{ref:function(e){return t.styleRef=e},className:\"builder-custom-styles\",dangerouslySetInnerHTML:{__html:t.getCss(e)}}),react__WEBPACK_IMPORTED_MODULE_2___default().createElement(BuilderStoreContext.Provider,{value:__assign(__assign({},t.state),{rootState:t.rootState,state:t.data,content:i,renderLink:t.props.renderLink})},o&&t.Component?react__WEBPACK_IMPORTED_MODULE_2___default().createElement(t.Component,{data:t.data,context:t.state.context}):react__WEBPACK_IMPORTED_MODULE_2___default().createElement(BuilderBlocks,{key:String(!!(null===(r=null==e?void 0:e.blocks)||void 0===r?void 0:r.length)),emailMode:t.props.emailMode,fieldName:\"blocks\",blocks:c}))):n?react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\",{\"data-builder-component\":t.name,className:\"builder-loading\"},t.props.children):react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\",{\"data-builder-component\":t.name,className:\"builder-no-content\"})}))})))})))},t.prototype.evalExpression=function(e){var t=this,n=this.data;return String(e).replace(/{{([^}]+)}}/g,(function(e,i){return tryEval(i,n,t._errors)}))},t.prototype.handleRequest=function(e,t){return __awaiter(this,void 0,void 0,(function(){var n,i,r,o,a=this;return __generator(this,(function(s){return _builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isIframe&&fetchCache[t]?(this.updateState((function(n){n[e]=fetchCache[t]})),[2,fetchCache[t]]):(n=function(){return __awaiter(a,void 0,void 0,(function(){var n,i,r,o;return __generator(this,(function(a){switch(a.label){case 0:n=Date.now(),_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser||console.time(\"Fetch \"+t),a.label=1;case 1:return a.trys.push([1,4,5,6]),[4,fetch$1(t)];case 2:return[4,a.sent().json()];case 3:return i=a.sent(),[3,6];case 4:return r=a.sent(),o=toError(r),this._errors&&this._errors.push(o),this._logs&&this._logs.push(\"Fetch to \".concat(t,\" errored in \").concat(Date.now()-n,\"ms\")),[2];case 5:return _builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser||(console.timeEnd(\"Fetch \"+t),this._logs&&this._logs.push(\"Fetched \".concat(t,\" in \").concat(Date.now()-n,\"ms\"))),[7];case 6:return i&&(_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isIframe&&(fetchCache[t]=i),this.updateState((function(t){t[e]=i}))),[2,i]}}))}))},(i=this._asyncRequests&&this._asyncRequests.find((function(e){return isRequestInfo(e)&&e.url===t})))?((r=i.promise).then((function(t){t&&a.updateState((function(n){n[e]=t}))})),[2,r]):(o=n(),_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.nextTick((function(){a._asyncRequests&&a._asyncRequests.push(o)})),[2,o]))}))}))},t.prototype.unsubscribe=function(){this.subscriptions&&(this.subscriptions.unsubscribe(),this.subscriptions=new _builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Subscription)},t.prototype.handleBuilderRequest=function(e,t){var n=this,i=tryEval(t,this.data,this._errors);this.subscriptions&&this.unsubscribe(),i&&this.subscriptions.add(this.builder.queueGetContent(i.model,i).subscribe((function(t){t&&n.updateState((function(n){n[e]=t}))})))},t.defaults={codegen:Boolean(_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser&&location.href.includes(\"builder.codegen=true\"))},__decorate([debounceNextTick,__metadata(\"design:type\",Function),__metadata(\"design:paramtypes\",[]),__metadata(\"design:returntype\",void 0)],t.prototype,\"notifyStateChange\",null),t}((react__WEBPACK_IMPORTED_MODULE_2___default().Component));function BuilderBlock(e){return e.type=\"react\",_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.Component(e)}function updateMetadata(e,t){var n=_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.components.find((function(t){return\"string\"==typeof e?t.name===e:t.class===t}))||null,i=t(n);n&&i?_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.registerComponent(i.class||n.class,i):n&&!i||!n&&i&&_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.registerComponent(i.class,i)}function withBuilder(e,t){return BuilderBlock(t)(e),e}var isBuilderElement=function(e){return Boolean(\"object\"==typeof e&&e&&\"@builder.io/sdk:Element\"===(null==e?void 0:e[\"@type\"]))},withChildren=function(e){var t=react__WEBPACK_IMPORTED_MODULE_2___default().forwardRef((function(t,n){var i,r,o=__assign({},t),a=t.children||t.builderBlock&&t.builderBlock.children&&t.builderBlock.children.map((function(e){return react__WEBPACK_IMPORTED_MODULE_2___default().createElement(BuilderBlock$1,{key:e.id,block:e})})),s=null===(r=null===(i=t.builderBlock)||void 0===i?void 0:i.component)||void 0===r?void 0:r.options;return s&&Object.keys(s).forEach((function(e){var t=s[e];Array.isArray(t)&&t.every(isBuilderElement)?o[e]=t.map((function(e){return react__WEBPACK_IMPORTED_MODULE_2___default().createElement(BuilderBlock$1,{key:e.id,block:e})})):isBuilderElement(t)&&(o[e]=react__WEBPACK_IMPORTED_MODULE_2___default().createElement(BuilderBlock$1,{block:t}))})),react__WEBPACK_IMPORTED_MODULE_2___default().createElement(e,__assign({},o,{ref:n}),a)}));return t.builderOptions={canHaveChildren:!0},t},noWrap=function(e){var t=react__WEBPACK_IMPORTED_MODULE_2___default().forwardRef((function(t,n){var i=__assign(__assign({},t),t.attributes);return react__WEBPACK_IMPORTED_MODULE_2___default().createElement(e,__assign({},i,{ref:n}))}));return t.builderOptions={noWrap:!0},t},iconUrl=\"https://firebasestorage.googleapis.com/v0/b/builder-3b0a2.appspot.com/o/images%2Fbaseline-text_fields-24px%20(1).svg?alt=media&token=12177b73-0ee3-42ca-98c6-0dd003de1929\",TextComponent=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.textRef=null,t}return __extends(t,e),t.prototype.componentDidMount=function(){this.textRef&&!/{{([^}]+)}}/.test(this.props.text)&&(this.textRef.innerHTML=this.props.text)},t.prototype.evalExpression=function(e,t){return this.allowTextEdit?String(e):String(e).replace(/{{([^}]+)}}/g,(function(e,n){return tryEval(n,t)}))},Object.defineProperty(t.prototype,\"allowTextEdit\",{get:function(){return _builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser&&_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing&&location.search.includes(\"builder.allowTextEdit=true\")&&!(this.props.builderBlock&&this.props.builderBlock.bindings&&(this.props.builderBlock.bindings[\"component.options.text\"]||this.props.builderBlock.bindings[\"options.text\"]||this.props.builderBlock.bindings.text))},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e=this,t={outline:\"none\",\"& p:first-of-type, & .builder-paragraph:first-of-type\":{margin:0},\"& > p, & .builder-paragraph\":{color:\"inherit\",lineHeight:\"inherit\",letterSpacing:\"inherit\",fontWeight:\"inherit\",fontSize:\"inherit\",textAlign:\"inherit\",fontFamily:\"inherit\"}};return (0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(BuilderStoreContext.Consumer,null,(function(n){var i;return(null===(i=n.content.meta)||void 0===i?void 0:i.rtlMode)&&(t.direction=\"rtl\"),(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)((react__WEBPACK_IMPORTED_MODULE_2___default().Fragment),null,(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"span\",__assign({ref:function(t){e.textRef=t},css:t,className:\"builder-text\"},{dangerouslySetInnerHTML:{__html:e.evalExpression(e.props.text||e.props.content||\"\",n.state)}})))}))},t}((react__WEBPACK_IMPORTED_MODULE_2___default().Component)),Text=withBuilder(TextComponent,{name:\"Text\",static:!0,image:iconUrl,inputs:[{name:\"text\",type:\"html\",required:!0,autoFocus:!0,bubble:!0,defaultValue:\"Enter some text...\"}],defaultStyles:{lineHeight:\"normal\",height:\"auto\",textAlign:\"center\"}});function Slot(e){var t=e.name,n=(0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(BuilderStoreContext),i=!n.context.symbolId;return (0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\",__assign({css:{pointerEvents:\"auto\"}},i&&{\"builder-slot\":t}),(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(BuilderBlocks,{child:!0,parentElementId:n.context.symbolId,dataPath:\"symbol.data.\".concat(t),blocks:n.state[t]||[]}))}_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.registerComponent(Slot,{name:\"Slot\",description:\"Allow child blocks to be inserted into this content when used as a Symbol\",docsLink:\"https://www.builder.io/c/docs/symbols-with-blocks\",image:\"https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F3aad6de36eae43b59b52c85190fdef56\",inputs:[{name:\"name\",type:\"string\",required:!0,defaultValue:\"children\"}]});var FragmentComponent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.render=function(){return this.props.builderBlock&&this.props.builderBlock.children&&this.props.builderBlock.children.map((function(e,t){return react__WEBPACK_IMPORTED_MODULE_2___default().createElement(BuilderBlock$1,{block:e,key:e.id,index:t})}))},t}((react__WEBPACK_IMPORTED_MODULE_2___default().Component)),Fragment=withBuilder(FragmentComponent,{name:\"Core:Fragment\",canHaveChildren:!0,noWrap:!0,static:!0,hideFromInsertMenu:!0}),DEFAULT_ASPECT_RATIO$2=.7004048582995948,defaultBlocks=[{\"@type\":\"@builder.io/sdk:Element\",responsiveStyles:{large:{display:\"flex\",flexDirection:\"column\",alignItems:\"stretch\",flexShrink:\"0\",position:\"relative\",marginTop:\"30px\",textAlign:\"center\",lineHeight:\"normal\",height:\"auto\",minHeight:\"20px\",minWidth:\"20px\",overflow:\"hidden\"}},component:{name:\"Image\",options:{image:\"https://builder.io/api/v1/image/assets%2Fpwgjf0RoYWbdnJSbpBAjXNRMe9F2%2Ffb27a7c790324294af8be1c35fe30f4d\",backgroundPosition:\"center\",backgroundSize:\"cover\",aspectRatio:DEFAULT_ASPECT_RATIO$2}}},{\"@type\":\"@builder.io/sdk:Element\",responsiveStyles:{large:{display:\"flex\",flexDirection:\"column\",alignItems:\"stretch\",flexShrink:\"0\",position:\"relative\",marginTop:\"30px\",textAlign:\"center\",lineHeight:\"normal\",height:\"auto\"}},component:{name:\"Text\",options:{text:\"<p>Enter some text...</p>\"}}}],ColumnsComponent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,\"columns\",{get:function(){return this.props.columns||[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"gutterSize\",{get:function(){return\"number\"==typeof this.props.space?this.props.space||0:20},enumerable:!1,configurable:!0}),t.prototype.getWidth=function(e){return this.columns[e]&&this.columns[e].width||100/this.columns.length},t.prototype.getColumnWidth=function(e){var t=this.columns,n=this.gutterSize,i=this.getWidth(e),r=n*(t.length-1)*(i/100);return\"calc(\".concat(i,\"% - \").concat(r,\"px)\")},t.prototype.render=function(){var e,t,n,i,r=this,o=this.columns,a=this.gutterSize,s=(null===(i=null===(n=null===(t=this.props.builderState)||void 0===t?void 0:t.context.builderContent)||void 0===n?void 0:n.meta)||void 0===i?void 0:i.breakpoints)||{},l=getSizesForBreakpoints(s);return (0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)((react__WEBPACK_IMPORTED_MODULE_2___default().Fragment),null,(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\",{className:\"builder-columns\",css:__assign({display:\"flex\"},\"never\"!==this.props.stackColumnsAt&&(e={},e[\"@media (max-width: \".concat(\"tablet\"!==this.props.stackColumnsAt?l.small.max:l.medium.max,\"px)\")]={flexDirection:this.props.reverseColumnsWhenStacked?\"column-reverse\":\"column\",alignItems:\"stretch\"},e))},o.map((function(e,t){var n,i,o=e.link?Link:\"div\";return (0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)((react__WEBPACK_IMPORTED_MODULE_2___default().Fragment),{key:t},(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(o,__assign({className:\"builder-column\"},e.link?{href:e.link}:null,{css:__assign((n={display:\"flex\",flexDirection:\"column\",alignItems:\"stretch\",lineHeight:\"normal\"},n[\"& > .builder-blocks\"]={flexGrow:1},n.width=r.getColumnWidth(t),n.marginLeft=0===t?0:a,n),\"never\"!==r.props.stackColumnsAt&&(i={},i[\"@media (max-width: \".concat(\"tablet\"!==r.props.stackColumnsAt?l.small.max:l.medium.max,\"px)\")]={width:\"100%\",marginLeft:0},i))}),(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(BuilderBlocks,{key:t,child:!0,parentElementId:r.props.builderBlock&&r.props.builderBlock.id,blocks:e.blocks,dataPath:\"component.options.columns.\".concat(t,\".blocks\")})))}))))},t}((react__WEBPACK_IMPORTED_MODULE_2___default().Component)),Columns=withBuilder(ColumnsComponent,{name:\"Columns\",static:!0,inputs:[{name:\"columns\",type:\"array\",broadcast:!0,subFields:[{name:\"blocks\",type:\"array\",hideFromUI:!0,defaultValue:defaultBlocks},{name:\"width\",type:\"number\",hideFromUI:!0,helperText:\"Width %, e.g. set to 50 to fill half of the space\"},{name:\"link\",type:\"url\",helperText:\"Optionally set a url that clicking this column will link to\"}],defaultValue:[{blocks:defaultBlocks},{blocks:defaultBlocks}],onChange:function(e){function t(){n.forEach((function(e){e.delete(\"width\")}))}var n=e.get(\"columns\");Array.isArray(n)&&(!n.find((function(e){return e.get(\"width\")}))||(n.find((function(e){return!e.get(\"width\")}))||100!==n.reduce((function(e,t){return e+t.get(\"width\")}),0))&&t())}},{name:\"space\",type:\"number\",defaultValue:20,helperText:\"Size of gap between columns\",advanced:!0},{name:\"stackColumnsAt\",type:\"string\",defaultValue:\"tablet\",helperText:\"Convert horizontal columns to vertical at what device size\",enum:[\"tablet\",\"mobile\",\"never\"],advanced:!0},{name:\"reverseColumnsWhenStacked\",type:\"boolean\",defaultValue:!1,helperText:\"When stacking columns for mobile devices, reverse the ordering\",advanced:!0}]}),EmbedComponent=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.elementRef=null,t.scriptsInserted=new Set,t.scriptsRun=new Set,t}return __extends(t,e),t.prototype.shouldComponentUpdate=function(e){return e.content!==this.props.content},t.prototype.componentDidUpdate=function(e){this.props.content!==e.content&&this.findAndRunScripts()},t.prototype.componentDidMount=function(){this.findAndRunScripts()},t.prototype.findAndRunScripts=function(){if(this.elementRef&&\"undefined\"!=typeof window)for(var e=this.elementRef.getElementsByTagName(\"script\"),t=0;t<e.length;t++){var n=e[t];if(n.src){if(this.scriptsInserted.has(n.src))continue;this.scriptsInserted.add(n.src);var i=document.createElement(\"script\");i.async=!0,i.src=n.src,document.head.appendChild(i)}else{if(this.scriptsRun.has(n.innerText))continue;this.scriptsRun.add(n.innerText);try{new Function(n.innerText)()}catch(e){console.warn(\"Builder custom code component error:\",e)}}}},Object.defineProperty(t.prototype,\"content\",{get:function(){return _builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isServer?(this.props.content||\"\").replace(/<script[\\s\\S]*?<\\/script>/g,\"\"):this.props.content},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e=this;return react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\",{ref:function(t){return e.elementRef=t},className:\"builder-embed\",dangerouslySetInnerHTML:{__html:this.content}})},t}((react__WEBPACK_IMPORTED_MODULE_2___default().Component)),Embed=withBuilder(EmbedComponent,{name:\"Embed\",static:!0,inputs:[{name:\"url\",type:\"url\",required:!0,defaultValue:\"\",helperText:\"e.g. enter a youtube url, google map, etc\"},{name:\"content\",type:\"html\",defaultValue:'<div style=\"padding: 20px; text-align: center\">(Choose an embed URL)<div>',hideFromUI:!0}]}),globalReplaceNodes={}||null,isShopify$1=_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser&&\"Shopify\"in window;if(_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser&&globalReplaceNodes){var customCodeQuerySelector_1=\".builder-custom-code\";try{var allCustomCodeElements_1=Array.from(document.querySelectorAll(customCodeQuerySelector_1)),builderTemplates=document.querySelectorAll(\"template[data-template-variant-id]\");builderTemplates.length&&Array.from(builderTemplates).forEach((function(e){var t=e.content.querySelectorAll(customCodeQuerySelector_1);t.length&&(allCustomCodeElements_1=allCustomCodeElements_1.concat(Array.from(t)))})),allCustomCodeElements_1.forEach((function(e){var t=e.parentElement,n=t&&t.getAttribute(\"builder-id\");n&&(globalReplaceNodes[n]=globalReplaceNodes[n]||[],globalReplaceNodes[n].push(isShopify$1?e:e.cloneNode(!0)))}))}catch(e){console.error(\"Builder replace nodes error:\",e)}}var CustomCodeComponent=function(e){function t(t){var n,i=this;if((i=e.call(this,t)||this).elementRef=null,i.originalRef=null,i.scriptsInserted=new Set,i.scriptsRun=new Set,i.firstLoad=!0,i.replaceNodes=!1,i.state={hydrated:!1},_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser){var r=null===(n=i.props.builderBlock)||void 0===n?void 0:n.id;if(i.replaceNodes=Boolean(_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser&&(t.replaceNodes||isShopify$1)&&r&&(null==globalReplaceNodes?void 0:globalReplaceNodes[r])),i.firstLoad&&i.props.builderBlock)if(r&&(null==globalReplaceNodes?void 0:globalReplaceNodes[r])){var o=globalReplaceNodes[r].shift()||null;i.originalRef=o,0===globalReplaceNodes[r].length&&delete globalReplaceNodes[r]}else if(i.replaceNodes){var a=document.querySelectorAll(\".\".concat(i.props.builderBlock.id,\" .builder-custom-code\"));if(1===a.length){var s=a[0];i.originalRef=s,i.originalRef.remove()}}}return i}return __extends(t,e),t.prototype.shouldComponentUpdate=function(e){return e.code!==this.props.code},Object.defineProperty(t.prototype,\"noReactRender\",{get:function(){var e;return Boolean(isShopify$1&&(null===(e=this.props.code)||void 0===e?void 0:e.match(/{[{%]/g)))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,\"isHydrating\",{get:function(){return!isShopify$1&&this.originalRef},enumerable:!1,configurable:!0}),t.prototype.componentDidUpdate=function(e){this.props.code!==e.code&&this.findAndRunScripts()},t.prototype.componentDidMount=function(){var e=this;this.firstLoad=!1,this.replaceNodes||(this.isHydrating?(this.setState({hydrated:!0}),_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.nextTick((function(){return e.findAndRunScripts()}))):this.findAndRunScripts()),_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser&&this.replaceNodes&&this.originalRef&&this.elementRef&&this.elementRef.appendChild(this.originalRef)},t.prototype.findAndRunScripts=function(){if(this.elementRef&&\"undefined\"!=typeof window)for(var e=this.elementRef.getElementsByTagName(\"script\"),t=0;t<e.length;t++){var n=e[t];if(n.src){if(this.scriptsInserted.has(n.src))continue;this.scriptsInserted.add(n.src);var i=document.createElement(\"script\");i.async=!0,i.src=n.src,document.head.appendChild(i)}else if(!n.type||[\"text/javascript\",\"application/javascript\",\"application/ecmascript\"].includes(n.type)){if(this.scriptsRun.has(n.innerText))continue;try{this.scriptsRun.add(n.innerText),new Function(n.innerText)()}catch(e){console.warn(\"Builder custom code component error:\",e)}}}},Object.defineProperty(t.prototype,\"code\",{get:function(){return(_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isServer||this.isHydrating&&this.firstLoad)&&this.props.scriptsClientOnly?(this.props.code||\"\").replace(/<script\\b[^<]*(?:(?!<\\/script>)<[^<]*)*<\\/script>/gi,\"\"):this.props.code},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e=this;return react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\",__assign({ref:function(t){return e.elementRef=t},className:\"builder-custom-code\"},!this.replaceNodes&&!this.noReactRender&&{dangerouslySetInnerHTML:{__html:this.code}}))},t}((react__WEBPACK_IMPORTED_MODULE_2___default().Component)),CustomCode=withBuilder(CustomCodeComponent,{name:\"Custom Code\",static:!0,requiredPermissions:[\"editCode\"],inputs:[{name:\"code\",type:\"html\",required:!0,defaultValue:\"<p>Hello there, I am custom HTML code!</p>\",code:!0},__assign({name:\"replaceNodes\",type:\"boolean\",helperText:\"Preserve server rendered dom nodes\",advanced:!0},isShopify$1&&{defaultValue:!0}),__assign({name:\"scriptsClientOnly\",type:\"boolean\",helperText:\"Only print and run scripts on the client. Important when scripts influence DOM that could be replaced when client loads\",advanced:!0},!isShopify$1&&{defaultValue:!0})]}),IMAGE_FILE_TYPES=[\"jpeg\",\"jpg\",\"png\",\"svg\",\"webp\",\"gif\",\"jfif\",\"pjpeg\",\"pjp\",\"apng\",\"avif\",\"tif\",\"tiff\",\"heif\",\"bmp\",\"eps\",\"raw\",\"cr2\",\"nef\",\"orf\",\"sr2\",\"psd\",\"heic\",\"dib\",\"ai\"],VIDEO_FILE_TYPES=[\"mp4\",\"webm\",\"mkv\",\"flv\",\"vob\",\"ogv\",\"ogg\",\"drc\",\"gif\",\"gifv\",\"mng\",\"avi\",\"mov\",\"qt\",\"mts\",\"m2ts\",\"ts\",\"wmv\",\"yuv\",\"rm\",\"rmvb\",\"viv\",\"asf\",\"amv\",\"m4p\",\"mpeg\",\"mpe\",\"m2v\",\"m4v\",\"svi\",\"3gp\",\"3g2\",\"mxf\",\"roq\",\"nsv\",\"f4v\",\"f4p\",\"f4a\",\"f4b\"];function removeProtocol(e){return e.replace(/http(s)?:/,\"\")}function isElementInViewport(e){var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&t.right<=(window.innerWidth||document.documentElement.clientWidth)}function getShopifyImageUrl(e,t){if(!e||!(null==e?void 0:e.match(/cdn\\.shopify\\.com/))||!t)return e;if(\"master\"===t)return removeProtocol(e);var n=e.match(/(_\\d+x(\\d+)?)?(\\.(jpg|jpeg|gif|png|bmp|bitmap|tiff|tif)(\\?v=\\d+)?)/i);if(n){var i=e.split(n[0]),r=n[3],o=t.match(\"x\")?t:\"\".concat(t,\"x\");return removeProtocol(\"\".concat(i[0],\"_\").concat(o).concat(r))}return null}var DEFAULT_ASPECT_RATIO$1=.7041;function updateQueryParam(e,t,n){void 0===e&&(e=\"\");var i=new RegExp(\"([?&])\"+t+\"=.*?(&|$)\",\"i\"),r=-1!==e.indexOf(\"?\")?\"&\":\"?\";return e.match(i)?e.replace(i,\"$1\"+t+\"=\"+encodeURIComponent(n)+\"$2\"):e+r+t+\"=\"+encodeURIComponent(n)}function getSrcSet(e){if(!e)return e;var t=[100,200,400,800,1200,1600,2e3];if(e.match(/builder\\.io/)){var n=e,i=Number(e.split(\"?width=\")[1]);return isNaN(i)||(n=\"\".concat(n,\" \").concat(i,\"w\")),t.filter((function(e){return e!==i})).map((function(t){return\"\".concat(updateQueryParam(e,\"width\",t),\" \").concat(t,\"w\")})).concat([n]).join(\", \")}return e.match(/cdn\\.shopify\\.com/)?t.map((function(t){return[getShopifyImageUrl(e,\"\".concat(t,\"x\").concat(t)),t]})).filter((function(e){return!!e[0]})).map((function(e){var t=e[0],n=e[1];return\"\".concat(t,\" \").concat(n,\"w\")})).concat([e]).join(\", \"):e}var getSizes=function(e,t,n){var i,r,o,a,s,l,u,d;void 0===n&&(n={});var c=\"\";if(e){var p=e.split(\",\"),f=p.length;c=p.map((function(e,t){return f===t+1?e.replace(/\\([\\s\\S]*?\\)/g,\"\").trim():e})).join(\", \")}else if(t&&t.responsiveStyles){var m=[],h=!1,v=/^\\d+/,g=getSizesForBreakpoints(n);if(null===(o=null===(r=null===(i=t.responsiveStyles)||void 0===i?void 0:i.small)||void 0===r?void 0:r.width)||void 0===o?void 0:o.match(v)){h=!0;var b=\"(max-width: \".concat(g.small.max,\"px)\"),y=\"\".concat(b,\" \").concat(t.responsiveStyles.small.width.replace(\"%\",\"vw\"));m.push(y)}if(null===(l=null===(s=null===(a=t.responsiveStyles)||void 0===a?void 0:a.medium)||void 0===s?void 0:s.width)||void 0===l?void 0:l.match(v)){h=!0;b=\"(max-width: \".concat(g.medium.max,\"px)\"),y=\"\".concat(b,\" \").concat(t.responsiveStyles.medium.width.replace(\"%\",\"vw\"));m.push(y)}if(null===(d=null===(u=t.responsiveStyles)||void 0===u?void 0:u.large)||void 0===d?void 0:d.width){var _=t.responsiveStyles.large.width.replace(\"%\",\"vw\");m.push(_)}else h&&m.push(\"100vw\");m.length&&(c=m.join(\", \"))}return c},ImageComponent=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={imageLoaded:!t.useLazyLoading,load:!t.useLazyLoading},t.pictureRef=null,t.scrollListener=null,t.intersectionObserver=null,t}return __extends(t,e),Object.defineProperty(t.prototype,\"useLazyLoading\",{get:function(){return!this.props.highPriority&&((!_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser||!location.search.includes(\"builder.lazyLoadImages=false\"))&&(!(!_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser||!location.href.includes(\"builder.lazyLoadImages=true\"))||this.props.lazy))},enumerable:!1,configurable:!0}),t.prototype.componentWillUnmount=function(){_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser&&(this.scrollListener&&(window.removeEventListener(\"scroll\",this.scrollListener),this.scrollListener=null),this.intersectionObserver&&this.pictureRef&&this.intersectionObserver.unobserve(this.pictureRef))},t.prototype.componentDidMount=function(){var e=this;if(this.props.lazy&&_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser)if(this.pictureRef&&isElementInViewport(this.pictureRef))this.setState({load:!0});else if(\"function\"==typeof IntersectionObserver&&this.pictureRef){(this.intersectionObserver=new IntersectionObserver((function(t,n){t.forEach((function(t){t.intersectionRatio>0&&(e.setState({load:!0}),e.pictureRef&&n.unobserve(e.pictureRef))}))}))).observe(this.pictureRef)}else{var t=throttle((function(n){if(e.pictureRef){var i=e.pictureRef.getBoundingClientRect(),r=window.innerHeight/2;i.top<window.innerHeight+r&&(e.setState(__assign(__assign({},e.state),{load:!0})),window.removeEventListener(\"scroll\",t),e.scrollListener=null)}}),400,{leading:!1,trailing:!0});this.scrollListener=t,window.addEventListener(\"scroll\",t,{capture:!0,passive:!0}),t()}},Object.defineProperty(t.prototype,\"image\",{get:function(){return this.props.image||this.props.src},enumerable:!1,configurable:!0}),t.prototype.getSrcSet=function(){var e=this.image;if(e&&\"string\"==typeof e&&!this.props.noWebp&&(e.match(/builder\\.io/)||e.match(/cdn\\.shopify\\.com/)))return getSrcSet(e)},t.prototype.render=function(){var e,t,n=this,i=this.props,r=i.aspectRatio,o=i.lazy,a=i.builderBlock,s=i.builderState,l=this.props.builderBlock&&this.props.builderBlock.children,u=this.props.srcset,d=getSizes(this.props.sizes,a,(null===(t=null===(e=null==s?void 0:s.context.builderContent)||void 0===e?void 0:e.meta)||void 0===t?void 0:t.breakpoints)||{}),c=this.image;u&&c&&c.includes(\"builder.io/api/v1/image\")?u.includes(c.split(\"?\")[0])||(console.debug(\"Removed given srcset\"),u=this.getSrcSet()):c&&!u&&(u=this.getSrcSet());var p=(null==a?void 0:a.id.startsWith(\"builder-pixel-\"))||this.props.highPriority,f=this.props.fitContent;return (0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(BuilderMetaContext.Consumer,null,(function(e){var t,i=e.ampMode,a=i?\"amp-img\":\"img\",s=(!o||n.state.load||i)&&(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(a,__assign({},i?{layout:\"responsive\",height:n.props.height||(r?Math.round(1e3*r):void 0),width:n.props.width||(r?Math.round(1e3/r):void 0)}:null,{alt:n.props.altText,key:_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing&&\"string\"==typeof n.image&&n.image.split(\"?\")[0]||void 0,role:n.props.altText?void 0:\"presentation\",css:__assign(__assign({opacity:i?1:n.useLazyLoading&&!n.state.imageLoaded?0:1,transition:\"opacity 0.2s ease-in-out\",objectFit:n.props.backgroundSize||\"cover\",objectPosition:n.props.backgroundPosition||\"center\"},r&&!i&&{position:\"absolute\",height:\"100%\",width:\"100%\",left:0,top:0}),i&&(t={},t[\"& img\"]={objectFit:n.props.backgroundSize,objectPosition:n.props.backgroundPosition},t)),loading:p?\"eager\":\"lazy\",fetchPriority:p?\"high\":\"auto\",className:\"builder-image\"+(n.props.className?\" \"+n.props.className:\"\"),src:n.image},!i&&{onLoad:function(){return n.setState({imageLoaded:!0})}},{srcSet:u,sizes:!i&&d?d:void 0}));return (0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)((react__WEBPACK_IMPORTED_MODULE_2___default().Fragment),null,i?s:(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"picture\",{ref:function(e){return n.pictureRef=e}},u&&u.match(/builder\\.io/)&&!n.props.noWebp&&(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"source\",{srcSet:u.replace(/\\?/g,\"?format=webp&\"),type:\"image/webp\"}),s),!r||i||f&&l&&l.length?null:(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\",{className:\"builder-image-sizer\",css:{width:\"100%\",paddingTop:100*r+\"%\",pointerEvents:\"none\",fontSize:0}},\" \"),l&&l.length?f?l.map((function(e,t){return (0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(BuilderBlock$1,{key:e.id,block:e})})):(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\",{css:{display:\"flex\",flexDirection:\"column\",alignItems:\"stretch\",position:\"absolute\",top:0,left:0,width:\"100%\",height:\"100%\"}},l.map((function(e,t){return (0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(BuilderBlock$1,{key:e.id,block:e})}))):null)}))},t}((react__WEBPACK_IMPORTED_MODULE_2___default().Component)),Image=withBuilder(ImageComponent,{name:\"Image\",static:!0,image:\"https://firebasestorage.googleapis.com/v0/b/builder-3b0a2.appspot.com/o/images%2Fbaseline-insert_photo-24px.svg?alt=media&token=4e5d0ef4-f5e8-4e57-b3a9-38d63a9b9dc4\",defaultStyles:{position:\"relative\",minHeight:\"20px\",minWidth:\"20px\",overflow:\"hidden\"},canHaveChildren:!0,inputs:[{name:\"image\",type:\"file\",bubble:!0,allowedFileTypes:IMAGE_FILE_TYPES,required:!0,defaultValue:\"https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F72c80f114dc149019051b6852a9e3b7a\",onChange:function(e){e.delete(\"srcset\"),e.delete(\"noWebp\");var t,n,i=e.get(\"image\"),r=e.get(\"aspectRatio\");if(fetch(i).then((function(e){return e.blob()})).then((function(t){t.type.includes(\"svg\")&&e.set(\"noWebp\",!0)})),i&&(!r||.7041===r))return(t=i,void 0===n&&(n=6e4),new Promise((function(e,i){var r=document.createElement(\"img\"),o=!1;r.onload=function(){o=!0,e(r)},r.addEventListener(\"error\",(function(e){console.warn(\"Image load failed\",e.error),i(e.error)})),r.src=t,setTimeout((function(){o||i(new Error(\"Image load timed out\"))}),n)}))).then((function(t){var n,r=e.get(\"aspectRatio\");e.get(\"image\")!==i||r&&.7041!==r||t.width&&t.height&&(e.set(\"aspectRatio\",(n=t.height/t.width,Math.round(1e3*n)/1e3)),e.set(\"height\",t.height),e.set(\"width\",t.width))}))}},{name:\"backgroundSize\",type:\"text\",defaultValue:\"cover\",enum:[{label:\"contain\",value:\"contain\",helperText:\"The image should never get cropped\"},{label:\"cover\",value:\"cover\",helperText:\"The image should fill its box, cropping when needed\"}]},{name:\"backgroundPosition\",type:\"text\",defaultValue:\"center\",enum:[\"center\",\"top\",\"left\",\"right\",\"bottom\",\"top left\",\"top right\",\"bottom left\",\"bottom right\"]},{name:\"altText\",type:\"string\",helperText:\"Text to display when the user has images off\"},{name:\"highPriority\",type:\"boolean\",advanced:!0,helperText:\"Mark this image as high priority compared to other images on the page. This prevents lazy loading of the image and tells the browser to load this image before others on the page.\"},{name:\"height\",type:\"number\",hideFromUI:!0},{name:\"width\",type:\"number\",hideFromUI:!0},{name:\"sizes\",type:\"string\",hideFromUI:!0},{name:\"srcset\",type:\"string\",hideFromUI:!0},{name:\"lazy\",type:\"boolean\",defaultValue:!0,hideFromUI:!0},{name:\"fitContent\",type:\"boolean\",helperText:\"When child blocks are provided, fit to them instead of using the image's aspect ratio\",defaultValue:!0},{name:\"aspectRatio\",type:\"number\",helperText:\"This is the ratio of height/width, e.g. set to 1.5 for a 300px wide and 200px tall photo. Set to 0 to not force the image to maintain it's aspect ratio\",advanced:!0,defaultValue:DEFAULT_ASPECT_RATIO$1}]}),DEFAULT_ASPECT_RATIO=.7004048582995948,VideoComponent=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.video=null,t.containerRef=null,t.scrollListener=null,t.state={load:!t.lazyLoad},t}return __extends(t,e),Object.defineProperty(t.prototype,\"lazyLoad\",{get:function(){return!1!==this.props.lazyLoad},enumerable:!1,configurable:!0}),t.prototype.updateVideo=function(){var e=this,t=this.video;if(t){[\"muted\",\"playsInline\",\"autoPlay\"].forEach((function(n){var i=n.toLowerCase();e.props[n]?t.setAttribute(i,i):t.removeAttribute(i)}))}},t.prototype.componentDidUpdate=function(){this.updateVideo()},t.prototype.componentDidMount=function(){var e=this;if(this.updateVideo(),this.lazyLoad&&_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser){var t=throttle((function(n){if(e.containerRef){var i=e.containerRef.getBoundingClientRect(),r=window.innerHeight/2;i.top<window.innerHeight+r&&(e.setState((function(e){return __assign(__assign({},e),{load:!0})})),window.removeEventListener(\"scroll\",t),e.scrollListener=null)}}),400,{leading:!1,trailing:!0});this.scrollListener=t,window.addEventListener(\"scroll\",t,{capture:!0,passive:!0}),t()}},t.prototype.componentWillUnmount=function(){_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser&&this.scrollListener&&(window.removeEventListener(\"scroll\",this.scrollListener),this.scrollListener=null)},t.prototype.render=function(){var e=this,t=this.props,n=t.aspectRatio,i=t.children;return (0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\",{ref:function(t){return e.containerRef=t},css:{position:\"relative\"}},(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"video\",{key:this.props.video||\"no-src\",poster:this.props.posterImage,ref:function(t){return e.video=t},autoPlay:this.props.autoPlay,muted:this.props.muted,controls:this.props.controls,loop:this.props.loop,preload:this.props.preload||\"metadata\",className:\"builder-video\",css:__assign({width:\"100%\",height:\"100%\",objectFit:this.props.fit,objectPosition:this.props.position,zIndex:2,borderRadius:1},n?{position:\"absolute\"}:null)},(!this.lazyLoad||this.state.load)&&(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"source\",{type:\"video/mp4\",src:this.props.video})),!n||this.props.fitContent&&i?null:(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\",{css:{width:\"100%\",paddingTop:100*n+\"%\",pointerEvents:\"none\",fontSize:0}}),i&&this.props.fitContent?(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\",{css:{display:\"flex\",flexDirection:\"column\",alignItems:\"stretch\"}},i):i?(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\",{css:{pointerEvents:\"none\",display:\"flex\",flexDirection:\"column\",alignItems:\"stretch\",position:\"absolute\",top:0,left:0,width:\"100%\",height:\"100%\"}},i):null)},t}((react__WEBPACK_IMPORTED_MODULE_2___default().Component)),Video=_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.registerComponent(withChildren(VideoComponent),{name:\"Video\",canHaveChildren:!0,defaultStyles:{minHeight:\"20px\",minWidth:\"20px\"},image:\"https://firebasestorage.googleapis.com/v0/b/builder-3b0a2.appspot.com/o/images%2Fbaseline-videocam-24px%20(1).svg?alt=media&token=49a84e4a-b20e-4977-a650-047f986874bb\",inputs:[{name:\"video\",type:\"file\",allowedFileTypes:VIDEO_FILE_TYPES,bubble:!0,defaultValue:\"https://cdn.builder.io/o/assets%2FYJIGb4i01jvw0SRdL5Bt%2Fd27731a526464deba0016216f5f9e570%2Fcompressed?apiKey=YJIGb4i01jvw0SRdL5Bt&token=d27731a526464deba0016216f5f9e570&alt=media&optimized=true\",required:!0},{name:\"posterImage\",type:\"file\",allowedFileTypes:IMAGE_FILE_TYPES,helperText:\"Image to show before the video plays\"},{name:\"autoPlay\",type:\"boolean\",defaultValue:!0},{name:\"controls\",type:\"boolean\",defaultValue:!1},{name:\"muted\",type:\"boolean\",defaultValue:!0},{name:\"loop\",type:\"boolean\",defaultValue:!0},{name:\"playsInline\",type:\"boolean\",defaultValue:!0},{name:\"fit\",type:\"text\",defaultValue:\"cover\",enum:[\"contain\",\"cover\",\"fill\",\"auto\"]},{name:\"preload\",type:\"text\",defaultValue:\"metadata\",enum:[\"auto\",\"metadata\",\"none\"]},{name:\"fitContent\",type:\"boolean\",helperText:\"When child blocks are provided, fit to them instead of using the aspect ratio\",defaultValue:!0,advanced:!0},{name:\"position\",type:\"text\",defaultValue:\"center\",enum:[\"center\",\"top\",\"left\",\"right\",\"bottom\",\"top left\",\"top right\",\"bottom left\",\"bottom right\"]},{name:\"height\",type:\"number\",advanced:!0},{name:\"width\",type:\"number\",advanced:!0},{name:\"aspectRatio\",type:\"number\",advanced:!0,defaultValue:DEFAULT_ASPECT_RATIO},{name:\"lazyLoad\",type:\"boolean\",helperText:'Load this video \"lazily\" - as in only when a user scrolls near the video. Recommended for optmized performance and bandwidth consumption',defaultValue:!0,advanced:!0}]}),size=function(e){return Object.keys(e).length},isShopify=_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser&&\"Shopify\"in window,refs={};if(_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser)try{Array.from(document.querySelectorAll(\"[builder-static-symbol]\")).forEach((function(e){var t=e.getAttribute(\"builder-static-symbol\");t&&(refs[t]=e)}))}catch(e){console.error(\"Builder replace nodes error:\",e)}var SymbolComponent=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ref=null,t.staticRef=null,t.isEditingThisSymbol=!1,t}return __extends(t,e),Object.defineProperty(t.prototype,\"placeholder\",{get:function(){return (0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\",{css:{padding:10}},\"Symbols let you reuse dynamic elements across your content. Please choose a model and entry for this symbol.\")},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){var e,t,n,i=this;this.useStatic&&this.staticRef&&refs[null===(e=this.props.builderBlock)||void 0===e?void 0:e.id]&&(null===(t=this.staticRef.parentNode)||void 0===t||t.replaceChild(refs[null===(n=this.props.builderBlock)||void 0===n?void 0:n.id],this.staticRef)),_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.nextTick((function(){var e=i.props.symbol||{},t=e.model,n=e.entry;i.isEditingThisSymbol=Boolean(_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing&&t===_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.builder.editingModel&&n&&location.search.includes(\"overrides.\".concat(n)))}))},Object.defineProperty(t.prototype,\"useStatic\",{get:function(){var e;return Boolean(_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser&&refs[null===(e=this.props.builderBlock)||void 0===e?void 0:e.id]&&!(_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing||_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isPreviewing))},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e,t,n=this;if(this.useStatic)return (0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\",{ref:function(e){return n.staticRef=e}});var i=this.props.symbol,r=!1;i||(r=!0);var o=this.props.dataOnly?NoWrap:this.props.builderBlock&&this.props.builderBlock.tagName||\"div\",a=i||{},s=a.model,l=a.entry,u=a.data,d=a.content,c=a.inline,p=a.ownerId,f=(null==i?void 0:i.dynamic)||this.props.dynamic;s&&(l||f)||(null===(e=null==d?void 0:d.data)||void 0===e?void 0:e.blocksJs)||c||(r=!0),this.isEditingThisSymbol&&(r=!1);var m=f?null===(t=this.props.builderBlock)||void 0===t?void 0:t.id:[s,l].join(\":\"),h=u&&size(u)&&hash_sum__WEBPACK_IMPORTED_MODULE_4___default()(u);m&&h&&h.length<300&&(m+=\":\"+h);var v=this.props.attributes||{};return (0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(BuilderStoreContext.Consumer,{key:(s||\"no model\")+\":\"+(l||\"no entry\"+this.isEditingThisSymbol)},(function(e){var t,a,c,f,h,g,b,y,_,S,x,B=\"\".concat(m,\"_\").concat((null===(t=null==e?void 0:e.state)||void 0===t?void 0:t.locale)||\"Default\");return (0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(o,__assign({\"data-model\":s},v,{className:(v.class||v.className||\"\")+\" builder-symbol\"+((null==i?void 0:i.inline)?\" builder-inline-symbol\":\"\")+((null==i?void 0:i.dynamic)||n.props.dynamic?\" builder-dynamic-symbol\":\"\")}),r?n.placeholder:(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(BuilderComponent,__assign({},p&&{apiKey:p},(null===(a=e.state)||void 0===a?void 0:a.locale)&&{locale:e.state.locale},{isChild:!0,ref:function(e){return n.ref=e},context:__assign(__assign({},e.context),{symbolId:null===(c=n.props.builderBlock)||void 0===c?void 0:c.id}),model:s,entry:l,data:__assign(__assign(__assign({},u),!!n.props.inheritState&&omit$2(e.state,\"children\")),null===(_=null===(y=null===(b=null===(g=null===(h=null===(f=n.props.builderBlock)||void 0===f?void 0:f.component)||void 0===h?void 0:h.options)||void 0===g?void 0:g.symbol)||void 0===b?void 0:b.content)||void 0===y?void 0:y.data)||void 0===_?void 0:_.state),renderLink:e.renderLink,inlineContent:null==i?void 0:i.inline},d&&{content:d},{key:B,options:__assign(__assign({},!n.isEditingThisSymbol&&{key:B,noEditorUpdates:!0}),\"content\"===_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.singletonInstance.apiEndpoint&&l&&{query:{id:l}}),codegen:!!(null===(S=null==d?void 0:d.data)||void 0===S?void 0:S.blocksJs),hydrate:null===(x=e.state)||void 0===x?void 0:x._hydrate,builderBlock:n.props.builderBlock,dataOnly:n.props.dataOnly}),n.props.children))}))},t}((react__WEBPACK_IMPORTED_MODULE_2___default().Component)),Symbol$1=withBuilder(SymbolComponent,{name:\"Symbol\",noWrap:!0,static:!0,inputs:[{name:\"symbol\",type:\"uiSymbol\"},{name:\"dataOnly\",helperText:\"Make this a data symbol that doesn't display any UI\",type:\"boolean\",defaultValue:!1,advanced:!0,hideFromUI:!0},{name:\"inheritState\",helperText:\"Inherit the parent component state and data\",type:\"boolean\",defaultValue:isShopify,advanced:!0},{name:\"renderToLiquid\",helperText:\"Render this symbols contents to liquid. Turn off to fetch with javascript and use custom targeting\",type:\"boolean\",defaultValue:isShopify,advanced:!0,hideFromUI:!0},{name:\"useChildren\",hideFromUI:!0,type:\"boolean\"}]}),ButtonComponent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.render=function(){var e=this.props.link?Link:\"span\";return react__WEBPACK_IMPORTED_MODULE_2___default().createElement(e,__assign({role:\"button\",href:this.props.link,target:this.props.openLinkInNewTab?\"_blank\":void 0},this.props.attributes),this.props.text)},t}((react__WEBPACK_IMPORTED_MODULE_2___default().Component)),Button=withBuilder(ButtonComponent,{name:\"Core:Button\",image:\"https://cdn.builder.io/api/v1/image/assets%2FIsxPKMo2gPRRKeakUztj1D6uqed2%2F81a15681c3e74df09677dfc57a615b13\",defaultStyles:{appearance:\"none\",paddingTop:\"15px\",paddingBottom:\"15px\",paddingLeft:\"25px\",paddingRight:\"25px\",backgroundColor:\"#000000\",color:\"white\",borderRadius:\"4px\",textAlign:\"center\",cursor:\"pointer\"},inputs:[{name:\"text\",type:\"text\",defaultValue:\"Click me!\",bubble:!0},{name:\"link\",type:\"url\",bubble:!0},{name:\"openLinkInNewTab\",type:\"boolean\",defaultValue:!1,friendlyName:\"Open link in new tab\"}],static:!0,noWrap:!0}),SectionComponent=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ref=null,t.unmountCallbacks=[],t.state={inView:!1},t}return __extends(t,e),Object.defineProperty(t.prototype,\"renderContents\",{get:function(){return!0!==this.props.lazyLoad||this.state.inView},enumerable:!1,configurable:!0}),t.prototype.componentWillUnmount=function(){this.unmountCallbacks.forEach((function(e){return e()}))},t.prototype.componentDidMount=function(){var e=this;if(this.props.lazyLoad)if(\"undefined\"!=typeof IntersectionObserver&&this.ref){var t=new IntersectionObserver((function(t,n){t.forEach((function(t){t.intersectionRatio>0&&(e.setState({inView:!0}),e.ref&&n.unobserve(e.ref))}))}),{rootMargin:\"10px\"});t.observe(this.ref),this.unmountCallbacks.push((function(){e.ref&&t.unobserve(e.ref)}))}else this.setState({inView:!0})},t.prototype.render=function(){var e=this;return (0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"section\",{ref:function(t){return e.ref=t},css:__assign({width:\"100%\",alignSelf:\"stretch\",flexGrow:1,boxSizing:\"border-box\",maxWidth:this.props.maxWidth,display:\"flex\",flexDirection:\"column\",alignItems:\"stretch\",marginLeft:\"auto\",marginRight:\"auto\"},this.renderContents?null:this.props.lazyStyles)},this.renderContents?(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)((react__WEBPACK_IMPORTED_MODULE_2___default().Fragment),null,this.props.children,this.props.builderBlock&&this.props.builderBlock.children&&this.props.builderBlock.children.map((function(e,t){return (0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(BuilderBlock$1,{key:e.id,block:e})}))):null)},t}((react__WEBPACK_IMPORTED_MODULE_2___default().Component)),Section=withBuilder(SectionComponent,{name:\"Core:Section\",static:!0,image:\"https://cdn.builder.io/api/v1/image/assets%2FIsxPKMo2gPRRKeakUztj1D6uqed2%2F682efef23ace49afac61748dd305c70a\",inputs:[{name:\"maxWidth\",type:\"number\",defaultValue:1200},{name:\"lazyLoad\",type:\"boolean\",defaultValue:!1,advanced:!0,description:\"Only render this section when in view\"}],defaultStyles:{paddingLeft:\"20px\",paddingRight:\"20px\",paddingTop:\"50px\",paddingBottom:\"50px\",marginTop:\"0px\",width:\"100vw\",marginLeft:\"calc(50% - 50vw)\"},canHaveChildren:!0,defaultChildren:[{\"@type\":\"@builder.io/sdk:Element\",responsiveStyles:{large:{textAlign:\"center\"}},component:{name:\"Text\",options:{text:\"<p><b>I am a section! My content keeps from getting too wide, so that it's easy to read even on big screens.</b></p><p>Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur</p>\"}}}]}),StateProviderComponent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.render=function(){var e=this;return react__WEBPACK_IMPORTED_MODULE_2___default().createElement(BuilderStoreContext.Consumer,null,(function(t){return react__WEBPACK_IMPORTED_MODULE_2___default().createElement(BuilderStoreContext.Provider,{value:__assign(__assign({},t),{state:__assign(__assign({},t.state),e.props.state),context:__assign(__assign({},t.context),e.props.context)})},e.props.builderBlock&&e.props.builderBlock.children&&e.props.builderBlock.children.map((function(e,t){return react__WEBPACK_IMPORTED_MODULE_2___default().createElement(BuilderBlock$1,{block:e,key:e.id,index:t,child:!0})})),e.props.children)}))},t}((react__WEBPACK_IMPORTED_MODULE_2___default().Component)),StateProvider=withBuilder(StateProviderComponent,{name:\"Builder:StateProvider\",canHaveChildren:!0,static:!0,noWrap:!0,hideFromInsertMenu:!0}),prefetched=new Set;function searchToObject(e){var t=(e.search||\"\").substring(1).split(\"&\"),n={};for(var i in t)if(t[i]&&\"string\"==typeof t[i]){var r=t[i].split(\"=\");n[decodeURIComponent(r[0])]=decodeURIComponent(r[1])}return n}var RouterComponent=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.builder=_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.builder,t.routed=!1,t.preloadQueue=0,t.onPopState=function(e){t.updateLocationState()},t.onMouseOverOrTouchStart=function(e){if(!(t.preloadQueue>4)&&!1!==t.props.preloadOnHover){var n=t.findHrefTarget(e);if(n){var i=n.getAttribute(\"href\");if(i){if(!t.isRelative(i)){var r=t.convertToRelative(i);if(!r)return;i=r}if(!i.startsWith(\"#\")&&!prefetched.has(i)){prefetched.add(i);var o=t.parseUrl(i);t.preloadQueue++;var a=_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.builder.getUserAttributes();a.urlPath=o.pathname,a.queryString=o.search;var s=_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.builder.get(t.model,{userAttributes:a,key:t.model+\":\"+o.pathname+o.search}).subscribe((function(){t.preloadQueue--,s.unsubscribe()}))}}}}},t.onClick=function(e){return __awaiter(t,void 0,void 0,(function(){var t,n,i,r;return __generator(this,(function(o){if(!1===this.props.handleRouting)return[2];if(0!==e.button||e.ctrlKey||e.defaultPrevented||e.metaKey)return[2];if(!(t=this.findHrefTarget(e)))return[2];if(t.target&&\"_client\"!==t.target)return[2];if(!(n=t.getAttribute(\"href\")))return[2];if(this.props.onRoute&&(i={url:n,anchorNode:t,preventDefault:function(){this.defaultPrevented=!0},defaultPrevented:!1},this.props.onRoute(i),i.defaultPrevented))return[2];if(!this.isRelative(n)){if(!(r=this.convertToRelative(n)))return[2];n=r}return n.startsWith(\"#\")||(e.preventDefault(),this.route(n)),[2]}))}))},t.privateState=null,t}return __extends(t,e),t.prototype.route=function(e){var t;return this.routed=!0,\"function\"==typeof(null===(t=window.history)||void 0===t?void 0:t.pushState)?(history.pushState(null,\"\",e),this.updateLocationState(),!0):(location.href=e,!1)},t.prototype.updateLocationState=function(){this.privateState&&this.privateState.update((function(e){e.location=__assign(__assign({},e.location),{pathname:location.pathname,search:location.search,path:location.pathname.split(\"/\").slice(1),query:searchToObject(location)})}))},Object.defineProperty(t.prototype,\"model\",{get:function(){return this.props.model||\"page\"},enumerable:!1,configurable:!0}),t.prototype.componentDidMount=function(){\"undefined\"!=typeof document&&(document.addEventListener(\"click\",this.onClick),window.addEventListener(\"popstate\",this.onPopState),document.addEventListener(\"mouseover\",this.onMouseOverOrTouchStart),document.addEventListener(\"touchstart\",this.onMouseOverOrTouchStart))},t.prototype.componentWillUnmount=function(){\"undefined\"!=typeof document&&(document.removeEventListener(\"click\",this.onClick),document.removeEventListener(\"mouseover\",this.onMouseOverOrTouchStart),window.removeEventListener(\"popstate\",this.onPopState),document.removeEventListener(\"touchstart\",this.onMouseOverOrTouchStart))},t.prototype.render=function(){var e=this,t=this.model;return (0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(BuilderStoreContext.Consumer,null,(function(n){e.privateState=n;var i=n.state&&n.state.location&&n.state.location.pathname+n.state.location.search;return (0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\",{className:\"builder-router\",\"data-model\":t},(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"style\",null,\"\\n                @keyframes builderLoadingSpinner {\\n                  0% {\\n                    transform: rotate(0deg);\\n                  }\\n                  100% {\\n                    transform: rotate(360deg);\\n                  }\\n                }\\n                /* TODO: overridable tag */\\n                .builder-page-loading {\\n                  -webkit-animation: builderLoadingSpinner 1s infinite linear;\\n                  animation: builderLoadingSpinner 1s infinite linear;\\n                  -webkit-transform: translateZ(0);\\n                  transform: translateZ(0);\\n                  border-radius: 50%;\\n                  width: 36px;\\n                  height: 36px;\\n                  margin: 6px auto;\\n                  position: relative;\\n                  border: 1px solid transparent;\\n                  border-left: 1px solid #808284;\\n                }\\n              \"),(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(BuilderComponent,{key:i,data:e.props.data,content:e.routed?void 0:e.props.content,modelName:t,options:{key:_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing?void 0:e.model+\":\"+i}},e.props.children||(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\",{css:{display:\"flex\"}},(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\",{css:{margin:\"40vh auto\"},className:\"builder-page-loading\"}))))}))},t.prototype.findHrefTarget=function(e){for(var t=e.target;t;){if(t instanceof HTMLAnchorElement&&t.getAttribute(\"href\"))return t;if(t===e.currentTarget)break;t=t.parentElement}return null},t.prototype.isRelative=function(e){return!e.match(/^(\\/\\/|https?:\\/\\/)/i)},t.prototype.parseUrl=function(e){var t=document.createElement(\"a\");return t.href=e,t},t.prototype.convertToRelative=function(e){var t=this.parseUrl(location.href),n=this.parseUrl(e);if(t.host===n.host){var i=n.pathname+(n.search?n.search:\"\");return i.startsWith(\"#\")?null:i||\"/\"}return null},t}((react__WEBPACK_IMPORTED_MODULE_2___default().Component)),Router=withBuilder(RouterComponent,{name:\"Core:Router\",hideFromInsertMenu:!0,inputs:[{name:\"model\",type:\"string\",defaultValue:\"page\",advanced:!0},{name:\"handleRouting\",type:\"boolean\",defaultValue:!0,advanced:!0},{name:\"preloadOnHover\",type:\"boolean\",defaultValue:!0,advanced:!0},{name:\"onRoute\",type:\"function\",advanced:!0}]});function Mutation(e){var t,n,i=react__WEBPACK_IMPORTED_MODULE_2___default().useRef(null);useWaitForSelector(e.selector,(function(t){\"afterEnd\"!==e.type&&(t.innerHTML=\"\"),t.appendChild(i.current.firstElementChild)}));var r=null===(t=e.builderBlock)||void 0===t?void 0:t.children;return (0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"span\",{style:{display:\"none\"},ref:i},(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(BuilderBlocks,{style:{display:\"inline\"},child:!0,parentElementId:null===(n=e.builderBlock)||void 0===n?void 0:n.id,dataPath:\"this.children\",blocks:r}))}function useWaitForSelector(e,t){react__WEBPACK_IMPORTED_MODULE_2___default().useLayoutEffect((function(){try{var n=document.querySelector(e);if(n)return void t(n)}catch(e){console.warn(e)}var i=new MutationObserver((function(){try{var n=document.querySelector(e);n&&(i.disconnect(),t(n))}catch(e){console.warn(e)}}));return i.observe(document.body,{attributes:!0,subtree:!0,characterData:!0}),function(){i.disconnect()}}),[e])}_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.registerComponent(Mutation,{name:\"Builder:Mutation\",canHaveChildren:!0,noWrap:!0,hideFromInsertMenu:!0,inputs:[{name:\"type\",type:\"string\",defaultValue:\"replace\",enum:[{label:\"Replace\",value:\"replace\",helperText:\"Replace the contents of this site region with content from Builder\"},{label:\"Append\",value:\"afterEnd\",helperText:\"Append Builder content after the chosen site region\"}]},{name:\"selector\",type:\"builder:domSelector\"}]});var get=function(e,t,n){var i=String.prototype.split.call(t,/[,[\\].]+?/).filter(Boolean).reduce((function(e,t){return null!=e?e[t]:e}),e);return void 0===i||i===e?n:i},MULTIPART_CONTENT_TYPE=\"multipart/form-data\",JSON_CONTENT_TYPE=\"application/json\",ENCODED_CONTENT_TYPE=\"application/x-www-form-urlencoded\",FormComponent=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ref=null,t.state={state:\"unsubmitted\",responseData:null,formErrorMessage:\"\"},t}return __extends(t,e),Object.defineProperty(t.prototype,\"submissionState\",{get:function(){return _builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing&&this.props.previewState||this.state.state},enumerable:!1,configurable:!0}),t.prototype.render=function(){var e=this;return (0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(BuilderStoreContext.Consumer,null,(function(t){return (0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(BuilderStoreContext.Provider,{value:__assign(__assign({},t),{state:__assign(__assign({},t.state),{formErrorMessage:e.state.formErrorMessage})})},(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"form\",__assign({},e.props.validate?{}:{noValidate:!0},{ref:function(t){return e.ref=t},action:!e.props.sendWithJs&&e.props.action?e.props.action:void 0,method:e.props.method,name:e.props.name,onSubmit:function(t){var n,i=e.props.sendWithJs||\"email\"===e.props.sendSubmissionsTo;if(\"zapier\"===e.props.sendSubmissionsTo)t.preventDefault();else if(i){if(!e.props.action&&\"email\"!==e.props.sendSubmissionsTo)return void t.preventDefault();t.preventDefault();var r=t.currentTarget,o=e.props.customHeaders||{},a=void 0,s=new FormData(r),l=Array.from(t.currentTarget.querySelectorAll(\"input,select,textarea\")).filter((function(e){return!!e.name})).map((function(e){var t,n=e.name;if(e instanceof HTMLInputElement)if(\"radio\"===e.type){if(e.checked)return{key:n,value:t=e.name}}else if(\"checkbox\"===e.type)t=e.checked;else if(\"number\"===e.type||\"range\"===e.type){var i=e.valueAsNumber;isNaN(i)||(t=i)}else t=\"file\"===e.type?e.files:e.value;else t=e.value;return{key:n,value:t}})),u=e.props.contentType;if(\"email\"===e.props.sendSubmissionsTo&&(u=MULTIPART_CONTENT_TYPE),Array.from(l).forEach((function(e){var t=e.value;(t instanceof File||Array.isArray(t)&&t[0]instanceof File||t instanceof FileList)&&(u=MULTIPART_CONTENT_TYPE)})),u===MULTIPART_CONTENT_TYPE)a=s;else if(u===JSON_CONTENT_TYPE){var d={};Array.from(l).forEach((function(e){var t=e.value,n=e.key;set(d,n,t)})),a=JSON.stringify(d)}else{if(u!==ENCODED_CONTENT_TYPE)return void console.error(\"Unsupported content type: \",u);a=Array.from(l).map((function(e){var t=e.value,n=e.key;return encodeURIComponent(n)+\"=\"+encodeURIComponent(t)})).join(\"&\")}u&&u!==MULTIPART_CONTENT_TYPE&&(i&&(null===(n=e.props.action)||void 0===n?void 0:n.includes(\"zapier.com\"))||(o[\"content-type\"]=u));var c=new CustomEvent(\"presubmit\",{detail:{body:a}});if(e.ref&&(e.ref.dispatchEvent(c),c.defaultPrevented))return;e.setState(__assign(__assign({},e.state),{state:\"sending\"}));var p=\"\".concat(\"dev\"===_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.builder.env?\"http://localhost:5000\":\"https://builder.io\",\"/api/v1/form-submit?apiKey=\").concat(_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.builder.apiKey,\"&to=\").concat(btoa(e.props.sendSubmissionsToEmail||\"\"),\"&name=\").concat(encodeURIComponent(e.props.name||\"\"));fetch(\"email\"===e.props.sendSubmissionsTo?p:e.props.action,{body:a,headers:o,method:e.props.method||\"post\"}).then((function(t){return __awaiter(e,void 0,void 0,(function(){var e,n,i,r,o;return __generator(this,(function(a){switch(a.label){case 0:return(n=t.headers.get(\"content-type\"))&&-1!==n.indexOf(JSON_CONTENT_TYPE)?[4,t.json()]:[3,2];case 1:return e=a.sent(),[3,4];case 2:return[4,t.text()];case 3:e=a.sent(),a.label=4;case 4:if(!t.ok&&this.props.errorMessagePath&&(i=get(e,this.props.errorMessagePath))&&(\"string\"!=typeof i&&(i=JSON.stringify(i)),this.setState(__assign(__assign({},this.state),{formErrorMessage:i}))),this.setState(__assign(__assign({},this.state),{responseData:e,state:t.ok?\"success\":\"error\"})),t.ok){if(r=new CustomEvent(\"submit:success\",{detail:{res:t,body:e}}),this.ref){if(this.ref.dispatchEvent(r),r.defaultPrevented)return[2];!1!==this.props.resetFormOnSubmit&&this.ref.reset()}this.props.successUrl&&(this.ref?(o=new CustomEvent(\"route\",{detail:{url:this.props.successUrl}}),this.ref.dispatchEvent(o),o.defaultPrevented||(location.href=this.props.successUrl)):location.href=this.props.successUrl)}return[2]}}))}))}),(function(t){var n=new CustomEvent(\"submit:error\",{detail:{error:t}});e.ref&&(e.ref.dispatchEvent(n),n.defaultPrevented)||e.setState(__assign(__assign({},e.state),{responseData:t,state:\"error\"}))}))}}},e.props.attributes),e.props.builderBlock&&e.props.builderBlock.children&&e.props.builderBlock.children.map((function(e,t){return (0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(BuilderBlock$1,{key:e.id,block:e})})),\"error\"===e.submissionState&&(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(BuilderBlocks,{dataPath:\"errorMessage\",blocks:e.props.errorMessage}),\"sending\"===e.submissionState&&(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(BuilderBlocks,{dataPath:\"sendingMessage\",blocks:e.props.sendingMessage}),\"error\"===e.submissionState&&e.state.responseData&&(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"pre\",{className:\"builder-form-error-text\",css:{padding:10,color:\"red\",textAlign:\"center\"}},JSON.stringify(e.state.responseData,null,2)),\"success\"===e.submissionState&&(0,_emotion_core__WEBPACK_IMPORTED_MODULE_1__.jsx)(BuilderBlocks,{dataPath:\"successMessage\",blocks:e.props.successMessage})))}))},t}((react__WEBPACK_IMPORTED_MODULE_2___default().Component)),Form=withBuilder(FormComponent,{name:\"Form:Form\",defaults:{responsiveStyles:{large:{marginTop:\"15px\",paddingBottom:\"15px\"}}},image:\"https://cdn.builder.io/api/v1/image/assets%2FIsxPKMo2gPRRKeakUztj1D6uqed2%2Fef36d2a846134910b64b88e6d18c5ca5\",inputs:[{name:\"sendSubmissionsTo\",type:\"string\",enum:[{label:\"Send to email\",value:\"email\",helperText:\"Send form submissions to the email address of your choosing\"},{label:\"Custom\",value:\"custom\",helperText:\"Handle where the form requests go manually with a little code, e.g. to your own custom backend\"}],defaultValue:\"email\"},{name:\"sendSubmissionsToEmail\",type:\"string\",required:!0,defaultValue:\"your@email.com\",showIf:'options.get(\"sendSubmissionsTo\") === \"email\"'},{name:\"sendWithJs\",type:\"boolean\",helperText:\"Set to false to use basic html form action\",defaultValue:!0,showIf:'options.get(\"sendSubmissionsTo\") === \"custom\"'},{name:\"name\",type:\"string\",defaultValue:\"My form\"},{name:\"action\",type:\"string\",helperText:\"URL to send the form data to\",showIf:'options.get(\"sendSubmissionsTo\") === \"custom\"'},{name:\"contentType\",type:\"string\",defaultValue:JSON_CONTENT_TYPE,advanced:!0,enum:[JSON_CONTENT_TYPE,MULTIPART_CONTENT_TYPE,ENCODED_CONTENT_TYPE],showIf:'options.get(\"sendSubmissionsTo\") === \"custom\" && options.get(\"sendWithJs\") === true'},{name:\"method\",type:\"string\",showIf:'options.get(\"sendSubmissionsTo\") === \"custom\"',defaultValue:\"POST\",advanced:!0},{name:\"previewState\",type:\"string\",enum:[\"unsubmitted\",\"sending\",\"success\",\"error\"],defaultValue:\"unsubmitted\",helperText:'Choose a state to edit, e.g. choose \"success\" to show what users see on success and edit the message',showIf:'options.get(\"sendSubmissionsTo\") !== \"zapier\" && options.get(\"sendWithJs\") === true'},{name:\"successUrl\",type:\"url\",helperText:\"Optional URL to redirect the user to on form submission success\",showIf:'options.get(\"sendSubmissionsTo\") !== \"zapier\" && options.get(\"sendWithJs\") === true'},{name:\"resetFormOnSubmit\",type:\"boolean\",showIf:function(e){return\"custom\"===e.get(\"sendSubmissionsTo\")&&!0===e.get(\"sendWithJs\")},advanced:!0},{name:\"successMessage\",type:\"uiBlocks\",hideFromUI:!0,defaultValue:[{\"@type\":\"@builder.io/sdk:Element\",responsiveStyles:{large:{marginTop:\"10px\"}},component:{name:\"Text\",options:{text:\"<span>Thanks!</span>\"}}}]},{name:\"validate\",type:\"boolean\",defaultValue:!0,advanced:!0},{name:\"errorMessagePath\",type:\"text\",advanced:!0,helperText:'Path to where to get the error message from in a JSON response to display to the user, e.g. \"error.message\" for a response like { \"error\": { \"message\": \"this username is taken\" }}'},{name:\"errorMessage\",type:\"uiBlocks\",hideFromUI:!0,defaultValue:[{\"@type\":\"@builder.io/sdk:Element\",responsiveStyles:{large:{marginTop:\"10px\"}},bindings:{\"component.options.text\":\"state.formErrorMessage || block.component.options.text\"},component:{name:\"Text\",options:{text:\"<span>Form submission error :( Please check your answers and try again</span>\"}}}]},{name:\"sendingMessage\",type:\"uiBlocks\",hideFromUI:!0,defaultValue:[{\"@type\":\"@builder.io/sdk:Element\",responsiveStyles:{large:{marginTop:\"10px\"}},component:{name:\"Text\",options:{text:\"<span>Sending...</span>\"}}}]},__assign(__assign({name:\"customHeaders\",type:\"map\"},{valueType:{type:\"string\"}}),{advanced:!0,showIf:'options.get(\"sendSubmissionsTo\") === \"custom\" && options.get(\"sendWithJs\") === true'})],noWrap:!0,canHaveChildren:!0,defaultChildren:[{\"@type\":\"@builder.io/sdk:Element\",responsiveStyles:{large:{marginTop:\"10px\"}},component:{name:\"Text\",options:{text:\"<span>Enter your name</span>\"}}},{\"@type\":\"@builder.io/sdk:Element\",responsiveStyles:{large:{marginTop:\"10px\"}},component:{name:\"Form:Input\",options:{name:\"name\",placeholder:\"Jane Doe\"}}},{\"@type\":\"@builder.io/sdk:Element\",responsiveStyles:{large:{marginTop:\"10px\"}},component:{name:\"Text\",options:{text:\"<span>Enter your email</span>\"}}},{\"@type\":\"@builder.io/sdk:Element\",responsiveStyles:{large:{marginTop:\"10px\"}},component:{name:\"Form:Input\",options:{name:\"email\",placeholder:\"jane@doe.com\"}}},{\"@type\":\"@builder.io/sdk:Element\",responsiveStyles:{large:{marginTop:\"10px\"}},component:{name:\"Form:SubmitButton\",options:{text:\"Submit\"}}}]}),FormInputComponent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.render=function(){return react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"input\",__assign({key:_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing&&this.props.defaultValue?this.props.defaultValue:\"default-key\",placeholder:this.props.placeholder,type:this.props.type,name:this.props.name},void 0===this.props.value?{defaultValue:this.props.defaultValue}:{value:this.props.value},{required:this.props.required},this.props.attributes))},t}((react__WEBPACK_IMPORTED_MODULE_2___default().Component)),FormInput=withBuilder(FormInputComponent,{name:\"Form:Input\",image:\"https://cdn.builder.io/api/v1/image/assets%2FIsxPKMo2gPRRKeakUztj1D6uqed2%2Fad6f37889d9e40bbbbc72cdb5875d6ca\",inputs:[{name:\"type\",type:\"text\",enum:[\"text\",\"number\",\"email\",\"url\",\"checkbox\",\"radio\",\"range\",\"date\",\"datetime-local\",\"search\",\"tel\",\"time\",\"file\",\"month\",\"week\",\"password\",\"color\",\"hidden\"],defaultValue:\"text\"},{name:\"name\",type:\"string\",required:!0,helperText:'Every input in a form needs a unique name describing what it takes, e.g. \"email\"'},{name:\"placeholder\",type:\"string\",defaultValue:\"Hello there\",helperText:\"Text to display when there is no value\"},{name:\"defaultValue\",type:\"string\"},{name:\"value\",type:\"string\",advanced:!0},{name:\"required\",type:\"boolean\",helperText:\"Is this input required to be filled out to submit a form\",defaultValue:!1}],noWrap:!0,static:!0,defaultStyles:{paddingTop:\"10px\",paddingBottom:\"10px\",paddingLeft:\"10px\",paddingRight:\"10px\",borderRadius:\"3px\",borderWidth:\"1px\",borderStyle:\"solid\",borderColor:\"#ccc\"}}),FormSubmitButtonComponent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.render=function(){return react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"button\",__assign({type:\"submit\"},this.props.attributes),this.props.text)},t}((react__WEBPACK_IMPORTED_MODULE_2___default().Component)),FormSubmitButton=withBuilder(FormSubmitButtonComponent,{name:\"Form:SubmitButton\",image:\"https://cdn.builder.io/api/v1/image/assets%2FIsxPKMo2gPRRKeakUztj1D6uqed2%2Fdf2820ffed1f4349a94c40b3221f5b98\",defaultStyles:{appearance:\"none\",paddingTop:\"15px\",paddingBottom:\"15px\",paddingLeft:\"25px\",paddingRight:\"25px\",backgroundColor:\"#3898EC\",color:\"white\",borderRadius:\"4px\",cursor:\"pointer\"},inputs:[{name:\"text\",type:\"text\",defaultValue:\"Click me\"}],static:!0,noWrap:!0}),LabelComponent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.render=function(){return react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"label\",__assign({htmlFor:this.props.for},this.props.attributes),this.props.text&&react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"span\",{className:\"builder-label-text\",dangerouslySetInnerHTML:{__html:this.props.text}}),this.props.builderBlock&&this.props.builderBlock.children&&this.props.builderBlock.children.map((function(e){return react__WEBPACK_IMPORTED_MODULE_2___default().createElement(BuilderBlock$1,{key:e.id,block:e})})))},t}((react__WEBPACK_IMPORTED_MODULE_2___default().Component)),Label=withBuilder(LabelComponent,{name:\"Form:Label\",image:\"https://cdn.builder.io/api/v1/image/assets%2FIsxPKMo2gPRRKeakUztj1D6uqed2%2F9322342f04b545fb9a8091cd801dfb5b\",inputs:[{name:\"text\",type:\"html\",richText:!0,defaultValue:\"Label\"},{name:\"for\",type:\"text\",helperText:\"The name of the input this label is for\",advanced:!0}],noWrap:!0,static:!0,canHaveChildren:!0}),FormSelectComponent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.render=function(){var e=this.props.options;return react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"select\",__assign({value:this.props.value,key:_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing&&this.props.defaultValue?this.props.defaultValue:\"default-key\",defaultValue:this.props.defaultValue,name:this.props.name,required:this.props.required},this.props.attributes),e&&e.map((function(e){return react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"option\",{value:e.value},e.name||e.value)})))},t}((react__WEBPACK_IMPORTED_MODULE_2___default().Component)),FormSelect=withBuilder(FormSelectComponent,{name:\"Form:Select\",image:\"https://cdn.builder.io/api/v1/image/assets%2FIsxPKMo2gPRRKeakUztj1D6uqed2%2F83acca093fb24aaf94dee136e9a4b045\",defaultStyles:{alignSelf:\"flex-start\"},inputs:[{name:\"options\",type:\"list\",required:!0,subFields:[{name:\"value\",type:\"text\",required:!0},{name:\"name\",type:\"text\"}],defaultValue:[{value:\"option 1\"},{value:\"option 2\"}]},{name:\"name\",type:\"string\",required:!0,helperText:'Every select in a form needs a unique name describing what it gets, e.g. \"email\"'},{name:\"defaultValue\",type:\"string\"},{name:\"value\",type:\"string\",advanced:!0},{name:\"required\",type:\"boolean\",defaultValue:!1}],static:!0,noWrap:!0}),TextAreaComponent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.render=function(){return react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"textarea\",__assign({placeholder:this.props.placeholder,name:this.props.name,value:this.props.value,defaultValue:this.props.defaultValue,required:this.props.required},this.props.attributes))},t}((react__WEBPACK_IMPORTED_MODULE_2___default().Component)),TextArea=withBuilder(TextAreaComponent,{name:\"Form:TextArea\",image:\"https://cdn.builder.io/api/v1/image/assets%2FIsxPKMo2gPRRKeakUztj1D6uqed2%2Ff74a2f3de58c4c3e939204e5b6b8f6c3\",inputs:[{advanced:!0,name:\"value\",type:\"string\"},{name:\"name\",type:\"string\",required:!0,helperText:'Every input in a form needs a unique name describing what it gets, e.g. \"email\"'},{name:\"defaultValue\",type:\"string\"},{name:\"placeholder\",type:\"string\",defaultValue:\"Hello there\"},{name:\"required\",type:\"boolean\",defaultValue:!1}],defaultStyles:{paddingTop:\"10px\",paddingBottom:\"10px\",paddingLeft:\"10px\",paddingRight:\"10px\",borderRadius:\"3px\",borderWidth:\"1px\",borderStyle:\"solid\",borderColor:\"#ccc\"},static:!0,noWrap:!0}),ImgComponent=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.render=function(){var e=this.props.attributes||{};return react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"img\",__assign({},this.props.attributes,{src:this.props.image||e.src}))},t}((react__WEBPACK_IMPORTED_MODULE_2___default().Component)),Img=withBuilder(ImgComponent,{name:\"Raw:Img\",hideFromInsertMenu:!0,image:\"https://firebasestorage.googleapis.com/v0/b/builder-3b0a2.appspot.com/o/images%2Fbaseline-insert_photo-24px.svg?alt=media&token=4e5d0ef4-f5e8-4e57-b3a9-38d63a9b9dc4\",inputs:[{name:\"image\",bubble:!0,type:\"file\",allowedFileTypes:IMAGE_FILE_TYPES,required:!0}],noWrap:!0,static:!0}),RawText=function(e){var t=e.attributes||{};return react__WEBPACK_IMPORTED_MODULE_2__.createElement(\"span\",{className:(null==t?void 0:t.class)||(null==t?void 0:t.className),dangerouslySetInnerHTML:{__html:e.text||\"\"}})};_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.registerComponent(RawText,{name:\"Builder:RawText\",hideFromInsertMenu:!0,inputs:[{name:\"text\",bubble:!0,type:\"longText\",required:!0}]});var filterWithCustomTargetingScript='function filterWithCustomTargeting(e,t,n,r){var i={query:t,startDate:n,endDate:r},o=e.date&&new Date(e.date)||new Date;return!(i.startDate&&new Date(i.startDate)>o)&&(!(i.endDate&&new Date(i.endDate)<o)&&(!i.query||!i.query.length||i.query.every((function(t){return objectMatchesQuery(e,t)}))))}function isString(e){return\"string\"==typeof e}function isNumber(e){return\"number\"==typeof e}function objectMatchesQuery(e,t){return function(){var n=t.property,r=t.operator,i=t.value;if(t&&\"urlPath\"===t.property&&t.value&&\"string\"==typeof t.value&&\"/\"!==t.value&&t.value.endsWith(\"/\")&&(i=t.value.slice(0,-1)),!n||!r)return!0;if(Array.isArray(i))return\"isNot\"===r?i.every((function(t){return objectMatchesQuery(e,{property:n,operator:r,value:t})})):!!i.find((function(t){return objectMatchesQuery(e,{property:n,operator:r,value:t})}));var o=e[n];if(Array.isArray(o))return o.includes(i);switch(r){case\"is\":return o===i;case\"isNot\":return o!==i;case\"contains\":return(isString(o)||Array.isArray(o))&&o.includes(String(i));case\"startsWith\":return isString(o)&&o.startsWith(String(i));case\"endsWith\":return isString(o)&&o.endsWith(String(i));case\"greaterThan\":return isNumber(o)&&isNumber(i)&&o>i;case\"lessThan\":return isNumber(o)&&isNumber(i)&&o<i;case\"greaterThanOrEqualTo\":return isNumber(o)&&isNumber(i)&&o>=i;case\"lessThanOrEqualTo\":return isNumber(o)&&isNumber(i)&&o<=i}return!1}()}';function filterWithCustomTargeting(e,t,n,i){var r={query:t,startDate:n,endDate:i},o=e.date&&new Date(e.date)||new Date;return!(r.startDate&&new Date(r.startDate)>o)&&(!(r.endDate&&new Date(r.endDate)<o)&&(!r.query||!r.query.length||r.query.every((function(t){return objectMatchesQuery(e,t)}))))}function isString(e){return\"string\"==typeof e}function isNumber(e){return\"number\"==typeof e}function objectMatchesQuery(e,t){return function(){var n=t.property,i=t.operator,r=t.value;if(t&&\"urlPath\"===t.property&&t.value&&\"string\"==typeof t.value&&\"/\"!==t.value&&t.value.endsWith(\"/\")&&(r=t.value.slice(0,-1)),!n||!i)return!0;if(Array.isArray(r))return\"isNot\"===i?r.every((function(t){return objectMatchesQuery(e,{property:n,operator:i,value:t})})):!!r.find((function(t){return objectMatchesQuery(e,{property:n,operator:i,value:t})}));var o=e[n];if(Array.isArray(o))return o.includes(r);switch(i){case\"is\":return o===r;case\"isNot\":return o!==r;case\"contains\":return(isString(o)||Array.isArray(o))&&o.includes(String(r));case\"startsWith\":return isString(o)&&o.startsWith(String(r));case\"endsWith\":return isString(o)&&o.endsWith(String(r));case\"greaterThan\":return isNumber(o)&&isNumber(r)&&o>r;case\"lessThan\":return isNumber(o)&&isNumber(r)&&o<r;case\"greaterThanOrEqualTo\":return isNumber(o)&&isNumber(r)&&o>=r;case\"lessThanOrEqualTo\":return isNumber(o)&&isNumber(r)&&o<=r}return!1}()}function PersonalizationContainer(e){var t,n,i,r,o,a,s,l,u,d,c,p,f,m,h,v,g,b,y,_,S,x=Boolean(_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isBrowser&&(null===(t=window.__hydrated)||void 0===t?void 0:t[null===(n=e.builderBlock)||void 0===n?void 0:n.id])),B=(0,react__WEBPACK_IMPORTED_MODULE_2__.useRef)(null),k=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(x),w=k[0],C=k[1],E=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(0),R=E[0],T=E[1],I=(0,react__WEBPACK_IMPORTED_MODULE_2__.useContext)(BuilderStoreContext);if((0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((function(){var e;C(!0);var t=_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.builder.userAttributesChanged.subscribe((function(){T(R+1)})),n=[function(){return t.unsubscribe()}];if(!_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing&&!_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isPreviewing){var i=j[0];null===(e=B.current)||void 0===e||e.dispatchEvent(new CustomEvent(\"builder.variantLoaded\",{detail:{variant:i||\"default\",content:I.content},bubbles:!0}));var r=new IntersectionObserver((function(e){e.forEach((function(e){var t;e.isIntersecting&&(null===(t=B.current)||void 0===t||t.dispatchEvent(new CustomEvent(\"builder.variantDisplayed\",{detail:{variant:i||\"default\",content:I.content},bubbles:!0})))}))}));r.observe(B.current),n.push((function(){return r.disconnect()}))}return function(){n.forEach((function(e){return e()}))}}),[]),_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isServer)return react__WEBPACK_IMPORTED_MODULE_2___default().createElement((react__WEBPACK_IMPORTED_MODULE_2___default().Fragment),null,react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\",__assign({},e.attributes,{style:__assign({opacity:1,transition:\"opacity 0.2s ease-in-out\"},null===(i=e.attributes)||void 0===i?void 0:i.style),className:\"builder-personalization-container \".concat(e.attributes.className)}),null===(r=e.variants)||void 0===r?void 0:r.map((function(t,n){var i,r;return react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"template\",{key:n,\"data-variant-id\":(null===(i=e.builderBlock)||void 0===i?void 0:i.id)+n},react__WEBPACK_IMPORTED_MODULE_2___default().createElement(BuilderBlocks,{blocks:t.blocks,parentElementId:null===(r=e.builderBlock)||void 0===r?void 0:r.id,dataPath:\"component.options.variants.\".concat(n,\".blocks\"),child:!0}))})),react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"script\",{id:\"variants-script-\".concat(null===(o=e.builderBlock)||void 0===o?void 0:o.id),dangerouslySetInnerHTML:{__html:getPersonalizationScript(e.variants,(null===(a=e.builderBlock)||void 0===a?void 0:a.id)||\"none\",null===(s=e.builderState.state)||void 0===s?void 0:s.locale)}}),react__WEBPACK_IMPORTED_MODULE_2___default().createElement(BuilderBlocks,{blocks:null===(l=e.builderBlock)||void 0===l?void 0:l.children,parentElementId:null===(u=e.builderBlock)||void 0===u?void 0:u.id,dataPath:\"this.children\",child:!0})),react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"script\",{dangerouslySetInnerHTML:{__html:\"\\n         window.__hydrated = window.__hydrated || {};\\n         window.__hydrated['\".concat(null===(d=e.builderBlock)||void 0===d?void 0:d.id,\"'] = true;\\n        \").replace(/\\s+/g,\" \")}}));var j=(e.variants||[]).filter((function(t){var n;return filterWithCustomTargeting(__assign(__assign({},(null===(n=e.builderState.state)||void 0===n?void 0:n.locale)?{locale:e.builderState.state.locale}:{}),_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.builder.getUserAttributes()),t.query,t.startDate,t.endDate)}));return react__WEBPACK_IMPORTED_MODULE_2___default().createElement((react__WEBPACK_IMPORTED_MODULE_2___default().Fragment),null,react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"div\",__assign({ref:B},e.attributes,{style:__assign({opacity:w?1:0,transition:\"opacity 0.2s ease-in-out\"},null===(c=e.attributes)||void 0===c?void 0:c.style),className:\"builder-personalization-container \".concat(e.attributes.className,\" \").concat(w?\"\":\"builder-personalization-container-loading\")}),_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing&&\"number\"==typeof e.previewingIndex&&e.previewingIndex<((null===(p=e.variants)||void 0===p?void 0:p.length)||0)?react__WEBPACK_IMPORTED_MODULE_2___default().createElement(BuilderBlocks,{blocks:null===(m=null===(f=e.variants)||void 0===f?void 0:f[e.previewingIndex])||void 0===m?void 0:m.blocks,parentElementId:null===(h=e.builderBlock)||void 0===h?void 0:h.id,dataPath:\"component.options.variants.\".concat(e.previewingIndex,\".blocks\"),child:!0}):_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing&&\"number\"!=typeof e.previewingIndex||!w||!j.length?react__WEBPACK_IMPORTED_MODULE_2___default().createElement(BuilderBlocks,{blocks:null===(v=e.builderBlock)||void 0===v?void 0:v.children,parentElementId:null===(g=e.builderBlock)||void 0===g?void 0:g.id,dataPath:\"this.children\",child:!0}):react__WEBPACK_IMPORTED_MODULE_2___default().createElement(BuilderBlocks,{blocks:null===(b=j[0])||void 0===b?void 0:b.blocks,parentElementId:null===(y=e.builderBlock)||void 0===y?void 0:y.id,dataPath:\"component.options.variants.\".concat(null===(_=e.variants)||void 0===_?void 0:_.indexOf(j[0]),\".blocks\"),child:!0})),react__WEBPACK_IMPORTED_MODULE_2___default().createElement(\"script\",{dangerouslySetInnerHTML:{__html:\"\\n         window.__hydrated = window.__hydrated || {};\\n         window.__hydrated['\".concat(null===(S=e.builderBlock)||void 0===S?void 0:S.id,\"'] = true;\\n        \").replace(/\\s+/g,\" \")}}))}function getPersonalizationScript(e,t,n){return\"\\n      (function() {\\n        function getCookie(name) {\\n          var nameEQ = name + \\\"=\\\";\\n          var ca = document.cookie.split(';');\\n          for(var i=0;i < ca.length;i++) {\\n              var c = ca[i];\\n              while (c.charAt(0)==' ') c = c.substring(1,c.length);\\n              if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);\\n          }\\n          return null;\\n        }\\n        function removeVariants() {\\n          variants.forEach(function (template, index) {\\n            document.querySelector('template[data-variant-id=\\\"' + \\\"\".concat(t,\"\\\" + index + '\\\"]').remove();\\n          });\\n          document.getElementById('variants-script-\").concat(t,\"').remove();\\n        }\\n\\n        var attributes = JSON.parse(getCookie(\\\"\").concat(_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.attributesCookieName,'\") || \"{}\");\\n        ').concat(n?'attributes.locale = \"'.concat(n,'\";'):\"\",\"\\n        var variants = \").concat(JSON.stringify(null==e?void 0:e.map((function(e){return{query:e.query,startDate:e.startDate,endDate:e.endDate}}))),\";\\n        var winningVariantIndex = variants.findIndex(function(variant) {\\n          return filterWithCustomTargeting(\\n            attributes,\\n            variant.query,\\n            variant.startDate,\\n            variant.endDate\\n          );\\n        });\\n        var isDebug = location.href.includes('builder.debug=true');\\n        if (isDebug) {\\n          console.debug('PersonalizationContainer', {\\n            attributes: attributes,\\n            variants: variants,\\n            winningVariantIndex: winningVariantIndex,\\n            });\\n        }\\n        if (winningVariantIndex !== -1) {\\n          var winningVariant = document.querySelector('template[data-variant-id=\\\"' + \\\"\").concat(t,\"\\\" + winningVariantIndex + '\\\"]');\\n          if (winningVariant) {\\n            var parentNode = winningVariant.parentNode;\\n            var newParent = parentNode.cloneNode(false);\\n            newParent.appendChild(winningVariant.content.firstChild);\\n            parentNode.parentNode.replaceChild(newParent, parentNode);\\n            if (isDebug) {\\n              console.debug('PersonalizationContainer', 'Winning variant Replaced:', winningVariant);\\n            }\\n          }\\n        } else if (variants.length > 0) {\\n          removeVariants();\\n        }\\n        \").concat(filterWithCustomTargetingScript,\"\\n      })();\\n    \").replace(/\\s+/g,\" \")}function useIsPreviewing(){var e=(0,react__WEBPACK_IMPORTED_MODULE_2__.useState)(!1),t=e[0],n=e[1];return (0,react__WEBPACK_IMPORTED_MODULE_2__.useEffect)((function(){(_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isEditing||_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isPreviewing)&&n(!0)}),[]),t}_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.registerComponent(PersonalizationContainer,{name:\"PersonalizationContainer\",noWrap:!0,friendlyName:\"Dynamic Container\",image:\"https://cdn.builder.io/api/v1/image/assets%2FYJIGb4i01jvw0SRdL5Bt%2F37229ed30d8c41dfb10b8cca1992053a\",canHaveChildren:!0,inputs:[{name:\"variants\",defaultValue:[],behavior:\"personalizationVariantList\",type:\"list\",subFields:[{name:\"name\",type:\"text\",localized:!1},{name:\"query\",friendlyName:\"Targeting rules\",type:\"BuilderQuery\",defaultValue:[],localized:!1},{name:\"startDate\",type:\"date\",localized:!1},{name:\"endDate\",type:\"date\",localized:!1},{name:\"blocks\",type:\"UiBlocks\",hideFromUI:!0,defaultValue:[]}]}]}),_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.isReact=!0,_builder_io_sdk__WEBPACK_IMPORTED_MODULE_0__.Builder.sdkInfo={name:\"react\",version:SDK_VERSION};\n//# sourceMappingURL=builder-react.es5.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGJ1aWxkZXIuaW8vcmVhY3QvZGlzdC9idWlsZGVyLXJlYWN0LmVzNS5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXVWLDJCQUEyQixxRkFBcUYsZ0NBQWdDLDJJQUEySSxPQUFPLGdDQUFnQyw2Q0FBNkMsYUFBYSxnQ0FBZ0MsY0FBYyxnQkFBZ0Isc0VBQXNFLFFBQVEsd0JBQXdCLHdIQUF3SCxhQUFhLG1CQUFtQix5RkFBeUYsd0JBQXdCLDJDQUEyQyxpQ0FBaUMsSUFBSSx1RkFBdUYsU0FBUyx5QkFBeUIscUJBQXFCLFNBQVMsc0ZBQXNGLDZEQUE2RCxRQUFRLHNDQUFzQyxXQUFXLDZGQUE2RixTQUFTLDZCQUE2QixtRkFBbUYsNkZBQTZGLDBCQUEwQixLQUFLLG9EQUFvRCw4Q0FBOEMseUJBQXlCLDhGQUE4Riw0QkFBNEIsMENBQTBDLGNBQWMsSUFBSSxhQUFhLFNBQVMsTUFBTSxjQUFjLElBQUksY0FBYyxTQUFTLE1BQU0sY0FBYyxNQUFNLGlFQUFpRSxLQUFLLGNBQWMsK0JBQStCLEdBQUcsMEJBQTBCLGVBQWUsd0JBQXdCLHFCQUFxQixZQUFZLGlCQUFpQixVQUFVLGlDQUFpQywyREFBMkQsWUFBWSxJQUFJLGNBQWMsbUJBQW1CLG1CQUFtQiw0REFBNEQsS0FBSyx1QkFBdUIsS0FBSyxrSEFBa0gseUNBQXlDLGtCQUFrQixNQUFNLHlCQUF5QixvQkFBb0IsOEJBQThCLFNBQVMsa0NBQWtDLFNBQVMsMEVBQTBFLElBQUksU0FBUyx5Q0FBeUMsYUFBYSxNQUFNLDJCQUEyQixpQkFBaUIsTUFBTSxvQkFBb0IsMkJBQTJCLE1BQU0sK0JBQStCLFNBQVMsY0FBYyxTQUFTLFlBQVksUUFBUSxNQUFNLHFCQUFxQixPQUFPLGdDQUFnQyxVQUFVLDhCQUE4QixvREFBb0QsSUFBSSxxRUFBcUUsa0RBQWtELG9EQUFvRCwwQkFBMEIscUNBQXFD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OERBQThELElBQUksNkJBQTZCLDJCQUEyQixNQUFNLCtDQUFRLG1CQUFtQixPQUFPLGdEQUFTLGFBQWEsQ0FBQyxvREFBTyxZQUFZLG9EQUFPLHNCQUFzQixRQUFRLG9EQUFPLDZDQUE2QyxvTkFBb04sOEZBQThGLHFDQUFxQyxFQUFFLDZGQUE2RixFQUFFLDBDQUEwQyxFQUFFLHdDQUF3QyxFQUFFLDREQUE0RCxFQUFFLEVBQUUsRUFBRSxvREFBTyxZQUFZLG9EQUFPLFVBQVUsa0NBQWtsQjtBQUM5dGxJIiwic291cmNlcyI6WyIvVXNlcnMvYXYvRGVza3RvcC9hdnN0dWRpby9hcnRpY2hva2UvYnVpbGRlci1hcHAvbm9kZV9tb2R1bGVzL0BidWlsZGVyLmlvL3JlYWN0L2Rpc3QvYnVpbGRlci1yZWFjdC5lczUuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0e0J1aWxkZXIsYnVpbGRlcixTdWJzY3JpcHRpb24sQmVoYXZpb3JTdWJqZWN0fWZyb21cIkBidWlsZGVyLmlvL3Nka1wiO2V4cG9ydHtCdWlsZGVyLGJ1aWxkZXIsYnVpbGRlciBhcyBkZWZhdWx0fWZyb21cIkBidWlsZGVyLmlvL3Nka1wiO2ltcG9ydHtqc3gsQ2xhc3NOYW1lcyxjc3N9ZnJvbVwiQGVtb3Rpb24vY29yZVwiO2ltcG9ydCphcyBSZWFjdCBmcm9tXCJyZWFjdFwiO2ltcG9ydCBSZWFjdF9fZGVmYXVsdCx7dXNlQ29udGV4dCx1c2VSZWYsdXNlU3RhdGUsdXNlRWZmZWN0fWZyb21cInJlYWN0XCI7aW1wb3J0IFJlYWN0RE9NIGZyb21cInJlYWN0LWRvbVwiO2ltcG9ydCBoYXNoIGZyb21cImhhc2gtc3VtXCI7dmFyIFNES19WRVJTSU9OPVwiOC4wLjRcIixfYTtcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiYobnVsbD09PShfYT13aW5kb3cucGFyZW50KXx8dm9pZCAwPT09X2F8fF9hLnBvc3RNZXNzYWdlKHt0eXBlOlwiYnVpbGRlci5pc1JlYWN0U2RrXCIsZGF0YTp7dmFsdWU6ITAsc3VwcG9ydHNQYXRjaFVwZGF0ZXM6XCJ2NFwiLHN1cHBvcnRzQ3VzdG9tQnJlYWtwb2ludHM6ITAsc3VwcG9ydHNHbG9iYWxTeW1ib2xzOiEwLGJsb2NrTGV2ZWxQZXJzb25hbGl6YXRpb246ITAsdmVyc2lvbjpTREtfVkVSU0lPTn19LFwiKlwiKSk7dmFyIGV4dGVuZFN0YXRpY3M9ZnVuY3Rpb24oZSx0KXtyZXR1cm4oZXh0ZW5kU3RhdGljcz1PYmplY3Quc2V0UHJvdG90eXBlT2Z8fHtfX3Byb3RvX186W119aW5zdGFuY2VvZiBBcnJheSYmZnVuY3Rpb24oZSx0KXtlLl9fcHJvdG9fXz10fXx8ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4gaW4gdClPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwodCxuKSYmKGVbbl09dFtuXSl9KShlLHQpfTtmdW5jdGlvbiBfX2V4dGVuZHMoZSx0KXtpZihcImZ1bmN0aW9uXCIhPXR5cGVvZiB0JiZudWxsIT09dCl0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2xhc3MgZXh0ZW5kcyB2YWx1ZSBcIitTdHJpbmcodCkrXCIgaXMgbm90IGEgY29uc3RydWN0b3Igb3IgbnVsbFwiKTtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWV4dGVuZFN0YXRpY3MoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihuLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgbil9dmFyIF9fYXNzaWduPWZ1bmN0aW9uKCl7cmV0dXJuKF9fYXNzaWduPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPTEsaT1hcmd1bWVudHMubGVuZ3RoO248aTtuKyspZm9yKHZhciByIGluIHQ9YXJndW1lbnRzW25dKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LHIpJiYoZVtyXT10W3JdKTtyZXR1cm4gZX0pLmFwcGx5KHRoaXMsYXJndW1lbnRzKX07ZnVuY3Rpb24gX19yZXN0KGUsdCl7dmFyIG49e307Zm9yKHZhciBpIGluIGUpT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsaSkmJnQuaW5kZXhPZihpKTwwJiYobltpXT1lW2ldKTtpZihudWxsIT1lJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKXt2YXIgcj0wO2ZvcihpPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7cjxpLmxlbmd0aDtyKyspdC5pbmRleE9mKGlbcl0pPDAmJk9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUuY2FsbChlLGlbcl0pJiYobltpW3JdXT1lW2lbcl1dKX1yZXR1cm4gbn1mdW5jdGlvbiBfX2RlY29yYXRlKGUsdCxuLGkpe3ZhciByLG89YXJndW1lbnRzLmxlbmd0aCxhPW88Mz90Om51bGw9PT1pP2k9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LG4pOmk7aWYoXCJvYmplY3RcIj09dHlwZW9mIFJlZmxlY3QmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFJlZmxlY3QuZGVjb3JhdGUpYT1SZWZsZWN0LmRlY29yYXRlKGUsdCxuLGkpO2Vsc2UgZm9yKHZhciBzPWUubGVuZ3RoLTE7cz49MDtzLS0pKHI9ZVtzXSkmJihhPShvPDM/cihhKTpvPjM/cih0LG4sYSk6cih0LG4pKXx8YSk7cmV0dXJuIG8+MyYmYSYmT2JqZWN0LmRlZmluZVByb3BlcnR5KHQsbixhKSxhfWZ1bmN0aW9uIF9fbWV0YWRhdGEoZSx0KXtpZihcIm9iamVjdFwiPT10eXBlb2YgUmVmbGVjdCYmXCJmdW5jdGlvblwiPT10eXBlb2YgUmVmbGVjdC5tZXRhZGF0YSlyZXR1cm4gUmVmbGVjdC5tZXRhZGF0YShlLHQpfWZ1bmN0aW9uIF9fYXdhaXRlcihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKSgoZnVuY3Rpb24ocixvKXtmdW5jdGlvbiBhKGUpe3RyeXtsKGkubmV4dChlKSl9Y2F0Y2goZSl7byhlKX19ZnVuY3Rpb24gcyhlKXt0cnl7bChpLnRocm93KGUpKX1jYXRjaChlKXtvKGUpfX1mdW5jdGlvbiBsKGUpe3ZhciB0O2UuZG9uZT9yKGUudmFsdWUpOih0PWUudmFsdWUsdCBpbnN0YW5jZW9mIG4/dDpuZXcgbigoZnVuY3Rpb24oZSl7ZSh0KX0pKSkudGhlbihhLHMpfWwoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pKX1mdW5jdGlvbiBfX2dlbmVyYXRvcihlLHQpe3ZhciBuLGkscixvLGE9e2xhYmVsOjAsc2VudDpmdW5jdGlvbigpe2lmKDEmclswXSl0aHJvdyByWzFdO3JldHVybiByWzFdfSx0cnlzOltdLG9wczpbXX07cmV0dXJuIG89e25leHQ6cygwKSx0aHJvdzpzKDEpLHJldHVybjpzKDIpfSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJihvW1N5bWJvbC5pdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLG87ZnVuY3Rpb24gcyhzKXtyZXR1cm4gZnVuY3Rpb24obCl7cmV0dXJuIGZ1bmN0aW9uKHMpe2lmKG4pdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7Zm9yKDtvJiYobz0wLHNbMF0mJihhPTApKSxhOyl0cnl7aWYobj0xLGkmJihyPTImc1swXT9pLnJldHVybjpzWzBdP2kudGhyb3d8fCgocj1pLnJldHVybikmJnIuY2FsbChpKSwwKTppLm5leHQpJiYhKHI9ci5jYWxsKGksc1sxXSkpLmRvbmUpcmV0dXJuIHI7c3dpdGNoKGk9MCxyJiYocz1bMiZzWzBdLHIudmFsdWVdKSxzWzBdKXtjYXNlIDA6Y2FzZSAxOnI9czticmVhaztjYXNlIDQ6cmV0dXJuIGEubGFiZWwrKyx7dmFsdWU6c1sxXSxkb25lOiExfTtjYXNlIDU6YS5sYWJlbCsrLGk9c1sxXSxzPVswXTtjb250aW51ZTtjYXNlIDc6cz1hLm9wcy5wb3AoKSxhLnRyeXMucG9wKCk7Y29udGludWU7ZGVmYXVsdDppZighKHI9YS50cnlzLChyPXIubGVuZ3RoPjAmJnJbci5sZW5ndGgtMV0pfHw2IT09c1swXSYmMiE9PXNbMF0pKXthPTA7Y29udGludWV9aWYoMz09PXNbMF0mJighcnx8c1sxXT5yWzBdJiZzWzFdPHJbM10pKXthLmxhYmVsPXNbMV07YnJlYWt9aWYoNj09PXNbMF0mJmEubGFiZWw8clsxXSl7YS5sYWJlbD1yWzFdLHI9czticmVha31pZihyJiZhLmxhYmVsPHJbMl0pe2EubGFiZWw9clsyXSxhLm9wcy5wdXNoKHMpO2JyZWFrfXJbMl0mJmEub3BzLnBvcCgpLGEudHJ5cy5wb3AoKTtjb250aW51ZX1zPXQuY2FsbChlLGEpfWNhdGNoKGUpe3M9WzYsZV0saT0wfWZpbmFsbHl7bj1yPTB9aWYoNSZzWzBdKXRocm93IHNbMV07cmV0dXJue3ZhbHVlOnNbMF0/c1sxXTp2b2lkIDAsZG9uZTohMH19KFtzLGxdKX19fWZ1bmN0aW9uIF9fc3ByZWFkQXJyYXkoZSx0LG4pe2lmKG58fDI9PT1hcmd1bWVudHMubGVuZ3RoKWZvcih2YXIgaSxyPTAsbz10Lmxlbmd0aDtyPG87cisrKSFpJiZyIGluIHR8fChpfHwoaT1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0LDAscikpLGlbcl09dFtyXSk7cmV0dXJuIGUuY29uY2F0KGl8fEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHQpKX1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTdXBwcmVzc2VkRXJyb3ImJlN1cHByZXNzZWRFcnJvcjt2YXIgZmFzdENsb25lPWZ1bmN0aW9uKGUpe3JldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUpKX0sb21pdCQyPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl0W24tMV09YXJndW1lbnRzW25dO2Zvcih2YXIgaT1PYmplY3QuYXNzaWduKHt9LGUpLHI9MCxvPXQ7cjxvLmxlbmd0aDtyKyspe3ZhciBhPW9bcl07ZGVsZXRlIGlbYV19cmV0dXJuIGl9LHNpemVOYW1lcz1bXCJ4c21hbGxcIixcInNtYWxsXCIsXCJtZWRpdW1cIixcImxhcmdlXCJdLHNpemVzPXt4c21hbGw6e21pbjowLGRlZmF1bHQ6MCxtYXg6MH0sc21hbGw6e21pbjozMjAsZGVmYXVsdDozMjEsbWF4OjY0MH0sbWVkaXVtOnttaW46NjQxLGRlZmF1bHQ6NjQyLG1heDo5OTF9LGxhcmdlOnttaW46OTkwLGRlZmF1bHQ6OTkxLG1heDoxMjAwfSxnZXRXaWR0aEZvclNpemU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXNbZV0uZGVmYXVsdH0sZ2V0U2l6ZUZvcldpZHRoOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wLG49c2l6ZU5hbWVzO3Q8bi5sZW5ndGg7dCsrKXt2YXIgaT1uW3RdO2lmKGU8PXRoaXNbaV0ubWF4KXJldHVybiBpfXJldHVyblwibGFyZ2VcIn19LGdldFNpemVzRm9yQnJlYWtwb2ludHM9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zbWFsbCxuPWUubWVkaXVtLGk9X19hc3NpZ24oX19hc3NpZ24oe30sc2l6ZXMpLGZhc3RDbG9uZShzaXplcykpO2lmKCF0fHwhbilyZXR1cm4gaTt2YXIgcj1NYXRoLmZsb29yKHQvMik7aS5zbWFsbD17bWF4OnQsbWluOnIsZGVmYXVsdDpyKzF9O3ZhciBvPWkuc21hbGwubWF4KzE7aS5tZWRpdW09e21heDpuLG1pbjpvLGRlZmF1bHQ6bysxfTt2YXIgYT1pLm1lZGl1bS5tYXgrMTtyZXR1cm4gaS5sYXJnZT17bWF4OjJlMyxtaW46YSxkZWZhdWx0OmErMX0saX0sc2V0PWZ1bmN0aW9uKGUsdCxuKXtpZihPYmplY3QoZSkhPT1lKXJldHVybiBlO3ZhciBpPUFycmF5LmlzQXJyYXkodCk/dDp0LnRvU3RyaW5nKCkubWF0Y2goL1teLltcXF1dKy9nKTtyZXR1cm4gaS5zbGljZSgwLC0xKS5yZWR1Y2UoKGZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gT2JqZWN0KGVbdF0pPT09ZVt0XT9lW3RdOmVbdF09TWF0aC5hYnMoTnVtYmVyKGlbbisxXSkpPj4wPT0raVtuKzFdP1tdOnt9fSksZSlbaVtpLmxlbmd0aC0xXV09bixlfSxub29wPWZ1bmN0aW9uKCl7cmV0dXJuIG51bGx9LHNhZmVEeW5hbWljUmVxdWlyZTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZihudWxsPT09Z2xvYmFsVGhpc3x8dm9pZCAwPT09Z2xvYmFsVGhpcz92b2lkIDA6Z2xvYmFsVGhpcy5yZXF1aXJlKXx8QnVpbGRlci5pc1NlcnZlciYmXCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSl0cnl7c2FmZUR5bmFtaWNSZXF1aXJlPWV2YWwoXCJyZXF1aXJlXCIpfWNhdGNoKGUpe3NhZmVEeW5hbWljUmVxdWlyZT0obnVsbD09PWdsb2JhbFRoaXN8fHZvaWQgMD09PWdsb2JhbFRoaXM/dm9pZCAwOmdsb2JhbFRoaXMucmVxdWlyZSk/Z2xvYmFsVGhpcy5yZXF1aXJlOm5vb3B9ZnVuY3Rpb24gaXNEZWJ1Zygpe3JldHVybiBCb29sZWFuKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBwcm9jZXNzJiZ2b2lkIDAhPT1wcm9jZXNzLmVudiYmcHJvY2Vzcy5lbnYuREVCVUcpfWZ1bmN0aW9uIGlzTm9kZVJ1bnRpbWUoKXt2YXIgZTtyZXR1cm5cInVuZGVmaW5lZFwiIT10eXBlb2YgcHJvY2VzcyYmQm9vbGVhbihudWxsPT09KGU9bnVsbD09PXByb2Nlc3N8fHZvaWQgMD09PXByb2Nlc3M/dm9pZCAwOnByb2Nlc3MudmVyc2lvbnMpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLm5vZGUpfW51bGwhPXNhZmVEeW5hbWljUmVxdWlyZXx8KHNhZmVEeW5hbWljUmVxdWlyZT1ub29wKTt2YXIgc2hvdWxkRm9yY2VCcm93c2VyUnVudGltZUluTm9kZT1mdW5jdGlvbigpe3ZhciBlO2lmKCFpc05vZGVSdW50aW1lKCkpcmV0dXJuITE7dmFyIHQ9XCJhcm02NFwiPT09cHJvY2Vzcy5hcmNoLG49cHJvY2Vzcy52ZXJzaW9uLnN0YXJ0c1dpdGgoXCJ2MjBcIiksaT1udWxsPT09KGU9cHJvY2Vzcy5lbnYuTk9ERV9PUFRJT05TKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5pbmNsdWRlcyhcIi0tbm8tbm9kZS1zbmFwc2hvdFwiKTtyZXR1cm4hKCF0fHwhbnx8aSkmJihjb25zb2xlLmxvZyhcIlNraXBwaW5nIHVzYWdlIG9mIGBpc29sYXRlZC12bWAgdG8gYXZvaWQgY3Jhc2hlcyBpbiBOb2RlIHYyMCBvbiBhbiBhcm02NCBtYWNoaW5lLlxcbiAgICBJZiB5b3Ugd291bGQgbGlrZSB0byB1c2UgdGhlIGBpc29sYXRlZC12bWAgcGFja2FnZSBvbiB0aGlzIG1hY2hpbmUsIHBsZWFzZSBwcm92aWRlIHRoZSBgTk9ERV9PUFRJT05TPS0tbm8tbm9kZS1zbmFwc2hvdGAgY29uZmlnIHRvIHlvdXIgTm9kZSBwcm9jZXNzLlxcbiAgICBTZWUgaHR0cHM6Ly9naXRodWIuY29tL0J1aWxkZXJJTy9idWlsZGVyL2Jsb2IvbWFpbi9wYWNrYWdlcy9yZWFjdC9SRUFETUUubWQjbm9kZS12MjAtLW0xLW1hY3MtYXBwbGUtc2lsaWNvbi1zdXBwb3J0IGZvciBtb3JlIGluZm9ybWF0aW9uLlxcbiAgICBcIiksITApfSxmbkNhY2hlPXt9LGFwaT1mdW5jdGlvbihlKXtyZXR1cm4gYnVpbGRlcn07ZnVuY3Rpb24gc3RyaW5nVG9GdW5jdGlvbihlLHQsbixpKXtpZih2b2lkIDA9PT10JiYodD0hMCksIWV8fCFlLnRyaW0oKSlyZXR1cm4gZnVuY3Rpb24oKXt9O3ZhciByPWUrXCI6XCIrdDtpZihmbkNhY2hlW3JdKXJldHVybiBmbkNhY2hlW3JdO3ZhciBvPXQmJiEoZS5pbmNsdWRlcyhcIjtcIil8fGUuaW5jbHVkZXMoXCIgcmV0dXJuIFwiKXx8ZS50cmltKCkuc3RhcnRzV2l0aChcInJldHVybiBcIikpfHxlLnRyaW0oKS5zdGFydHNXaXRoKFwiYnVpbGRlci5ydW5cIiksYT1mdW5jdGlvbigpe307dHJ5e0J1aWxkZXIuaXNCcm93c2VyJiYoYT1uZXcgRnVuY3Rpb24oXCJzdGF0ZVwiLFwiZXZlbnRcIixcImJsb2NrXCIsXCJidWlsZGVyXCIsXCJEZXZpY2VcIixcInVwZGF0ZVwiLFwiQnVpbGRlclwiLFwiY29udGV4dFwiLFwiXFxuICAgICAgICAgIHZhciBuYW1lcyA9IFtcXG4gICAgICAgICAgICAnc3RhdGUnLFxcbiAgICAgICAgICAgICdldmVudCcsXFxuICAgICAgICAgICAgJ2Jsb2NrJyxcXG4gICAgICAgICAgICAnYnVpbGRlcicsXFxuICAgICAgICAgICAgJ0RldmljZScsXFxuICAgICAgICAgICAgJ3VwZGF0ZScsXFxuICAgICAgICAgICAgJ0J1aWxkZXInLFxcbiAgICAgICAgICAgICdjb250ZXh0J1xcbiAgICAgICAgICBdO1xcbiAgICAgICAgICB2YXIgcm9vdFN0YXRlID0gc3RhdGU7XFxuICAgICAgICAgIGlmICh0eXBlb2YgUHJveHkgIT09ICd1bmRlZmluZWQnKSB7XFxuICAgICAgICAgICAgcm9vdFN0YXRlID0gbmV3IFByb3h5KHJvb3RTdGF0ZSwge1xcbiAgICAgICAgICAgICAgc2V0OiBmdW5jdGlvbiAoKSB7XFxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcXG4gICAgICAgICAgICAgIH0sXFxuICAgICAgICAgICAgICBnZXQ6IGZ1bmN0aW9uICh0YXJnZXQsIGtleSkge1xcbiAgICAgICAgICAgICAgICBpZiAobmFtZXMuaW5jbHVkZXMoa2V5KSkge1xcbiAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFtrZXldO1xcbiAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgIH0pO1xcbiAgICAgICAgICB9XFxuICAgICAgICAgIC8qIEFsaWFzICovXFxuICAgICAgICAgIHZhciBjdHggPSBjb250ZXh0O1xcbiAgICAgICAgICB2YXIgbG9nID0gY29uc29sZS5sb2cuYmluZChjb25zb2xlKTtcXG4gICAgICAgICAgd2l0aCAocm9vdFN0YXRlKSB7XFxuICAgICAgICAgICAgXCIuY29uY2F0KG8/XCJyZXR1cm4gKFwiLmNvbmNhdChlLFwiKTtcIik6ZSxcIjtcXG4gICAgICAgICAgfVxcbiAgICAgICAgXCIpKSl9Y2F0Y2godCl7biYmbi5wdXNoKHQpO3ZhciBzPXQmJnQubWVzc2FnZTtzJiZcInN0cmluZ1wiPT10eXBlb2YgcyYmaSYmLTE9PT1pLmluZGV4T2YocykmJmkucHVzaChzKSxCdWlsZGVyLmlzQnJvd3NlciYmY29uc29sZS53YXJuKFwiRnVuY3Rpb24gY29tcGlsZSBlcnJvciBpbiBcIi5jb25jYXQoZSksdCl9dmFyIGw9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W10saT0wO2k8YXJndW1lbnRzLmxlbmd0aDtpKyspdFtpXT1hcmd1bWVudHNbaV07dHJ5e2lmKEJ1aWxkZXIuaXNCcm93c2VyfHxzaG91bGRGb3JjZUJyb3dzZXJSdW50aW1lSW5Ob2RlKCkpcmV0dXJuIGEuYXBwbHkodm9pZCAwLHQpO3ZhciByPWdldElzb2xhdGVDb250ZXh0KCkscz1zYWZlRHluYW1pY1JlcXVpcmUoXCJpc29sYXRlZC12bVwiKSxsPXIuZXZhbENsb3N1cmVTeW5jKG1ha2VGbihlLG8pLHQubWFwKChmdW5jdGlvbihlLHQpe3JldHVyblwib2JqZWN0XCI9PXR5cGVvZiBlP25ldyBzLlJlZmVyZW5jZSh0PT09aW5kZXhPZkJ1aWxkZXJJbnN0YW5jZT9fX2Fzc2lnbihfX2Fzc2lnbih7fSxlKSx7Z2V0VXNlckF0dHJpYnV0ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gZS5nZXRVc2VyQXR0cmlidXRlcyhcIlwiKX19KTplKTpudWxsfSkpKTt0cnl7dmFyIHU9SlNPTi5wYXJzZShsKTtyZXR1cm4gdX1jYXRjaChlKXtyZXR1cm4gbH19Y2F0Y2godCl7cmV0dXJuIEJ1aWxkZXIuaXNCcm93c2VyP2NvbnNvbGUud2FybihcIkJ1aWxkZXIgY3VzdG9tIGNvZGUgZXJyb3I6XCIsdC5tZXNzYWdlfHx0LFwiaW5cIixlLHQuc3RhY2t8fHQpOmlzRGVidWcoKSYmY29uc29sZS5kZWJ1ZyhcIkJ1aWxkZXIgY3VzdG9tIGNvZGUgZXJyb3I6XCIsdC5tZXNzYWdlfHx0LFwiaW5cIixlLHQuc3RhY2t8fHQpLG4mJm4ucHVzaCh0KSxudWxsfX07cmV0dXJuIEJ1aWxkZXIuaXNCcm93c2VyJiYoZm5DYWNoZVtyXT1sKSxsfXZhciBpbmRleE9mQnVpbGRlckluc3RhbmNlPTMsbWFrZUZuPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1ufHxbXCJzdGF0ZVwiLFwiZXZlbnRcIixcImJsb2NrXCIsXCJidWlsZGVyXCIsXCJEZXZpY2VcIixcInVwZGF0ZVwiLFwiQnVpbGRlclwiLFwiY29udGV4dFwiXTtyZXR1cm5cIlxcblwiLmNvbmNhdChcIlxcbiAgdmFyIHJlZlRvUHJveHkgPSAob2JqKSA9PiB7XFxuICAgIGlmICh0eXBlb2Ygb2JqICE9PSAnb2JqZWN0JyB8fCBvYmogPT09IG51bGwpIHtcXG4gICAgICByZXR1cm4gb2JqO1xcbiAgICB9XFxuICAgIHJldHVybiBuZXcgUHJveHkoe30sIHtcXG4gICAgICAgIGdldCh0YXJnZXQsIGtleSkge1xcbiAgICAgICAgICAgIGlmIChrZXkgPT09ICdjb3B5U3luYycpIHtcXG4gICAgICAgICAgICAgIHJldHVybiAoKSA9PiBvYmouY29weVN5bmMoKTtcXG4gICAgICAgICAgICB9XFxuICAgICAgICAgICAgY29uc3QgdmFsID0gb2JqLmdldFN5bmMoa2V5KTtcXG4gICAgICAgICAgICBpZiAodHlwZW9mIHZhbD8uY29weVN5bmMgPT09ICdmdW5jdGlvbicpIHtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIEpTT04ucGFyc2Uoc3RyaW5naWZ5KHZhbCkpO1xcbiAgICAgICAgICAgIH1cXG4gICAgICAgICAgICByZXR1cm4gdmFsO1xcbiAgICAgICAgfSxcXG4gICAgICAgIHNldCh0YXJnZXQsIGtleSwgdmFsdWUpIHtcXG4gICAgICAgICAgICBvYmouc2V0U3luYyhrZXksIHZhbHVlKTtcXG4gICAgICAgIH0sXFxuICAgICAgICBkZWxldGVQcm9wZXJ0eSh0YXJnZXQsIGtleSkge1xcbiAgICAgICAgICAgIG9iai5kZWxldGVTeW5jKGtleSk7XFxuICAgICAgICB9XFxuICAgICAgfSlcXG4gIH1cXG5cIixcIlxcblwiKS5jb25jYXQoXCJcXG4gICAgdmFyIHN0cmluZ2lmeSA9ICh2YWwpID0+IHtcXG4gICAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ29iamVjdCcgJiYgdmFsICE9PSBudWxsKSB7XFxuICAgICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkodmFsLmNvcHlTeW5jID8gdmFsLmNvcHlTeW5jKCkgOiB2YWwpO1xcbiAgICAgIH1cXG4gICAgICByZXR1cm4gdmFsO1xcbiAgICB9XFxuICBcIixcIlxcblwiKS5jb25jYXQoaS5tYXAoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuXCJ2YXIgXCIuY29uY2F0KGUsXCIgPSByZWZUb1Byb3h5KCRcIikuY29uY2F0KHQsXCIpO1wiKX0pKS5qb2luKFwiXFxuXCIpKS5jb25jYXQoXCJcXG5cIi5jb25jYXQoaS5pbmNsdWRlcyhcImNvbnRleHRcIik/XCJ2YXIgY3R4ID0gY29udGV4dDtcIjpcIlwiLFwiXFxudmFyIGVuZFJlc3VsdCA9IGZ1bmN0aW9uKCkge1xcbiAgXCIpLmNvbmNhdCh0P1wicmV0dXJuIChcIi5jb25jYXQoZSxcIik7XCIpOmUsXCI7XFxufTtcXG5cXG5yZXR1cm4gc3RyaW5naWZ5KGVuZFJlc3VsdCgpKTtcXG5cIikpfSxnZXRJc29sYXRlQ29udGV4dD1mdW5jdGlvbigpe3ZhciBlPUJ1aWxkZXIuc2VydmVyQ29udGV4dDtlfHwoZT1uZXcoc2FmZUR5bmFtaWNSZXF1aXJlKFwiaXNvbGF0ZWQtdm1cIikuSXNvbGF0ZSkoe21lbW9yeUxpbWl0OjEyOH0pLmNyZWF0ZUNvbnRleHRTeW5jKCksQnVpbGRlci5zZXRTZXJ2ZXJDb250ZXh0KGUpKTt2YXIgdD1lLmdsb2JhbDtyZXR1cm4gdC5zZXRTeW5jKFwiZ2xvYmFsXCIsdC5kZXJlZkludG8oKSksdC5zZXRTeW5jKFwibG9nXCIsKGZ1bmN0aW9uKCl7Zm9yKHZhciBlPVtdLHQ9MDt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKWVbdF09YXJndW1lbnRzW3RdO2lzRGVidWcoKSYmY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSxlKX0pKSxlfSxpc1Byb21pc2U9ZnVuY3Rpb24oZSl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgZS50aGVufSxpc1JlcXVlc3RJbmZvPWZ1bmN0aW9uKGUpe3JldHVybiFpc1Byb21pc2UoZSl9LEJ1aWxkZXJBc3luY1JlcXVlc3RzQ29udGV4dD1SZWFjdF9fZGVmYXVsdC5jcmVhdGVDb250ZXh0KHtyZXF1ZXN0czpbXSxlcnJvcnM6W10sbG9nczpbXX0pLEJ1aWxkZXJTdG9yZUNvbnRleHQ9UmVhY3RfX2RlZmF1bHQuY3JlYXRlQ29udGV4dCh7c3RhdGU6e30scm9vdFN0YXRlOnt9LGNvbnRlbnQ6e30sY29udGV4dDp7fSx1cGRhdGU6ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGx9fSksYXBwbHlQYXRjaFdpdGhNaW5pbWFsTXV0YXRpb25DaGFpbj1mdW5jdGlvbihlLHQsbil7aWYodm9pZCAwPT09biYmKG49ITEpLE9iamVjdChlKSE9PWUpcmV0dXJuIGU7dmFyIGk9dC5wYXRoLHI9dC5vcCxvPXQudmFsdWUsYT1pLnNwbGl0KC9cXC8vKTtcIlwiPT09YVswXSYmYS5zaGlmdCgpO2Zvcih2YXIgcz1uP2U6X19hc3NpZ24oe30sZSksbD1zLHU9MDt1PGEubGVuZ3RoO3UrKyl7dmFyIGQ9dT09PWEubGVuZ3RoLTEsYz1hW3VdO2lmKGQpe2lmKFwicmVwbGFjZVwiPT09cilsW2NdPW87ZWxzZSBpZihcImFkZFwiPT09cil7dmFyIHA9TnVtYmVyKGMpO0FycmF5LmlzQXJyYXkobCk/XCItXCI9PT1jP2wucHVzaChvKTpsLnNwbGljZShwLDAsbyk6bFtjXT1vfWVsc2UgaWYoXCJyZW1vdmVcIj09PXIpe3A9TnVtYmVyKGMpO0FycmF5LmlzQXJyYXkobCk/bC5zcGxpY2UocCwxKTpkZWxldGUgbFtjXX19ZWxzZXt2YXIgZj1hW3UrMV0sbT1PYmplY3QobFtjXSk9PT1sW2NdP2xbY106U3RyaW5nKE51bWJlcihmKSk9PT1mP1tdOnt9O2w9bFtjXT1BcnJheS5pc0FycmF5KG0pP19fc3ByZWFkQXJyYXkoW10sbSwhMCk6X19hc3NpZ24oe30sbSl9fXJldHVybiBzfSxodG1sRXNjYXBlPWZ1bmN0aW9uKGUpe3JldHVybiBlLnJlcGxhY2UoLyYvZyxcIiZhbXA7XCIpLnJlcGxhY2UoLzwvZyxcIiZsdDtcIikucmVwbGFjZSgvPi9nLFwiJmd0O1wiKS5yZXBsYWNlKC9cIi9nLFwiJnF1b3Q7XCIpfSxibG9ja1RvSHRtbFN0cmluZz1mdW5jdGlvbihlKXt2YXIgdDtyZXR1cm5cIjxcIi5jb25jYXQoaHRtbEVzY2FwZShlLnRhZ05hbWV8fFwiZGl2XCIpLCcgXFxuICAgIGNsYXNzPVwiYnVpbGRlci1ibG9jayAnKS5jb25jYXQoZS5pZCxcIiBcIikuY29uY2F0KGUuY2xhc3N8fFwiXCIsJ1wiXFxuICAgIGJ1aWxkZXItaWQ9XCInKS5jb25jYXQoZS5pZCwnXCJcXG4gICcpLmNvbmNhdChPYmplY3Qua2V5cyhlLnByb3BlcnRpZXN8fHt9KS5tYXAoKGZ1bmN0aW9uKHQpe3JldHVyblwiXCIuY29uY2F0KGh0bWxFc2NhcGUodCksJz1cIicpLmNvbmNhdChodG1sRXNjYXBlKGUucHJvcGVydGllc1t0XSksJ1wiJyl9KSkuam9pbihcIiBcIiksXCJcXG4gID5cIikuY29uY2F0KFwiVGV4dFwiPT09KG51bGw9PT0odD1udWxsPT1lP3ZvaWQgMDplLmNvbXBvbmVudCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQubmFtZSk/ZS5jb21wb25lbnQub3B0aW9ucy50ZXh0OmUuY2hpbGRyZW4/ZS5jaGlsZHJlbi5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBibG9ja1RvSHRtbFN0cmluZyhlKX0pKS5qb2luKFwiXCIpOlwiXCIsXCI8L1wiKS5jb25jYXQoZS50YWdOYW1lfHxcImRpdlwiLFwiPlwiKS5yZXBsYWNlKC9cXHMrL2csXCIgXCIpfSxMaW5rPWZ1bmN0aW9uKGUpe3JldHVybiBSZWFjdF9fZGVmYXVsdC5jcmVhdGVFbGVtZW50KEJ1aWxkZXJTdG9yZUNvbnRleHQuQ29uc3VtZXIsbnVsbCwoZnVuY3Rpb24odCl7cmV0dXJuIHQucmVuZGVyTGluaz90LnJlbmRlckxpbmsoZSk6UmVhY3RfX2RlZmF1bHQuY3JlYXRlRWxlbWVudChcImFcIixfX2Fzc2lnbih7fSxlKSl9KSl9O2Z1bmN0aW9uIHRyYXZlcnNlKGUsdCxuLGkscil7dm9pZCAwPT09biYmKG49bnVsbCksdm9pZCAwPT09aSYmKGk9bnVsbCksdm9pZCAwPT09ciYmKHI9bmV3IFdlYWtTZXQpLG51bGwhPWUmJlwib2JqZWN0XCI9PXR5cGVvZiBlP3IuaGFzKGUpfHwoci5hZGQoZSksQXJyYXkuaXNBcnJheShlKT9lLmZvckVhY2goKGZ1bmN0aW9uKG4saSl7dChuLChmdW5jdGlvbih0KXtlW2ldPXR9KSksdHJhdmVyc2Uobix0LGUsaSxyKX0pKTpPYmplY3QuZW50cmllcyhlKS5mb3JFYWNoKChmdW5jdGlvbihuKXt2YXIgaT1uWzBdLG89blsxXTt0KG8sKGZ1bmN0aW9uKHQpe2VbaV09dH0pKSx0cmF2ZXJzZShvLHQsZSxpLHIpfSkpKTp0KGUsKGZ1bmN0aW9uKGUpe251bGwhPT1uJiZudWxsIT09aSYmKG5baV09ZSl9KSl9dmFyIGlzTG9jYWxpemVkRmllbGQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwib2JqZWN0XCI9PXR5cGVvZiBlJiZcIkBidWlsZGVyLmlvL2NvcmU6TG9jYWxpemVkVmFsdWVcIj09PWVbXCJAdHlwZVwiXX0sY29udGFpbnNMb2NhbGl6ZWRWYWx1ZXM9ZnVuY3Rpb24oZSl7aWYoIWV8fCFPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlKS5sZW5ndGgpcmV0dXJuITE7dmFyIHQ9ITE7cmV0dXJuIHRyYXZlcnNlKGUsKGZ1bmN0aW9uKGUpe2lzTG9jYWxpemVkRmllbGQoZSkmJih0PSEwKX0pKSx0fSxleHRyYWN0TG9jYWxpemVkVmFsdWVzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGUpLmxlbmd0aD8odHJhdmVyc2UoZSwoZnVuY3Rpb24oZSxuKXt2YXIgaTtpc0xvY2FsaXplZEZpZWxkKGUpJiZuKG51bGwhPT0oaT1lW3RdKSYmdm9pZCAwIT09aT9pOnZvaWQgMCl9KSksZSk6e319LGNhbWVsQ2FzZVRvS2ViYWJDYXNlPWZ1bmN0aW9uKGUpe3JldHVybiBlP2UucmVwbGFjZSgvKFtBLVpdKS9nLChmdW5jdGlvbihlKXtyZXR1cm5cIi1cIi5jb25jYXQoZVswXS50b0xvd2VyQ2FzZSgpKX0pKTpcIlwifSxrZWJhYkNhc2VUb0NhbWVsQ2FzZT1mdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZSYmKGU9XCJcIiksZS5yZXBsYWNlKC8tKFthLXpdKS9nLChmdW5jdGlvbihlKXtyZXR1cm4gZVsxXS50b1VwcGVyQ2FzZSgpfSkpfSxEZXZpY2U9e2Rlc2t0b3A6MCx0YWJsZXQ6MSxtb2JpbGU6Mn07ZnVuY3Rpb24gZGVlcENsb25lV2l0aENvbmRpdGlvbnMoZSl7aWYobnVsbD09PWV8fFwib2JqZWN0XCIhPXR5cGVvZiBlKXJldHVybiBlO2lmKEFycmF5LmlzQXJyYXkoZSkpcmV0dXJuIGUubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gZGVlcENsb25lV2l0aENvbmRpdGlvbnMoZSl9KSk7aWYoXCJAYnVpbGRlci5pby9zZGs6RWxlbWVudFwiPT09ZVtcIkB0eXBlXCJdKXJldHVybiBlO3ZhciB0PXt9O2Zvcih2YXIgbiBpbiBlKVwibWV0YVwiIT09biYmT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsbikmJih0W25dPWRlZXBDbG9uZVdpdGhDb25kaXRpb25zKGVbbl0pKTtyZXR1cm4gdH12YXIgdm9pZEVsZW1lbnRzPW5ldyBTZXQoW1wiYXJlYVwiLFwiYmFzZVwiLFwiYnJcIixcImNvbFwiLFwiZW1iZWRcIixcImhyXCIsXCJpbWdcIixcImlucHV0XCIsXCJsaW5rXCIsXCJtZXRhXCIsXCJwYXJhbVwiLFwic291cmNlXCIsXCJ0cmFja1wiLFwid2JyXCIsXCJ0ZXh0YXJlYVwiXSksbGFzdD1mdW5jdGlvbihlKXtyZXR1cm4gZVtlLmxlbmd0aC0xXX07ZnVuY3Rpb24gb21pdCQxKGUsdCl7Zm9yKHZhciBuPU9iamVjdC5hc3NpZ24oe30sZSksaT0wLHI9dDtpPHIubGVuZ3RoO2krKyl7ZGVsZXRlIG5bcltpXV19cmV0dXJuIG59dmFyIGNzc0Nhc2U9ZnVuY3Rpb24oZSl7aWYoIWUpcmV0dXJuIGU7dmFyIHQ9Y2FtZWxDYXNlVG9LZWJhYkNhc2UoZSk7cmV0dXJuIGVbMF09PT1lWzBdLnRvVXBwZXJDYXNlKCkmJih0PVwiLVwiK3QpLHR9O2Z1bmN0aW9uIGNhcGl0YWxpemUoZSl7aWYoZSlyZXR1cm4gZVswXS50b1VwcGVyQ2FzZSgpK2Uuc2xpY2UoMSl9dmFyIEJ1aWxkZXJCbG9jayQxPWZ1bmN0aW9uKF9zdXBlcil7ZnVuY3Rpb24gQnVpbGRlckJsb2NrKCl7dmFyIF90aGlzPW51bGwhPT1fc3VwZXImJl9zdXBlci5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7cmV0dXJuIF90aGlzLmh5ZHJhdGVkPSExLF90aGlzLnN0YXRlPXtoYXNFcnJvcjohMSx1cGRhdGVzOjB9LF90aGlzLnByaXZhdGVTdGF0ZT17c3RhdGU6e30scm9vdFN0YXRlOnt9LGNvbnRleHQ6e30sdXBkYXRlOmZ1bmN0aW9uKCl7fX0sX3RoaXMub25XaW5kb3dNZXNzYWdlPWZ1bmN0aW9uKGV2ZW50KXt2YXIgbWVzc2FnZT1ldmVudC5kYXRhO2lmKG1lc3NhZ2Upc3dpdGNoKG1lc3NhZ2UudHlwZSl7Y2FzZVwiYnVpbGRlci5zZWxlY3Rpb25DaGFuZ2VcIjp2YXIgZGF0YT1tZXNzYWdlLmRhdGE7aWYoIWRhdGEpYnJlYWs7dmFyIHNlbGVjdGlvbj1kYXRhLnNlbGVjdGlvbixpZD1fdGhpcy5ibG9jayYmX3RoaXMuYmxvY2suaWQ7aWQmJkFycmF5LmlzQXJyYXkoc2VsZWN0aW9uKSYmc2VsZWN0aW9uLmluZGV4T2YoaWQpPi0xJiZzZXRUaW1lb3V0KChmdW5jdGlvbigpe3dpbmRvdy4kYmxvY2s9X3RoaXMsd2luZG93LiRibG9ja3N8fCh3aW5kb3cuJGJsb2Nrcz1bXSksd2luZG93LiRibG9ja3MucHVzaChfdGhpcyl9KSk7YnJlYWs7Y2FzZVwiYnVpbGRlci5wYXRjaFVwZGF0ZXNcIjp2YXIgZGF0YT1tZXNzYWdlLmRhdGE7aWYoIWRhdGF8fCFkYXRhLmRhdGEpYnJlYWs7dmFyIHBhdGNoZXM9ZGF0YS5kYXRhW190aGlzLmJsb2NrLmlkXTtpZighcGF0Y2hlcylyZXR1cm47bG9jYXRpb24uaHJlZi5pbmNsdWRlcyhcImJ1aWxkZXIuZGVidWc9dHJ1ZVwiKSYmZXZhbChcImRlYnVnZ2VyXCIpO2Zvcih2YXIgX2k9MCxwYXRjaGVzXzE9cGF0Y2hlcztfaTxwYXRjaGVzXzEubGVuZ3RoO19pKyspe3ZhciBwYXRjaD1wYXRjaGVzXzFbX2ldO2FwcGx5UGF0Y2hXaXRoTWluaW1hbE11dGF0aW9uQ2hhaW4oX3RoaXMucHJvcHMuYmxvY2sscGF0Y2gsITApfV90aGlzLnNldFN0YXRlKHt1cGRhdGVzOl90aGlzLnN0YXRlLnVwZGF0ZXMrMX0pfX0sX3RoaXN9cmV0dXJuIF9fZXh0ZW5kcyhCdWlsZGVyQmxvY2ssX3N1cGVyKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoQnVpbGRlckJsb2NrLnByb3RvdHlwZSxcInN0b3JlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByaXZhdGVTdGF0ZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxCdWlsZGVyQmxvY2suZ2V0RGVyaXZlZFN0YXRlRnJvbUVycm9yPWZ1bmN0aW9uKGUpe3JldHVybntoYXNFcnJvcjohMH19LEJ1aWxkZXJCbG9jay5wcm90b3R5cGUuY29tcG9uZW50RGlkQ2F0Y2g9ZnVuY3Rpb24oZSx0KXtjb25zb2xlLmVycm9yKFwiQnVpbGRlciBibG9jayBlcnJvcjpcIixlLHQpfSxCdWlsZGVyQmxvY2sucHJvdG90eXBlLnN0cmluZ1RvRnVuY3Rpb249ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwPT09dCYmKHQ9ITApLHN0cmluZ1RvRnVuY3Rpb24oZSx0LHRoaXMuX2Vycm9ycyx0aGlzLl9sb2dzKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1aWxkZXJCbG9jay5wcm90b3R5cGUsXCJibG9ja1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm9wcy5ibG9ja30sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxCdWlsZGVyQmxvY2sucHJvdG90eXBlLmVtb3Rpb25Dc3M9ZnVuY3Rpb24oZSl7dmFyIHQsbixpLHIsbyxhPXRoaXMuYmxvY2sscz1hLmFuaW1hdGlvbnMmJmEuYW5pbWF0aW9uc1swXTtpZihzJiZcImhvdmVyXCIhPT1zLnRyaWdnZXIpe3ZhciBsPXMmJnMuc3RlcHMmJnMuc3RlcHNbMF0sdT1sJiZsLnN0eWxlczt1JiYobz11KX12YXIgZD1zaXplTmFtZXMuc2xpY2UoKS5yZXZlcnNlKCksYz17fTtpZihlKWZvcih2YXIgcD0wLGY9ZDtwPGYubGVuZ3RoO3ArKyl7dmFyIG09ZltwXTtpZihcImxhcmdlXCI9PT1tKXRoaXMucHJvcHMuZW1haWxNb2RlfHwoY1tcIiYuYnVpbGRlci1ibG9ja1wiXT1PYmplY3QuYXNzaWduKHt9LGVbbV0sbykpO2Vsc2V7dmFyIGg9Z2V0U2l6ZXNGb3JCcmVha3BvaW50cygobnVsbD09PShuPW51bGw9PT0odD10aGlzLnByaXZhdGVTdGF0ZS5jb250ZXh0LmJ1aWxkZXJDb250ZW50KXx8dm9pZCAwPT09dD92b2lkIDA6dC5tZXRhKXx8dm9pZCAwPT09bj92b2lkIDA6bi5icmVha3BvaW50cyl8fHt9KTtjW1wiQG1lZGlhIG9ubHkgc2NyZWVuIGFuZCAobWF4LXdpZHRoOiBcIi5jb25jYXQoaFttXS5tYXgsXCJweClcIildPXtcIiYuYnVpbGRlci1ibG9ja1wiOmVbbV19fX12YXIgdj1hLmFuaW1hdGlvbnMmJmEuYW5pbWF0aW9ucy5maW5kKChmdW5jdGlvbihlKXtyZXR1cm5cImhvdmVyXCI9PT1lLnRyaWdnZXJ9KSk7cmV0dXJuIHYmJihjW1wiOmhvdmVyXCJdPShudWxsPT09KHI9bnVsbD09PShpPXYuc3RlcHMpfHx2b2lkIDA9PT1pP3ZvaWQgMDppWzFdKXx8dm9pZCAwPT09cj92b2lkIDA6ci5zdHlsZXMpfHx7fSxjLnRyYW5zaXRpb249XCJhbGwgXCIuY29uY2F0KHYuZHVyYXRpb24sXCJzIFwiKS5jb25jYXQoY2FtZWxDYXNlVG9LZWJhYkNhc2Uodi5lYXNpbmcpKSx2LmRlbGF5JiYoYy50cmFuc2l0aW9uRGVsYXk9di5kZWxheStcInNcIikpLGN9LEJ1aWxkZXJCbG9jay5wcm90b3R5cGUuZXZhbD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5zdHJpbmdUb0Z1bmN0aW9uKGUpKHRoaXMucHJpdmF0ZVN0YXRlLnN0YXRlLHZvaWQgMCx0aGlzLmJsb2NrLGJ1aWxkZXIsRGV2aWNlLHRoaXMucHJpdmF0ZVN0YXRlLnVwZGF0ZSxCdWlsZGVyLHRoaXMucHJpdmF0ZVN0YXRlLmNvbnRleHQpfSxCdWlsZGVyQmxvY2sucHJvdG90eXBlLmNvbXBvbmVudFdpbGxVbm1vdW50PWZ1bmN0aW9uKCl7QnVpbGRlci5pc0VkaXRpbmcmJnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsdGhpcy5vbldpbmRvd01lc3NhZ2UpfSxCdWlsZGVyQmxvY2sucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50PWZ1bmN0aW9uKCl7dmFyIGUsdD10aGlzO3RoaXMuaHlkcmF0ZWQ9ITA7dmFyIG49dGhpcy5ibG9jayxpPW4mJm4uYW5pbWF0aW9ucztpZihCdWlsZGVyLmlzRWRpdGluZyYmYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIix0aGlzLm9uV2luZG93TWVzc2FnZSksaSl7dmFyIHI9e2FuaW1hdGlvbnM6ZmFzdENsb25lKGkpfTtpZihuLmJpbmRpbmdzKWZvcih2YXIgbyBpbiBuLmJpbmRpbmdzKWlmKChudWxsPT09KGU9by50cmltKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5jYWxsKG8pKSYmby5zdGFydHNXaXRoKFwiYW5pbWF0aW9ucy5cIikpe3ZhciBhPXRoaXMuc3RyaW5nVG9GdW5jdGlvbihuLmJpbmRpbmdzW29dKTt2b2lkIDAhPT1hJiZzZXQocixvLGEodGhpcy5wcml2YXRlU3RhdGUuc3RhdGUsbnVsbCxuLGJ1aWxkZXIsbnVsbCxudWxsLEJ1aWxkZXIsdGhpcy5wcml2YXRlU3RhdGUuY29udGV4dCkpfUJ1aWxkZXIuYW5pbWF0b3IuYmluZEFuaW1hdGlvbnMoci5hbmltYXRpb25zLmZpbHRlcigoZnVuY3Rpb24oZSl7cmV0dXJuXCJob3ZlclwiIT09ZS50cmlnZ2VyfSkpLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LGUpLHtlbGVtZW50SWQ6dC5ibG9jay5pZH0pfSkpKX19LEJ1aWxkZXJCbG9jay5wcm90b3R5cGUuZ2V0RWxlbWVudD1mdW5jdGlvbihlLHQpe3ZhciBuLGkscixvLGEscyxsPXRoaXM7dm9pZCAwPT09ZSYmKGU9MCksdm9pZCAwPT09dCYmKHQ9dGhpcy5wcml2YXRlU3RhdGUuc3RhdGUpO3ZhciB1PXRoaXMucHJvcHM7dS5jaGlsZCx1LmZpZWxkTmFtZTt2YXIgZCxjPXRoaXMuYmxvY2sscD0oYy50YWdOYW1lfHxcImRpdlwiKS50b0xvd2VyQ2FzZSgpO2lmKFwidGVtcGxhdGVcIj09PXApe3ZhciBmPWMuY2hpbGRyZW4/Yy5jaGlsZHJlbi5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBibG9ja1RvSHRtbFN0cmluZyhlKX0pKS5qb2luKFwiIFwiKTpcIlwiO3JldHVybiBjb25zb2xlLmRlYnVnKFwidGVtcGxhdGUgaHRtbFwiLGYpLGpzeChcInRlbXBsYXRlXCIsX19hc3NpZ24oe30sYy5wcm9wZXJ0aWVzLHtkYW5nZXJvdXNseVNldElubmVySFRNTDp7X19odG1sOmZ9fSkpfXZhciBtPWMuY29tcG9uZW50JiYoYy5jb21wb25lbnQubmFtZXx8Yy5jb21wb25lbnQuY29tcG9uZW50KSxoPW51bGw7Yy5jb21wb25lbnQmJiFjLmNvbXBvbmVudC5jbGFzcyYmKGMuY29tcG9uZW50JiZjLmNvbXBvbmVudC50YWc/ZD1jLmNvbXBvbmVudC50YWc6KGg9QnVpbGRlci5jb21wb25lbnRzLmZpbmQoKGZ1bmN0aW9uKGUpe3JldHVybiBlLm5hbWU9PT1tfSkpfHxudWxsKSYmaC5jbGFzcz9kPWguY2xhc3M6aCYmaC50YWc/ZD1oLnRhZzoobnVsbD09bT92b2lkIDA6bS5zdGFydHNXaXRoKFwiQnVpbGRlcjpcIikpP2NvbnNvbGUud2FybihcIk1pc3NpbmcgQGJ1aWxkZXIuaW8vd2lkZ2V0cyBpbnN0YWxsYXRpb24sIHBsZWFzZSBpbnN0YWxsIGFuZCBpbXBvcnQgQGJ1aWxkZXIuaW8vd2lkZ2V0cyB0byB1c2UgXCIuY29uY2F0KG0uc3BsaXQoXCI6XCIpWzFdLFwiIGluIHlvdXIgY29udGVudCwgbW9yZSBpbmZvIGhlcmU6IGh0dHBzOi8vZ2l0aHViLmNvbS9CdWlsZGVySU8vYnVpbGRlci90cmVlL21haW4vcGFja2FnZXMvd2lkZ2V0c1wiKSk6bSYmY29uc29sZS53YXJuKFwiTWlzc2luZyByZWdpc3RyYXRpb24gZm9yIFwiLmNvbmNhdChtLFwiLCBoYXZlIHlvdSBpbmNsdWRlZCB0aGUgcmVnaXN0cmF0aW9uIGluIHlvdXIgYnVuZGxlP1wiKSkpO3ZhciB2PV9fYXNzaWduKF9fYXNzaWduKHt9LGMucHJvcGVydGllcykse3N0eWxlOnt9LHJlc3BvbnNpdmVTdHlsZXM6ZmFzdENsb25lKGMucmVzcG9uc2l2ZVN0eWxlc3x8e30pfSk7aWYodj1fX2Fzc2lnbihfX2Fzc2lnbih7fSx2LnByb3BlcnRpZXMpLHYpLGMuY29tcG9uZW50JiYodi5jb21wb25lbnQ9ZGVlcENsb25lV2l0aENvbmRpdGlvbnMoYy5jb21wb25lbnQpKSxjLmJpbmRpbmdzKWZvcih2YXIgZyBpbiBjLmJpbmRpbmdzKWlmKG51bGw9PT0oaT1nLnRyaW0pfHx2b2lkIDA9PT1pP3ZvaWQgMDppLmNhbGwoZykpe3ZhciBiPXRoaXMuc3RyaW5nVG9GdW5jdGlvbihjLmJpbmRpbmdzW2ddKTtzZXQodixnLGIodCxudWxsLGMsYXBpKCksRGV2aWNlLG51bGwsQnVpbGRlcix0aGlzLnByaXZhdGVTdGF0ZS5jb250ZXh0KSl9aWYodi5oaWRlKXJldHVybiBudWxsO2lmKGRlbGV0ZSB2LmhpZGUsKFwic2hvd1wiaW4gdnx8Yy5iaW5kaW5ncyYmYy5iaW5kaW5ncy5zaG93KSYmIXYuc2hvdylyZXR1cm4gbnVsbDtpZihkZWxldGUgdi5zaG93LGMuYWN0aW9ucyl7dmFyIHk9ZnVuY3Rpb24oZSl7aWYoIShudWxsPT09KHI9ZS50cmltKXx8dm9pZCAwPT09cj92b2lkIDA6ci5jYWxsKGUpKSlyZXR1cm5cImNvbnRpbnVlXCI7dmFyIG49Yy5hY3Rpb25zW2VdO3ZbXCJvblwiK2NhcGl0YWxpemUoZSldPWZ1bmN0aW9uKGUpe3ZhciBpPXQ7cmV0dXJuXCJ1bmRlZmluZWRcIiE9dHlwZW9mIFByb3h5JiYoaT1uZXcgUHJveHkodCx7c2V0OmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZVt0XT1uLGwucHJpdmF0ZVN0YXRlLnJvb3RTdGF0ZVt0XT1uLCEwfX0pKSxsLnN0cmluZ1RvRnVuY3Rpb24obiwhMSkoaSxlLGwuYmxvY2ssYnVpbGRlcixEZXZpY2UsbC5wcml2YXRlU3RhdGUudXBkYXRlLEJ1aWxkZXIsbC5wcml2YXRlU3RhdGUuY29udGV4dCl9fTtmb3IodmFyIGcgaW4gYy5hY3Rpb25zKXkoZyl9dmFyIF89KHYuY29tcG9uZW50fHx2Lm9wdGlvbnMpJiZfX2Fzc2lnbihfX2Fzc2lnbih7fSx2Lm9wdGlvbnMpLHYuY29tcG9uZW50Lm9wdGlvbnN8fHYuY29tcG9uZW50LmRhdGEpO2NvbnRhaW5zTG9jYWxpemVkVmFsdWVzKF8pJiYodGhpcy5wcml2YXRlU3RhdGUuc3RhdGUubG9jYWxlfHxjb25zb2xlLndhcm4oXCJbQnVpbGRlci5pb10gSW4gb3JkZXIgdG8gdXNlIGxvY2FsaXplZCBmaWVsZHMgaW4gQnVpbGRlciwgeW91IG11c3QgcGFzcyBhIGxvY2FsZSBwcm9wIHRvIHRoZSBCdWlsZGVyQ29tcG9uZW50IG9yIHRvIG9wdGlvbnMgb2JqZWN0IHdoaWxlIGZldGNoaW5nIHRoZSBjb250ZW50IHRvIHJlc29sdmUgbG9jYWxpemVkIGZpZWxkcy4gTGVhcm4gbW9yZTogaHR0cHM6Ly93d3cuYnVpbGRlci5pby9jL2RvY3MvbG9jYWxpemF0aW9uLWlubGluZSN0YXJnZXRpbmctYW5kLWlubGluZS1sb2NhbGl6YXRpb25cIiksXz1leHRyYWN0TG9jYWxpemVkVmFsdWVzKF8sbnVsbCE9PShvPXRoaXMucHJpdmF0ZVN0YXRlLnN0YXRlLmxvY2FsZSkmJnZvaWQgMCE9PW8/bzpcIkRlZmF1bHRcIikpO3ZhciBTPXZvaWRFbGVtZW50cy5oYXMocCkseD1oJiYoaC5mcmFnbWVudHx8aC5ub1dyYXApLEI9KG51bGw9PT0oYT12LmF0dHIpfHx2b2lkIDA9PT1hP3ZvaWQgMDphLnN0eWxlKXx8KFwic3RyaW5nXCI9PXR5cGVvZiB2LnN0eWxlP3Yuc3R5bGU6XCJcIil8fFwiXCI7aWYoXCJzdHJpbmdcIj09dHlwZW9mIEIpe1wib2JqZWN0XCIhPXR5cGVvZiB2LnN0eWxlJiYodi5zdHlsZT17fSk7Zm9yKHZhciBrPTAsdz1CLnNwbGl0KFwiO1wiKTtrPHcubGVuZ3RoO2srKyl7dmFyIEM9d1trXS5zcGxpdChcIjpcIik7aWYoIUMubGVuZ3RoKXJldHVybjtnPUNbMF0sYj1DWzFdO2cmJihDLmxlbmd0aD4yJiYoYj1DLnNsaWNlKDEpLmpvaW4oXCI6XCIpKSx2LnN0eWxlW2tlYmFiQ2FzZVRvQ2FtZWxDYXNlKGcpXT1iKX19dmFyIEU9X19hc3NpZ24oX19hc3NpZ24oX19hc3NpZ24oe30sb21pdCQxKHYsW1wiY2xhc3NcIixcImNvbXBvbmVudFwiLFwiYXR0clwiLFwicmVzcG9uc2l2ZVN0eWxlc1wiXSkpLCgobj17fSlbXCJzdHJpbmdcIiE9dHlwZW9mIHB8fHAuaW5jbHVkZXMoXCItXCIpP1wiY2xhc3NcIjpcImNsYXNzTmFtZVwiXT1cImJ1aWxkZXItYmxvY2sgXCIuY29uY2F0KHRoaXMuaWQpLmNvbmNhdChjLmNsYXNzP1wiIFwiLmNvbmNhdChjLmNsYXNzKTpcIlwiKS5jb25jYXQoIWMuY29tcG9uZW50fHxbXCJJbWFnZVwiLFwiVmlkZW9cIixcIkJhbm5lclwiXS5pbmRleE9mKG0pPi0xP1wiXCI6XCIgYnVpbGRlci1oYXMtY29tcG9uZW50XCIpKyh2LmNsYXNzP1wiIFwiK3YuY2xhc3M6XCJcIikrKHRoaXMuaHlkcmF0ZWQmJkJ1aWxkZXIuaXNFZGl0aW5nJiYobnVsbD09PShzPXRoaXMucHJpdmF0ZVN0YXRlLnN0YXRlLl9zcGFjZXIpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLnBhcmVudCk9PT1jLmlkP1wiIGJ1aWxkZXItc3BhY2VyLXBhcmVudFwiOlwiXCIpLG4ua2V5PXRoaXMuaWQrZSxuW1wiYnVpbGRlci1pZFwiXT10aGlzLmlkLG4pKSwwIT09ZSYme1wiYnVpbGRlci1pbmRleFwiOmV9KTtCdWlsZGVyLmlzRWRpdGluZyYmdGhpcy5oeWRyYXRlZCYmKEVbXCJidWlsZGVyLWlubGluZS1zdHlsZXNcIl09di5hdHRyJiZ2LmF0dHIuc3R5bGU/T2JqZWN0LmtleXModi5zdHlsZSkucmVkdWNlKChmdW5jdGlvbihlLHQpe3JldHVybihlP1wiXCIuY29uY2F0KGUsXCI7XCIpOlwiXCIpK1wiXCIuY29uY2F0KGNzc0Nhc2UodCksXCI6XCIpLmNvbmNhdCh2LnN0eWxlW3RdLFwiO1wiKX0pLFwiXCIpOlwiXCIpLChFLnByb3BlcnRpZXMmJkUucHJvcGVydGllcy5ocmVmfHxFLmhyZWYpJiZcImRpdlwiPT09cCYmKHA9XCJhXCIpLFwiYVwiPT09cCYmKHA9TGluayk7dmFyIFI9Yy5jaGlsZHJlbnx8RS5jaGlsZHJlbnx8W107cmV0dXJuIGpzeChSZWFjdF9fZGVmYXVsdC5GcmFnbWVudCxudWxsLGpzeChDbGFzc05hbWVzLG51bGwsKGZ1bmN0aW9uKGUpe3ZhciB0PWUuY3NzO2lmKGUuY3gsIWwucHJvcHMuZW1haWxNb2RlKXt2YXIgbj1cIiBcIit0KGwuZW1vdGlvbkNzcyh2LnJlc3BvbnNpdmVTdHlsZXMpKTtFLmNsYXNzJiYoRS5jbGFzcys9biksRS5jbGFzc05hbWUmJihFLmNsYXNzTmFtZSs9bil9cmV0dXJuIGpzeChCdWlsZGVyQXN5bmNSZXF1ZXN0c0NvbnRleHQuQ29uc3VtZXIsbnVsbCwoZnVuY3Rpb24oZSl7cmV0dXJuIGwuX2FzeW5jUmVxdWVzdHM9ZSYmZS5yZXF1ZXN0cyxsLl9lcnJvcnM9ZSYmZS5lcnJvcnMsbC5fbG9ncz1lJiZlLmxvZ3MsUz9qc3gocCxfX2Fzc2lnbih7fSxFKSk6ZCYmKHh8fGwucHJvcHMuZW1haWxNb2RlKT9qc3goZCxfX2Fzc2lnbih7fSxfLHthdHRyaWJ1dGVzOkUsYnVpbGRlckJsb2NrOmMsYnVpbGRlclN0YXRlOmwucHJpdmF0ZVN0YXRlfSkpOmpzeChwLF9fYXNzaWduKHt9LEUpLGQmJmpzeChkLF9fYXNzaWduKHtidWlsZGVyU3RhdGU6bC5wcml2YXRlU3RhdGUsYnVpbGRlckJsb2NrOmN9LF8pKSxjLnRleHR8fHYudGV4dD92LnRleHQ6IWQmJlImJkFycmF5LmlzQXJyYXkoUikmJlIubGVuZ3RoP1IubWFwKChmdW5jdGlvbihlLHQpe3JldHVybiBqc3goQnVpbGRlckJsb2NrLHtrZXk6KGwuaWR8fFwiXCIpK3QsYmxvY2s6ZSxpbmRleDp0LHNpemU6bC5wcm9wcy5zaXplLGZpZWxkTmFtZTpsLnByb3BzLmZpZWxkTmFtZSxjaGlsZDpsLnByb3BzLmNoaWxkLGVtYWlsTW9kZTpsLnByb3BzLmVtYWlsTW9kZX0pfSkpOm51bGwpfSkpfSkpKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1aWxkZXJCbG9jay5wcm90b3R5cGUsXCJpZFwiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmJsb2NrO3JldHVybiBlLmlkLnN0YXJ0c1dpdGgoXCJidWlsZGVyXCIpP2UuaWQ6XCJidWlsZGVyLVwiK2UuaWR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksQnVpbGRlckJsb2NrLnByb3RvdHlwZS5jb250ZW50cz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLG49dGhpcy5ibG9jaztpZih0aGlzLnByaXZhdGVTdGF0ZT1lLG4ucmVwZWF0JiZuLnJlcGVhdC5jb2xsZWN0aW9uKXt2YXIgaT1uLnJlcGVhdC5jb2xsZWN0aW9uLHI9bGFzdCgoaXx8XCJcIikudHJpbSgpLnNwbGl0KFwiKFwiKVswXS50cmltKCkuc3BsaXQoXCIuXCIpKSxvPW4ucmVwZWF0Lml0ZW1OYW1lfHwocj9yK1wiSXRlbVwiOlwiaXRlbVwiKSxhPXRoaXMuc3RyaW5nVG9GdW5jdGlvbihpKShlLnN0YXRlLG51bGwsbixhcGkoKSxEZXZpY2UsbnVsbCxCdWlsZGVyLHRoaXMucHJpdmF0ZVN0YXRlLmNvbnRleHQpO3JldHVybiBBcnJheS5pc0FycmF5KGEpP2EubWFwKChmdW5jdGlvbihuLGkpe3ZhciByLGE9X19hc3NpZ24oX19hc3NpZ24oe30sZS5zdGF0ZSksKChyPXskaW5kZXg6aSwkaXRlbTpufSlbb109bixyW1wiJFwiLmNvbmNhdChvLFwiSW5kZXhcIildPWkscikpO3JldHVybiBqc3goQnVpbGRlclN0b3JlQ29udGV4dC5Qcm92aWRlcix7a2V5OmksdmFsdWU6X19hc3NpZ24oX19hc3NpZ24oe30sZSkse3N0YXRlOmF9KX0sdC5nZXRFbGVtZW50KGksYSkpfSkpOm51bGx9cmV0dXJuIHRoaXMuZ2V0RWxlbWVudCgpfSxCdWlsZGVyQmxvY2sucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIHRoaXMuc3RhdGUuaGFzRXJyb3I/anN4KFwic3BhblwiLHtjc3M6e2Rpc3BsYXk6XCJpbmxpbmUtYmxvY2tcIixwYWRkaW5nOjUsY29sb3I6XCIjOTk5XCIsZm9udFNpemU6MTEsZm9udFN0eWxlOlwiaXRhbGljXCJ9fSxcIkJ1aWxkZXIgYmxvY2sgZXJyb3IgOiggQ2hlY2sgY29uc29sZSBmb3IgZGV0YWlsc1wiKTpqc3goQnVpbGRlclN0b3JlQ29udGV4dC5Db25zdW1lcixudWxsLChmdW5jdGlvbih0KXtyZXR1cm4gZS5jb250ZW50cyh0KX0pKX0sQnVpbGRlckJsb2NrfShSZWFjdF9fZGVmYXVsdC5Db21wb25lbnQpLEJ1aWxkZXJCbG9ja3M9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciB0PW51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpcztyZXR1cm4gdC5oeWRyYXRlZD0hMSx0Lm9uQ2xpY2tFbXB0eUJsb2Nrcz1mdW5jdGlvbigpe3ZhciBlO0J1aWxkZXIuaXNJZnJhbWUmJnQubm9CbG9ja3MmJihudWxsPT09KGU9d2luZG93LnBhcmVudCl8fHZvaWQgMD09PWV8fGUucG9zdE1lc3NhZ2Uoe3R5cGU6XCJidWlsZGVyLmNsaWNrRW1wdHlCbG9ja3NcIixkYXRhOntwYXJlbnRFbGVtZW50SWQ6dC5wYXJlbnRJZCxkYXRhUGF0aDp0LnBhdGh9fSxcIipcIikpfSx0Lm9uSG92ZXJFbXB0eUJsb2Nrcz1mdW5jdGlvbigpe3ZhciBlO0J1aWxkZXIuaXNFZGl0aW5nJiZ0Lm5vQmxvY2tzJiYobnVsbD09PShlPXdpbmRvdy5wYXJlbnQpfHx2b2lkIDA9PT1lfHxlLnBvc3RNZXNzYWdlKHt0eXBlOlwiYnVpbGRlci5ob3ZlckVtcHR5QmxvY2tzXCIsZGF0YTp7cGFyZW50RWxlbWVudElkOnQucGFyZW50SWQsZGF0YVBhdGg6dC5wYXRofX0sXCIqXCIpKX0sdH1yZXR1cm4gX19leHRlbmRzKHQsZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiaXNSb290XCIse2dldDpmdW5jdGlvbigpe3JldHVybiF0aGlzLnByb3BzLmNoaWxkfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcIm5vQmxvY2tzXCIse2dldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMucHJvcHMuYmxvY2tzO3JldHVybiEoZSYmZS5sZW5ndGgpfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInBhdGhcIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wcm9wcy5kYXRhUGF0aHx8XCJcIjtyZXR1cm4gZS50cmltKCkmJihlLnN0YXJ0c1dpdGgoXCJ0aGlzLlwiKT9lPWUucmVwbGFjZShcInRoaXMuXCIsXCJcIik6ZS5zdGFydHNXaXRoKFwiY29tcG9uZW50Lm9wdGlvbnMuXCIpfHwoZT1cImNvbXBvbmVudC5vcHRpb25zLlwiK2UpKSxlfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInBhcmVudElkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByb3BzLnBhcmVudEVsZW1lbnRJZD90aGlzLnByb3BzLnBhcmVudEVsZW1lbnRJZDp0aGlzLnByb3BzLnBhcmVudCYmdGhpcy5wcm9wcy5wYXJlbnQuaWR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQ9ZnVuY3Rpb24oKXt0aGlzLmh5ZHJhdGVkPSEwfSx0LnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcy5wcm9wcy5ibG9ja3Msbj10aGlzLnByb3BzLmVtYWlsTW9kZT9cInNwYW5cIjpcImRpdlwiO3JldHVybiBqc3gobixfX2Fzc2lnbih7Y2xhc3NOYW1lOlwiYnVpbGRlci1ibG9ja3NcIisodGhpcy5ub0Jsb2Nrcz9cIiBuby1ibG9ja3NcIjpcIlwiKSsodGhpcy5wcm9wcy5jaGlsZD9cIiBidWlsZGVyLWJsb2Nrcy1jaGlsZFwiOlwiXCIpKyh0aGlzLnByb3BzLmNsYXNzTmFtZT9cIiBcIit0aGlzLnByb3BzLmNsYXNzTmFtZTpcIlwiKSxcImJ1aWxkZXItdHlwZVwiOlwiYmxvY2tzXCIsXCJidWlsZGVyLXBhdGhcIjpCdWlsZGVyLmlzSWZyYW1lJiZ0aGlzLmh5ZHJhdGVkP3RoaXMucGF0aDp2b2lkIDAsXCJidWlsZGVyLXBhcmVudC1pZFwiOnRoaXMucGFyZW50SWQsY3NzOl9fYXNzaWduKF9fYXNzaWduKHt9LCF0aGlzLnByb3BzLmVtYWlsTW9kZSYme2Rpc3BsYXk6XCJmbGV4XCIsZmxleERpcmVjdGlvbjpcImNvbHVtblwiLGFsaWduSXRlbXM6XCJzdHJldGNoXCJ9KSx0aGlzLnByb3BzLnN0eWxlKSxvbkNsaWNrOmZ1bmN0aW9uKCl7ZS5ub0Jsb2NrcyYmZS5vbkNsaWNrRW1wdHlCbG9ja3MoKX19LEJ1aWxkZXIuaXNFZGl0aW5nJiZ7b25Nb3VzZUVudGVyOmZ1bmN0aW9uKCl7cmV0dXJuIGUub25Ib3ZlckVtcHR5QmxvY2tzKCl9fSksdCYmQXJyYXkuaXNBcnJheSh0KSYmdC5tYXAoKGZ1bmN0aW9uKHQsbil7cmV0dXJuIHQmJlwiQGJ1aWxkZXIuaW8vc2RrOkVsZW1lbnRcIj09PXRbXCJAdHlwZVwiXT9qc3goQnVpbGRlckJsb2NrJDEse2tleTp0LmlkLGJsb2NrOnQsaW5kZXg6bixmaWVsZE5hbWU6ZS5wcm9wcy5maWVsZE5hbWUsY2hpbGQ6ZS5wcm9wcy5jaGlsZCxlbWFpbE1vZGU6ZS5wcm9wcy5lbWFpbE1vZGV9KTp0fSkpfHx0KX0sdC5yZW5kZXJJbnRvPWZ1bmN0aW9uKGUsbixpKXtpZih2b2lkIDA9PT1uJiYobj17fSksZSl7dmFyIHI9bnVsbDtyZXR1cm5cInN0cmluZ1wiPT10eXBlb2YgZT9yPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZSk6ZSBpbnN0YW5jZW9mIEVsZW1lbnQmJihyPWUpLFJlYWN0RE9NLnJlbmRlcihqc3goQnVpbGRlclN0b3JlQ29udGV4dC5Qcm92aWRlcix7dmFsdWU6aX0sanN4KHQsX19hc3NpZ24oe30sbikpKSxyKX19LHR9KFJlYWN0X19kZWZhdWx0LkNvbXBvbmVudCksTm9XcmFwPWZ1bmN0aW9uKGUpe3JldHVybiBlLmNoaWxkcmVufTtmdW5jdGlvbiBnZXREYXRhKGUpe2lmKHZvaWQgMCE9PShudWxsPT1lP3ZvaWQgMDplLmRhdGEpKXt2YXIgdD1lLmRhdGEsbj10LmJsb2NrcyxpPXQuYmxvY2tzU3RyaW5nLHI9QXJyYXkuaXNBcnJheShuKXx8XCJzdHJpbmdcIj09dHlwZW9mIGksbz1fX2Fzc2lnbihfX2Fzc2lnbih7fSxlLmRhdGEpLHImJntibG9ja3M6bnx8SlNPTi5wYXJzZShpKX0pO3JldHVybiBkZWxldGUgby5ibG9ja3NTdHJpbmcsb319dmFyIHZhcmlhbnRzU2NyaXB0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuXCJcXG4oZnVuY3Rpb24oKSB7XFxuICBpZiAod2luZG93LmJ1aWxkZXJOb1RyYWNrIHx8ICFuYXZpZ2F0b3IuY29va2llRW5hYmxlZCkge1xcbiAgICByZXR1cm47XFxuICB9XFxuXFxuICB2YXIgdmFyaWFudHMgPSBcIi5jb25jYXQoZSxcIjtcXG4gIGZ1bmN0aW9uIHJlbW92ZVZhcmlhbnRzKCkge1xcbiAgICB2YXJpYW50cy5mb3JFYWNoKGZ1bmN0aW9uICh0ZW1wbGF0ZSkge1xcbiAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RlbXBsYXRlW2RhdGEtdGVtcGxhdGUtdmFyaWFudC1pZD1cXFwiJyArIHRlbXBsYXRlLmlkICsgJ1xcXCJdJykucmVtb3ZlKCk7XFxuICAgIH0pO1xcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgndmFyaWFudHMtc2NyaXB0LVwiKS5jb25jYXQodCwnXFwnKS5yZW1vdmUoKTtcXG4gIH1cXG5cXG4gIGlmICh0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIpLmNvbnRlbnQgPT09IFxcJ3VuZGVmaW5lZFxcJykge1xcbiAgICByZW1vdmVWYXJpYW50cygpO1xcbiAgICByZXR1cm4gO1xcbiAgfVxcblxcbiAgZnVuY3Rpb24gc2V0Q29va2llKG5hbWUsdmFsdWUsZGF5cykge1xcbiAgICB2YXIgZXhwaXJlcyA9IFwiXCI7XFxuICAgIGlmIChkYXlzKSB7XFxuICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XFxuICAgICAgICBkYXRlLnNldFRpbWUoZGF0ZS5nZXRUaW1lKCkgKyAoZGF5cyoyNCo2MCo2MCoxMDAwKSk7XFxuICAgICAgICBleHBpcmVzID0gXCI7IGV4cGlyZXM9XCIgKyBkYXRlLnRvVVRDU3RyaW5nKCk7XFxuICAgIH1cXG4gICAgZG9jdW1lbnQuY29va2llID0gbmFtZSArIFwiPVwiICsgKHZhbHVlIHx8IFwiXCIpICArIGV4cGlyZXMgKyBcIjsgcGF0aD0vXCIgKyBcIjsgU2VjdXJlOyBTYW1lU2l0ZT1Ob25lXCI7XFxuICB9XFxuXFxuICBmdW5jdGlvbiBnZXRDb29raWUobmFtZSkge1xcbiAgICB2YXIgbmFtZUVRID0gbmFtZSArIFwiPVwiO1xcbiAgICB2YXIgY2EgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoXFwnO1xcJyk7XFxuICAgIGZvcih2YXIgaT0wO2kgPCBjYS5sZW5ndGg7aSsrKSB7XFxuICAgICAgICB2YXIgYyA9IGNhW2ldO1xcbiAgICAgICAgd2hpbGUgKGMuY2hhckF0KDApPT1cXCcgXFwnKSBjID0gYy5zdWJzdHJpbmcoMSxjLmxlbmd0aCk7XFxuICAgICAgICBpZiAoYy5pbmRleE9mKG5hbWVFUSkgPT0gMCkgcmV0dXJuIGMuc3Vic3RyaW5nKG5hbWVFUS5sZW5ndGgsYy5sZW5ndGgpO1xcbiAgICB9XFxuICAgIHJldHVybiBudWxsO1xcbiAgfVxcbiAgdmFyIGNvb2tpZU5hbWUgPSBcXCdidWlsZGVyLnRlc3RzLicpLmNvbmNhdCh0LFwiJztcXG4gIHZhciB2YXJpYW50SW5Db29raWUgPSBnZXRDb29raWUoY29va2llTmFtZSk7XFxuICB2YXIgYXZhaWxhYmxlSURzID0gdmFyaWFudHMubWFwKGZ1bmN0aW9uKHZyKSB7IHJldHVybiB2ci5pZCB9KS5jb25jYXQoJ1wiKS5jb25jYXQodCxcIicpO1xcbiAgdmFyIHZhcmlhbnRJZDtcXG4gIGlmIChhdmFpbGFibGVJRHMuaW5kZXhPZih2YXJpYW50SW5Db29raWUpID4gLTEpIHtcXG4gICAgdmFyaWFudElkID0gdmFyaWFudEluQ29va2llO1xcbiAgfVxcbiAgaWYgKCF2YXJpYW50SWQpIHtcXG4gICAgdmFyIG4gPSAwO1xcbiAgICB2YXIgcmFuZG9tID0gTWF0aC5yYW5kb20oKTtcXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YXJpYW50cy5sZW5ndGg7IGkrKykge1xcbiAgICAgIHZhciB2YXJpYW50ID0gdmFyaWFudHNbaV07XFxuICAgICAgdmFyIHRlc3RSYXRpbyA9IHZhcmlhbnQudGVzdFJhdGlvO1xcbiAgICAgIG4gKz0gdGVzdFJhdGlvO1xcbiAgICAgIGlmIChyYW5kb20gPCBuKSB7XFxuICAgICAgICBzZXRDb29raWUoY29va2llTmFtZSwgdmFyaWFudC5pZCk7XFxuICAgICAgICB2YXJpYW50SWQgPSB2YXJpYW50LmlkO1xcbiAgICAgICAgYnJlYWs7XFxuICAgICAgfVxcbiAgICB9XFxuICAgIGlmICghdmFyaWFudElkKSB7XFxuICAgICAgdmFyaWFudElkID0gXFxcIlwiKS5jb25jYXQodCwnXCI7XFxuICAgICAgc2V0Q29va2llKGNvb2tpZU5hbWUsIFwiJykuY29uY2F0KHQsJ1wiKTtcXG4gICAgfVxcbiAgfVxcbiAgaWYgKHZhcmlhbnRJZCAmJiB2YXJpYW50SWQgIT09IFwiJykuY29uY2F0KHQsXCJcXFwiKSB7XFxuICAgIHZhciB3aW5uaW5nVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd0ZW1wbGF0ZVtkYXRhLXRlbXBsYXRlLXZhcmlhbnQtaWQ9XFxcIicgKyB2YXJpYW50SWQgKyAnXFxcIl0nKTtcXG4gICAgaWYgKHdpbm5pbmdUZW1wbGF0ZSkge1xcbiAgICAgIHZhciBwYXJlbnROb2RlID0gd2lubmluZ1RlbXBsYXRlLnBhcmVudE5vZGU7XFxuICAgICAgdmFyIG5ld1BhcmVudCA9IHBhcmVudE5vZGUuY2xvbmVOb2RlKGZhbHNlKTtcXG4gICAgICBuZXdQYXJlbnQuYXBwZW5kQ2hpbGQod2lubmluZ1RlbXBsYXRlLmNvbnRlbnQuZmlyc3RDaGlsZCk7XFxuICAgICAgcGFyZW50Tm9kZS5wYXJlbnROb2RlLnJlcGxhY2VDaGlsZChuZXdQYXJlbnQsIHBhcmVudE5vZGUpO1xcbiAgICB9XFxuICB9IGVsc2UgaWYgKHZhcmlhbnRzLmxlbmd0aCA+IDApIHtcXG4gICAgcmVtb3ZlVmFyaWFudHMoKTtcXG4gIH1cXG59KSgpXCIpLnJlcGxhY2UoL1xccysvZyxcIiBcIil9LFZhcmlhbnRzUHJvdmlkZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5pbml0aWFsQ29udGVudCxuPWUuY2hpbGRyZW47aWYoQnVpbGRlci5pc0Jyb3dzZXImJiFidWlsZGVyLmNhblRyYWNrKXJldHVybiBuKFt0XSk7aWYoIUJvb2xlYW4oT2JqZWN0LmtleXMoKG51bGw9PXQ/dm9pZCAwOnQudmFyaWF0aW9ucyl8fHt9KS5sZW5ndGgpKXJldHVybiBuKFt0XSk7dmFyIGk9T2JqZWN0LmtleXModC52YXJpYXRpb25zKS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7aWQ6ZX0sdC52YXJpYXRpb25zW2VdKSx7ZGF0YTpnZXREYXRhKHQudmFyaWF0aW9uc1tlXSl9KX0pKSxyPV9fc3ByZWFkQXJyYXkoX19zcHJlYWRBcnJheShbXSxpLCEwKSxbdF0sITEpO2lmKEJ1aWxkZXIuaXNTZXJ2ZXIpe3ZhciBvPUpTT04uc3RyaW5naWZ5KE9iamVjdC5rZXlzKHQudmFyaWF0aW9uc3x8e30pLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJue2lkOmUsdGVzdFJhdGlvOnQudmFyaWF0aW9uc1tlXS50ZXN0UmF0aW99fSkpKTtyZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChSZWFjdC5GcmFnbWVudCxudWxsLG4ociwoZnVuY3Rpb24oKXtyZXR1cm4gUmVhY3QuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiLHtpZDpcInZhcmlhbnRzLXNjcmlwdC1cIi5jb25jYXQodC5pZCksZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6e19faHRtbDp2YXJpYW50c1NjcmlwdChvLHQuaWQpfX0pfSkpKX12YXIgYT1cImJ1aWxkZXIudGVzdHMuXCIuY29uY2F0KHQuaWQpLHM9YnVpbGRlci5nZXRDb29raWUoYSk7aWYoIXMmJkJ1aWxkZXIuaXNCcm93c2VyKWZvcih2YXIgbD0wLHU9TWF0aC5yYW5kb20oKSxkPTA7ZDxpLmxlbmd0aDtkKyspe3ZhciBjPWlbZF07aWYodTwobCs9Yy50ZXN0UmF0aW8pKXtidWlsZGVyLnNldENvb2tpZShhLGMuaWQpLHM9Yy5pZDticmVha319cmV0dXJuIHN8fChzPXQuaWQsYnVpbGRlci5zZXRDb29raWUoYSxzKSksbihbci5maW5kKChmdW5jdGlvbihlKXtyZXR1cm4gZS5pZD09PXN9KSldKX0sQnVpbGRlckNvbnRlbnQ9ZnVuY3Rpb24oX3N1cGVyKXtmdW5jdGlvbiBCdWlsZGVyQ29udGVudCgpe3ZhciBfdGhpcz1udWxsIT09X3N1cGVyJiZfc3VwZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiBfdGhpcy5yZWY9bnVsbCxfdGhpcy5zdGF0ZT17bG9hZGluZzohX3RoaXMucHJvcHMuY29udGVudCxkYXRhOmdldENvbnRlbnRXaXRoSW5mbyhfdGhpcy5wcm9wcy5jb250ZW50KSx1cGRhdGVzOjF9LF90aGlzLm9uV2luZG93TWVzc2FnZT1mdW5jdGlvbihldmVudCl7dmFyIF9hLF9iLGlzVHJ1c3RlZD1CdWlsZGVyLmlzVHJ1c3RlZEhvc3RGb3JFdmVudChldmVudCk7aWYoaXNUcnVzdGVkKXt2YXIgbWVzc2FnZT1ldmVudC5kYXRhO2lmKG1lc3NhZ2Upc3dpdGNoKG1lc3NhZ2UudHlwZSl7Y2FzZVwiYnVpbGRlci5wYXRjaFVwZGF0ZXNcIjppZihudWxsPT09KF9hPV90aGlzLnByb3BzLm9wdGlvbnMpfHx2b2lkIDA9PT1fYT92b2lkIDA6X2Eubm9FZGl0b3JVcGRhdGVzKXJldHVybjt2YXIgZGF0YT1tZXNzYWdlLmRhdGE7aWYoIWRhdGF8fCFkYXRhLmRhdGEpYnJlYWs7dmFyIHBhdGNoZXM9ZGF0YS5kYXRhW251bGw9PT0oX2I9X3RoaXMuc3RhdGUuZGF0YSl8fHZvaWQgMD09PV9iP3ZvaWQgMDpfYi5pZF07aWYoIXBhdGNoZXN8fCFwYXRjaGVzLmxlbmd0aClyZXR1cm47bG9jYXRpb24uaHJlZi5pbmNsdWRlcyhcImJ1aWxkZXIuZGVidWc9dHJ1ZVwiKSYmZXZhbChcImRlYnVnZ2VyXCIpO2Zvcih2YXIgbmV3RGF0YT1fdGhpcy5zdGF0ZS5kYXRhLF9pPTAscGF0Y2hlc18xPXBhdGNoZXM7X2k8cGF0Y2hlc18xLmxlbmd0aDtfaSsrKXt2YXIgcGF0Y2g9cGF0Y2hlc18xW19pXTtuZXdEYXRhPWFwcGx5UGF0Y2hXaXRoTWluaW1hbE11dGF0aW9uQ2hhaW4obmV3RGF0YSxwYXRjaCwhMSl9X3RoaXMuc2V0U3RhdGUoe3VwZGF0ZXM6X3RoaXMuc3RhdGUudXBkYXRlcysxLGRhdGE6bmV3RGF0YX0pLF90aGlzLnByb3BzLmNvbnRlbnRMb2FkZWQmJl90aGlzLnByb3BzLmNvbnRlbnRMb2FkZWQobmV3RGF0YS5kYXRhLG5ld0RhdGEpfX19LF90aGlzLnN1YnNjcmlwdGlvbnM9bmV3IFN1YnNjcmlwdGlvbixfdGhpcy5maXJzdExvYWQ9ITAsX3RoaXMuY2xpY2tlZD0hMSxfdGhpcy50cmFja2VkSW1wcmVzc2lvbj0hMSxfdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlcj1udWxsLF90aGlzLm9uQ2xpY2s9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5uYXRpdmVFdmVudCxuPV90aGlzLmRhdGE7biYmKGJ1aWxkZXIuYXV0b1RyYWNrJiZfdGhpcy5idWlsZGVyLnRyYWNrSW50ZXJhY3Rpb24obi5pZCxfdGhpcy5yZW5kZXJlZFZhcmlhbnRJZCxfdGhpcy5jbGlja2VkLHQse2NvbnRlbnQ6bn0pLF90aGlzLmNsaWNrZWR8fChfdGhpcy5jbGlja2VkPSEwKSl9LF90aGlzfXJldHVybiBfX2V4dGVuZHMoQnVpbGRlckNvbnRlbnQsX3N1cGVyKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoQnVpbGRlckNvbnRlbnQucHJvdG90eXBlLFwiYnVpbGRlclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm9wcy5idWlsZGVyfHxidWlsZGVyfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCdWlsZGVyQ29udGVudC5wcm90b3R5cGUsXCJuYW1lXCIse2dldDpmdW5jdGlvbigpe3ZhciBlPXRoaXMucHJvcHM7cmV0dXJuXCJtb2RlbFwiaW4gZT9lLm1vZGVsOmUubW9kZWxOYW1lfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCdWlsZGVyQ29udGVudC5wcm90b3R5cGUsXCJyZW5kZXJlZFZhcmlhbnRJZFwiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgZSx0LG49dGhpcy5wcm9wcy5pc1N0YXRpYz90aGlzLmJ1aWxkZXIuZ2V0Q29va2llKFwiYnVpbGRlci50ZXN0cy5cIi5jb25jYXQobnVsbD09PShlPXRoaXMuZGF0YSl8fHZvaWQgMD09PWU/dm9pZCAwOmUuaWQpKTpudWxsPT09KHQ9dGhpcy5kYXRhKXx8dm9pZCAwPT09dD92b2lkIDA6dC52YXJpYXRpb25JZDtpZihudWxsIT09bilyZXR1cm4gbn0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoQnVpbGRlckNvbnRlbnQucHJvdG90eXBlLFwib3B0aW9uc1wiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgZSx0LG49X19hc3NpZ24oe30sdGhpcy5wcm9wcy5vcHRpb25zfHx7fSk7cmV0dXJuIG4ua2V5fHwhKG51bGw9PT0oZT10aGlzLnByb3BzLmNvbnRlbnQpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmlkKXx8QnVpbGRlci5pc0VkaXRpbmd8fEJ1aWxkZXIuaXNQcmV2aWV3aW5nfHwobi5rZXk9dGhpcy5wcm9wcy5jb250ZW50LmlkKSwhdGhpcy5wcm9wcy5jb250ZW50fHwobnVsbD09PSh0PW4uaW5pdGlhbENvbnRlbnQpfHx2b2lkIDA9PT10P3ZvaWQgMDp0Lmxlbmd0aCl8fCF0aGlzLnByb3BzLmlubGluZSYmQnVpbGRlci5pc1ByZXZpZXdpbmd8fChuLmluaXRpYWxDb250ZW50PVt0aGlzLnByb3BzLmNvbnRlbnRdKSxufSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCdWlsZGVyQ29udGVudC5wcm90b3R5cGUsXCJkYXRhXCIse2dldDpmdW5jdGlvbigpe3ZhciBlPSh0aGlzLnByb3BzLmlubGluZXx8IUJ1aWxkZXIuaXNCcm93c2VyfHx0aGlzLmZpcnN0TG9hZCkmJnRoaXMub3B0aW9ucy5pbml0aWFsQ29udGVudCYmdGhpcy5vcHRpb25zLmluaXRpYWxDb250ZW50WzBdfHx0aGlzLnN0YXRlLmRhdGE7cmV0dXJuIGdldENvbnRlbnRXaXRoSW5mbyhlKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxCdWlsZGVyQ29udGVudC5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQ9ZnVuY3Rpb24oKXt2YXIgZSx0O2lmKCF0aGlzLnByb3BzLmlubGluZXx8QnVpbGRlci5pc0VkaXRpbmd8fEJ1aWxkZXIuaXNQcmV2aWV3aW5nKXRoaXMuc3Vic2NyaWJlVG9Db250ZW50KCk7ZWxzZSBpZih0aGlzLnByb3BzLmlubGluZSYmKG51bGw9PT0odD1udWxsPT09KGU9dGhpcy5vcHRpb25zKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5pbml0aWFsQ29udGVudCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQubGVuZ3RoKSl7dmFyIG49dGhpcy5vcHRpb25zLmluaXRpYWxDb250ZW50WzBdOyhudWxsPT1uP3ZvaWQgMDpuLmlkKSYmdGhpcy5idWlsZGVyLnRyYWNrSW1wcmVzc2lvbihuLmlkLHRoaXMucmVuZGVyZWRWYXJpYW50SWQsdm9pZCAwLHtjb250ZW50Om59KX1CdWlsZGVyLmlzRWRpdGluZyYmYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIix0aGlzLm9uV2luZG93TWVzc2FnZSl9LEJ1aWxkZXJDb250ZW50LnByb3RvdHlwZS5zdWJzY3JpYmVUb0NvbnRlbnQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO1wiX2lubGluZVwiIT09dGhpcy5uYW1lJiZ0aGlzLnN1YnNjcmlwdGlvbnMuYWRkKHRoaXMuYnVpbGRlci5xdWV1ZUdldENvbnRlbnQodGhpcy5uYW1lLHRoaXMub3B0aW9ucykuc3Vic2NyaWJlKChmdW5jdGlvbih0KXt2YXIgbj10JiZ0WzBdO2Uuc2V0U3RhdGUoe2RhdGE6bixsb2FkaW5nOiExfSk7dmFyIGk9KGUuYnVpbGRlci5lZGl0aW5nTW9kZWx8fGUuYnVpbGRlci5wcmV2aWV3aW5nTW9kZWwpPT09ZS5uYW1lO2lmKCFlLnByb3BzLmlubGluZSYmZS5wcm9wcy5jb250ZW50JiZlLmZpcnN0TG9hZCYmaSYmKGUuZmlyc3RMb2FkPSExLGUuc3Vic2NyaXB0aW9ucy51bnN1YnNjcmliZSgpLGUuc3Vic2NyaWJlVG9Db250ZW50KCkpLG4mJmUuZmlyc3RMb2FkJiYoZS5maXJzdExvYWQ9ITEsYnVpbGRlci5hdXRvVHJhY2smJiFCdWlsZGVyLmlzRWRpdGluZykpe3ZhciByPSExO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIEludGVyc2VjdGlvbk9ic2VydmVyJiZlLnJlZil0cnl7KGUuaW50ZXJzZWN0aW9uT2JzZXJ2ZXI9bmV3IEludGVyc2VjdGlvbk9ic2VydmVyKChmdW5jdGlvbih0LGkpe3QuZm9yRWFjaCgoZnVuY3Rpb24odCl7dC5pbnRlcnNlY3Rpb25SYXRpbz4wJiYhZS50cmFja2VkSW1wcmVzc2lvbiYmKGUuYnVpbGRlci50cmFja0ltcHJlc3Npb24obi5pZCxlLnJlbmRlcmVkVmFyaWFudElkLHZvaWQgMCx7Y29udGVudDplLmRhdGF9KSxlLmRhdGEsZS50cmFja2VkSW1wcmVzc2lvbj0hMCxlLnJlZiYmaS51bm9ic2VydmUoZS5yZWYpKX0pKX0pKSkub2JzZXJ2ZShlLnJlZikscj0hMH1jYXRjaChlKXtjb25zb2xlLndhcm4oXCJDb3VsZCBub3QgYmluZCBpbnRlcnNlY3Rpb24gb2JzZXJ2ZXJcIil9cnx8KGUudHJhY2tlZEltcHJlc3Npb249ITAsZS5idWlsZGVyLnRyYWNrSW1wcmVzc2lvbihuLmlkLGUucmVuZGVyZWRWYXJpYW50SWQsdm9pZCAwLHtjb250ZW50Om59KSl9ZS5wcm9wcy5jb250ZW50TG9hZGVkJiZlLnByb3BzLmNvbnRlbnRMb2FkZWQobiYmbi5kYXRhLG4pfSksKGZ1bmN0aW9uKHQpe2UucHJvcHMuY29udGVudEVycm9yJiYoZS5wcm9wcy5jb250ZW50RXJyb3IodCksZS5zZXRTdGF0ZSh7bG9hZGluZzohMX0pKX0pKSl9LEJ1aWxkZXJDb250ZW50LnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudD1mdW5jdGlvbigpe0J1aWxkZXIuaXNFZGl0aW5nJiZyZW1vdmVFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLHRoaXMub25XaW5kb3dNZXNzYWdlKSx0aGlzLnN1YnNjcmlwdGlvbnMudW5zdWJzY3JpYmUoKSx0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyJiZ0aGlzLnJlZiYmdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlci51bm9ic2VydmUodGhpcy5yZWYpfSxCdWlsZGVyQ29udGVudC5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZih0aGlzLnByb3BzLmRhdGFPbmx5KXJldHVybiBudWxsO3ZhciB0PXRoaXMuc3RhdGUubG9hZGluZyxuPXRoaXMuZGF0YSxpPXRoaXMucHJvcHMuZGF0YU9ubHk/Tm9XcmFwOlwiZGl2XCI7cmV0dXJuIFJlYWN0X19kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoVmFyaWFudHNQcm92aWRlcix7aW5pdGlhbENvbnRlbnQ6bn0sKGZ1bmN0aW9uKHIsbyl7cmV0dXJuIFJlYWN0X19kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoUmVhY3RfX2RlZmF1bHQuRnJhZ21lbnQsbnVsbCxyLm1hcCgoZnVuY3Rpb24oYSxzKXt2YXIgbD1zPT09ci5sZW5ndGgtMT9SZWFjdF9fZGVmYXVsdC5GcmFnbWVudDpcInRlbXBsYXRlXCI7cmV0dXJuIFJlYWN0X19kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoUmVhY3RfX2RlZmF1bHQuRnJhZ21lbnQse2tleTpTdHJpbmcoKG51bGw9PWE/dm9pZCAwOmEuaWQpK3MpfSxcInRlbXBsYXRlXCIhPT1sJiYobnVsbD09bz92b2lkIDA6bygpKSxSZWFjdF9fZGVmYXVsdC5jcmVhdGVFbGVtZW50KGwsX19hc3NpZ24oe2tleTpTdHJpbmcoKG51bGw9PWE/dm9pZCAwOmEuaWQpK3MpfSxcInRlbXBsYXRlXCI9PT1sJiZ7XCJkYXRhLXRlbXBsYXRlLXZhcmlhbnQtaWRcIjpudWxsPT1hP3ZvaWQgMDphLmlkfSksUmVhY3RfX2RlZmF1bHQuY3JlYXRlRWxlbWVudChpLF9fYXNzaWduKHt9LDA9PT1zJiYhZS5wcm9wcy5kYXRhT25seSYme3JlZjpmdW5jdGlvbih0KXtyZXR1cm4gZS5yZWY9dH19LHtjbGFzc05hbWU6XCJidWlsZGVyLWNvbnRlbnRcIixvbkNsaWNrOmUub25DbGljayxcImJ1aWxkZXItY29udGVudC1pZFwiOm51bGw9PWE/dm9pZCAwOmEuaWQsXCJidWlsZGVyLW1vZGVsXCI6ZS5uYW1lfSksZS5wcm9wcy5jaGlsZHJlbihudWxsPT1hP3ZvaWQgMDphLmRhdGEsIWUucHJvcHMuaW5saW5lJiZ0LG4pKSkpfSkpKX0pKX0sQnVpbGRlckNvbnRlbnR9KFJlYWN0X19kZWZhdWx0LkNvbXBvbmVudCksZ2V0Q29udGVudFdpdGhJbmZvPWZ1bmN0aW9uKGUpe3ZhciB0O2lmKGUpe3ZhciBuPWJ1aWxkZXIuZ2V0Q29va2llKFwiYnVpbGRlci50ZXN0cy5cIi5jb25jYXQoZS5pZCkpLGk9bj09PWUuaWQ/ZTpudWxsPT09KHQ9ZS52YXJpYXRpb25zKXx8dm9pZCAwPT09dD92b2lkIDA6dFtuXSxyPShudWxsPT1pP3ZvaWQgMDppLm5hbWUpfHwoKG51bGw9PWk/dm9pZCAwOmkuaWQpPT09ZS5pZD9cIkRlZmF1bHQgdmFyaWF0aW9uXCI6XCJcIik7cmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LGUpLHt2YXJpYXRpb25JZDpuLHRlc3RWYXJpYXRpb25JZDpuLHRlc3RWYXJpYXRpb25OYW1lOnJ9KX1yZXR1cm4gbnVsbH07ZnVuY3Rpb24gdW53cmFwRXhwb3J0cyhlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlJiZPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSxcImRlZmF1bHRcIik/ZS5kZWZhdWx0OmV9ZnVuY3Rpb24gY3JlYXRlQ29tbW9uanNNb2R1bGUoZSx0KXtyZXR1cm4gZSh0PXtleHBvcnRzOnt9fSx0LmV4cG9ydHMpLHQuZXhwb3J0c312YXIgb25DaGFuZ2VfMT1jcmVhdGVDb21tb25qc01vZHVsZSgoZnVuY3Rpb24oZSx0KXtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgbj1TeW1ib2woXCJ0YXJnZXRcIiksaT1TeW1ib2woXCJ1bnN1YnNjcmliZVwiKSxyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQmJnQudG9TdHJpbmcmJihlJiYoZSs9XCIuXCIpLGUrPXQudG9TdHJpbmcoKSksZX0sbz1mdW5jdGlvbihlKXtyZXR1cm4gQXJyYXkuaXNBcnJheShlKT9lLnNsaWNlKCk6T2JqZWN0LmFzc2lnbih7fSxlKX0sYT1mdW5jdGlvbihlLHQsYSl7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIFByb3h5KXJldHVybiBlO3ZvaWQgMD09PWEmJihhPXt9KTt2YXIgcyxsLHU9U3ltYm9sKFwiUHJveHlUYXJnZXRcIiksZD0hMSxjPSExLHA9ITEsZj1hLmVxdWFsc3x8T2JqZWN0LmlzLG09bmV3IFdlYWtNYXAsaD1uZXcgV2Vha01hcCx2PW5ldyBXZWFrTWFwLGc9ZnVuY3Rpb24oZSxuLGksYSl7aWYoIXApaWYoZCl7aWYoZCYmbCYmdm9pZCAwIT09aSYmdm9pZCAwIT09YSYmXCJsZW5ndGhcIiE9PW4pe3ZhciB1PWw7ZSE9PXMmJmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuO2U7KS0xPT09KG49ZS5pbmRleE9mKFwiLlwiKSkmJihuPWUubGVuZ3RoKSx0KGUuc2xpY2UoMCxuKSksZT1lLnNsaWNlKG4rMSl9KGU9ZS5yZXBsYWNlKHMsXCJcIikuc2xpY2UoMSksKGZ1bmN0aW9uKGUpe3VbZV09byh1W2VdKSx1PXVbZV19KSksdVtuXT1pfWM9ITB9ZWxzZSB0KHIoZSxuKSxhLGkpfSxiPWZ1bmN0aW9uKGUsdCl7dmFyIG49bT9tLmdldChlKTp2b2lkIDA7biYmbi5kZWxldGUodCl9LHk9ZnVuY3Rpb24oZSx0KXtpZihwKXJldHVybiBlO2guc2V0KGUsdCk7dmFyIG49di5nZXQoZSk7cmV0dXJuIHZvaWQgMD09PW4mJihuPW5ldyBQcm94eShlLFMpLHYuc2V0KGUsbikpLG59LF89ZnVuY3Rpb24oZSl7cmV0dXJuIHB8fCEwPT09YS5pZ25vcmVTeW1ib2xzJiZcInN5bWJvbFwiPT10eXBlb2YgZX0sUz17Z2V0OmZ1bmN0aW9uKGUsdCxvKXtpZih0PT09dXx8dD09PW4pcmV0dXJuIGU7aWYodD09PWkmJlwiXCI9PT1oLmdldChlKSlyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIHA9ITAsbT1udWxsLGg9bnVsbCx2PW51bGwsZX0oZSk7dmFyIHM9UmVmbGVjdC5nZXQoZSx0LG8pO2lmKGZ1bmN0aW9uKGUpe3JldHVybiBudWxsPT09ZXx8XCJvYmplY3RcIiE9dHlwZW9mIGUmJlwiZnVuY3Rpb25cIiE9dHlwZW9mIGV9KHMpfHxmdW5jdGlvbihlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIFJlZ0V4cHx8ZSBpbnN0YW5jZW9mIE51bWJlcn0ocyl8fFwiY29uc3RydWN0b3JcIj09PXR8fCEwPT09YS5pc1NoYWxsb3cpcmV0dXJuIHM7dmFyIGw9ZnVuY3Rpb24oZSx0KXt2YXIgbj1tP20uZ2V0KGUpOnZvaWQgMDtpZihuKXJldHVybiBuO249bmV3IE1hcCxtLnNldChlLG4pO3ZhciBpPW4uZ2V0KHQpO3JldHVybiBpfHwoaT1SZWZsZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHQpLG4uc2V0KHQsaSkpLGl9KGUsdCk7aWYobCYmIWwuY29uZmlndXJhYmxlKXtpZihsLnNldCYmIWwuZ2V0KXJldHVybjtpZighMT09PWwud3JpdGFibGUpcmV0dXJuIHN9cmV0dXJuIHkocyxyKGguZ2V0KGUpLHQpKX0sc2V0OmZ1bmN0aW9uKGUsdCxuLGkpe24mJnZvaWQgMCE9PW5bdV0mJihuPW5bdV0pO3ZhciByPV8odCksbz1yP251bGw6UmVmbGVjdC5nZXQoZSx0LGkpLGE9UmVmbGVjdC5zZXQoZVt1XXx8ZSx0LG4pO3JldHVybiByfHxmKG8sbil8fGcoaC5nZXQoZSksdCxvLG4pLGF9LGRlZmluZVByb3BlcnR5OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1SZWZsZWN0LmRlZmluZVByb3BlcnR5KGUsdCxuKTtyZXR1cm4gXyh0KXx8KGIoZSx0KSxnKGguZ2V0KGUpLHQsdm9pZCAwLG4udmFsdWUpKSxpfSxkZWxldGVQcm9wZXJ0eTpmdW5jdGlvbihlLHQpe2lmKCFSZWZsZWN0LmhhcyhlLHQpKXJldHVybiEwO3ZhciBuPV8odCksaT1uP251bGw6UmVmbGVjdC5nZXQoZSx0KSxyPVJlZmxlY3QuZGVsZXRlUHJvcGVydHkoZSx0KTtyZXR1cm4gbnx8KGIoZSx0KSxnKGguZ2V0KGUpLHQsaSkpLHJ9LGFwcGx5OmZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10IGluc3RhbmNlb2YgRGF0ZTtpZihpJiYodD10W3VdKSwhZCl7ZD0hMCxpJiYobD10LnZhbHVlT2YoKSksKEFycmF5LmlzQXJyYXkodCl8fFwiW29iamVjdCBPYmplY3RdXCI9PT10b1N0cmluZy5jYWxsKHQpKSYmKGw9byh0W3VdKSkscz0ocz1oLmdldChlKSkuc2xpY2UoMCxNYXRoLm1heChzLmxhc3RJbmRleE9mKFwiLlwiKSwwKSk7dmFyIHI9UmVmbGVjdC5hcHBseShlLHQsbik7cmV0dXJuIGQ9ITEsKGN8fGkmJiFmKGwsdC52YWx1ZU9mKCkpKSYmKGcocyxcIlwiLGwsdFt1XXx8dCksbD1udWxsLGM9ITEpLHJ9cmV0dXJuIFJlZmxlY3QuYXBwbHkoZSx0LG4pfX0seD15KGUsXCJcIik7cmV0dXJuIHQ9dC5iaW5kKHgpLHh9O2EudGFyZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiBlW25dfHxlfSxhLnVuc3Vic2NyaWJlPWZ1bmN0aW9uKGUpe3JldHVybiBlW2ldfHxlfSxlLmV4cG9ydHM9YSx0LmRlZmF1bHQ9YX0pKSxvbkNoYW5nZT11bndyYXBFeHBvcnRzKG9uQ2hhbmdlXzEpLG5leHRUaWNrPUJ1aWxkZXIubmV4dFRpY2s7ZnVuY3Rpb24gZGVib3VuY2VOZXh0VGljayhlLHQsbil7cmV0dXJuIHZvaWQgMD09PXQmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGU/ZGVib3VuY2VOZXh0VGlja0ltcGwoZSk6e2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOm4uZW51bWVyYWJsZSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsdCx7Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6bi5lbnVtZXJhYmxlLHZhbHVlOmRlYm91bmNlTmV4dFRpY2tJbXBsKG4udmFsdWUpfSksdGhpc1t0XX19fWZ1bmN0aW9uIGRlYm91bmNlTmV4dFRpY2tJbXBsKGUpe3ZhciB0PW51bGwsbj1udWxsO3JldHVybiBmdW5jdGlvbigpe3ZhciBlPXQ7aWYodD1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cyksbj10aGlzLG51bGwhPT1lKXJldHVybjtuZXh0VGljayhpKX07ZnVuY3Rpb24gaSgpe2UuYXBwbHkobix0KSx0PW51bGwsbj1udWxsfX1mdW5jdGlvbiB0aHJvdHRsZShlLHQsbil7dmFyIGkscixvO3ZvaWQgMD09PW4mJihuPXt9KTt2YXIgYT1udWxsLHM9MCxsPWZ1bmN0aW9uKCl7cz0hMT09PW4ubGVhZGluZz8wOkRhdGUubm93KCksYT1udWxsLG89ZS5hcHBseShpLHIpLGF8fChpPXI9bnVsbCl9O3JldHVybiBmdW5jdGlvbigpe3ZhciB1PURhdGUubm93KCk7c3x8ITEhPT1uLmxlYWRpbmd8fChzPXUpO3ZhciBkPXQtKHUtcyk7cmV0dXJuIGk9dGhpcyxyPWFyZ3VtZW50cyxkPD0wfHxkPnQ/KGEmJihjbGVhclRpbWVvdXQoYSksYT1udWxsKSxzPXUsbz1lLmFwcGx5KGksciksYXx8KGk9cj1udWxsKSk6YXx8ITE9PT1uLnRyYWlsaW5nfHwoYT1zZXRUaW1lb3V0KGwsZCkpLG99fXZhciBCdWlsZGVyTWV0YUNvbnRleHQ9UmVhY3RfX2RlZmF1bHQuY3JlYXRlQ29udGV4dCh7ZW1haWxNb2RlOiExLGFtcE1vZGU6ITEsaXNTZXJ2ZXI6ITF9KSx0cnlFdmFsPWZ1bmN0aW9uKGUsdCxuKXt2b2lkIDA9PT10JiYodD17fSk7dmFyIGk9ZTtpZihcInN0cmluZ1wiPT10eXBlb2YgaSYmaS50cmltKCkpe3ZhciByPSEoaS5pbmNsdWRlcyhcIjtcIil8fGkuaW5jbHVkZXMoXCIgcmV0dXJuIFwiKSksbz1mdW5jdGlvbigpe307dHJ5e0J1aWxkZXIuaXNCcm93c2VyJiYobz1uZXcgRnVuY3Rpb24oXCJzdGF0ZVwiLFwidmFyIHJvb3RTdGF0ZSA9IHN0YXRlO1xcbiAgICAgICAgaWYgKHR5cGVvZiBQcm94eSAhPT0gJ3VuZGVmaW5lZCcpIHtcXG4gICAgICAgICAgcm9vdFN0YXRlID0gbmV3IFByb3h5KHJvb3RTdGF0ZSwge1xcbiAgICAgICAgICAgIHNldDogZnVuY3Rpb24gKCkge1xcbiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xcbiAgICAgICAgICAgIH0sXFxuICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHtcXG4gICAgICAgICAgICAgIGlmIChrZXkgPT09ICdzdGF0ZScpIHtcXG4gICAgICAgICAgICAgICAgcmV0dXJuIHN0YXRlO1xcbiAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldFtrZXldXFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICB9KTtcXG4gICAgICAgIH1cXG4gICAgICAgIHdpdGggKHJvb3RTdGF0ZSkge1xcbiAgICAgICAgICBcIi5jb25jYXQocj9cInJldHVybiAoXCIuY29uY2F0KGUsXCIpO1wiKTplLFwiO1xcbiAgICAgICAgfVwiKSkpfWNhdGNoKGUpe0J1aWxkZXIuaXNCcm93c2VyJiZjb25zb2xlLndhcm4oXCJDb3VsZCBub3QgY29tcGlsZSBqYXZhc2NyaXB0XCIsZSl9dHJ5e2lmKEJ1aWxkZXIuaXNCcm93c2VyfHxzaG91bGRGb3JjZUJyb3dzZXJSdW50aW1lSW5Ob2RlKCkpcmV0dXJuIG8odHx8e30pO3ZhciBhPXNhZmVEeW5hbWljUmVxdWlyZShcImlzb2xhdGVkLXZtXCIpLHM9Z2V0SXNvbGF0ZUNvbnRleHQoKSxsPW1ha2VGbihlLHIsW1wic3RhdGVcIl0pLHU9cy5ldmFsQ2xvc3VyZVN5bmMobCxbbmV3IGEuUmVmZXJlbmNlKHR8fHt9KV0pO3RyeXtyZXR1cm4gSlNPTi5wYXJzZSh1KX1jYXRjaChlKXtyZXR1cm4gdX19Y2F0Y2godCl7biYmbi5wdXNoKHQpLEJ1aWxkZXIuaXNCcm93c2VyP2NvbnNvbGUud2FybihcIkJ1aWxkZXIgY3VzdG9tIGNvZGUgZXJyb3I6XCIsdC5tZXNzYWdlLFwiaW5cIixlLHQuc3RhY2spOmlzRGVidWcoKSYmY29uc29sZS5kZWJ1ZyhcIkJ1aWxkZXIgY3VzdG9tIGNvZGUgZXJyb3I6XCIsdC5tZXNzYWdlLFwiaW5cIixlLHQuc3RhY2spfX19O2Z1bmN0aW9uIHRvRXJyb3IoZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBFcnJvcj9lOm5ldyBFcnJvcihTdHJpbmcoZSkpfWZ1bmN0aW9uIGdldEJ1aWxkZXJQaXhlbChlKXtyZXR1cm57aWQ6XCJidWlsZGVyLXBpeGVsLVwiK01hdGgucmFuZG9tKCkudG9TdHJpbmcoMzYpLnNwbGl0KFwiLlwiKVsxXSxcIkB0eXBlXCI6XCJAYnVpbGRlci5pby9zZGs6RWxlbWVudFwiLHRhZ05hbWU6XCJpbWdcIixwcm9wZXJ0aWVzOntyb2xlOlwicHJlc2VudGF0aW9uXCIsXCJhcmlhLWhpZGRlblwiOlwidHJ1ZVwiLHNyYzpcImh0dHBzOi8vY2RuLmJ1aWxkZXIuaW8vYXBpL3YxL3BpeGVsP2FwaUtleT1cIi5jb25jYXQoZSl9LHJlc3BvbnNpdmVTdHlsZXM6e2xhcmdlOntoZWlnaHQ6XCIwXCIsd2lkdGg6XCIwXCIsZGlzcGxheTpcImlubGluZS1ibG9ja1wiLG9wYWNpdHk6XCIwXCIsb3ZlcmZsb3c6XCJoaWRkZW5cIixwb2ludGVyRXZlbnRzOlwibm9uZVwifX19fWZ1bmN0aW9uIHBpY2soZSl7Zm9yKHZhciB0PVtdLG49MTtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKXRbbi0xXT1hcmd1bWVudHNbbl07dmFyIGk9e307cmV0dXJuIHQuZm9yRWFjaCgoZnVuY3Rpb24odCl7aVt0XT1lW3RdfSkpLGl9ZnVuY3Rpb24gb21pdChlKXtmb3IodmFyIHQ9W10sbj0xO248YXJndW1lbnRzLmxlbmd0aDtuKyspdFtuLTFdPWFyZ3VtZW50c1tuXTt2YXIgaT1fX2Fzc2lnbih7fSxlKTtyZXR1cm4gdC5mb3JFYWNoKChmdW5jdGlvbihlKXtkZWxldGUgaVtlXX0pKSxpfXZhciBpbnN0YW5jZXNNYXA9bmV3IE1hcCx3cmFwQ29tcG9uZW50PWZ1bmN0aW9uKGUpe3JldHVybiBmdW5jdGlvbih0KXt2YXIgbixpPXQuYnVpbGRlclRhZ3x8XCJkaXZcIixyPVtcImNoaWxkcmVuXCJdLmNvbmNhdCgobnVsbD09PShuPWUuaW5wdXRzKXx8dm9pZCAwPT09bj92b2lkIDA6bi5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLm5hbWV9KSkpfHxbXSksbz1vbWl0LmFwcGx5KHZvaWQgMCxfX3NwcmVhZEFycmF5KF9fc3ByZWFkQXJyYXkoW3RdLHIsITEpLFtcImF0dHJpYnV0ZXNcIl0sITEpKSxhPXQ7cmV0dXJuIGUubm9XcmFwP1JlYWN0X19kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoZS5jbGFzcyxfX2Fzc2lnbih7YXR0cmlidXRlczpvfSxhKSk6UmVhY3RfX2RlZmF1bHQuY3JlYXRlRWxlbWVudChpLF9fYXNzaWduKHt9LG8pLFJlYWN0X19kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoZS5jbGFzcyxfX2Fzc2lnbih7fSxhKSkpfX0sc2l6ZSQxPWZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3Qua2V5cyhlKS5sZW5ndGh9O2Z1bmN0aW9uIGRlYm91bmNlKGUsdCxuKXt2YXIgaTtyZXR1cm4gdm9pZCAwPT09biYmKG49ITEpLGZ1bmN0aW9uKCl7dmFyIHI9dGhpcyxvPWFyZ3VtZW50cztjbGVhclRpbWVvdXQoaSksaT1zZXRUaW1lb3V0KChmdW5jdGlvbigpe2k9bnVsbCxufHxlLmFwcGx5KHIsbyl9KSx0KSxuJiYhaSYmZS5hcHBseShyLG8pfX12YXIgZm9udHNMb2FkZWQ9bmV3IFNldCxmZXRjaCQxO2dsb2JhbFRoaXMuZmV0Y2gmJihmZXRjaCQxPWdsb2JhbFRoaXMuZmV0Y2gpLG51bGwhPWZldGNoJDF8fChmZXRjaCQxPXJlcXVpcmUoXCJub2RlLWZldGNoXCIpKTt2YXIgc2l6ZU1hcD17ZGVza3RvcDpcImxhcmdlXCIsdGFibGV0OlwibWVkaXVtXCIsbW9iaWxlOlwic21hbGxcIn0sZmV0Y2hDYWNoZT17fTtmdW5jdGlvbiBzZWFyY2hUb09iamVjdCQxKGUpe3ZhciB0PShlLnNlYXJjaHx8XCJcIikuc3Vic3RyaW5nKDEpLnNwbGl0KFwiJlwiKSxuPXt9O2Zvcih2YXIgaSBpbiB0KWlmKHRbaV0mJlwic3RyaW5nXCI9PXR5cGVvZiB0W2ldKXt2YXIgcj10W2ldLnNwbGl0KFwiPVwiKTtuW2RlY29kZVVSSUNvbXBvbmVudChyWzBdKV09ZGVjb2RlVVJJQ29tcG9uZW50KHJbMV0pfXJldHVybiBufXZhciBCdWlsZGVyQ29tcG9uZW50PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCl7dmFyIG4saSxyPXRoaXM7KHI9ZS5jYWxsKHRoaXMsdCl8fHRoaXMpLnN1YnNjcmlwdGlvbnM9bmV3IFN1YnNjcmlwdGlvbixyLm9uU3RhdGVDaGFuZ2U9bmV3IEJlaGF2aW9yU3ViamVjdChudWxsKSxyLmFzU2VydmVyPUJ1aWxkZXIuaXNTZXJ2ZXIsci5jb250ZW50UmVmPW51bGwsci5zdHlsZVJlZj1udWxsLHIucm9vdFN0YXRlPUJ1aWxkZXIuaXNTZXJ2ZXI/e306b25DaGFuZ2Uoe30sKGZ1bmN0aW9uKCl7cmV0dXJuIHIudXBkYXRlU3RhdGUoKX0pKSxyLmxhc3RKc0NvZGU9XCJcIixyLmxhc3RIdHRwUmVxdWVzdHM9e30sci5odHRwU3Vic2NyaXB0aW9uUGVyS2V5PXt9LHIuZmlyc3RMb2FkPSEwLHIucmVmPW51bGwsci5tZXNzYWdlTGlzdGVuZXI9ZnVuY3Rpb24oZSl7dmFyIHQ7aWYoQnVpbGRlci5pc1RydXN0ZWRIb3N0Rm9yRXZlbnQoZSkpe3ZhciBuPWUuZGF0YTtzd2l0Y2gobi50eXBlKXtjYXNlXCJidWlsZGVyLmNvbmZpZ3VyZVNka1wiOnZhciBpPW4uZGF0YTtpZighaS5jb250ZW50SWR8fGkuY29udGVudElkIT09KG51bGw9PT0odD1yLnVzZUNvbnRlbnQpfHx2b2lkIDA9PT10P3ZvaWQgMDp0LmlkKSlyZXR1cm47ci5zaXplcz1nZXRTaXplc0ZvckJyZWFrcG9pbnRzKGkuYnJlYWtwb2ludHN8fHt9KSxyLnNldFN0YXRlKHtzdGF0ZTpPYmplY3QuYXNzaWduKHIucm9vdFN0YXRlLHtkZXZpY2VTaXplOnIuZGV2aWNlU2l6ZVN0YXRlLGRldmljZTpyLmRldmljZX0pLHVwZGF0ZXM6KHIuc3RhdGUmJnIuc3RhdGUudXBkYXRlc3x8MCkrMSxicmVha3BvaW50czppLmJyZWFrcG9pbnRzfSk7YnJlYWs7Y2FzZVwiYnVpbGRlci51cGRhdGVTcGFjZXJcIjp2YXIgbz1uLmRhdGE7ci5yb290U3RhdGUuX3NwYWNlcixyLnVwZGF0ZVN0YXRlKChmdW5jdGlvbihlKXtlLl9zcGFjZXI9b30pKTticmVhaztjYXNlXCJidWlsZGVyLnJlc2V0U3RhdGVcIjp2YXIgYT1uLmRhdGEscz1hLnN0YXRlO2lmKGEubW9kZWw9PT1yLm5hbWUpe2Zvcih2YXIgbCBpbiByLnJvb3RTdGF0ZSlcImZ1bmN0aW9uXCIhPXR5cGVvZiByLnJvb3RTdGF0ZVtsXSYmZGVsZXRlIHIucm9vdFN0YXRlW2xdO09iamVjdC5hc3NpZ24oci5yb290U3RhdGUscyksci5zZXRTdGF0ZShfX2Fzc2lnbihfX2Fzc2lnbih7fSxyLnN0YXRlKSx7c3RhdGU6ci5yb290U3RhdGUsdXBkYXRlczooci5zdGF0ZSYmci5zdGF0ZS51cGRhdGVzfHwwKSsxfSkpfWJyZWFrO2Nhc2VcImJ1aWxkZXIucmVzZXRTeW1ib2xTdGF0ZVwiOnZhciB1PW4uZGF0YS5zdGF0ZSxkPShzPXUuc3RhdGUsdS5tb2RlbCx1LmlkKTtpZihyLnByb3BzLmJ1aWxkZXJCbG9jayYmci5wcm9wcy5idWlsZGVyQmxvY2s9PT1kKXtmb3IodmFyIGwgaW4gci5yb290U3RhdGUpZGVsZXRlIHIucm9vdFN0YXRlW2xdO09iamVjdC5hc3NpZ24oci5yb290U3RhdGUscyksci5zZXRTdGF0ZShfX2Fzc2lnbihfX2Fzc2lnbih7fSxyLnN0YXRlKSx7c3RhdGU6ci5yb290U3RhdGUsdXBkYXRlczooci5zdGF0ZSYmci5zdGF0ZS51cGRhdGVzfHwwKSsxfSkpfX19fSxyLnJlc2l6ZUZuPWZ1bmN0aW9uKCl7dmFyIGU9ci5kZXZpY2VTaXplU3RhdGU7ZSE9PXIuc3RhdGUuc3RhdGUuZGV2aWNlU2l6ZSYmci5zZXRTdGF0ZShfX2Fzc2lnbihfX2Fzc2lnbih7fSxyLnN0YXRlKSx7dXBkYXRlczooci5zdGF0ZSYmci5zdGF0ZS51cGRhdGVzfHwwKSsxLHN0YXRlOk9iamVjdC5hc3NpZ24oci5yb290U3RhdGUsX19hc3NpZ24oX19hc3NpZ24oe30sci5zdGF0ZS5zdGF0ZSkse2RldmljZVNpemU6ZX0pKX0pKX0sci5yZXNpemVMaXN0ZW5lcj1CdWlsZGVyLmlzRWRpdGluZz90aHJvdHRsZShyLnJlc2l6ZUZuLDIwMCk6ZGVib3VuY2Uoci5yZXNpemVGbiw0MDApLHIubW91bnRlZD0hMSxyLnVwZGF0ZVN0YXRlPWZ1bmN0aW9uKGUpe3ZhciB0PXIucm9vdFN0YXRlO2UmJmUodCksci5tb3VudGVkP3Iuc2V0U3RhdGUoe3VwZGF0ZTpyLnVwZGF0ZVN0YXRlLHN0YXRlOnQsdXBkYXRlczooci5zdGF0ZSYmci5zdGF0ZS51cGRhdGVzfHwwKSsxfSk6ci5zdGF0ZT1fX2Fzc2lnbihfX2Fzc2lnbih7fSxyLnN0YXRlKSx7dXBkYXRlOnIudXBkYXRlU3RhdGUsc3RhdGU6dCx1cGRhdGVzOihyLnN0YXRlJiZyLnN0YXRlLnVwZGF0ZXN8fDApKzF9KSxyLm5vdGlmeVN0YXRlQ2hhbmdlKCl9LHIub25Db250ZW50TG9hZGVkPWZ1bmN0aW9uKGUsdCl7aWYoXCJwYWdlXCI9PT1yLm5hbWUmJkJ1aWxkZXIuaXNCcm93c2VyJiZlKXt2YXIgbj1lLnRpdGxlLGk9ZS5wYWdlVGl0bGUsbz1lLmRlc2NyaXB0aW9uLGE9ZS5wYWdlRGVzY3JpcHRpb247aWYoKG58fGkpJiYoZG9jdW1lbnQudGl0bGU9bnx8aSksb3x8YSl7dmFyIHM9ZG9jdW1lbnQucXVlcnlTZWxlY3RvcignbWV0YVtuYW1lPVwiZGVzY3JpcHRpb25cIl0nKTtzfHwoKHM9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm1ldGFcIikpLnNldEF0dHJpYnV0ZShcIm5hbWVcIixcImRlc2NyaXB0aW9uXCIpLGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQocykpLHMuc2V0QXR0cmlidXRlKFwiY29udGVudFwiLG98fGEpfX1pZihCdWlsZGVyLmlzRWRpdGluZyYmci5ub3RpZnlTdGF0ZUNoYW5nZSgpLHIucHJvcHMuY29udGVudExvYWRlZCYmci5wcm9wcy5jb250ZW50TG9hZGVkKGUsdCksZSYmZS5pbnB1dHMmJkFycmF5LmlzQXJyYXkoZS5pbnB1dHMpJiZlLmlucHV0cy5sZW5ndGgmJihlLnN0YXRlfHwoZS5zdGF0ZT17fSksZS5pbnB1dHMuZm9yRWFjaCgoZnVuY3Rpb24odCl7dCYmdC5uYW1lJiZ2b2lkIDAhPT10LmRlZmF1bHRWYWx1ZSYmdm9pZCAwPT09ZS5zdGF0ZVt0Lm5hbWVdJiYoZS5zdGF0ZVt0Lm5hbWVdPXQuZGVmYXVsdFZhbHVlKX0pKSksZSYmZS5zdGF0ZSl7dmFyIGw9X19hc3NpZ24oX19hc3NpZ24oe30sci5zdGF0ZSkse3VwZGF0ZXM6KHIuc3RhdGUmJnIuc3RhdGUudXBkYXRlc3x8MCkrMSxzdGF0ZTpPYmplY3QuYXNzaWduKHIucm9vdFN0YXRlLF9fYXNzaWduKF9fYXNzaWduKF9fYXNzaWduKF9fYXNzaWduKF9fYXNzaWduKHt9LHIuc3RhdGUuc3RhdGUpLHtsb2NhdGlvbjpyLmxvY2F0aW9uU3RhdGUsZGV2aWNlOnIuZGV2aWNlfSksZS5zdGF0ZSksci5leHRlcm5hbFN0YXRlKSx7ZGV2aWNlU2l6ZTpyLmRldmljZVNpemVTdGF0ZX0pKX0pO3IubW91bnRlZD9yLnNldFN0YXRlKGwpOnIuc3RhdGU9bH1pZihlJiZlLmpzQ29kZSYmIXIub3B0aW9ucy5jb2RlZ2VuKXt2YXIgdT0hMTtpZihCdWlsZGVyLmlzRWRpdGluZyYmKHIubGFzdEpzQ29kZT09PWUuanNDb2RlP3U9ITA6ci5sYXN0SnNDb2RlPWUuanNDb2RlKSwhdSl7dmFyIGQ9ci5zdGF0ZS5zdGF0ZTt0cnl7bmV3IEZ1bmN0aW9uKFwiZGF0YVwiLFwicmVmXCIsXCJzdGF0ZVwiLFwidXBkYXRlXCIsXCJlbGVtZW50XCIsXCJCdWlsZGVyXCIsXCJidWlsZGVyXCIsXCJjb250ZXh0XCIsZS5qc0NvZGUpKGUscixkLHIuc3RhdGUudXBkYXRlLHIucmVmLEJ1aWxkZXIsYnVpbGRlcixyLnN0YXRlLmNvbnRleHQpfWNhdGNoKHQpe3ZhciBjPXRvRXJyb3IodCk7QnVpbGRlci5pc0Jyb3dzZXI/Y29uc29sZS53YXJuKFwiQnVpbGRlciBjdXN0b20gY29kZSBlcnJvcjpcIixjLm1lc3NhZ2UsXCJpblwiLGUuanNDb2RlLGMuc3RhY2spOmlzRGVidWcoKSYmY29uc29sZS5kZWJ1ZyhcIkJ1aWxkZXIgY3VzdG9tIGNvZGUgZXJyb3I6XCIsYy5tZXNzYWdlLFwiaW5cIixlLmpzQ29kZSxjLnN0YWNrKX19fWlmKGUmJmUuaHR0cFJlcXVlc3RzJiYhci5wcm9wcy5ub0FzeW5jJiYhKHU9ITEpKXt2YXIgcD1mdW5jdGlvbih0KXt2YXIgbj1lLmh0dHBSZXF1ZXN0c1t0XTtpZihuJiYoIXIuZGF0YVt0XXx8QnVpbGRlci5pc0VkaXRpbmcpKWlmKEJ1aWxkZXIuaXNCcm93c2VyKXt2YXIgaT1yLmV2YWxFeHByZXNzaW9uKG4pO2lmKEJ1aWxkZXIuaXNFZGl0aW5nJiZyLmxhc3RIdHRwUmVxdWVzdHNbdF09PT1pKXJldHVyblwiY29udGludWVcIjtyLmxhc3RIdHRwUmVxdWVzdHNbdF09aTt2YXIgbz1uLm1hdGNoKC9idWlsZGVyXFwuaW9cXC9hcGlcXC92MlxcLyhbXlxcL1xcP10rKS9pKTtvJiZvWzFdLHIuaGFuZGxlUmVxdWVzdCh0LGkpO3ZhciBhPXIuaHR0cFN1YnNjcmlwdGlvblBlcktleVt0XTthJiZhLnVuc3Vic2NyaWJlKCk7dmFyIHM9ci5odHRwU3Vic2NyaXB0aW9uUGVyS2V5W3RdPXIub25TdGF0ZUNoYW5nZS5zdWJzY3JpYmUoKGZ1bmN0aW9uKCl7dmFyIGU9ci5ldmFsRXhwcmVzc2lvbihuKTtlIT09aSYmKHIuaGFuZGxlUmVxdWVzdCh0LGUpLHIubGFzdEh0dHBSZXF1ZXN0c1t0XT1lKX0pKTtyLnN1YnNjcmlwdGlvbnMuYWRkKHMpfWVsc2Ugci5oYW5kbGVSZXF1ZXN0KHQsci5ldmFsRXhwcmVzc2lvbihuKSl9O2Zvcih2YXIgZiBpbiBlLmh0dHBSZXF1ZXN0cylwKGYpfX07dmFyIG89ci5pbmxpbmVkQ29udGVudDtvJiZvLmNvbnRlbnQmJihvPW8uY29udGVudCksci5zaXplcz1nZXRTaXplc0ZvckJyZWFrcG9pbnRzKChudWxsPT09KG49bnVsbD09bz92b2lkIDA6by5tZXRhKXx8dm9pZCAwPT09bj92b2lkIDA6bi5icmVha3BvaW50cyl8fHt9KTt2YXIgYT1udWxsPT09KGk9ci5pbmxpbmVkQ29udGVudCl8fHZvaWQgMD09PWk/dm9pZCAwOmkuZGF0YTthJiZBcnJheS5pc0FycmF5KGEuaW5wdXRzKSYmYS5pbnB1dHMubGVuZ3RoPjAmJihhLnN0YXRlfHwoYS5zdGF0ZT17fSksYS5pbnB1dHMuZm9yRWFjaCgoZnVuY3Rpb24oZSl7ZSYmZS5uYW1lJiZ2b2lkIDAhPT1lLmRlZmF1bHRWYWx1ZSYmdm9pZCAwPT09YS5zdGF0ZVtlLm5hbWVdJiYoYS5zdGF0ZVtlLm5hbWVdPWUuZGVmYXVsdFZhbHVlKX0pKSksci5zdGF0ZT17Y29udGV4dDpfX2Fzc2lnbihfX2Fzc2lnbih7fSx0LmNvbnRleHQpLHthcGlLZXk6ci5wcm9wcy5hcGlLZXl8fGJ1aWxkZXIuYXBpS2V5fSksc3RhdGU6T2JqZWN0LmFzc2lnbihyLnJvb3RTdGF0ZSxfX2Fzc2lnbihfX2Fzc2lnbihfX2Fzc2lnbihfX2Fzc2lnbih7fSxyLmlubGluZWRDb250ZW50JiZyLmlubGluZWRDb250ZW50LmRhdGEmJnIuaW5saW5lZENvbnRlbnQuZGF0YS5zdGF0ZSkse2lzQnJvd3NlcjpCdWlsZGVyLmlzQnJvd3Nlcixpc1NlcnZlcjohQnVpbGRlci5pc0Jyb3dzZXIsX2h5ZHJhdGU6dC5oeWRyYXRlLGxvY2F0aW9uOnIubG9jYXRpb25TdGF0ZSxkZXZpY2VTaXplOnIuZGV2aWNlU2l6ZVN0YXRlLGRldmljZTpyLmRldmljZX0pLHIuZ2V0SHRtbERhdGEoKSksdC5kYXRhKSksdXBkYXRlczowLGtleTowLHVwZGF0ZTpyLnVwZGF0ZVN0YXRlfTt2YXIgcz1yLnByb3BzLmFwaUtleTtpZihzJiZzIT09ci5idWlsZGVyLmFwaUtleSYmIWluc3RhbmNlc01hcC5oYXMocykpe3ZhciBsPW5ldyBCdWlsZGVyKHMsdm9pZCAwLHZvaWQgMCwhMCk7aW5zdGFuY2VzTWFwLnNldChzLGwpfWlmKHIuaW5saW5lZENvbnRlbnQpe3ZhciB1PXIuaW5saW5lZENvbnRlbnQuY29udGVudHx8ci5pbmxpbmVkQ29udGVudDtyLm9uQ29udGVudExvYWRlZChudWxsPT11P3ZvaWQgMDp1LmRhdGEsZ2V0Q29udGVudFdpdGhJbmZvKHUpKX1yZXR1cm4gci5yZWdpc3RlckN1c3RvbUNvbXBvbmVudHMoKSxyfXJldHVybiBfX2V4dGVuZHModCxlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJvcHRpb25zXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSx0LmRlZmF1bHRzKSx0aGlzLnByb3BzKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJuYW1lXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByb3BzLm1vZGVsfHx0aGlzLnByb3BzLm1vZGVsTmFtZXx8dGhpcy5wcm9wcy5uYW1lfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImVsZW1lbnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVmfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImlubGluZWRDb250ZW50XCIse2dldDpmdW5jdGlvbigpe2lmKCF0aGlzLmlzUHJldmlld2luZ3x8dGhpcy5wcm9wcy5pbmxpbmVDb250ZW50KXJldHVybiB0aGlzLnByb3BzLmNvbnRlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiYnVpbGRlclwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wcm9wcy5hcGlLZXkmJmluc3RhbmNlc01hcC5nZXQodGhpcy5wcm9wcy5hcGlLZXkpfHx0aGlzLnByb3BzLmJ1aWxkZXJ8fGJ1aWxkZXJ9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuZ2V0SHRtbERhdGE9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmlubGluZWRDb250ZW50JiZ0aGlzLmlubGluZWRDb250ZW50LmlkfHx0aGlzLnByb3BzLmVudHJ5LHQ9ZSYmQnVpbGRlci5pc0Jyb3dzZXImJmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3NjcmlwdFtkYXRhLWJ1aWxkZXItanNvbj1cIicuY29uY2F0KGUsJ1wiXSxzY3JpcHRbZGF0YS1idWlsZGVyLXN0YXRlPVwiJykuY29uY2F0KGUsJ1wiXScpKTtpZih0KXRyeXtyZXR1cm4gSlNPTi5wYXJzZSh0LmlubmVyVGV4dCl9Y2F0Y2goZSl7Y29uc29sZS53YXJuKFwiQ291bGQgbm90IHBhcnNlIEJ1aWxkZXIuaW8gSFRNTCBkYXRhIHRyYW5zZmVyXCIsZSx0LmlubmVyVGV4dCl9cmV0dXJue319LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImRldmljZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5idWlsZGVyLmdldFVzZXJBdHRyaWJ1dGVzKCkuZGV2aWNlfHxcImRlc2t0b3BcIn0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJsb2NhdGlvblN0YXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSxwaWNrKHRoaXMubG9jYXRpb24sXCJwYXRobmFtZVwiLFwiaG9zdG5hbWVcIixcInNlYXJjaFwiLFwiaG9zdFwiKSkse3BhdGg6dGhpcy5sb2NhdGlvbi5wYXRobmFtZSYmdGhpcy5sb2NhdGlvbi5wYXRobmFtZS5zcGxpdChcIi9cIikuc2xpY2UoMSl8fFwiXCIscXVlcnk6c2VhcmNoVG9PYmplY3QkMSh0aGlzLmxvY2F0aW9uKX0pfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImRldmljZVNpemVTdGF0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gQnVpbGRlci5pc0Jyb3dzZXI/dGhpcy5zaXplcy5nZXRTaXplRm9yV2lkdGgod2luZG93LmlubmVyV2lkdGgpOnNpemVNYXBbdGhpcy5kZXZpY2VdfHxcImxhcmdlXCJ9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5yZW5kZXJJbnRvPWZ1bmN0aW9uKGUsbixpLHIpe2lmKHZvaWQgMD09PW4mJihuPXt9KSx2b2lkIDA9PT1pJiYoaT0hMCksdm9pZCAwPT09ciYmKHI9ITEpLGNvbnNvbGUuZGVidWcoXCJCdWlsZGVyUGFnZS5yZW5kZXJJbnRvXCIsZSxuLGksdGhpcyksZSl7dmFyIG89bnVsbDtpZihcInN0cmluZ1wiPT10eXBlb2YgZT9vPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZSk6ZSBpbnN0YW5jZW9mIEVsZW1lbnQmJihvPWUpLG8pe3ZhciBhPW8uY2xhc3NMaXN0LmNvbnRhaW5zKFwiYnVpbGRlci1oeWRyYXRlZFwiKTtpZighYXx8cil7by5jbGFzc0xpc3QuYWRkKFwiYnVpbGRlci1oeWRyYXRlZFwiKTt2YXIgcz1pJiZvLmlubmVySFRNTC5pbmNsdWRlcyhcImJ1aWxkZXItYmxvY2tcIik7aWYoIW8uY2xhc3NMaXN0LmNvbnRhaW5zKFwiYnVpbGRlci1jb21wb25lbnRcIikpe3ZhciBsPW8ucXVlcnlTZWxlY3RvcihcIi5idWlsZGVyLWFwaS1zdHlsZXNcIil8fChvLnByZXZpb3VzRWxlbWVudFNpYmxpbmcmJm8ucHJldmlvdXNFbGVtZW50U2libGluZy5tYXRjaGVzKFwiLmJ1aWxkZXItYXBpLXN0eWxlc1wiKT9vLnByZXZpb3VzRWxlbWVudFNpYmxpbmc6bnVsbCksdT1cIlwiO2lmKGwpbC5pbm5lckhUTUwucmVwbGFjZSgvXFwvXFwqc3RhcnQ6KFteXFwqXSs/KVxcKlxcLyhbXFxzXFxTXSo/KVxcL1xcKmVuZDooW15cXCpdKz8pXFwqXFwvL2csKGZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1udWxsO3RyeXtpPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ1tkYXRhLWVtb3Rpb24tY3NzPVwiJy5jb25jYXQodCwnXCJdJykpfWNhdGNoKGUpe2NvbnNvbGUud2FybihlKX1yZXR1cm4gaT9pLmlubmVySFRNTD1uOkJ1aWxkZXIuaXNFZGl0aW5nfHwodSs9ZSksZX0pKSxCdWlsZGVyLm5leHRUaWNrKChmdW5jdGlvbigpe2wuaW5uZXJIVE1MPXV9KSk7dmFyIGQ9by5xdWVyeVNlbGVjdG9yKFwiLmJ1aWxkZXItY29tcG9uZW50XCIpO2Q/bz1kOnM9ITF9bG9jYXRpb24uc2VhcmNoLmluY2x1ZGVzKFwiYnVpbGRlci5kZWJ1Zz10cnVlXCIpJiZjb25zb2xlLmRlYnVnKFwiaHlkcmF0ZVwiLHMsbyk7dmFyIGM9bztpZighYSl7dmFyIHA9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtvLmluc2VydEFkamFjZW50RWxlbWVudChcImJlZm9yZWJlZ2luXCIscCkscC5hcHBlbmRDaGlsZChvKSxjPXB9aWYoKEJ1aWxkZXIuaXNFZGl0aW5nfHxCdWlsZGVyLmlzQnJvd3NlciYmbG9jYXRpb24uc2VhcmNoLmluY2x1ZGVzKFwiYnVpbGRlci5wcmV2aWV3PVwiKSkmJihzPSExKSxzJiZvKXt2YXIgZj1SZWFjdERPTS5yZW5kZXIoUmVhY3RfX2RlZmF1bHQuY3JlYXRlRWxlbWVudCh0LF9fYXNzaWduKHt9LG4pKSxjLGMuYnVpbGRlclJvb3RSZWYpO3JldHVybiBjLmJ1aWxkZXJSb290UmVmPWYsZn12YXIgbT1SZWFjdERPTS5yZW5kZXIoUmVhY3RfX2RlZmF1bHQuY3JlYXRlRWxlbWVudCh0LF9fYXNzaWduKHt9LG4pKSxjLGMuYnVpbGRlclJvb3RSZWYpO3JldHVybiBjLmJ1aWxkZXJSb290UmVmPW0sbX1jb25zb2xlLmRlYnVnKFwiVHJpZWQgdG8gaHlkcmF0ZSBtdWx0aXBsZSB0aW1lc1wiKX19fSx0LnByb3RvdHlwZS5yZWdpc3RlckN1c3RvbUNvbXBvbmVudHM9ZnVuY3Rpb24oKXtpZih0aGlzLnByb3BzLmN1c3RvbUNvbXBvbmVudHMpZm9yKHZhciBlPTAsdD10aGlzLnByb3BzLmN1c3RvbUNvbXBvbmVudHM7ZTx0Lmxlbmd0aDtlKyspe3ZhciBuPXRbZV07aWYobil7dmFyIGk9bi5jb21wb25lbnQscj1fX3Jlc3QobixbXCJjb21wb25lbnRcIl0pO0J1aWxkZXIucmVnaXN0ZXJDb21wb25lbnQoaSxyKX19fSx0LnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudD1mdW5jdGlvbigpe3ZhciBlLHQ9dGhpczt0aGlzLm1vdW50ZWQ9ITAsdGhpcy5hc1NlcnZlciYmKHRoaXMuYXNTZXJ2ZXI9ITEsdGhpcy51cGRhdGVTdGF0ZSgoZnVuY3Rpb24oZSl7ZS5pc0Jyb3dzZXI9ITAsZS5pc1NlcnZlcj0hMX0pKSksQnVpbGRlci5pc0lmcmFtZSYmKG51bGw9PT0oZT13aW5kb3cucGFyZW50KXx8dm9pZCAwPT09ZXx8ZS5wb3N0TWVzc2FnZSh7dHlwZTpcImJ1aWxkZXIuc2RrSW5qZWN0ZWRcIixkYXRhOnttb2RlbE5hbWU6dGhpcy5uYW1lfX0sXCIqXCIpKSxCdWlsZGVyLmlzQnJvd3NlciYmKHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsdGhpcy5yZXNpemVMaXN0ZW5lciksQnVpbGRlci5pc0VkaXRpbmcmJndpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLHRoaXMubWVzc2FnZUxpc3RlbmVyKSwoQnVpbGRlci5pc0VkaXRpbmd8fEJ1aWxkZXIuaXNQcmV2aWV3aW5nKSYmQnVpbGRlci5uZXh0VGljaygoZnVuY3Rpb24oKXt0LmZpcnN0TG9hZD0hMSx0LnJlbG9hZCgpfSkpLHNldFRpbWVvdXQoKGZ1bmN0aW9uKCl7d2luZG93LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwiYnVpbGRlcjpjb21wb25lbnQ6bG9hZFwiLHtkZXRhaWw6e3JlZjp0fX0pKX0pKSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImlzUHJldmlld2luZ1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4oQnVpbGRlci5pc1NlcnZlcnx8QnVpbGRlci5pc0Jyb3dzZXImJkJ1aWxkZXIuaXNQcmV2aWV3aW5nJiYhdGhpcy5maXJzdExvYWQpJiYoYnVpbGRlci5wcmV2aWV3aW5nTW9kZWw9PT10aGlzLm5hbWV8fFwiQlVJTERFUl9TVFVESU9cIj09PWJ1aWxkZXIucHJldmlld2luZ01vZGVsKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5ub3RpZnlTdGF0ZUNoYW5nZT1mdW5jdGlvbigpe2lmKCFCdWlsZGVyLmlzU2VydmVyJiZ0aGlzJiZ0aGlzLnN0YXRlKXt2YXIgZT10aGlzLnN0YXRlLnN0YXRlO3RoaXMucHJvcHMub25TdGF0ZUNoYW5nZSYmdGhpcy5wcm9wcy5vblN0YXRlQ2hhbmdlKGUpLEJ1aWxkZXIuaXNCcm93c2VyJiZ3aW5kb3cuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJidWlsZGVyOmNvbXBvbmVudDpzdGF0ZUNoYW5nZVwiLHtkZXRhaWw6e3N0YXRlOmUscmVmOnRoaXN9fSkpLHRoaXMub25TdGF0ZUNoYW5nZS5uZXh0KGUpfX0sdC5wcm90b3R5cGUucHJvY2Vzc1N0YXRlRnJvbUFwaT1mdW5jdGlvbihlKXtyZXR1cm4gZX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwibG9jYXRpb25cIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJvcHMubG9jYXRpb258fChCdWlsZGVyLmlzQnJvd3Nlcj9sb2NhdGlvbjp7fSl9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuZ2V0Q3NzRnJvbUZvbnQ9ZnVuY3Rpb24oZSx0KXt2YXIgbj1lLmZhbWlseSsoZS5raW5kJiYhZS5raW5kLmluY2x1ZGVzKFwiI1wiKT9cIiwgXCIrZS5raW5kOlwiXCIpLGk9bi5zcGxpdChcIixcIilbMF0scj1lLmZpbGVVcmw/ZS5maWxlVXJsOmUuZmlsZXMmJmUuZmlsZXMucmVndWxhcixvPVwiXCI7aWYociYmbiYmaSYmKG8rPSdcXG5AZm9udC1mYWNlIHtcXG4gIGZvbnQtZmFtaWx5OiBcIicuY29uY2F0KG4sJ1wiO1xcbiAgc3JjOiBsb2NhbChcIicpLmNvbmNhdChpLFwiXFxcIiksIHVybCgnXCIpLmNvbmNhdChyLFwiJykgZm9ybWF0KCd3b2ZmMicpO1xcbiAgZm9udC1kaXNwbGF5OiBmYWxsYmFjaztcXG4gIGZvbnQtd2VpZ2h0OiA0MDA7XFxufVxcbiAgICAgICAgXCIpLnRyaW0oKSksZS5maWxlcylmb3IodmFyIGEgaW4gZS5maWxlcyl7aWYoU3RyaW5nKE51bWJlcihhKSk9PT1hKXt2YXIgcz1lLmZpbGVzW2FdO3MmJnMhPT1yJiYobys9J1xcbkBmb250LWZhY2Uge1xcbiAgZm9udC1mYW1pbHk6IFwiJy5jb25jYXQobixcIlxcXCI7XFxuICBzcmM6IHVybCgnXCIpLmNvbmNhdChzLFwiJykgZm9ybWF0KCd3b2ZmMicpO1xcbiAgZm9udC1kaXNwbGF5OiBmYWxsYmFjaztcXG4gIGZvbnQtd2VpZ2h0OiBcIikuY29uY2F0KGEsXCI7XFxufVxcbiAgICAgICAgICBcIikudHJpbSgpKX19cmV0dXJuIG99LHQucHJvdG90eXBlLmNvbXBvbmVudFdpbGxVbm1vdW50PWZ1bmN0aW9uKCl7dGhpcy51bnN1YnNjcmliZSgpLEJ1aWxkZXIuaXNCcm93c2VyJiYod2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJyZXNpemVcIix0aGlzLnJlc2l6ZUxpc3RlbmVyKSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIix0aGlzLm1lc3NhZ2VMaXN0ZW5lcikpfSx0LnByb3RvdHlwZS5nZXRGb250Q3NzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIHRoaXMuYnVpbGRlci5hbGxvd0N1c3RvbUZvbnRzJiYobnVsbD09ZT92b2lkIDA6ZS5jdXN0b21Gb250cykmJmUuY3VzdG9tRm9udHMubGVuZ3RoJiZlLmN1c3RvbUZvbnRzLm1hcCgoZnVuY3Rpb24obil7cmV0dXJuIHQuZ2V0Q3NzRnJvbUZvbnQobixlKX0pKS5qb2luKFwiIFwiKXx8XCJcIn0sdC5wcm90b3R5cGUuZW5zdXJlRm9udHNMb2FkZWQ9ZnVuY3Rpb24oZSl7aWYodGhpcy5idWlsZGVyLmFsbG93Q3VzdG9tRm9udHMmJihudWxsPT1lP3ZvaWQgMDplLmN1c3RvbUZvbnRzKSYmQXJyYXkuaXNBcnJheShlLmN1c3RvbUZvbnRzKSlmb3IodmFyIHQ9MCxuPWUuY3VzdG9tRm9udHM7dDxuLmxlbmd0aDt0Kyspe3ZhciBpPW5bdF0scj1pLmZpbGVVcmw/aS5maWxlVXJsOmkuZmlsZXMmJmkuZmlsZXMucmVndWxhcjtpZighZm9udHNMb2FkZWQuaGFzKHIpKXt2YXIgbz10aGlzLmdldENzc0Zyb21Gb250KGksZSk7aWYoZm9udHNMb2FkZWQuYWRkKHIpLCFvKWNvbnRpbnVlO3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTthLmNsYXNzTmFtZT1cImJ1aWxkZXItY3VzdG9tLWZvbnRcIixhLnNldEF0dHJpYnV0ZShcImRhdGEtYnVpbGRlci1jdXN0b20tZm9udFwiLHIpLGEuaW5uZXJIVE1MPW8sZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChhKX19fSx0LnByb3RvdHlwZS5nZXRDc3M9ZnVuY3Rpb24oZSl7dmFyIHQsbj1udWxsPT09KHQ9dGhpcy51c2VDb250ZW50KXx8dm9pZCAwPT09dD92b2lkIDA6dC5pZCxpPShudWxsPT1lP3ZvaWQgMDplLmNzc0NvZGUpfHxcIlwiO3JldHVybiBuJiYoaT1pLnJlcGxhY2UoLyYvZyxcIi5idWlsZGVyLWNvbXBvbmVudC1cIi5jb25jYXQobikpKSxpK3RoaXMuZ2V0Rm9udENzcyhlKX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiZGF0YVwiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgZSx0PV9fYXNzaWduKF9fYXNzaWduKF9fYXNzaWduKHt9LHRoaXMuaW5saW5lZENvbnRlbnQmJihudWxsPT09KGU9dGhpcy5pbmxpbmVkQ29udGVudC5kYXRhKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5zdGF0ZSkpLHRoaXMuZXh0ZXJuYWxTdGF0ZSksdGhpcy5zdGF0ZS5zdGF0ZSk7cmV0dXJuIE9iamVjdC5hc3NpZ24odGhpcy5yb290U3RhdGUsdCksdH0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5jb21wb25lbnREaWRVcGRhdGU9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpczt0aGlzLnByb3BzLmRhdGEmJmUuZGF0YSE9PXRoaXMucHJvcHMuZGF0YSYmdGhpcy5zdGF0ZS51cGRhdGUoKGZ1bmN0aW9uKGUpe09iamVjdC5hc3NpZ24oZSx0LmV4dGVybmFsU3RhdGUpfSkpLHRoaXMucHJvcHMuY3VzdG9tQ29tcG9uZW50cyYmdGhpcy5wcm9wcy5jdXN0b21Db21wb25lbnRzIT09ZS5jdXN0b21Db21wb25lbnRzJiZ0aGlzLnJlZ2lzdGVyQ3VzdG9tQ29tcG9uZW50cygpLEJ1aWxkZXIuaXNFZGl0aW5nJiZ0aGlzLmlubGluZWRDb250ZW50JiZlLmNvbnRlbnQhPT10aGlzLmlubGluZWRDb250ZW50JiZ0aGlzLm9uQ29udGVudExvYWRlZCh0aGlzLmlubGluZWRDb250ZW50LmRhdGEsdGhpcy5pbmxpbmVkQ29udGVudCl9LHQucHJvdG90eXBlLmNoZWNrU3R5bGVzPWZ1bmN0aW9uKGUpe2lmKHRoaXMuc3R5bGVSZWYpe3ZhciB0PXRoaXMuZ2V0Q3NzKGUpO3RoaXMuc3R5bGVSZWYuaW5uZXJIVE1MIT09dCYmKHRoaXMuc3R5bGVSZWYuaW5uZXJIVE1MPXQpfX0sdC5wcm90b3R5cGUucmVsb2FkPWZ1bmN0aW9uKCl7dGhpcy5zZXRTdGF0ZSh7a2V5OnRoaXMuc3RhdGUua2V5KzF9KX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiY29udGVudFwiLHtnZXQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLmlubGluZWRDb250ZW50O3JldHVybiBlJiZlLmNvbnRlbnQmJihlPV9fYXNzaWduKF9fYXNzaWduKHt9LGUpLHtkYXRhOmUuY29udGVudH0pKSxlfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImV4dGVybmFsU3RhdGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIF9fYXNzaWduKF9fYXNzaWduKHt9LHRoaXMucHJvcHMuZGF0YSksdGhpcy5wcm9wcy5sb2NhbGU/e2xvY2FsZTp0aGlzLnByb3BzLmxvY2FsZX06e30pfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInVzZUNvbnRlbnRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuY29udGVudHx8dGhpcy5zdGF0ZS5jb250ZXh0LmJ1aWxkZXJDb250ZW50fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe3ZhciBlLHQ9dGhpcyxuPXRoaXMuY29udGVudCxpPUJ1aWxkZXIuaXNCcm93c2VyJiZ0aGlzLmV4dGVybmFsU3RhdGUmJnNpemUkMSh0aGlzLmV4dGVybmFsU3RhdGUpJiZoYXNoKHRoaXMuZXh0ZXJuYWxTdGF0ZSkscj1CdWlsZGVyLmlzRWRpdGluZz90aGlzLm5hbWU6dGhpcy5wcm9wcy5lbnRyeTtyJiYhQnVpbGRlci5pc0VkaXRpbmcmJmkmJmkubGVuZ3RoPDMwMCYmKHIrPVwiOlwiK2kpO3ZhciBvPXRoaXMucHJvcHMuZGF0YU9ubHk/UmVhY3RfX2RlZmF1bHQuRnJhZ21lbnQ6XCJkaXZcIixhPW51bGw9PT0oZT10aGlzLnVzZUNvbnRlbnQpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmlkO3JldHVybiBSZWFjdF9fZGVmYXVsdC5jcmVhdGVFbGVtZW50KG8se29uQ2xpY2s6ZnVuY3Rpb24oZSl7IUJ1aWxkZXIuaXNFZGl0aW5nfHx0LnByb3BzLmlzQ2hpbGR8fHQucHJvcHMuc3RvcENsaWNrUHJvcGFnYXRpb25XaGVuRWRpdGluZ3x8ZS5zdG9wUHJvcGFnYXRpb24oKX0sY2xhc3NOYW1lOlwiYnVpbGRlci1jb21wb25lbnQgXCIuY29uY2F0KGE/XCJidWlsZGVyLWNvbXBvbmVudC1cIi5jb25jYXQoYSk6XCJcIiksXCJkYXRhLW5hbWVcIjp0aGlzLm5hbWUsXCJkYXRhLXNvdXJjZVwiOlwiUmVuZGVyZWQgYnkgQnVpbGRlci5pb1wiLGtleTp0aGlzLnN0YXRlLmtleSxyZWY6ZnVuY3Rpb24oZSl7cmV0dXJuIHQucmVmPWV9fSxSZWFjdF9fZGVmYXVsdC5jcmVhdGVFbGVtZW50KEJ1aWxkZXJNZXRhQ29udGV4dC5Db25zdW1lcixudWxsLChmdW5jdGlvbihlKXtyZXR1cm4gUmVhY3RfX2RlZmF1bHQuY3JlYXRlRWxlbWVudChCdWlsZGVyTWV0YUNvbnRleHQuUHJvdmlkZXIse3ZhbHVlOlwiYm9vbGVhblwiPT10eXBlb2YgdC5wcm9wcy5hbXBNb2RlP19fYXNzaWduKF9fYXNzaWduKHt9LGUpLHthbXBNb2RlOnQucHJvcHMuYW1wTW9kZX0pOmV9LFJlYWN0X19kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoQnVpbGRlckFzeW5jUmVxdWVzdHNDb250ZXh0LkNvbnN1bWVyLG51bGwsKGZ1bmN0aW9uKGUpe3ZhciBpO3JldHVybiB0Ll9hc3luY1JlcXVlc3RzPWUmJmUucmVxdWVzdHMsdC5fZXJyb3JzPWUmJmUuZXJyb3JzLHQuX2xvZ3M9ZSYmZS5sb2dzLFJlYWN0X19kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoQnVpbGRlckNvbnRlbnQse2lzU3RhdGljOnQucHJvcHMuaXNTdGF0aWN8fEJ1aWxkZXIuaXNTdGF0aWMsa2V5OihudWxsPT09KGk9dC5pbmxpbmVkQ29udGVudCl8fHZvaWQgMD09PWk/dm9pZCAwOmkuaWQpfHwoXCJjb250ZW50XCJpbiB0LnByb3BzJiYhdC5pc1ByZXZpZXdpbmc/XCJudWxsLWNvbnRlbnQtcHJvcFwiOlwibm8tY29udGVudC1wcm9wXCIpLGJ1aWxkZXI6dC5idWlsZGVyLHJlZjpmdW5jdGlvbihlKXtyZXR1cm4gdC5jb250ZW50UmVmPWV9LGNvbnRlbnRMb2FkZWQ6ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdC5vbkNvbnRlbnRMb2FkZWQoZSxuKX0sb3B0aW9uczpfX2Fzc2lnbihfX2Fzc2lnbihfX2Fzc2lnbihfX2Fzc2lnbihfX2Fzc2lnbihfX2Fzc2lnbih7a2V5OnIsZW50cnk6dC5wcm9wcy5lbnRyeX0sbiYme2luaXRpYWxDb250ZW50OltuXX0pLCFuJiZcImNvbnRlbnRcImluIHQucHJvcHMmJiF0LmlzUHJldmlld2luZyYme2luaXRpYWxDb250ZW50OltdfSksdC5wcm9wcy51cmwmJnt1cmw6dC5wcm9wcy51cmx9KSx0LnByb3BzLm9wdGlvbnMpLHQucHJvcHMubG9jYWxlP3tsb2NhbGU6dC5wcm9wcy5sb2NhbGV9Ont9KSx0Lm9wdGlvbnMuY29kZWdlbiYme2Zvcm1hdDpcInJlYWN0XCJ9KSxpbmxpbmU6dC5wcm9wcy5pbmxpbmVDb250ZW50fHwhdC5pc1ByZXZpZXdpbmcmJlwiY29udGVudFwiaW4gdC5wcm9wcyxjb250ZW50RXJyb3I6dC5wcm9wcy5jb250ZW50RXJyb3IsbW9kZWxOYW1lOnQubmFtZXx8XCJwYWdlXCJ9LChmdW5jdGlvbihlLG4saSl7dmFyIHI7aWYodC5wcm9wcy5kYXRhT25seSlyZXR1cm4gbnVsbDtpJiZpLmlkJiYodC5zdGF0ZS5icmVha3BvaW50cyYmKGkubWV0YT1pLm1ldGF8fHt9LGkubWV0YS5icmVha3BvaW50cz10LnN0YXRlLmJyZWFrcG9pbnRzKSx0LnN0YXRlLmNvbnRleHQuYnVpbGRlckNvbnRlbnQ9aSksQnVpbGRlci5pc0Jyb3dzZXImJkJ1aWxkZXIubmV4dFRpY2soKGZ1bmN0aW9uKCl7dC5jaGVja1N0eWxlcyhlKX0pKTt2YXIgbz10Lm9wdGlvbnMuY29kZWdlbjtpZihvJiYhdC5Db21wb25lbnQmJihudWxsPT1lP3ZvaWQgMDplLmJsb2Nrc0pzKSl7dmFyIGE9QXJyYXkuZnJvbShuZXcgU2V0KEJ1aWxkZXIuY29tcG9uZW50cy5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBlLm5hbWV9KSkpKSxzPUJ1aWxkZXIuY29tcG9uZW50cy5zbGljZSgpLnJldmVyc2UoKSxsPWEubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gcy5maW5kKChmdW5jdGlvbih0KXtyZXR1cm4gdC5jbGFzcyYmdC5uYW1lPT09ZX0pKX0pKSx1PWEubWFwKChmdW5jdGlvbihlKXtyZXR1cm4oZXx8XCJcIikucmVwbGFjZSgvW15cXHddKy9naSxcIlwiKX0pKSxkPWwubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gd3JhcENvbXBvbmVudChlKX0pKTt0LkNvbXBvbmVudD0obmV3KEZ1bmN0aW9uLmJpbmQuYXBwbHkoRnVuY3Rpb24sX19zcHJlYWRBcnJheShfX3NwcmVhZEFycmF5KFt2b2lkIDAsXCJqc3hcIixcIl9jc3NcIixcIkJ1aWxkZXJcIixcImJ1aWxkZXJcIixcIlJlYWN0XCIsXCJ1c2VCdWlsZGVyU3RhdGVcIl0sdSwhMSksW2UuYmxvY2tzSnNdLCExKSkpKS5hcHBseSh2b2lkIDAsX19zcHJlYWRBcnJheShbanN4LGNzcyxCdWlsZGVyLGJ1aWxkZXIsUmVhY3RfX2RlZmF1bHQsZnVuY3Rpb24oZSl7dmFyIHQ9UmVhY3RfX2RlZmF1bHQudXNlU3RhdGUoMClbMV07cmV0dXJuIFJlYWN0X19kZWZhdWx0LnVzZVN0YXRlKChmdW5jdGlvbigpe3JldHVybiBvbkNoYW5nZShlLChmdW5jdGlvbigpe3QoKGZ1bmN0aW9uKGUpe3JldHVybiBlKzF9KSl9KSl9KSlbMF19XSxkLCExKSl9dmFyIGM9KG51bGw9PWU/dm9pZCAwOmUuYmxvY2tzKXx8W10scD1jLmZpbmQoKGZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybiBudWxsPT09KHQ9ZS5pZCl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuc3RhcnRzV2l0aChcImJ1aWxkZXItcGl4ZWxcIil9KSk7cmV0dXJuIGUmJiFwJiZjLmxlbmd0aD4wJiZjLnB1c2goZ2V0QnVpbGRlclBpeGVsKGJ1aWxkZXIuYXBpS2V5KSksZT9SZWFjdF9fZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsX19hc3NpZ24oe1wiZGF0YS1idWlsZGVyLWNvbXBvbmVudFwiOnQubmFtZSxcImRhdGEtYnVpbGRlci1jb250ZW50LWlkXCI6aS5pZH0sdC5pc1ByZXZpZXdpbmc/e1wiZGF0YS1idWlsZGVyLXZhcmlhdGlvbi1pZFwiOmkudGVzdFZhcmlhdGlvbklkfHxpLnZhcmlhdGlvbklkfHxpLmlkfTp7fSksIW8mJnQuZ2V0Q3NzKGUpJiZSZWFjdF9fZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIix7cmVmOmZ1bmN0aW9uKGUpe3JldHVybiB0LnN0eWxlUmVmPWV9LGNsYXNzTmFtZTpcImJ1aWxkZXItY3VzdG9tLXN0eWxlc1wiLGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOntfX2h0bWw6dC5nZXRDc3MoZSl9fSksUmVhY3RfX2RlZmF1bHQuY3JlYXRlRWxlbWVudChCdWlsZGVyU3RvcmVDb250ZXh0LlByb3ZpZGVyLHt2YWx1ZTpfX2Fzc2lnbihfX2Fzc2lnbih7fSx0LnN0YXRlKSx7cm9vdFN0YXRlOnQucm9vdFN0YXRlLHN0YXRlOnQuZGF0YSxjb250ZW50OmkscmVuZGVyTGluazp0LnByb3BzLnJlbmRlckxpbmt9KX0sbyYmdC5Db21wb25lbnQ/UmVhY3RfX2RlZmF1bHQuY3JlYXRlRWxlbWVudCh0LkNvbXBvbmVudCx7ZGF0YTp0LmRhdGEsY29udGV4dDp0LnN0YXRlLmNvbnRleHR9KTpSZWFjdF9fZGVmYXVsdC5jcmVhdGVFbGVtZW50KEJ1aWxkZXJCbG9ja3Mse2tleTpTdHJpbmcoISEobnVsbD09PShyPW51bGw9PWU/dm9pZCAwOmUuYmxvY2tzKXx8dm9pZCAwPT09cj92b2lkIDA6ci5sZW5ndGgpKSxlbWFpbE1vZGU6dC5wcm9wcy5lbWFpbE1vZGUsZmllbGROYW1lOlwiYmxvY2tzXCIsYmxvY2tzOmN9KSkpOm4/UmVhY3RfX2RlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtcImRhdGEtYnVpbGRlci1jb21wb25lbnRcIjp0Lm5hbWUsY2xhc3NOYW1lOlwiYnVpbGRlci1sb2FkaW5nXCJ9LHQucHJvcHMuY2hpbGRyZW4pOlJlYWN0X19kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIix7XCJkYXRhLWJ1aWxkZXItY29tcG9uZW50XCI6dC5uYW1lLGNsYXNzTmFtZTpcImJ1aWxkZXItbm8tY29udGVudFwifSl9KSl9KSkpfSkpKX0sdC5wcm90b3R5cGUuZXZhbEV4cHJlc3Npb249ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPXRoaXMuZGF0YTtyZXR1cm4gU3RyaW5nKGUpLnJlcGxhY2UoL3t7KFtefV0rKX19L2csKGZ1bmN0aW9uKGUsaSl7cmV0dXJuIHRyeUV2YWwoaSxuLHQuX2Vycm9ycyl9KSl9LHQucHJvdG90eXBlLmhhbmRsZVJlcXVlc3Q9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gX19hd2FpdGVyKHRoaXMsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgbixpLHIsbyxhPXRoaXM7cmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsKGZ1bmN0aW9uKHMpe3JldHVybiBCdWlsZGVyLmlzSWZyYW1lJiZmZXRjaENhY2hlW3RdPyh0aGlzLnVwZGF0ZVN0YXRlKChmdW5jdGlvbihuKXtuW2VdPWZldGNoQ2FjaGVbdF19KSksWzIsZmV0Y2hDYWNoZVt0XV0pOihuPWZ1bmN0aW9uKCl7cmV0dXJuIF9fYXdhaXRlcihhLHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIG4saSxyLG87cmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsKGZ1bmN0aW9uKGEpe3N3aXRjaChhLmxhYmVsKXtjYXNlIDA6bj1EYXRlLm5vdygpLEJ1aWxkZXIuaXNCcm93c2VyfHxjb25zb2xlLnRpbWUoXCJGZXRjaCBcIit0KSxhLmxhYmVsPTE7Y2FzZSAxOnJldHVybiBhLnRyeXMucHVzaChbMSw0LDUsNl0pLFs0LGZldGNoJDEodCldO2Nhc2UgMjpyZXR1cm5bNCxhLnNlbnQoKS5qc29uKCldO2Nhc2UgMzpyZXR1cm4gaT1hLnNlbnQoKSxbMyw2XTtjYXNlIDQ6cmV0dXJuIHI9YS5zZW50KCksbz10b0Vycm9yKHIpLHRoaXMuX2Vycm9ycyYmdGhpcy5fZXJyb3JzLnB1c2gobyksdGhpcy5fbG9ncyYmdGhpcy5fbG9ncy5wdXNoKFwiRmV0Y2ggdG8gXCIuY29uY2F0KHQsXCIgZXJyb3JlZCBpbiBcIikuY29uY2F0KERhdGUubm93KCktbixcIm1zXCIpKSxbMl07Y2FzZSA1OnJldHVybiBCdWlsZGVyLmlzQnJvd3Nlcnx8KGNvbnNvbGUudGltZUVuZChcIkZldGNoIFwiK3QpLHRoaXMuX2xvZ3MmJnRoaXMuX2xvZ3MucHVzaChcIkZldGNoZWQgXCIuY29uY2F0KHQsXCIgaW4gXCIpLmNvbmNhdChEYXRlLm5vdygpLW4sXCJtc1wiKSkpLFs3XTtjYXNlIDY6cmV0dXJuIGkmJihCdWlsZGVyLmlzSWZyYW1lJiYoZmV0Y2hDYWNoZVt0XT1pKSx0aGlzLnVwZGF0ZVN0YXRlKChmdW5jdGlvbih0KXt0W2VdPWl9KSkpLFsyLGldfX0pKX0pKX0sKGk9dGhpcy5fYXN5bmNSZXF1ZXN0cyYmdGhpcy5fYXN5bmNSZXF1ZXN0cy5maW5kKChmdW5jdGlvbihlKXtyZXR1cm4gaXNSZXF1ZXN0SW5mbyhlKSYmZS51cmw9PT10fSkpKT8oKHI9aS5wcm9taXNlKS50aGVuKChmdW5jdGlvbih0KXt0JiZhLnVwZGF0ZVN0YXRlKChmdW5jdGlvbihuKXtuW2VdPXR9KSl9KSksWzIscl0pOihvPW4oKSxCdWlsZGVyLm5leHRUaWNrKChmdW5jdGlvbigpe2EuX2FzeW5jUmVxdWVzdHMmJmEuX2FzeW5jUmVxdWVzdHMucHVzaChvKX0pKSxbMixvXSkpfSkpfSkpfSx0LnByb3RvdHlwZS51bnN1YnNjcmliZT1mdW5jdGlvbigpe3RoaXMuc3Vic2NyaXB0aW9ucyYmKHRoaXMuc3Vic2NyaXB0aW9ucy51bnN1YnNjcmliZSgpLHRoaXMuc3Vic2NyaXB0aW9ucz1uZXcgU3Vic2NyaXB0aW9uKX0sdC5wcm90b3R5cGUuaGFuZGxlQnVpbGRlclJlcXVlc3Q9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9dHJ5RXZhbCh0LHRoaXMuZGF0YSx0aGlzLl9lcnJvcnMpO3RoaXMuc3Vic2NyaXB0aW9ucyYmdGhpcy51bnN1YnNjcmliZSgpLGkmJnRoaXMuc3Vic2NyaXB0aW9ucy5hZGQodGhpcy5idWlsZGVyLnF1ZXVlR2V0Q29udGVudChpLm1vZGVsLGkpLnN1YnNjcmliZSgoZnVuY3Rpb24odCl7dCYmbi51cGRhdGVTdGF0ZSgoZnVuY3Rpb24obil7bltlXT10fSkpfSkpKX0sdC5kZWZhdWx0cz17Y29kZWdlbjpCb29sZWFuKEJ1aWxkZXIuaXNCcm93c2VyJiZsb2NhdGlvbi5ocmVmLmluY2x1ZGVzKFwiYnVpbGRlci5jb2RlZ2VuPXRydWVcIikpfSxfX2RlY29yYXRlKFtkZWJvdW5jZU5leHRUaWNrLF9fbWV0YWRhdGEoXCJkZXNpZ246dHlwZVwiLEZ1bmN0aW9uKSxfX21ldGFkYXRhKFwiZGVzaWduOnBhcmFtdHlwZXNcIixbXSksX19tZXRhZGF0YShcImRlc2lnbjpyZXR1cm50eXBlXCIsdm9pZCAwKV0sdC5wcm90b3R5cGUsXCJub3RpZnlTdGF0ZUNoYW5nZVwiLG51bGwpLHR9KFJlYWN0X19kZWZhdWx0LkNvbXBvbmVudCk7ZnVuY3Rpb24gQnVpbGRlckJsb2NrKGUpe3JldHVybiBlLnR5cGU9XCJyZWFjdFwiLEJ1aWxkZXIuQ29tcG9uZW50KGUpfWZ1bmN0aW9uIHVwZGF0ZU1ldGFkYXRhKGUsdCl7dmFyIG49QnVpbGRlci5jb21wb25lbnRzLmZpbmQoKGZ1bmN0aW9uKHQpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlP3QubmFtZT09PWU6dC5jbGFzcz09PXR9KSl8fG51bGwsaT10KG4pO24mJmk/QnVpbGRlci5yZWdpc3RlckNvbXBvbmVudChpLmNsYXNzfHxuLmNsYXNzLGkpOm4mJiFpfHwhbiYmaSYmQnVpbGRlci5yZWdpc3RlckNvbXBvbmVudChpLmNsYXNzLGkpfWZ1bmN0aW9uIHdpdGhCdWlsZGVyKGUsdCl7cmV0dXJuIEJ1aWxkZXJCbG9jayh0KShlKSxlfXZhciBpc0J1aWxkZXJFbGVtZW50PWZ1bmN0aW9uKGUpe3JldHVybiBCb29sZWFuKFwib2JqZWN0XCI9PXR5cGVvZiBlJiZlJiZcIkBidWlsZGVyLmlvL3NkazpFbGVtZW50XCI9PT0obnVsbD09ZT92b2lkIDA6ZVtcIkB0eXBlXCJdKSl9LHdpdGhDaGlsZHJlbj1mdW5jdGlvbihlKXt2YXIgdD1SZWFjdF9fZGVmYXVsdC5mb3J3YXJkUmVmKChmdW5jdGlvbih0LG4pe3ZhciBpLHIsbz1fX2Fzc2lnbih7fSx0KSxhPXQuY2hpbGRyZW58fHQuYnVpbGRlckJsb2NrJiZ0LmJ1aWxkZXJCbG9jay5jaGlsZHJlbiYmdC5idWlsZGVyQmxvY2suY2hpbGRyZW4ubWFwKChmdW5jdGlvbihlKXtyZXR1cm4gUmVhY3RfX2RlZmF1bHQuY3JlYXRlRWxlbWVudChCdWlsZGVyQmxvY2skMSx7a2V5OmUuaWQsYmxvY2s6ZX0pfSkpLHM9bnVsbD09PShyPW51bGw9PT0oaT10LmJ1aWxkZXJCbG9jayl8fHZvaWQgMD09PWk/dm9pZCAwOmkuY29tcG9uZW50KXx8dm9pZCAwPT09cj92b2lkIDA6ci5vcHRpb25zO3JldHVybiBzJiZPYmplY3Qua2V5cyhzKS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdD1zW2VdO0FycmF5LmlzQXJyYXkodCkmJnQuZXZlcnkoaXNCdWlsZGVyRWxlbWVudCk/b1tlXT10Lm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIFJlYWN0X19kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoQnVpbGRlckJsb2NrJDEse2tleTplLmlkLGJsb2NrOmV9KX0pKTppc0J1aWxkZXJFbGVtZW50KHQpJiYob1tlXT1SZWFjdF9fZGVmYXVsdC5jcmVhdGVFbGVtZW50KEJ1aWxkZXJCbG9jayQxLHtibG9jazp0fSkpfSkpLFJlYWN0X19kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoZSxfX2Fzc2lnbih7fSxvLHtyZWY6bn0pLGEpfSkpO3JldHVybiB0LmJ1aWxkZXJPcHRpb25zPXtjYW5IYXZlQ2hpbGRyZW46ITB9LHR9LG5vV3JhcD1mdW5jdGlvbihlKXt2YXIgdD1SZWFjdF9fZGVmYXVsdC5mb3J3YXJkUmVmKChmdW5jdGlvbih0LG4pe3ZhciBpPV9fYXNzaWduKF9fYXNzaWduKHt9LHQpLHQuYXR0cmlidXRlcyk7cmV0dXJuIFJlYWN0X19kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoZSxfX2Fzc2lnbih7fSxpLHtyZWY6bn0pKX0pKTtyZXR1cm4gdC5idWlsZGVyT3B0aW9ucz17bm9XcmFwOiEwfSx0fSxpY29uVXJsPVwiaHR0cHM6Ly9maXJlYmFzZXN0b3JhZ2UuZ29vZ2xlYXBpcy5jb20vdjAvYi9idWlsZGVyLTNiMGEyLmFwcHNwb3QuY29tL28vaW1hZ2VzJTJGYmFzZWxpbmUtdGV4dF9maWVsZHMtMjRweCUyMCgxKS5zdmc/YWx0PW1lZGlhJnRva2VuPTEyMTc3YjczLTBlZTMtNDJjYS05OGM2LTBkZDAwM2RlMTkyOVwiLFRleHRDb21wb25lbnQ9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciB0PW51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpcztyZXR1cm4gdC50ZXh0UmVmPW51bGwsdH1yZXR1cm4gX19leHRlbmRzKHQsZSksdC5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQ9ZnVuY3Rpb24oKXt0aGlzLnRleHRSZWYmJiEve3soW159XSspfX0vLnRlc3QodGhpcy5wcm9wcy50ZXh0KSYmKHRoaXMudGV4dFJlZi5pbm5lckhUTUw9dGhpcy5wcm9wcy50ZXh0KX0sdC5wcm90b3R5cGUuZXZhbEV4cHJlc3Npb249ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5hbGxvd1RleHRFZGl0P1N0cmluZyhlKTpTdHJpbmcoZSkucmVwbGFjZSgve3soW159XSspfX0vZywoZnVuY3Rpb24oZSxuKXtyZXR1cm4gdHJ5RXZhbChuLHQpfSkpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJhbGxvd1RleHRFZGl0XCIse2dldDpmdW5jdGlvbigpe3JldHVybiBCdWlsZGVyLmlzQnJvd3NlciYmQnVpbGRlci5pc0VkaXRpbmcmJmxvY2F0aW9uLnNlYXJjaC5pbmNsdWRlcyhcImJ1aWxkZXIuYWxsb3dUZXh0RWRpdD10cnVlXCIpJiYhKHRoaXMucHJvcHMuYnVpbGRlckJsb2NrJiZ0aGlzLnByb3BzLmJ1aWxkZXJCbG9jay5iaW5kaW5ncyYmKHRoaXMucHJvcHMuYnVpbGRlckJsb2NrLmJpbmRpbmdzW1wiY29tcG9uZW50Lm9wdGlvbnMudGV4dFwiXXx8dGhpcy5wcm9wcy5idWlsZGVyQmxvY2suYmluZGluZ3NbXCJvcHRpb25zLnRleHRcIl18fHRoaXMucHJvcHMuYnVpbGRlckJsb2NrLmJpbmRpbmdzLnRleHQpKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9e291dGxpbmU6XCJub25lXCIsXCImIHA6Zmlyc3Qtb2YtdHlwZSwgJiAuYnVpbGRlci1wYXJhZ3JhcGg6Zmlyc3Qtb2YtdHlwZVwiOnttYXJnaW46MH0sXCImID4gcCwgJiAuYnVpbGRlci1wYXJhZ3JhcGhcIjp7Y29sb3I6XCJpbmhlcml0XCIsbGluZUhlaWdodDpcImluaGVyaXRcIixsZXR0ZXJTcGFjaW5nOlwiaW5oZXJpdFwiLGZvbnRXZWlnaHQ6XCJpbmhlcml0XCIsZm9udFNpemU6XCJpbmhlcml0XCIsdGV4dEFsaWduOlwiaW5oZXJpdFwiLGZvbnRGYW1pbHk6XCJpbmhlcml0XCJ9fTtyZXR1cm4ganN4KEJ1aWxkZXJTdG9yZUNvbnRleHQuQ29uc3VtZXIsbnVsbCwoZnVuY3Rpb24obil7dmFyIGk7cmV0dXJuKG51bGw9PT0oaT1uLmNvbnRlbnQubWV0YSl8fHZvaWQgMD09PWk/dm9pZCAwOmkucnRsTW9kZSkmJih0LmRpcmVjdGlvbj1cInJ0bFwiKSxqc3goUmVhY3RfX2RlZmF1bHQuRnJhZ21lbnQsbnVsbCxqc3goXCJzcGFuXCIsX19hc3NpZ24oe3JlZjpmdW5jdGlvbih0KXtlLnRleHRSZWY9dH0sY3NzOnQsY2xhc3NOYW1lOlwiYnVpbGRlci10ZXh0XCJ9LHtkYW5nZXJvdXNseVNldElubmVySFRNTDp7X19odG1sOmUuZXZhbEV4cHJlc3Npb24oZS5wcm9wcy50ZXh0fHxlLnByb3BzLmNvbnRlbnR8fFwiXCIsbi5zdGF0ZSl9fSkpKX0pKX0sdH0oUmVhY3RfX2RlZmF1bHQuQ29tcG9uZW50KSxUZXh0PXdpdGhCdWlsZGVyKFRleHRDb21wb25lbnQse25hbWU6XCJUZXh0XCIsc3RhdGljOiEwLGltYWdlOmljb25VcmwsaW5wdXRzOlt7bmFtZTpcInRleHRcIix0eXBlOlwiaHRtbFwiLHJlcXVpcmVkOiEwLGF1dG9Gb2N1czohMCxidWJibGU6ITAsZGVmYXVsdFZhbHVlOlwiRW50ZXIgc29tZSB0ZXh0Li4uXCJ9XSxkZWZhdWx0U3R5bGVzOntsaW5lSGVpZ2h0Olwibm9ybWFsXCIsaGVpZ2h0OlwiYXV0b1wiLHRleHRBbGlnbjpcImNlbnRlclwifX0pO2Z1bmN0aW9uIFNsb3QoZSl7dmFyIHQ9ZS5uYW1lLG49dXNlQ29udGV4dChCdWlsZGVyU3RvcmVDb250ZXh0KSxpPSFuLmNvbnRleHQuc3ltYm9sSWQ7cmV0dXJuIGpzeChcImRpdlwiLF9fYXNzaWduKHtjc3M6e3BvaW50ZXJFdmVudHM6XCJhdXRvXCJ9fSxpJiZ7XCJidWlsZGVyLXNsb3RcIjp0fSksanN4KEJ1aWxkZXJCbG9ja3Mse2NoaWxkOiEwLHBhcmVudEVsZW1lbnRJZDpuLmNvbnRleHQuc3ltYm9sSWQsZGF0YVBhdGg6XCJzeW1ib2wuZGF0YS5cIi5jb25jYXQodCksYmxvY2tzOm4uc3RhdGVbdF18fFtdfSkpfUJ1aWxkZXIucmVnaXN0ZXJDb21wb25lbnQoU2xvdCx7bmFtZTpcIlNsb3RcIixkZXNjcmlwdGlvbjpcIkFsbG93IGNoaWxkIGJsb2NrcyB0byBiZSBpbnNlcnRlZCBpbnRvIHRoaXMgY29udGVudCB3aGVuIHVzZWQgYXMgYSBTeW1ib2xcIixkb2NzTGluazpcImh0dHBzOi8vd3d3LmJ1aWxkZXIuaW8vYy9kb2NzL3N5bWJvbHMtd2l0aC1ibG9ja3NcIixpbWFnZTpcImh0dHBzOi8vY2RuLmJ1aWxkZXIuaW8vYXBpL3YxL2ltYWdlL2Fzc2V0cyUyRllKSUdiNGkwMWp2dzBTUmRMNUJ0JTJGM2FhZDZkZTM2ZWFlNDNiNTliNTJjODUxOTBmZGVmNTZcIixpbnB1dHM6W3tuYW1lOlwibmFtZVwiLHR5cGU6XCJzdHJpbmdcIixyZXF1aXJlZDohMCxkZWZhdWx0VmFsdWU6XCJjaGlsZHJlblwifV19KTt2YXIgRnJhZ21lbnRDb21wb25lbnQ9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3JldHVybiBudWxsIT09ZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIF9fZXh0ZW5kcyh0LGUpLHQucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnByb3BzLmJ1aWxkZXJCbG9jayYmdGhpcy5wcm9wcy5idWlsZGVyQmxvY2suY2hpbGRyZW4mJnRoaXMucHJvcHMuYnVpbGRlckJsb2NrLmNoaWxkcmVuLm1hcCgoZnVuY3Rpb24oZSx0KXtyZXR1cm4gUmVhY3RfX2RlZmF1bHQuY3JlYXRlRWxlbWVudChCdWlsZGVyQmxvY2skMSx7YmxvY2s6ZSxrZXk6ZS5pZCxpbmRleDp0fSl9KSl9LHR9KFJlYWN0X19kZWZhdWx0LkNvbXBvbmVudCksRnJhZ21lbnQ9d2l0aEJ1aWxkZXIoRnJhZ21lbnRDb21wb25lbnQse25hbWU6XCJDb3JlOkZyYWdtZW50XCIsY2FuSGF2ZUNoaWxkcmVuOiEwLG5vV3JhcDohMCxzdGF0aWM6ITAsaGlkZUZyb21JbnNlcnRNZW51OiEwfSksREVGQVVMVF9BU1BFQ1RfUkFUSU8kMj0uNzAwNDA0ODU4Mjk5NTk0OCxkZWZhdWx0QmxvY2tzPVt7XCJAdHlwZVwiOlwiQGJ1aWxkZXIuaW8vc2RrOkVsZW1lbnRcIixyZXNwb25zaXZlU3R5bGVzOntsYXJnZTp7ZGlzcGxheTpcImZsZXhcIixmbGV4RGlyZWN0aW9uOlwiY29sdW1uXCIsYWxpZ25JdGVtczpcInN0cmV0Y2hcIixmbGV4U2hyaW5rOlwiMFwiLHBvc2l0aW9uOlwicmVsYXRpdmVcIixtYXJnaW5Ub3A6XCIzMHB4XCIsdGV4dEFsaWduOlwiY2VudGVyXCIsbGluZUhlaWdodDpcIm5vcm1hbFwiLGhlaWdodDpcImF1dG9cIixtaW5IZWlnaHQ6XCIyMHB4XCIsbWluV2lkdGg6XCIyMHB4XCIsb3ZlcmZsb3c6XCJoaWRkZW5cIn19LGNvbXBvbmVudDp7bmFtZTpcIkltYWdlXCIsb3B0aW9uczp7aW1hZ2U6XCJodHRwczovL2J1aWxkZXIuaW8vYXBpL3YxL2ltYWdlL2Fzc2V0cyUyRnB3Z2pmMFJvWVdiZG5KU2JwQkFqWE5STWU5RjIlMkZmYjI3YTdjNzkwMzI0Mjk0YWY4YmUxYzM1ZmUzMGY0ZFwiLGJhY2tncm91bmRQb3NpdGlvbjpcImNlbnRlclwiLGJhY2tncm91bmRTaXplOlwiY292ZXJcIixhc3BlY3RSYXRpbzpERUZBVUxUX0FTUEVDVF9SQVRJTyQyfX19LHtcIkB0eXBlXCI6XCJAYnVpbGRlci5pby9zZGs6RWxlbWVudFwiLHJlc3BvbnNpdmVTdHlsZXM6e2xhcmdlOntkaXNwbGF5OlwiZmxleFwiLGZsZXhEaXJlY3Rpb246XCJjb2x1bW5cIixhbGlnbkl0ZW1zOlwic3RyZXRjaFwiLGZsZXhTaHJpbms6XCIwXCIscG9zaXRpb246XCJyZWxhdGl2ZVwiLG1hcmdpblRvcDpcIjMwcHhcIix0ZXh0QWxpZ246XCJjZW50ZXJcIixsaW5lSGVpZ2h0Olwibm9ybWFsXCIsaGVpZ2h0OlwiYXV0b1wifX0sY29tcG9uZW50OntuYW1lOlwiVGV4dFwiLG9wdGlvbnM6e3RleHQ6XCI8cD5FbnRlciBzb21lIHRleHQuLi48L3A+XCJ9fX1dLENvbHVtbnNDb21wb25lbnQ9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3JldHVybiBudWxsIT09ZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIF9fZXh0ZW5kcyh0LGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImNvbHVtbnNcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJvcHMuY29sdW1uc3x8W119LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiZ3V0dGVyU2l6ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgdGhpcy5wcm9wcy5zcGFjZT90aGlzLnByb3BzLnNwYWNlfHwwOjIwfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLmdldFdpZHRoPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmNvbHVtbnNbZV0mJnRoaXMuY29sdW1uc1tlXS53aWR0aHx8MTAwL3RoaXMuY29sdW1ucy5sZW5ndGh9LHQucHJvdG90eXBlLmdldENvbHVtbldpZHRoPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuY29sdW1ucyxuPXRoaXMuZ3V0dGVyU2l6ZSxpPXRoaXMuZ2V0V2lkdGgoZSkscj1uKih0Lmxlbmd0aC0xKSooaS8xMDApO3JldHVyblwiY2FsYyhcIi5jb25jYXQoaSxcIiUgLSBcIikuY29uY2F0KHIsXCJweClcIil9LHQucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe3ZhciBlLHQsbixpLHI9dGhpcyxvPXRoaXMuY29sdW1ucyxhPXRoaXMuZ3V0dGVyU2l6ZSxzPShudWxsPT09KGk9bnVsbD09PShuPW51bGw9PT0odD10aGlzLnByb3BzLmJ1aWxkZXJTdGF0ZSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQuY29udGV4dC5idWlsZGVyQ29udGVudCl8fHZvaWQgMD09PW4/dm9pZCAwOm4ubWV0YSl8fHZvaWQgMD09PWk/dm9pZCAwOmkuYnJlYWtwb2ludHMpfHx7fSxsPWdldFNpemVzRm9yQnJlYWtwb2ludHMocyk7cmV0dXJuIGpzeChSZWFjdF9fZGVmYXVsdC5GcmFnbWVudCxudWxsLGpzeChcImRpdlwiLHtjbGFzc05hbWU6XCJidWlsZGVyLWNvbHVtbnNcIixjc3M6X19hc3NpZ24oe2Rpc3BsYXk6XCJmbGV4XCJ9LFwibmV2ZXJcIiE9PXRoaXMucHJvcHMuc3RhY2tDb2x1bW5zQXQmJihlPXt9LGVbXCJAbWVkaWEgKG1heC13aWR0aDogXCIuY29uY2F0KFwidGFibGV0XCIhPT10aGlzLnByb3BzLnN0YWNrQ29sdW1uc0F0P2wuc21hbGwubWF4OmwubWVkaXVtLm1heCxcInB4KVwiKV09e2ZsZXhEaXJlY3Rpb246dGhpcy5wcm9wcy5yZXZlcnNlQ29sdW1uc1doZW5TdGFja2VkP1wiY29sdW1uLXJldmVyc2VcIjpcImNvbHVtblwiLGFsaWduSXRlbXM6XCJzdHJldGNoXCJ9LGUpKX0sby5tYXAoKGZ1bmN0aW9uKGUsdCl7dmFyIG4saSxvPWUubGluaz9MaW5rOlwiZGl2XCI7cmV0dXJuIGpzeChSZWFjdF9fZGVmYXVsdC5GcmFnbWVudCx7a2V5OnR9LGpzeChvLF9fYXNzaWduKHtjbGFzc05hbWU6XCJidWlsZGVyLWNvbHVtblwifSxlLmxpbms/e2hyZWY6ZS5saW5rfTpudWxsLHtjc3M6X19hc3NpZ24oKG49e2Rpc3BsYXk6XCJmbGV4XCIsZmxleERpcmVjdGlvbjpcImNvbHVtblwiLGFsaWduSXRlbXM6XCJzdHJldGNoXCIsbGluZUhlaWdodDpcIm5vcm1hbFwifSxuW1wiJiA+IC5idWlsZGVyLWJsb2Nrc1wiXT17ZmxleEdyb3c6MX0sbi53aWR0aD1yLmdldENvbHVtbldpZHRoKHQpLG4ubWFyZ2luTGVmdD0wPT09dD8wOmEsbiksXCJuZXZlclwiIT09ci5wcm9wcy5zdGFja0NvbHVtbnNBdCYmKGk9e30saVtcIkBtZWRpYSAobWF4LXdpZHRoOiBcIi5jb25jYXQoXCJ0YWJsZXRcIiE9PXIucHJvcHMuc3RhY2tDb2x1bW5zQXQ/bC5zbWFsbC5tYXg6bC5tZWRpdW0ubWF4LFwicHgpXCIpXT17d2lkdGg6XCIxMDAlXCIsbWFyZ2luTGVmdDowfSxpKSl9KSxqc3goQnVpbGRlckJsb2Nrcyx7a2V5OnQsY2hpbGQ6ITAscGFyZW50RWxlbWVudElkOnIucHJvcHMuYnVpbGRlckJsb2NrJiZyLnByb3BzLmJ1aWxkZXJCbG9jay5pZCxibG9ja3M6ZS5ibG9ja3MsZGF0YVBhdGg6XCJjb21wb25lbnQub3B0aW9ucy5jb2x1bW5zLlwiLmNvbmNhdCh0LFwiLmJsb2Nrc1wiKX0pKSl9KSkpKX0sdH0oUmVhY3RfX2RlZmF1bHQuQ29tcG9uZW50KSxDb2x1bW5zPXdpdGhCdWlsZGVyKENvbHVtbnNDb21wb25lbnQse25hbWU6XCJDb2x1bW5zXCIsc3RhdGljOiEwLGlucHV0czpbe25hbWU6XCJjb2x1bW5zXCIsdHlwZTpcImFycmF5XCIsYnJvYWRjYXN0OiEwLHN1YkZpZWxkczpbe25hbWU6XCJibG9ja3NcIix0eXBlOlwiYXJyYXlcIixoaWRlRnJvbVVJOiEwLGRlZmF1bHRWYWx1ZTpkZWZhdWx0QmxvY2tzfSx7bmFtZTpcIndpZHRoXCIsdHlwZTpcIm51bWJlclwiLGhpZGVGcm9tVUk6ITAsaGVscGVyVGV4dDpcIldpZHRoICUsIGUuZy4gc2V0IHRvIDUwIHRvIGZpbGwgaGFsZiBvZiB0aGUgc3BhY2VcIn0se25hbWU6XCJsaW5rXCIsdHlwZTpcInVybFwiLGhlbHBlclRleHQ6XCJPcHRpb25hbGx5IHNldCBhIHVybCB0aGF0IGNsaWNraW5nIHRoaXMgY29sdW1uIHdpbGwgbGluayB0b1wifV0sZGVmYXVsdFZhbHVlOlt7YmxvY2tzOmRlZmF1bHRCbG9ja3N9LHtibG9ja3M6ZGVmYXVsdEJsb2Nrc31dLG9uQ2hhbmdlOmZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtuLmZvckVhY2goKGZ1bmN0aW9uKGUpe2UuZGVsZXRlKFwid2lkdGhcIil9KSl9dmFyIG49ZS5nZXQoXCJjb2x1bW5zXCIpO0FycmF5LmlzQXJyYXkobikmJighbi5maW5kKChmdW5jdGlvbihlKXtyZXR1cm4gZS5nZXQoXCJ3aWR0aFwiKX0pKXx8KG4uZmluZCgoZnVuY3Rpb24oZSl7cmV0dXJuIWUuZ2V0KFwid2lkdGhcIil9KSl8fDEwMCE9PW4ucmVkdWNlKChmdW5jdGlvbihlLHQpe3JldHVybiBlK3QuZ2V0KFwid2lkdGhcIil9KSwwKSkmJnQoKSl9fSx7bmFtZTpcInNwYWNlXCIsdHlwZTpcIm51bWJlclwiLGRlZmF1bHRWYWx1ZToyMCxoZWxwZXJUZXh0OlwiU2l6ZSBvZiBnYXAgYmV0d2VlbiBjb2x1bW5zXCIsYWR2YW5jZWQ6ITB9LHtuYW1lOlwic3RhY2tDb2x1bW5zQXRcIix0eXBlOlwic3RyaW5nXCIsZGVmYXVsdFZhbHVlOlwidGFibGV0XCIsaGVscGVyVGV4dDpcIkNvbnZlcnQgaG9yaXpvbnRhbCBjb2x1bW5zIHRvIHZlcnRpY2FsIGF0IHdoYXQgZGV2aWNlIHNpemVcIixlbnVtOltcInRhYmxldFwiLFwibW9iaWxlXCIsXCJuZXZlclwiXSxhZHZhbmNlZDohMH0se25hbWU6XCJyZXZlcnNlQ29sdW1uc1doZW5TdGFja2VkXCIsdHlwZTpcImJvb2xlYW5cIixkZWZhdWx0VmFsdWU6ITEsaGVscGVyVGV4dDpcIldoZW4gc3RhY2tpbmcgY29sdW1ucyBmb3IgbW9iaWxlIGRldmljZXMsIHJldmVyc2UgdGhlIG9yZGVyaW5nXCIsYWR2YW5jZWQ6ITB9XX0pLEVtYmVkQ29tcG9uZW50PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgdD1udWxsIT09ZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7cmV0dXJuIHQuZWxlbWVudFJlZj1udWxsLHQuc2NyaXB0c0luc2VydGVkPW5ldyBTZXQsdC5zY3JpcHRzUnVuPW5ldyBTZXQsdH1yZXR1cm4gX19leHRlbmRzKHQsZSksdC5wcm90b3R5cGUuc2hvdWxkQ29tcG9uZW50VXBkYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBlLmNvbnRlbnQhPT10aGlzLnByb3BzLmNvbnRlbnR9LHQucHJvdG90eXBlLmNvbXBvbmVudERpZFVwZGF0ZT1mdW5jdGlvbihlKXt0aGlzLnByb3BzLmNvbnRlbnQhPT1lLmNvbnRlbnQmJnRoaXMuZmluZEFuZFJ1blNjcmlwdHMoKX0sdC5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQ9ZnVuY3Rpb24oKXt0aGlzLmZpbmRBbmRSdW5TY3JpcHRzKCl9LHQucHJvdG90eXBlLmZpbmRBbmRSdW5TY3JpcHRzPWZ1bmN0aW9uKCl7aWYodGhpcy5lbGVtZW50UmVmJiZcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93KWZvcih2YXIgZT10aGlzLmVsZW1lbnRSZWYuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJzY3JpcHRcIiksdD0wO3Q8ZS5sZW5ndGg7dCsrKXt2YXIgbj1lW3RdO2lmKG4uc3JjKXtpZih0aGlzLnNjcmlwdHNJbnNlcnRlZC5oYXMobi5zcmMpKWNvbnRpbnVlO3RoaXMuc2NyaXB0c0luc2VydGVkLmFkZChuLnNyYyk7dmFyIGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtpLmFzeW5jPSEwLGkuc3JjPW4uc3JjLGRvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQoaSl9ZWxzZXtpZih0aGlzLnNjcmlwdHNSdW4uaGFzKG4uaW5uZXJUZXh0KSljb250aW51ZTt0aGlzLnNjcmlwdHNSdW4uYWRkKG4uaW5uZXJUZXh0KTt0cnl7bmV3IEZ1bmN0aW9uKG4uaW5uZXJUZXh0KSgpfWNhdGNoKGUpe2NvbnNvbGUud2FybihcIkJ1aWxkZXIgY3VzdG9tIGNvZGUgY29tcG9uZW50IGVycm9yOlwiLGUpfX19fSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJjb250ZW50XCIse2dldDpmdW5jdGlvbigpe3JldHVybiBCdWlsZGVyLmlzU2VydmVyPyh0aGlzLnByb3BzLmNvbnRlbnR8fFwiXCIpLnJlcGxhY2UoLzxzY3JpcHRbXFxzXFxTXSo/PFxcL3NjcmlwdD4vZyxcIlwiKTp0aGlzLnByb3BzLmNvbnRlbnR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4gUmVhY3RfX2RlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLHtyZWY6ZnVuY3Rpb24odCl7cmV0dXJuIGUuZWxlbWVudFJlZj10fSxjbGFzc05hbWU6XCJidWlsZGVyLWVtYmVkXCIsZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6e19faHRtbDp0aGlzLmNvbnRlbnR9fSl9LHR9KFJlYWN0X19kZWZhdWx0LkNvbXBvbmVudCksRW1iZWQ9d2l0aEJ1aWxkZXIoRW1iZWRDb21wb25lbnQse25hbWU6XCJFbWJlZFwiLHN0YXRpYzohMCxpbnB1dHM6W3tuYW1lOlwidXJsXCIsdHlwZTpcInVybFwiLHJlcXVpcmVkOiEwLGRlZmF1bHRWYWx1ZTpcIlwiLGhlbHBlclRleHQ6XCJlLmcuIGVudGVyIGEgeW91dHViZSB1cmwsIGdvb2dsZSBtYXAsIGV0Y1wifSx7bmFtZTpcImNvbnRlbnRcIix0eXBlOlwiaHRtbFwiLGRlZmF1bHRWYWx1ZTonPGRpdiBzdHlsZT1cInBhZGRpbmc6IDIwcHg7IHRleHQtYWxpZ246IGNlbnRlclwiPihDaG9vc2UgYW4gZW1iZWQgVVJMKTxkaXY+JyxoaWRlRnJvbVVJOiEwfV19KSxnbG9iYWxSZXBsYWNlTm9kZXM9e318fG51bGwsaXNTaG9waWZ5JDE9QnVpbGRlci5pc0Jyb3dzZXImJlwiU2hvcGlmeVwiaW4gd2luZG93O2lmKEJ1aWxkZXIuaXNCcm93c2VyJiZnbG9iYWxSZXBsYWNlTm9kZXMpe3ZhciBjdXN0b21Db2RlUXVlcnlTZWxlY3Rvcl8xPVwiLmJ1aWxkZXItY3VzdG9tLWNvZGVcIjt0cnl7dmFyIGFsbEN1c3RvbUNvZGVFbGVtZW50c18xPUFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChjdXN0b21Db2RlUXVlcnlTZWxlY3Rvcl8xKSksYnVpbGRlclRlbXBsYXRlcz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwidGVtcGxhdGVbZGF0YS10ZW1wbGF0ZS12YXJpYW50LWlkXVwiKTtidWlsZGVyVGVtcGxhdGVzLmxlbmd0aCYmQXJyYXkuZnJvbShidWlsZGVyVGVtcGxhdGVzKS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdD1lLmNvbnRlbnQucXVlcnlTZWxlY3RvckFsbChjdXN0b21Db2RlUXVlcnlTZWxlY3Rvcl8xKTt0Lmxlbmd0aCYmKGFsbEN1c3RvbUNvZGVFbGVtZW50c18xPWFsbEN1c3RvbUNvZGVFbGVtZW50c18xLmNvbmNhdChBcnJheS5mcm9tKHQpKSl9KSksYWxsQ3VzdG9tQ29kZUVsZW1lbnRzXzEuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wYXJlbnRFbGVtZW50LG49dCYmdC5nZXRBdHRyaWJ1dGUoXCJidWlsZGVyLWlkXCIpO24mJihnbG9iYWxSZXBsYWNlTm9kZXNbbl09Z2xvYmFsUmVwbGFjZU5vZGVzW25dfHxbXSxnbG9iYWxSZXBsYWNlTm9kZXNbbl0ucHVzaChpc1Nob3BpZnkkMT9lOmUuY2xvbmVOb2RlKCEwKSkpfSkpfWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoXCJCdWlsZGVyIHJlcGxhY2Ugbm9kZXMgZXJyb3I6XCIsZSl9fXZhciBDdXN0b21Db2RlQ29tcG9uZW50PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCl7dmFyIG4saT10aGlzO2lmKChpPWUuY2FsbCh0aGlzLHQpfHx0aGlzKS5lbGVtZW50UmVmPW51bGwsaS5vcmlnaW5hbFJlZj1udWxsLGkuc2NyaXB0c0luc2VydGVkPW5ldyBTZXQsaS5zY3JpcHRzUnVuPW5ldyBTZXQsaS5maXJzdExvYWQ9ITAsaS5yZXBsYWNlTm9kZXM9ITEsaS5zdGF0ZT17aHlkcmF0ZWQ6ITF9LEJ1aWxkZXIuaXNCcm93c2VyKXt2YXIgcj1udWxsPT09KG49aS5wcm9wcy5idWlsZGVyQmxvY2spfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmlkO2lmKGkucmVwbGFjZU5vZGVzPUJvb2xlYW4oQnVpbGRlci5pc0Jyb3dzZXImJih0LnJlcGxhY2VOb2Rlc3x8aXNTaG9waWZ5JDEpJiZyJiYobnVsbD09Z2xvYmFsUmVwbGFjZU5vZGVzP3ZvaWQgMDpnbG9iYWxSZXBsYWNlTm9kZXNbcl0pKSxpLmZpcnN0TG9hZCYmaS5wcm9wcy5idWlsZGVyQmxvY2spaWYociYmKG51bGw9PWdsb2JhbFJlcGxhY2VOb2Rlcz92b2lkIDA6Z2xvYmFsUmVwbGFjZU5vZGVzW3JdKSl7dmFyIG89Z2xvYmFsUmVwbGFjZU5vZGVzW3JdLnNoaWZ0KCl8fG51bGw7aS5vcmlnaW5hbFJlZj1vLDA9PT1nbG9iYWxSZXBsYWNlTm9kZXNbcl0ubGVuZ3RoJiZkZWxldGUgZ2xvYmFsUmVwbGFjZU5vZGVzW3JdfWVsc2UgaWYoaS5yZXBsYWNlTm9kZXMpe3ZhciBhPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuXCIuY29uY2F0KGkucHJvcHMuYnVpbGRlckJsb2NrLmlkLFwiIC5idWlsZGVyLWN1c3RvbS1jb2RlXCIpKTtpZigxPT09YS5sZW5ndGgpe3ZhciBzPWFbMF07aS5vcmlnaW5hbFJlZj1zLGkub3JpZ2luYWxSZWYucmVtb3ZlKCl9fX1yZXR1cm4gaX1yZXR1cm4gX19leHRlbmRzKHQsZSksdC5wcm90b3R5cGUuc2hvdWxkQ29tcG9uZW50VXBkYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBlLmNvZGUhPT10aGlzLnByb3BzLmNvZGV9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcIm5vUmVhY3RSZW5kZXJcIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIEJvb2xlYW4oaXNTaG9waWZ5JDEmJihudWxsPT09KGU9dGhpcy5wcm9wcy5jb2RlKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5tYXRjaCgve1t7JV0vZykpKX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJpc0h5ZHJhdGluZ1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4haXNTaG9waWZ5JDEmJnRoaXMub3JpZ2luYWxSZWZ9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuY29tcG9uZW50RGlkVXBkYXRlPWZ1bmN0aW9uKGUpe3RoaXMucHJvcHMuY29kZSE9PWUuY29kZSYmdGhpcy5maW5kQW5kUnVuU2NyaXB0cygpfSx0LnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudD1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5maXJzdExvYWQ9ITEsdGhpcy5yZXBsYWNlTm9kZXN8fCh0aGlzLmlzSHlkcmF0aW5nPyh0aGlzLnNldFN0YXRlKHtoeWRyYXRlZDohMH0pLEJ1aWxkZXIubmV4dFRpY2soKGZ1bmN0aW9uKCl7cmV0dXJuIGUuZmluZEFuZFJ1blNjcmlwdHMoKX0pKSk6dGhpcy5maW5kQW5kUnVuU2NyaXB0cygpKSxCdWlsZGVyLmlzQnJvd3NlciYmdGhpcy5yZXBsYWNlTm9kZXMmJnRoaXMub3JpZ2luYWxSZWYmJnRoaXMuZWxlbWVudFJlZiYmdGhpcy5lbGVtZW50UmVmLmFwcGVuZENoaWxkKHRoaXMub3JpZ2luYWxSZWYpfSx0LnByb3RvdHlwZS5maW5kQW5kUnVuU2NyaXB0cz1mdW5jdGlvbigpe2lmKHRoaXMuZWxlbWVudFJlZiYmXCJ1bmRlZmluZWRcIiE9dHlwZW9mIHdpbmRvdylmb3IodmFyIGU9dGhpcy5lbGVtZW50UmVmLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpLHQ9MDt0PGUubGVuZ3RoO3QrKyl7dmFyIG49ZVt0XTtpZihuLnNyYyl7aWYodGhpcy5zY3JpcHRzSW5zZXJ0ZWQuaGFzKG4uc3JjKSljb250aW51ZTt0aGlzLnNjcmlwdHNJbnNlcnRlZC5hZGQobi5zcmMpO3ZhciBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7aS5hc3luYz0hMCxpLnNyYz1uLnNyYyxkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGkpfWVsc2UgaWYoIW4udHlwZXx8W1widGV4dC9qYXZhc2NyaXB0XCIsXCJhcHBsaWNhdGlvbi9qYXZhc2NyaXB0XCIsXCJhcHBsaWNhdGlvbi9lY21hc2NyaXB0XCJdLmluY2x1ZGVzKG4udHlwZSkpe2lmKHRoaXMuc2NyaXB0c1J1bi5oYXMobi5pbm5lclRleHQpKWNvbnRpbnVlO3RyeXt0aGlzLnNjcmlwdHNSdW4uYWRkKG4uaW5uZXJUZXh0KSxuZXcgRnVuY3Rpb24obi5pbm5lclRleHQpKCl9Y2F0Y2goZSl7Y29uc29sZS53YXJuKFwiQnVpbGRlciBjdXN0b20gY29kZSBjb21wb25lbnQgZXJyb3I6XCIsZSl9fX19LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcImNvZGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuKEJ1aWxkZXIuaXNTZXJ2ZXJ8fHRoaXMuaXNIeWRyYXRpbmcmJnRoaXMuZmlyc3RMb2FkKSYmdGhpcy5wcm9wcy5zY3JpcHRzQ2xpZW50T25seT8odGhpcy5wcm9wcy5jb2RlfHxcIlwiKS5yZXBsYWNlKC88c2NyaXB0XFxiW148XSooPzooPyE8XFwvc2NyaXB0Pik8W148XSopKjxcXC9zY3JpcHQ+L2dpLFwiXCIpOnRoaXMucHJvcHMuY29kZX0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3JldHVybiBSZWFjdF9fZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiZGl2XCIsX19hc3NpZ24oe3JlZjpmdW5jdGlvbih0KXtyZXR1cm4gZS5lbGVtZW50UmVmPXR9LGNsYXNzTmFtZTpcImJ1aWxkZXItY3VzdG9tLWNvZGVcIn0sIXRoaXMucmVwbGFjZU5vZGVzJiYhdGhpcy5ub1JlYWN0UmVuZGVyJiZ7ZGFuZ2Vyb3VzbHlTZXRJbm5lckhUTUw6e19faHRtbDp0aGlzLmNvZGV9fSkpfSx0fShSZWFjdF9fZGVmYXVsdC5Db21wb25lbnQpLEN1c3RvbUNvZGU9d2l0aEJ1aWxkZXIoQ3VzdG9tQ29kZUNvbXBvbmVudCx7bmFtZTpcIkN1c3RvbSBDb2RlXCIsc3RhdGljOiEwLHJlcXVpcmVkUGVybWlzc2lvbnM6W1wiZWRpdENvZGVcIl0saW5wdXRzOlt7bmFtZTpcImNvZGVcIix0eXBlOlwiaHRtbFwiLHJlcXVpcmVkOiEwLGRlZmF1bHRWYWx1ZTpcIjxwPkhlbGxvIHRoZXJlLCBJIGFtIGN1c3RvbSBIVE1MIGNvZGUhPC9wPlwiLGNvZGU6ITB9LF9fYXNzaWduKHtuYW1lOlwicmVwbGFjZU5vZGVzXCIsdHlwZTpcImJvb2xlYW5cIixoZWxwZXJUZXh0OlwiUHJlc2VydmUgc2VydmVyIHJlbmRlcmVkIGRvbSBub2Rlc1wiLGFkdmFuY2VkOiEwfSxpc1Nob3BpZnkkMSYme2RlZmF1bHRWYWx1ZTohMH0pLF9fYXNzaWduKHtuYW1lOlwic2NyaXB0c0NsaWVudE9ubHlcIix0eXBlOlwiYm9vbGVhblwiLGhlbHBlclRleHQ6XCJPbmx5IHByaW50IGFuZCBydW4gc2NyaXB0cyBvbiB0aGUgY2xpZW50LiBJbXBvcnRhbnQgd2hlbiBzY3JpcHRzIGluZmx1ZW5jZSBET00gdGhhdCBjb3VsZCBiZSByZXBsYWNlZCB3aGVuIGNsaWVudCBsb2Fkc1wiLGFkdmFuY2VkOiEwfSwhaXNTaG9waWZ5JDEmJntkZWZhdWx0VmFsdWU6ITB9KV19KSxJTUFHRV9GSUxFX1RZUEVTPVtcImpwZWdcIixcImpwZ1wiLFwicG5nXCIsXCJzdmdcIixcIndlYnBcIixcImdpZlwiLFwiamZpZlwiLFwicGpwZWdcIixcInBqcFwiLFwiYXBuZ1wiLFwiYXZpZlwiLFwidGlmXCIsXCJ0aWZmXCIsXCJoZWlmXCIsXCJibXBcIixcImVwc1wiLFwicmF3XCIsXCJjcjJcIixcIm5lZlwiLFwib3JmXCIsXCJzcjJcIixcInBzZFwiLFwiaGVpY1wiLFwiZGliXCIsXCJhaVwiXSxWSURFT19GSUxFX1RZUEVTPVtcIm1wNFwiLFwid2VibVwiLFwibWt2XCIsXCJmbHZcIixcInZvYlwiLFwib2d2XCIsXCJvZ2dcIixcImRyY1wiLFwiZ2lmXCIsXCJnaWZ2XCIsXCJtbmdcIixcImF2aVwiLFwibW92XCIsXCJxdFwiLFwibXRzXCIsXCJtMnRzXCIsXCJ0c1wiLFwid212XCIsXCJ5dXZcIixcInJtXCIsXCJybXZiXCIsXCJ2aXZcIixcImFzZlwiLFwiYW12XCIsXCJtNHBcIixcIm1wZWdcIixcIm1wZVwiLFwibTJ2XCIsXCJtNHZcIixcInN2aVwiLFwiM2dwXCIsXCIzZzJcIixcIm14ZlwiLFwicm9xXCIsXCJuc3ZcIixcImY0dlwiLFwiZjRwXCIsXCJmNGFcIixcImY0YlwiXTtmdW5jdGlvbiByZW1vdmVQcm90b2NvbChlKXtyZXR1cm4gZS5yZXBsYWNlKC9odHRwKHMpPzovLFwiXCIpfWZ1bmN0aW9uIGlzRWxlbWVudEluVmlld3BvcnQoZSl7dmFyIHQ9ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtyZXR1cm4gdC50b3A+PTAmJnQubGVmdD49MCYmdC5ib3R0b208PSh3aW5kb3cuaW5uZXJIZWlnaHR8fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQpJiZ0LnJpZ2h0PD0od2luZG93LmlubmVyV2lkdGh8fGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aCl9ZnVuY3Rpb24gZ2V0U2hvcGlmeUltYWdlVXJsKGUsdCl7aWYoIWV8fCEobnVsbD09ZT92b2lkIDA6ZS5tYXRjaCgvY2RuXFwuc2hvcGlmeVxcLmNvbS8pKXx8IXQpcmV0dXJuIGU7aWYoXCJtYXN0ZXJcIj09PXQpcmV0dXJuIHJlbW92ZVByb3RvY29sKGUpO3ZhciBuPWUubWF0Y2goLyhfXFxkK3goXFxkKyk/KT8oXFwuKGpwZ3xqcGVnfGdpZnxwbmd8Ym1wfGJpdG1hcHx0aWZmfHRpZikoXFw/dj1cXGQrKT8pL2kpO2lmKG4pe3ZhciBpPWUuc3BsaXQoblswXSkscj1uWzNdLG89dC5tYXRjaChcInhcIik/dDpcIlwiLmNvbmNhdCh0LFwieFwiKTtyZXR1cm4gcmVtb3ZlUHJvdG9jb2woXCJcIi5jb25jYXQoaVswXSxcIl9cIikuY29uY2F0KG8pLmNvbmNhdChyKSl9cmV0dXJuIG51bGx9dmFyIERFRkFVTFRfQVNQRUNUX1JBVElPJDE9LjcwNDE7ZnVuY3Rpb24gdXBkYXRlUXVlcnlQYXJhbShlLHQsbil7dm9pZCAwPT09ZSYmKGU9XCJcIik7dmFyIGk9bmV3IFJlZ0V4cChcIihbPyZdKVwiK3QrXCI9Lio/KCZ8JClcIixcImlcIikscj0tMSE9PWUuaW5kZXhPZihcIj9cIik/XCImXCI6XCI/XCI7cmV0dXJuIGUubWF0Y2goaSk/ZS5yZXBsYWNlKGksXCIkMVwiK3QrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KG4pK1wiJDJcIik6ZStyK3QrXCI9XCIrZW5jb2RlVVJJQ29tcG9uZW50KG4pfWZ1bmN0aW9uIGdldFNyY1NldChlKXtpZighZSlyZXR1cm4gZTt2YXIgdD1bMTAwLDIwMCw0MDAsODAwLDEyMDAsMTYwMCwyZTNdO2lmKGUubWF0Y2goL2J1aWxkZXJcXC5pby8pKXt2YXIgbj1lLGk9TnVtYmVyKGUuc3BsaXQoXCI/d2lkdGg9XCIpWzFdKTtyZXR1cm4gaXNOYU4oaSl8fChuPVwiXCIuY29uY2F0KG4sXCIgXCIpLmNvbmNhdChpLFwid1wiKSksdC5maWx0ZXIoKGZ1bmN0aW9uKGUpe3JldHVybiBlIT09aX0pKS5tYXAoKGZ1bmN0aW9uKHQpe3JldHVyblwiXCIuY29uY2F0KHVwZGF0ZVF1ZXJ5UGFyYW0oZSxcIndpZHRoXCIsdCksXCIgXCIpLmNvbmNhdCh0LFwid1wiKX0pKS5jb25jYXQoW25dKS5qb2luKFwiLCBcIil9cmV0dXJuIGUubWF0Y2goL2NkblxcLnNob3BpZnlcXC5jb20vKT90Lm1hcCgoZnVuY3Rpb24odCl7cmV0dXJuW2dldFNob3BpZnlJbWFnZVVybChlLFwiXCIuY29uY2F0KHQsXCJ4XCIpLmNvbmNhdCh0KSksdF19KSkuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4hIWVbMF19KSkubWFwKChmdW5jdGlvbihlKXt2YXIgdD1lWzBdLG49ZVsxXTtyZXR1cm5cIlwiLmNvbmNhdCh0LFwiIFwiKS5jb25jYXQobixcIndcIil9KSkuY29uY2F0KFtlXSkuam9pbihcIiwgXCIpOmV9dmFyIGdldFNpemVzPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaSxyLG8sYSxzLGwsdSxkO3ZvaWQgMD09PW4mJihuPXt9KTt2YXIgYz1cIlwiO2lmKGUpe3ZhciBwPWUuc3BsaXQoXCIsXCIpLGY9cC5sZW5ndGg7Yz1wLm1hcCgoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZj09PXQrMT9lLnJlcGxhY2UoL1xcKFtcXHNcXFNdKj9cXCkvZyxcIlwiKS50cmltKCk6ZX0pKS5qb2luKFwiLCBcIil9ZWxzZSBpZih0JiZ0LnJlc3BvbnNpdmVTdHlsZXMpe3ZhciBtPVtdLGg9ITEsdj0vXlxcZCsvLGc9Z2V0U2l6ZXNGb3JCcmVha3BvaW50cyhuKTtpZihudWxsPT09KG89bnVsbD09PShyPW51bGw9PT0oaT10LnJlc3BvbnNpdmVTdHlsZXMpfHx2b2lkIDA9PT1pP3ZvaWQgMDppLnNtYWxsKXx8dm9pZCAwPT09cj92b2lkIDA6ci53aWR0aCl8fHZvaWQgMD09PW8/dm9pZCAwOm8ubWF0Y2godikpe2g9ITA7dmFyIGI9XCIobWF4LXdpZHRoOiBcIi5jb25jYXQoZy5zbWFsbC5tYXgsXCJweClcIikseT1cIlwiLmNvbmNhdChiLFwiIFwiKS5jb25jYXQodC5yZXNwb25zaXZlU3R5bGVzLnNtYWxsLndpZHRoLnJlcGxhY2UoXCIlXCIsXCJ2d1wiKSk7bS5wdXNoKHkpfWlmKG51bGw9PT0obD1udWxsPT09KHM9bnVsbD09PShhPXQucmVzcG9uc2l2ZVN0eWxlcyl8fHZvaWQgMD09PWE/dm9pZCAwOmEubWVkaXVtKXx8dm9pZCAwPT09cz92b2lkIDA6cy53aWR0aCl8fHZvaWQgMD09PWw/dm9pZCAwOmwubWF0Y2godikpe2g9ITA7Yj1cIihtYXgtd2lkdGg6IFwiLmNvbmNhdChnLm1lZGl1bS5tYXgsXCJweClcIikseT1cIlwiLmNvbmNhdChiLFwiIFwiKS5jb25jYXQodC5yZXNwb25zaXZlU3R5bGVzLm1lZGl1bS53aWR0aC5yZXBsYWNlKFwiJVwiLFwidndcIikpO20ucHVzaCh5KX1pZihudWxsPT09KGQ9bnVsbD09PSh1PXQucmVzcG9uc2l2ZVN0eWxlcyl8fHZvaWQgMD09PXU/dm9pZCAwOnUubGFyZ2UpfHx2b2lkIDA9PT1kP3ZvaWQgMDpkLndpZHRoKXt2YXIgXz10LnJlc3BvbnNpdmVTdHlsZXMubGFyZ2Uud2lkdGgucmVwbGFjZShcIiVcIixcInZ3XCIpO20ucHVzaChfKX1lbHNlIGgmJm0ucHVzaChcIjEwMHZ3XCIpO20ubGVuZ3RoJiYoYz1tLmpvaW4oXCIsIFwiKSl9cmV0dXJuIGN9LEltYWdlQ29tcG9uZW50PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgdD1udWxsIT09ZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7cmV0dXJuIHQuc3RhdGU9e2ltYWdlTG9hZGVkOiF0LnVzZUxhenlMb2FkaW5nLGxvYWQ6IXQudXNlTGF6eUxvYWRpbmd9LHQucGljdHVyZVJlZj1udWxsLHQuc2Nyb2xsTGlzdGVuZXI9bnVsbCx0LmludGVyc2VjdGlvbk9ic2VydmVyPW51bGwsdH1yZXR1cm4gX19leHRlbmRzKHQsZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwidXNlTGF6eUxvYWRpbmdcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIXRoaXMucHJvcHMuaGlnaFByaW9yaXR5JiYoKCFCdWlsZGVyLmlzQnJvd3Nlcnx8IWxvY2F0aW9uLnNlYXJjaC5pbmNsdWRlcyhcImJ1aWxkZXIubGF6eUxvYWRJbWFnZXM9ZmFsc2VcIikpJiYoISghQnVpbGRlci5pc0Jyb3dzZXJ8fCFsb2NhdGlvbi5ocmVmLmluY2x1ZGVzKFwiYnVpbGRlci5sYXp5TG9hZEltYWdlcz10cnVlXCIpKXx8dGhpcy5wcm9wcy5sYXp5KSl9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuY29tcG9uZW50V2lsbFVubW91bnQ9ZnVuY3Rpb24oKXtCdWlsZGVyLmlzQnJvd3NlciYmKHRoaXMuc2Nyb2xsTGlzdGVuZXImJih3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLHRoaXMuc2Nyb2xsTGlzdGVuZXIpLHRoaXMuc2Nyb2xsTGlzdGVuZXI9bnVsbCksdGhpcy5pbnRlcnNlY3Rpb25PYnNlcnZlciYmdGhpcy5waWN0dXJlUmVmJiZ0aGlzLmludGVyc2VjdGlvbk9ic2VydmVyLnVub2JzZXJ2ZSh0aGlzLnBpY3R1cmVSZWYpKX0sdC5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQ9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO2lmKHRoaXMucHJvcHMubGF6eSYmQnVpbGRlci5pc0Jyb3dzZXIpaWYodGhpcy5waWN0dXJlUmVmJiZpc0VsZW1lbnRJblZpZXdwb3J0KHRoaXMucGljdHVyZVJlZikpdGhpcy5zZXRTdGF0ZSh7bG9hZDohMH0pO2Vsc2UgaWYoXCJmdW5jdGlvblwiPT10eXBlb2YgSW50ZXJzZWN0aW9uT2JzZXJ2ZXImJnRoaXMucGljdHVyZVJlZil7KHRoaXMuaW50ZXJzZWN0aW9uT2JzZXJ2ZXI9bmV3IEludGVyc2VjdGlvbk9ic2VydmVyKChmdW5jdGlvbih0LG4pe3QuZm9yRWFjaCgoZnVuY3Rpb24odCl7dC5pbnRlcnNlY3Rpb25SYXRpbz4wJiYoZS5zZXRTdGF0ZSh7bG9hZDohMH0pLGUucGljdHVyZVJlZiYmbi51bm9ic2VydmUoZS5waWN0dXJlUmVmKSl9KSl9KSkpLm9ic2VydmUodGhpcy5waWN0dXJlUmVmKX1lbHNle3ZhciB0PXRocm90dGxlKChmdW5jdGlvbihuKXtpZihlLnBpY3R1cmVSZWYpe3ZhciBpPWUucGljdHVyZVJlZi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKSxyPXdpbmRvdy5pbm5lckhlaWdodC8yO2kudG9wPHdpbmRvdy5pbm5lckhlaWdodCtyJiYoZS5zZXRTdGF0ZShfX2Fzc2lnbihfX2Fzc2lnbih7fSxlLnN0YXRlKSx7bG9hZDohMH0pKSx3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLHQpLGUuc2Nyb2xsTGlzdGVuZXI9bnVsbCl9fSksNDAwLHtsZWFkaW5nOiExLHRyYWlsaW5nOiEwfSk7dGhpcy5zY3JvbGxMaXN0ZW5lcj10LHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsdCx7Y2FwdHVyZTohMCxwYXNzaXZlOiEwfSksdCgpfX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwiaW1hZ2VcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHJvcHMuaW1hZ2V8fHRoaXMucHJvcHMuc3JjfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLmdldFNyY1NldD1mdW5jdGlvbigpe3ZhciBlPXRoaXMuaW1hZ2U7aWYoZSYmXCJzdHJpbmdcIj09dHlwZW9mIGUmJiF0aGlzLnByb3BzLm5vV2VicCYmKGUubWF0Y2goL2J1aWxkZXJcXC5pby8pfHxlLm1hdGNoKC9jZG5cXC5zaG9waWZ5XFwuY29tLykpKXJldHVybiBnZXRTcmNTZXQoZSl9LHQucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe3ZhciBlLHQsbj10aGlzLGk9dGhpcy5wcm9wcyxyPWkuYXNwZWN0UmF0aW8sbz1pLmxhenksYT1pLmJ1aWxkZXJCbG9jayxzPWkuYnVpbGRlclN0YXRlLGw9dGhpcy5wcm9wcy5idWlsZGVyQmxvY2smJnRoaXMucHJvcHMuYnVpbGRlckJsb2NrLmNoaWxkcmVuLHU9dGhpcy5wcm9wcy5zcmNzZXQsZD1nZXRTaXplcyh0aGlzLnByb3BzLnNpemVzLGEsKG51bGw9PT0odD1udWxsPT09KGU9bnVsbD09cz92b2lkIDA6cy5jb250ZXh0LmJ1aWxkZXJDb250ZW50KXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5tZXRhKXx8dm9pZCAwPT09dD92b2lkIDA6dC5icmVha3BvaW50cyl8fHt9KSxjPXRoaXMuaW1hZ2U7dSYmYyYmYy5pbmNsdWRlcyhcImJ1aWxkZXIuaW8vYXBpL3YxL2ltYWdlXCIpP3UuaW5jbHVkZXMoYy5zcGxpdChcIj9cIilbMF0pfHwoY29uc29sZS5kZWJ1ZyhcIlJlbW92ZWQgZ2l2ZW4gc3Jjc2V0XCIpLHU9dGhpcy5nZXRTcmNTZXQoKSk6YyYmIXUmJih1PXRoaXMuZ2V0U3JjU2V0KCkpO3ZhciBwPShudWxsPT1hP3ZvaWQgMDphLmlkLnN0YXJ0c1dpdGgoXCJidWlsZGVyLXBpeGVsLVwiKSl8fHRoaXMucHJvcHMuaGlnaFByaW9yaXR5LGY9dGhpcy5wcm9wcy5maXRDb250ZW50O3JldHVybiBqc3goQnVpbGRlck1ldGFDb250ZXh0LkNvbnN1bWVyLG51bGwsKGZ1bmN0aW9uKGUpe3ZhciB0LGk9ZS5hbXBNb2RlLGE9aT9cImFtcC1pbWdcIjpcImltZ1wiLHM9KCFvfHxuLnN0YXRlLmxvYWR8fGkpJiZqc3goYSxfX2Fzc2lnbih7fSxpP3tsYXlvdXQ6XCJyZXNwb25zaXZlXCIsaGVpZ2h0Om4ucHJvcHMuaGVpZ2h0fHwocj9NYXRoLnJvdW5kKDFlMypyKTp2b2lkIDApLHdpZHRoOm4ucHJvcHMud2lkdGh8fChyP01hdGgucm91bmQoMWUzL3IpOnZvaWQgMCl9Om51bGwse2FsdDpuLnByb3BzLmFsdFRleHQsa2V5OkJ1aWxkZXIuaXNFZGl0aW5nJiZcInN0cmluZ1wiPT10eXBlb2Ygbi5pbWFnZSYmbi5pbWFnZS5zcGxpdChcIj9cIilbMF18fHZvaWQgMCxyb2xlOm4ucHJvcHMuYWx0VGV4dD92b2lkIDA6XCJwcmVzZW50YXRpb25cIixjc3M6X19hc3NpZ24oX19hc3NpZ24oe29wYWNpdHk6aT8xOm4udXNlTGF6eUxvYWRpbmcmJiFuLnN0YXRlLmltYWdlTG9hZGVkPzA6MSx0cmFuc2l0aW9uOlwib3BhY2l0eSAwLjJzIGVhc2UtaW4tb3V0XCIsb2JqZWN0Rml0Om4ucHJvcHMuYmFja2dyb3VuZFNpemV8fFwiY292ZXJcIixvYmplY3RQb3NpdGlvbjpuLnByb3BzLmJhY2tncm91bmRQb3NpdGlvbnx8XCJjZW50ZXJcIn0sciYmIWkmJntwb3NpdGlvbjpcImFic29sdXRlXCIsaGVpZ2h0OlwiMTAwJVwiLHdpZHRoOlwiMTAwJVwiLGxlZnQ6MCx0b3A6MH0pLGkmJih0PXt9LHRbXCImIGltZ1wiXT17b2JqZWN0Rml0Om4ucHJvcHMuYmFja2dyb3VuZFNpemUsb2JqZWN0UG9zaXRpb246bi5wcm9wcy5iYWNrZ3JvdW5kUG9zaXRpb259LHQpKSxsb2FkaW5nOnA/XCJlYWdlclwiOlwibGF6eVwiLGZldGNoUHJpb3JpdHk6cD9cImhpZ2hcIjpcImF1dG9cIixjbGFzc05hbWU6XCJidWlsZGVyLWltYWdlXCIrKG4ucHJvcHMuY2xhc3NOYW1lP1wiIFwiK24ucHJvcHMuY2xhc3NOYW1lOlwiXCIpLHNyYzpuLmltYWdlfSwhaSYme29uTG9hZDpmdW5jdGlvbigpe3JldHVybiBuLnNldFN0YXRlKHtpbWFnZUxvYWRlZDohMH0pfX0se3NyY1NldDp1LHNpemVzOiFpJiZkP2Q6dm9pZCAwfSkpO3JldHVybiBqc3goUmVhY3RfX2RlZmF1bHQuRnJhZ21lbnQsbnVsbCxpP3M6anN4KFwicGljdHVyZVwiLHtyZWY6ZnVuY3Rpb24oZSl7cmV0dXJuIG4ucGljdHVyZVJlZj1lfX0sdSYmdS5tYXRjaCgvYnVpbGRlclxcLmlvLykmJiFuLnByb3BzLm5vV2VicCYmanN4KFwic291cmNlXCIse3NyY1NldDp1LnJlcGxhY2UoL1xcPy9nLFwiP2Zvcm1hdD13ZWJwJlwiKSx0eXBlOlwiaW1hZ2Uvd2VicFwifSkscyksIXJ8fGl8fGYmJmwmJmwubGVuZ3RoP251bGw6anN4KFwiZGl2XCIse2NsYXNzTmFtZTpcImJ1aWxkZXItaW1hZ2Utc2l6ZXJcIixjc3M6e3dpZHRoOlwiMTAwJVwiLHBhZGRpbmdUb3A6MTAwKnIrXCIlXCIscG9pbnRlckV2ZW50czpcIm5vbmVcIixmb250U2l6ZTowfX0sXCIgXCIpLGwmJmwubGVuZ3RoP2Y/bC5tYXAoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGpzeChCdWlsZGVyQmxvY2skMSx7a2V5OmUuaWQsYmxvY2s6ZX0pfSkpOmpzeChcImRpdlwiLHtjc3M6e2Rpc3BsYXk6XCJmbGV4XCIsZmxleERpcmVjdGlvbjpcImNvbHVtblwiLGFsaWduSXRlbXM6XCJzdHJldGNoXCIscG9zaXRpb246XCJhYnNvbHV0ZVwiLHRvcDowLGxlZnQ6MCx3aWR0aDpcIjEwMCVcIixoZWlnaHQ6XCIxMDAlXCJ9fSxsLm1hcCgoZnVuY3Rpb24oZSx0KXtyZXR1cm4ganN4KEJ1aWxkZXJCbG9jayQxLHtrZXk6ZS5pZCxibG9jazplfSl9KSkpOm51bGwpfSkpfSx0fShSZWFjdF9fZGVmYXVsdC5Db21wb25lbnQpLEltYWdlPXdpdGhCdWlsZGVyKEltYWdlQ29tcG9uZW50LHtuYW1lOlwiSW1hZ2VcIixzdGF0aWM6ITAsaW1hZ2U6XCJodHRwczovL2ZpcmViYXNlc3RvcmFnZS5nb29nbGVhcGlzLmNvbS92MC9iL2J1aWxkZXItM2IwYTIuYXBwc3BvdC5jb20vby9pbWFnZXMlMkZiYXNlbGluZS1pbnNlcnRfcGhvdG8tMjRweC5zdmc/YWx0PW1lZGlhJnRva2VuPTRlNWQwZWY0LWY1ZTgtNGU1Ny1iM2E5LTM4ZDYzYTliOWRjNFwiLGRlZmF1bHRTdHlsZXM6e3Bvc2l0aW9uOlwicmVsYXRpdmVcIixtaW5IZWlnaHQ6XCIyMHB4XCIsbWluV2lkdGg6XCIyMHB4XCIsb3ZlcmZsb3c6XCJoaWRkZW5cIn0sY2FuSGF2ZUNoaWxkcmVuOiEwLGlucHV0czpbe25hbWU6XCJpbWFnZVwiLHR5cGU6XCJmaWxlXCIsYnViYmxlOiEwLGFsbG93ZWRGaWxlVHlwZXM6SU1BR0VfRklMRV9UWVBFUyxyZXF1aXJlZDohMCxkZWZhdWx0VmFsdWU6XCJodHRwczovL2Nkbi5idWlsZGVyLmlvL2FwaS92MS9pbWFnZS9hc3NldHMlMkZZSklHYjRpMDFqdncwU1JkTDVCdCUyRjcyYzgwZjExNGRjMTQ5MDE5MDUxYjY4NTJhOWUzYjdhXCIsb25DaGFuZ2U6ZnVuY3Rpb24oZSl7ZS5kZWxldGUoXCJzcmNzZXRcIiksZS5kZWxldGUoXCJub1dlYnBcIik7dmFyIHQsbixpPWUuZ2V0KFwiaW1hZ2VcIikscj1lLmdldChcImFzcGVjdFJhdGlvXCIpO2lmKGZldGNoKGkpLnRoZW4oKGZ1bmN0aW9uKGUpe3JldHVybiBlLmJsb2IoKX0pKS50aGVuKChmdW5jdGlvbih0KXt0LnR5cGUuaW5jbHVkZXMoXCJzdmdcIikmJmUuc2V0KFwibm9XZWJwXCIsITApfSkpLGkmJighcnx8LjcwNDE9PT1yKSlyZXR1cm4odD1pLHZvaWQgMD09PW4mJihuPTZlNCksbmV3IFByb21pc2UoKGZ1bmN0aW9uKGUsaSl7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImltZ1wiKSxvPSExO3Iub25sb2FkPWZ1bmN0aW9uKCl7bz0hMCxlKHIpfSxyLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLChmdW5jdGlvbihlKXtjb25zb2xlLndhcm4oXCJJbWFnZSBsb2FkIGZhaWxlZFwiLGUuZXJyb3IpLGkoZS5lcnJvcil9KSksci5zcmM9dCxzZXRUaW1lb3V0KChmdW5jdGlvbigpe298fGkobmV3IEVycm9yKFwiSW1hZ2UgbG9hZCB0aW1lZCBvdXRcIikpfSksbil9KSkpLnRoZW4oKGZ1bmN0aW9uKHQpe3ZhciBuLHI9ZS5nZXQoXCJhc3BlY3RSYXRpb1wiKTtlLmdldChcImltYWdlXCIpIT09aXx8ciYmLjcwNDEhPT1yfHx0LndpZHRoJiZ0LmhlaWdodCYmKGUuc2V0KFwiYXNwZWN0UmF0aW9cIiwobj10LmhlaWdodC90LndpZHRoLE1hdGgucm91bmQoMWUzKm4pLzFlMykpLGUuc2V0KFwiaGVpZ2h0XCIsdC5oZWlnaHQpLGUuc2V0KFwid2lkdGhcIix0LndpZHRoKSl9KSl9fSx7bmFtZTpcImJhY2tncm91bmRTaXplXCIsdHlwZTpcInRleHRcIixkZWZhdWx0VmFsdWU6XCJjb3ZlclwiLGVudW06W3tsYWJlbDpcImNvbnRhaW5cIix2YWx1ZTpcImNvbnRhaW5cIixoZWxwZXJUZXh0OlwiVGhlIGltYWdlIHNob3VsZCBuZXZlciBnZXQgY3JvcHBlZFwifSx7bGFiZWw6XCJjb3ZlclwiLHZhbHVlOlwiY292ZXJcIixoZWxwZXJUZXh0OlwiVGhlIGltYWdlIHNob3VsZCBmaWxsIGl0cyBib3gsIGNyb3BwaW5nIHdoZW4gbmVlZGVkXCJ9XX0se25hbWU6XCJiYWNrZ3JvdW5kUG9zaXRpb25cIix0eXBlOlwidGV4dFwiLGRlZmF1bHRWYWx1ZTpcImNlbnRlclwiLGVudW06W1wiY2VudGVyXCIsXCJ0b3BcIixcImxlZnRcIixcInJpZ2h0XCIsXCJib3R0b21cIixcInRvcCBsZWZ0XCIsXCJ0b3AgcmlnaHRcIixcImJvdHRvbSBsZWZ0XCIsXCJib3R0b20gcmlnaHRcIl19LHtuYW1lOlwiYWx0VGV4dFwiLHR5cGU6XCJzdHJpbmdcIixoZWxwZXJUZXh0OlwiVGV4dCB0byBkaXNwbGF5IHdoZW4gdGhlIHVzZXIgaGFzIGltYWdlcyBvZmZcIn0se25hbWU6XCJoaWdoUHJpb3JpdHlcIix0eXBlOlwiYm9vbGVhblwiLGFkdmFuY2VkOiEwLGhlbHBlclRleHQ6XCJNYXJrIHRoaXMgaW1hZ2UgYXMgaGlnaCBwcmlvcml0eSBjb21wYXJlZCB0byBvdGhlciBpbWFnZXMgb24gdGhlIHBhZ2UuIFRoaXMgcHJldmVudHMgbGF6eSBsb2FkaW5nIG9mIHRoZSBpbWFnZSBhbmQgdGVsbHMgdGhlIGJyb3dzZXIgdG8gbG9hZCB0aGlzIGltYWdlIGJlZm9yZSBvdGhlcnMgb24gdGhlIHBhZ2UuXCJ9LHtuYW1lOlwiaGVpZ2h0XCIsdHlwZTpcIm51bWJlclwiLGhpZGVGcm9tVUk6ITB9LHtuYW1lOlwid2lkdGhcIix0eXBlOlwibnVtYmVyXCIsaGlkZUZyb21VSTohMH0se25hbWU6XCJzaXplc1wiLHR5cGU6XCJzdHJpbmdcIixoaWRlRnJvbVVJOiEwfSx7bmFtZTpcInNyY3NldFwiLHR5cGU6XCJzdHJpbmdcIixoaWRlRnJvbVVJOiEwfSx7bmFtZTpcImxhenlcIix0eXBlOlwiYm9vbGVhblwiLGRlZmF1bHRWYWx1ZTohMCxoaWRlRnJvbVVJOiEwfSx7bmFtZTpcImZpdENvbnRlbnRcIix0eXBlOlwiYm9vbGVhblwiLGhlbHBlclRleHQ6XCJXaGVuIGNoaWxkIGJsb2NrcyBhcmUgcHJvdmlkZWQsIGZpdCB0byB0aGVtIGluc3RlYWQgb2YgdXNpbmcgdGhlIGltYWdlJ3MgYXNwZWN0IHJhdGlvXCIsZGVmYXVsdFZhbHVlOiEwfSx7bmFtZTpcImFzcGVjdFJhdGlvXCIsdHlwZTpcIm51bWJlclwiLGhlbHBlclRleHQ6XCJUaGlzIGlzIHRoZSByYXRpbyBvZiBoZWlnaHQvd2lkdGgsIGUuZy4gc2V0IHRvIDEuNSBmb3IgYSAzMDBweCB3aWRlIGFuZCAyMDBweCB0YWxsIHBob3RvLiBTZXQgdG8gMCB0byBub3QgZm9yY2UgdGhlIGltYWdlIHRvIG1haW50YWluIGl0J3MgYXNwZWN0IHJhdGlvXCIsYWR2YW5jZWQ6ITAsZGVmYXVsdFZhbHVlOkRFRkFVTFRfQVNQRUNUX1JBVElPJDF9XX0pLERFRkFVTFRfQVNQRUNUX1JBVElPPS43MDA0MDQ4NTgyOTk1OTQ4LFZpZGVvQ29tcG9uZW50PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgdD1udWxsIT09ZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7cmV0dXJuIHQudmlkZW89bnVsbCx0LmNvbnRhaW5lclJlZj1udWxsLHQuc2Nyb2xsTGlzdGVuZXI9bnVsbCx0LnN0YXRlPXtsb2FkOiF0LmxhenlMb2FkfSx0fXJldHVybiBfX2V4dGVuZHModCxlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJsYXp5TG9hZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4hMSE9PXRoaXMucHJvcHMubGF6eUxvYWR9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUudXBkYXRlVmlkZW89ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcy52aWRlbztpZih0KXtbXCJtdXRlZFwiLFwicGxheXNJbmxpbmVcIixcImF1dG9QbGF5XCJdLmZvckVhY2goKGZ1bmN0aW9uKG4pe3ZhciBpPW4udG9Mb3dlckNhc2UoKTtlLnByb3BzW25dP3Quc2V0QXR0cmlidXRlKGksaSk6dC5yZW1vdmVBdHRyaWJ1dGUoaSl9KSl9fSx0LnByb3RvdHlwZS5jb21wb25lbnREaWRVcGRhdGU9ZnVuY3Rpb24oKXt0aGlzLnVwZGF0ZVZpZGVvKCl9LHQucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZih0aGlzLnVwZGF0ZVZpZGVvKCksdGhpcy5sYXp5TG9hZCYmQnVpbGRlci5pc0Jyb3dzZXIpe3ZhciB0PXRocm90dGxlKChmdW5jdGlvbihuKXtpZihlLmNvbnRhaW5lclJlZil7dmFyIGk9ZS5jb250YWluZXJSZWYuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkscj13aW5kb3cuaW5uZXJIZWlnaHQvMjtpLnRvcDx3aW5kb3cuaW5uZXJIZWlnaHQrciYmKGUuc2V0U3RhdGUoKGZ1bmN0aW9uKGUpe3JldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSxlKSx7bG9hZDohMH0pfSkpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsdCksZS5zY3JvbGxMaXN0ZW5lcj1udWxsKX19KSw0MDAse2xlYWRpbmc6ITEsdHJhaWxpbmc6ITB9KTt0aGlzLnNjcm9sbExpc3RlbmVyPXQsd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIix0LHtjYXB0dXJlOiEwLHBhc3NpdmU6ITB9KSx0KCl9fSx0LnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudD1mdW5jdGlvbigpe0J1aWxkZXIuaXNCcm93c2VyJiZ0aGlzLnNjcm9sbExpc3RlbmVyJiYod2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIix0aGlzLnNjcm9sbExpc3RlbmVyKSx0aGlzLnNjcm9sbExpc3RlbmVyPW51bGwpfSx0LnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcy5wcm9wcyxuPXQuYXNwZWN0UmF0aW8saT10LmNoaWxkcmVuO3JldHVybiBqc3goXCJkaXZcIix7cmVmOmZ1bmN0aW9uKHQpe3JldHVybiBlLmNvbnRhaW5lclJlZj10fSxjc3M6e3Bvc2l0aW9uOlwicmVsYXRpdmVcIn19LGpzeChcInZpZGVvXCIse2tleTp0aGlzLnByb3BzLnZpZGVvfHxcIm5vLXNyY1wiLHBvc3Rlcjp0aGlzLnByb3BzLnBvc3RlckltYWdlLHJlZjpmdW5jdGlvbih0KXtyZXR1cm4gZS52aWRlbz10fSxhdXRvUGxheTp0aGlzLnByb3BzLmF1dG9QbGF5LG11dGVkOnRoaXMucHJvcHMubXV0ZWQsY29udHJvbHM6dGhpcy5wcm9wcy5jb250cm9scyxsb29wOnRoaXMucHJvcHMubG9vcCxwcmVsb2FkOnRoaXMucHJvcHMucHJlbG9hZHx8XCJtZXRhZGF0YVwiLGNsYXNzTmFtZTpcImJ1aWxkZXItdmlkZW9cIixjc3M6X19hc3NpZ24oe3dpZHRoOlwiMTAwJVwiLGhlaWdodDpcIjEwMCVcIixvYmplY3RGaXQ6dGhpcy5wcm9wcy5maXQsb2JqZWN0UG9zaXRpb246dGhpcy5wcm9wcy5wb3NpdGlvbix6SW5kZXg6Mixib3JkZXJSYWRpdXM6MX0sbj97cG9zaXRpb246XCJhYnNvbHV0ZVwifTpudWxsKX0sKCF0aGlzLmxhenlMb2FkfHx0aGlzLnN0YXRlLmxvYWQpJiZqc3goXCJzb3VyY2VcIix7dHlwZTpcInZpZGVvL21wNFwiLHNyYzp0aGlzLnByb3BzLnZpZGVvfSkpLCFufHx0aGlzLnByb3BzLmZpdENvbnRlbnQmJmk/bnVsbDpqc3goXCJkaXZcIix7Y3NzOnt3aWR0aDpcIjEwMCVcIixwYWRkaW5nVG9wOjEwMCpuK1wiJVwiLHBvaW50ZXJFdmVudHM6XCJub25lXCIsZm9udFNpemU6MH19KSxpJiZ0aGlzLnByb3BzLmZpdENvbnRlbnQ/anN4KFwiZGl2XCIse2Nzczp7ZGlzcGxheTpcImZsZXhcIixmbGV4RGlyZWN0aW9uOlwiY29sdW1uXCIsYWxpZ25JdGVtczpcInN0cmV0Y2hcIn19LGkpOmk/anN4KFwiZGl2XCIse2Nzczp7cG9pbnRlckV2ZW50czpcIm5vbmVcIixkaXNwbGF5OlwiZmxleFwiLGZsZXhEaXJlY3Rpb246XCJjb2x1bW5cIixhbGlnbkl0ZW1zOlwic3RyZXRjaFwiLHBvc2l0aW9uOlwiYWJzb2x1dGVcIix0b3A6MCxsZWZ0OjAsd2lkdGg6XCIxMDAlXCIsaGVpZ2h0OlwiMTAwJVwifX0saSk6bnVsbCl9LHR9KFJlYWN0X19kZWZhdWx0LkNvbXBvbmVudCksVmlkZW89QnVpbGRlci5yZWdpc3RlckNvbXBvbmVudCh3aXRoQ2hpbGRyZW4oVmlkZW9Db21wb25lbnQpLHtuYW1lOlwiVmlkZW9cIixjYW5IYXZlQ2hpbGRyZW46ITAsZGVmYXVsdFN0eWxlczp7bWluSGVpZ2h0OlwiMjBweFwiLG1pbldpZHRoOlwiMjBweFwifSxpbWFnZTpcImh0dHBzOi8vZmlyZWJhc2VzdG9yYWdlLmdvb2dsZWFwaXMuY29tL3YwL2IvYnVpbGRlci0zYjBhMi5hcHBzcG90LmNvbS9vL2ltYWdlcyUyRmJhc2VsaW5lLXZpZGVvY2FtLTI0cHglMjAoMSkuc3ZnP2FsdD1tZWRpYSZ0b2tlbj00OWE4NGU0YS1iMjBlLTQ5NzctYTY1MC0wNDdmOTg2ODc0YmJcIixpbnB1dHM6W3tuYW1lOlwidmlkZW9cIix0eXBlOlwiZmlsZVwiLGFsbG93ZWRGaWxlVHlwZXM6VklERU9fRklMRV9UWVBFUyxidWJibGU6ITAsZGVmYXVsdFZhbHVlOlwiaHR0cHM6Ly9jZG4uYnVpbGRlci5pby9vL2Fzc2V0cyUyRllKSUdiNGkwMWp2dzBTUmRMNUJ0JTJGZDI3NzMxYTUyNjQ2NGRlYmEwMDE2MjE2ZjVmOWU1NzAlMkZjb21wcmVzc2VkP2FwaUtleT1ZSklHYjRpMDFqdncwU1JkTDVCdCZ0b2tlbj1kMjc3MzFhNTI2NDY0ZGViYTAwMTYyMTZmNWY5ZTU3MCZhbHQ9bWVkaWEmb3B0aW1pemVkPXRydWVcIixyZXF1aXJlZDohMH0se25hbWU6XCJwb3N0ZXJJbWFnZVwiLHR5cGU6XCJmaWxlXCIsYWxsb3dlZEZpbGVUeXBlczpJTUFHRV9GSUxFX1RZUEVTLGhlbHBlclRleHQ6XCJJbWFnZSB0byBzaG93IGJlZm9yZSB0aGUgdmlkZW8gcGxheXNcIn0se25hbWU6XCJhdXRvUGxheVwiLHR5cGU6XCJib29sZWFuXCIsZGVmYXVsdFZhbHVlOiEwfSx7bmFtZTpcImNvbnRyb2xzXCIsdHlwZTpcImJvb2xlYW5cIixkZWZhdWx0VmFsdWU6ITF9LHtuYW1lOlwibXV0ZWRcIix0eXBlOlwiYm9vbGVhblwiLGRlZmF1bHRWYWx1ZTohMH0se25hbWU6XCJsb29wXCIsdHlwZTpcImJvb2xlYW5cIixkZWZhdWx0VmFsdWU6ITB9LHtuYW1lOlwicGxheXNJbmxpbmVcIix0eXBlOlwiYm9vbGVhblwiLGRlZmF1bHRWYWx1ZTohMH0se25hbWU6XCJmaXRcIix0eXBlOlwidGV4dFwiLGRlZmF1bHRWYWx1ZTpcImNvdmVyXCIsZW51bTpbXCJjb250YWluXCIsXCJjb3ZlclwiLFwiZmlsbFwiLFwiYXV0b1wiXX0se25hbWU6XCJwcmVsb2FkXCIsdHlwZTpcInRleHRcIixkZWZhdWx0VmFsdWU6XCJtZXRhZGF0YVwiLGVudW06W1wiYXV0b1wiLFwibWV0YWRhdGFcIixcIm5vbmVcIl19LHtuYW1lOlwiZml0Q29udGVudFwiLHR5cGU6XCJib29sZWFuXCIsaGVscGVyVGV4dDpcIldoZW4gY2hpbGQgYmxvY2tzIGFyZSBwcm92aWRlZCwgZml0IHRvIHRoZW0gaW5zdGVhZCBvZiB1c2luZyB0aGUgYXNwZWN0IHJhdGlvXCIsZGVmYXVsdFZhbHVlOiEwLGFkdmFuY2VkOiEwfSx7bmFtZTpcInBvc2l0aW9uXCIsdHlwZTpcInRleHRcIixkZWZhdWx0VmFsdWU6XCJjZW50ZXJcIixlbnVtOltcImNlbnRlclwiLFwidG9wXCIsXCJsZWZ0XCIsXCJyaWdodFwiLFwiYm90dG9tXCIsXCJ0b3AgbGVmdFwiLFwidG9wIHJpZ2h0XCIsXCJib3R0b20gbGVmdFwiLFwiYm90dG9tIHJpZ2h0XCJdfSx7bmFtZTpcImhlaWdodFwiLHR5cGU6XCJudW1iZXJcIixhZHZhbmNlZDohMH0se25hbWU6XCJ3aWR0aFwiLHR5cGU6XCJudW1iZXJcIixhZHZhbmNlZDohMH0se25hbWU6XCJhc3BlY3RSYXRpb1wiLHR5cGU6XCJudW1iZXJcIixhZHZhbmNlZDohMCxkZWZhdWx0VmFsdWU6REVGQVVMVF9BU1BFQ1RfUkFUSU99LHtuYW1lOlwibGF6eUxvYWRcIix0eXBlOlwiYm9vbGVhblwiLGhlbHBlclRleHQ6J0xvYWQgdGhpcyB2aWRlbyBcImxhemlseVwiIC0gYXMgaW4gb25seSB3aGVuIGEgdXNlciBzY3JvbGxzIG5lYXIgdGhlIHZpZGVvLiBSZWNvbW1lbmRlZCBmb3Igb3B0bWl6ZWQgcGVyZm9ybWFuY2UgYW5kIGJhbmR3aWR0aCBjb25zdW1wdGlvbicsZGVmYXVsdFZhbHVlOiEwLGFkdmFuY2VkOiEwfV19KSxzaXplPWZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3Qua2V5cyhlKS5sZW5ndGh9LGlzU2hvcGlmeT1CdWlsZGVyLmlzQnJvd3NlciYmXCJTaG9waWZ5XCJpbiB3aW5kb3cscmVmcz17fTtpZihCdWlsZGVyLmlzQnJvd3Nlcil0cnl7QXJyYXkuZnJvbShkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiW2J1aWxkZXItc3RhdGljLXN5bWJvbF1cIikpLmZvckVhY2goKGZ1bmN0aW9uKGUpe3ZhciB0PWUuZ2V0QXR0cmlidXRlKFwiYnVpbGRlci1zdGF0aWMtc3ltYm9sXCIpO3QmJihyZWZzW3RdPWUpfSkpfWNhdGNoKGUpe2NvbnNvbGUuZXJyb3IoXCJCdWlsZGVyIHJlcGxhY2Ugbm9kZXMgZXJyb3I6XCIsZSl9dmFyIFN5bWJvbENvbXBvbmVudD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7dmFyIHQ9bnVsbCE9PWUmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiB0LnJlZj1udWxsLHQuc3RhdGljUmVmPW51bGwsdC5pc0VkaXRpbmdUaGlzU3ltYm9sPSExLHR9cmV0dXJuIF9fZXh0ZW5kcyh0LGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInBsYWNlaG9sZGVyXCIse2dldDpmdW5jdGlvbigpe3JldHVybiBqc3goXCJkaXZcIix7Y3NzOntwYWRkaW5nOjEwfX0sXCJTeW1ib2xzIGxldCB5b3UgcmV1c2UgZHluYW1pYyBlbGVtZW50cyBhY3Jvc3MgeW91ciBjb250ZW50LiBQbGVhc2UgY2hvb3NlIGEgbW9kZWwgYW5kIGVudHJ5IGZvciB0aGlzIHN5bWJvbC5cIil9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuY29tcG9uZW50RGlkTW91bnQ9ZnVuY3Rpb24oKXt2YXIgZSx0LG4saT10aGlzO3RoaXMudXNlU3RhdGljJiZ0aGlzLnN0YXRpY1JlZiYmcmVmc1tudWxsPT09KGU9dGhpcy5wcm9wcy5idWlsZGVyQmxvY2spfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmlkXSYmKG51bGw9PT0odD10aGlzLnN0YXRpY1JlZi5wYXJlbnROb2RlKXx8dm9pZCAwPT09dHx8dC5yZXBsYWNlQ2hpbGQocmVmc1tudWxsPT09KG49dGhpcy5wcm9wcy5idWlsZGVyQmxvY2spfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmlkXSx0aGlzLnN0YXRpY1JlZikpLEJ1aWxkZXIubmV4dFRpY2soKGZ1bmN0aW9uKCl7dmFyIGU9aS5wcm9wcy5zeW1ib2x8fHt9LHQ9ZS5tb2RlbCxuPWUuZW50cnk7aS5pc0VkaXRpbmdUaGlzU3ltYm9sPUJvb2xlYW4oQnVpbGRlci5pc0VkaXRpbmcmJnQ9PT1idWlsZGVyLmVkaXRpbmdNb2RlbCYmbiYmbG9jYXRpb24uc2VhcmNoLmluY2x1ZGVzKFwib3ZlcnJpZGVzLlwiLmNvbmNhdChuKSkpfSkpfSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJ1c2VTdGF0aWNcIix7Z2V0OmZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIEJvb2xlYW4oQnVpbGRlci5pc0Jyb3dzZXImJnJlZnNbbnVsbD09PShlPXRoaXMucHJvcHMuYnVpbGRlckJsb2NrKXx8dm9pZCAwPT09ZT92b2lkIDA6ZS5pZF0mJiEoQnVpbGRlci5pc0VkaXRpbmd8fEJ1aWxkZXIuaXNQcmV2aWV3aW5nKSl9LGVudW1lcmFibGU6ITEsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKCl7dmFyIGUsdCxuPXRoaXM7aWYodGhpcy51c2VTdGF0aWMpcmV0dXJuIGpzeChcImRpdlwiLHtyZWY6ZnVuY3Rpb24oZSl7cmV0dXJuIG4uc3RhdGljUmVmPWV9fSk7dmFyIGk9dGhpcy5wcm9wcy5zeW1ib2wscj0hMTtpfHwocj0hMCk7dmFyIG89dGhpcy5wcm9wcy5kYXRhT25seT9Ob1dyYXA6dGhpcy5wcm9wcy5idWlsZGVyQmxvY2smJnRoaXMucHJvcHMuYnVpbGRlckJsb2NrLnRhZ05hbWV8fFwiZGl2XCIsYT1pfHx7fSxzPWEubW9kZWwsbD1hLmVudHJ5LHU9YS5kYXRhLGQ9YS5jb250ZW50LGM9YS5pbmxpbmUscD1hLm93bmVySWQsZj0obnVsbD09aT92b2lkIDA6aS5keW5hbWljKXx8dGhpcy5wcm9wcy5keW5hbWljO3MmJihsfHxmKXx8KG51bGw9PT0oZT1udWxsPT1kP3ZvaWQgMDpkLmRhdGEpfHx2b2lkIDA9PT1lP3ZvaWQgMDplLmJsb2Nrc0pzKXx8Y3x8KHI9ITApLHRoaXMuaXNFZGl0aW5nVGhpc1N5bWJvbCYmKHI9ITEpO3ZhciBtPWY/bnVsbD09PSh0PXRoaXMucHJvcHMuYnVpbGRlckJsb2NrKXx8dm9pZCAwPT09dD92b2lkIDA6dC5pZDpbcyxsXS5qb2luKFwiOlwiKSxoPXUmJnNpemUodSkmJmhhc2godSk7bSYmaCYmaC5sZW5ndGg8MzAwJiYobSs9XCI6XCIraCk7dmFyIHY9dGhpcy5wcm9wcy5hdHRyaWJ1dGVzfHx7fTtyZXR1cm4ganN4KEJ1aWxkZXJTdG9yZUNvbnRleHQuQ29uc3VtZXIse2tleTooc3x8XCJubyBtb2RlbFwiKStcIjpcIisobHx8XCJubyBlbnRyeVwiK3RoaXMuaXNFZGl0aW5nVGhpc1N5bWJvbCl9LChmdW5jdGlvbihlKXt2YXIgdCxhLGMsZixoLGcsYix5LF8sUyx4LEI9XCJcIi5jb25jYXQobSxcIl9cIikuY29uY2F0KChudWxsPT09KHQ9bnVsbD09ZT92b2lkIDA6ZS5zdGF0ZSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQubG9jYWxlKXx8XCJEZWZhdWx0XCIpO3JldHVybiBqc3gobyxfX2Fzc2lnbih7XCJkYXRhLW1vZGVsXCI6c30sdix7Y2xhc3NOYW1lOih2LmNsYXNzfHx2LmNsYXNzTmFtZXx8XCJcIikrXCIgYnVpbGRlci1zeW1ib2xcIisoKG51bGw9PWk/dm9pZCAwOmkuaW5saW5lKT9cIiBidWlsZGVyLWlubGluZS1zeW1ib2xcIjpcIlwiKSsoKG51bGw9PWk/dm9pZCAwOmkuZHluYW1pYyl8fG4ucHJvcHMuZHluYW1pYz9cIiBidWlsZGVyLWR5bmFtaWMtc3ltYm9sXCI6XCJcIil9KSxyP24ucGxhY2Vob2xkZXI6anN4KEJ1aWxkZXJDb21wb25lbnQsX19hc3NpZ24oe30scCYme2FwaUtleTpwfSwobnVsbD09PShhPWUuc3RhdGUpfHx2b2lkIDA9PT1hP3ZvaWQgMDphLmxvY2FsZSkmJntsb2NhbGU6ZS5zdGF0ZS5sb2NhbGV9LHtpc0NoaWxkOiEwLHJlZjpmdW5jdGlvbihlKXtyZXR1cm4gbi5yZWY9ZX0sY29udGV4dDpfX2Fzc2lnbihfX2Fzc2lnbih7fSxlLmNvbnRleHQpLHtzeW1ib2xJZDpudWxsPT09KGM9bi5wcm9wcy5idWlsZGVyQmxvY2spfHx2b2lkIDA9PT1jP3ZvaWQgMDpjLmlkfSksbW9kZWw6cyxlbnRyeTpsLGRhdGE6X19hc3NpZ24oX19hc3NpZ24oX19hc3NpZ24oe30sdSksISFuLnByb3BzLmluaGVyaXRTdGF0ZSYmb21pdCQyKGUuc3RhdGUsXCJjaGlsZHJlblwiKSksbnVsbD09PShfPW51bGw9PT0oeT1udWxsPT09KGI9bnVsbD09PShnPW51bGw9PT0oaD1udWxsPT09KGY9bi5wcm9wcy5idWlsZGVyQmxvY2spfHx2b2lkIDA9PT1mP3ZvaWQgMDpmLmNvbXBvbmVudCl8fHZvaWQgMD09PWg/dm9pZCAwOmgub3B0aW9ucyl8fHZvaWQgMD09PWc/dm9pZCAwOmcuc3ltYm9sKXx8dm9pZCAwPT09Yj92b2lkIDA6Yi5jb250ZW50KXx8dm9pZCAwPT09eT92b2lkIDA6eS5kYXRhKXx8dm9pZCAwPT09Xz92b2lkIDA6Xy5zdGF0ZSkscmVuZGVyTGluazplLnJlbmRlckxpbmssaW5saW5lQ29udGVudDpudWxsPT1pP3ZvaWQgMDppLmlubGluZX0sZCYme2NvbnRlbnQ6ZH0se2tleTpCLG9wdGlvbnM6X19hc3NpZ24oX19hc3NpZ24oe30sIW4uaXNFZGl0aW5nVGhpc1N5bWJvbCYme2tleTpCLG5vRWRpdG9yVXBkYXRlczohMH0pLFwiY29udGVudFwiPT09QnVpbGRlci5zaW5nbGV0b25JbnN0YW5jZS5hcGlFbmRwb2ludCYmbCYme3F1ZXJ5OntpZDpsfX0pLGNvZGVnZW46ISEobnVsbD09PShTPW51bGw9PWQ/dm9pZCAwOmQuZGF0YSl8fHZvaWQgMD09PVM/dm9pZCAwOlMuYmxvY2tzSnMpLGh5ZHJhdGU6bnVsbD09PSh4PWUuc3RhdGUpfHx2b2lkIDA9PT14P3ZvaWQgMDp4Ll9oeWRyYXRlLGJ1aWxkZXJCbG9jazpuLnByb3BzLmJ1aWxkZXJCbG9jayxkYXRhT25seTpuLnByb3BzLmRhdGFPbmx5fSksbi5wcm9wcy5jaGlsZHJlbikpfSkpfSx0fShSZWFjdF9fZGVmYXVsdC5Db21wb25lbnQpLFN5bWJvbCQxPXdpdGhCdWlsZGVyKFN5bWJvbENvbXBvbmVudCx7bmFtZTpcIlN5bWJvbFwiLG5vV3JhcDohMCxzdGF0aWM6ITAsaW5wdXRzOlt7bmFtZTpcInN5bWJvbFwiLHR5cGU6XCJ1aVN5bWJvbFwifSx7bmFtZTpcImRhdGFPbmx5XCIsaGVscGVyVGV4dDpcIk1ha2UgdGhpcyBhIGRhdGEgc3ltYm9sIHRoYXQgZG9lc24ndCBkaXNwbGF5IGFueSBVSVwiLHR5cGU6XCJib29sZWFuXCIsZGVmYXVsdFZhbHVlOiExLGFkdmFuY2VkOiEwLGhpZGVGcm9tVUk6ITB9LHtuYW1lOlwiaW5oZXJpdFN0YXRlXCIsaGVscGVyVGV4dDpcIkluaGVyaXQgdGhlIHBhcmVudCBjb21wb25lbnQgc3RhdGUgYW5kIGRhdGFcIix0eXBlOlwiYm9vbGVhblwiLGRlZmF1bHRWYWx1ZTppc1Nob3BpZnksYWR2YW5jZWQ6ITB9LHtuYW1lOlwicmVuZGVyVG9MaXF1aWRcIixoZWxwZXJUZXh0OlwiUmVuZGVyIHRoaXMgc3ltYm9scyBjb250ZW50cyB0byBsaXF1aWQuIFR1cm4gb2ZmIHRvIGZldGNoIHdpdGggamF2YXNjcmlwdCBhbmQgdXNlIGN1c3RvbSB0YXJnZXRpbmdcIix0eXBlOlwiYm9vbGVhblwiLGRlZmF1bHRWYWx1ZTppc1Nob3BpZnksYWR2YW5jZWQ6ITAsaGlkZUZyb21VSTohMH0se25hbWU6XCJ1c2VDaGlsZHJlblwiLGhpZGVGcm9tVUk6ITAsdHlwZTpcImJvb2xlYW5cIn1dfSksQnV0dG9uQ29tcG9uZW50PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtyZXR1cm4gbnVsbCE9PWUmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiBfX2V4dGVuZHModCxlKSx0LnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnByb3BzLmxpbms/TGluazpcInNwYW5cIjtyZXR1cm4gUmVhY3RfX2RlZmF1bHQuY3JlYXRlRWxlbWVudChlLF9fYXNzaWduKHtyb2xlOlwiYnV0dG9uXCIsaHJlZjp0aGlzLnByb3BzLmxpbmssdGFyZ2V0OnRoaXMucHJvcHMub3BlbkxpbmtJbk5ld1RhYj9cIl9ibGFua1wiOnZvaWQgMH0sdGhpcy5wcm9wcy5hdHRyaWJ1dGVzKSx0aGlzLnByb3BzLnRleHQpfSx0fShSZWFjdF9fZGVmYXVsdC5Db21wb25lbnQpLEJ1dHRvbj13aXRoQnVpbGRlcihCdXR0b25Db21wb25lbnQse25hbWU6XCJDb3JlOkJ1dHRvblwiLGltYWdlOlwiaHR0cHM6Ly9jZG4uYnVpbGRlci5pby9hcGkvdjEvaW1hZ2UvYXNzZXRzJTJGSXN4UEtNbzJnUFJSS2Vha1V6dGoxRDZ1cWVkMiUyRjgxYTE1NjgxYzNlNzRkZjA5Njc3ZGZjNTdhNjE1YjEzXCIsZGVmYXVsdFN0eWxlczp7YXBwZWFyYW5jZTpcIm5vbmVcIixwYWRkaW5nVG9wOlwiMTVweFwiLHBhZGRpbmdCb3R0b206XCIxNXB4XCIscGFkZGluZ0xlZnQ6XCIyNXB4XCIscGFkZGluZ1JpZ2h0OlwiMjVweFwiLGJhY2tncm91bmRDb2xvcjpcIiMwMDAwMDBcIixjb2xvcjpcIndoaXRlXCIsYm9yZGVyUmFkaXVzOlwiNHB4XCIsdGV4dEFsaWduOlwiY2VudGVyXCIsY3Vyc29yOlwicG9pbnRlclwifSxpbnB1dHM6W3tuYW1lOlwidGV4dFwiLHR5cGU6XCJ0ZXh0XCIsZGVmYXVsdFZhbHVlOlwiQ2xpY2sgbWUhXCIsYnViYmxlOiEwfSx7bmFtZTpcImxpbmtcIix0eXBlOlwidXJsXCIsYnViYmxlOiEwfSx7bmFtZTpcIm9wZW5MaW5rSW5OZXdUYWJcIix0eXBlOlwiYm9vbGVhblwiLGRlZmF1bHRWYWx1ZTohMSxmcmllbmRseU5hbWU6XCJPcGVuIGxpbmsgaW4gbmV3IHRhYlwifV0sc3RhdGljOiEwLG5vV3JhcDohMH0pLFNlY3Rpb25Db21wb25lbnQ9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3ZhciB0PW51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpcztyZXR1cm4gdC5yZWY9bnVsbCx0LnVubW91bnRDYWxsYmFja3M9W10sdC5zdGF0ZT17aW5WaWV3OiExfSx0fXJldHVybiBfX2V4dGVuZHModCxlKSxPYmplY3QuZGVmaW5lUHJvcGVydHkodC5wcm90b3R5cGUsXCJyZW5kZXJDb250ZW50c1wiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4hMCE9PXRoaXMucHJvcHMubGF6eUxvYWR8fHRoaXMuc3RhdGUuaW5WaWV3fSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLmNvbXBvbmVudFdpbGxVbm1vdW50PWZ1bmN0aW9uKCl7dGhpcy51bm1vdW50Q2FsbGJhY2tzLmZvckVhY2goKGZ1bmN0aW9uKGUpe3JldHVybiBlKCl9KSl9LHQucHJvdG90eXBlLmNvbXBvbmVudERpZE1vdW50PWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZih0aGlzLnByb3BzLmxhenlMb2FkKWlmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBJbnRlcnNlY3Rpb25PYnNlcnZlciYmdGhpcy5yZWYpe3ZhciB0PW5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcigoZnVuY3Rpb24odCxuKXt0LmZvckVhY2goKGZ1bmN0aW9uKHQpe3QuaW50ZXJzZWN0aW9uUmF0aW8+MCYmKGUuc2V0U3RhdGUoe2luVmlldzohMH0pLGUucmVmJiZuLnVub2JzZXJ2ZShlLnJlZikpfSkpfSkse3Jvb3RNYXJnaW46XCIxMHB4XCJ9KTt0Lm9ic2VydmUodGhpcy5yZWYpLHRoaXMudW5tb3VudENhbGxiYWNrcy5wdXNoKChmdW5jdGlvbigpe2UucmVmJiZ0LnVub2JzZXJ2ZShlLnJlZil9KSl9ZWxzZSB0aGlzLnNldFN0YXRlKHtpblZpZXc6ITB9KX0sdC5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztyZXR1cm4ganN4KFwic2VjdGlvblwiLHtyZWY6ZnVuY3Rpb24odCl7cmV0dXJuIGUucmVmPXR9LGNzczpfX2Fzc2lnbih7d2lkdGg6XCIxMDAlXCIsYWxpZ25TZWxmOlwic3RyZXRjaFwiLGZsZXhHcm93OjEsYm94U2l6aW5nOlwiYm9yZGVyLWJveFwiLG1heFdpZHRoOnRoaXMucHJvcHMubWF4V2lkdGgsZGlzcGxheTpcImZsZXhcIixmbGV4RGlyZWN0aW9uOlwiY29sdW1uXCIsYWxpZ25JdGVtczpcInN0cmV0Y2hcIixtYXJnaW5MZWZ0OlwiYXV0b1wiLG1hcmdpblJpZ2h0OlwiYXV0b1wifSx0aGlzLnJlbmRlckNvbnRlbnRzP251bGw6dGhpcy5wcm9wcy5sYXp5U3R5bGVzKX0sdGhpcy5yZW5kZXJDb250ZW50cz9qc3goUmVhY3RfX2RlZmF1bHQuRnJhZ21lbnQsbnVsbCx0aGlzLnByb3BzLmNoaWxkcmVuLHRoaXMucHJvcHMuYnVpbGRlckJsb2NrJiZ0aGlzLnByb3BzLmJ1aWxkZXJCbG9jay5jaGlsZHJlbiYmdGhpcy5wcm9wcy5idWlsZGVyQmxvY2suY2hpbGRyZW4ubWFwKChmdW5jdGlvbihlLHQpe3JldHVybiBqc3goQnVpbGRlckJsb2NrJDEse2tleTplLmlkLGJsb2NrOmV9KX0pKSk6bnVsbCl9LHR9KFJlYWN0X19kZWZhdWx0LkNvbXBvbmVudCksU2VjdGlvbj13aXRoQnVpbGRlcihTZWN0aW9uQ29tcG9uZW50LHtuYW1lOlwiQ29yZTpTZWN0aW9uXCIsc3RhdGljOiEwLGltYWdlOlwiaHR0cHM6Ly9jZG4uYnVpbGRlci5pby9hcGkvdjEvaW1hZ2UvYXNzZXRzJTJGSXN4UEtNbzJnUFJSS2Vha1V6dGoxRDZ1cWVkMiUyRjY4MmVmZWYyM2FjZTQ5YWZhYzYxNzQ4ZGQzMDVjNzBhXCIsaW5wdXRzOlt7bmFtZTpcIm1heFdpZHRoXCIsdHlwZTpcIm51bWJlclwiLGRlZmF1bHRWYWx1ZToxMjAwfSx7bmFtZTpcImxhenlMb2FkXCIsdHlwZTpcImJvb2xlYW5cIixkZWZhdWx0VmFsdWU6ITEsYWR2YW5jZWQ6ITAsZGVzY3JpcHRpb246XCJPbmx5IHJlbmRlciB0aGlzIHNlY3Rpb24gd2hlbiBpbiB2aWV3XCJ9XSxkZWZhdWx0U3R5bGVzOntwYWRkaW5nTGVmdDpcIjIwcHhcIixwYWRkaW5nUmlnaHQ6XCIyMHB4XCIscGFkZGluZ1RvcDpcIjUwcHhcIixwYWRkaW5nQm90dG9tOlwiNTBweFwiLG1hcmdpblRvcDpcIjBweFwiLHdpZHRoOlwiMTAwdndcIixtYXJnaW5MZWZ0OlwiY2FsYyg1MCUgLSA1MHZ3KVwifSxjYW5IYXZlQ2hpbGRyZW46ITAsZGVmYXVsdENoaWxkcmVuOlt7XCJAdHlwZVwiOlwiQGJ1aWxkZXIuaW8vc2RrOkVsZW1lbnRcIixyZXNwb25zaXZlU3R5bGVzOntsYXJnZTp7dGV4dEFsaWduOlwiY2VudGVyXCJ9fSxjb21wb25lbnQ6e25hbWU6XCJUZXh0XCIsb3B0aW9uczp7dGV4dDpcIjxwPjxiPkkgYW0gYSBzZWN0aW9uISBNeSBjb250ZW50IGtlZXBzIGZyb20gZ2V0dGluZyB0b28gd2lkZSwgc28gdGhhdCBpdCdzIGVhc3kgdG8gcmVhZCBldmVuIG9uIGJpZyBzY3JlZW5zLjwvYj48L3A+PHA+TG9yZW0gaXBzdW0gZG9sb3Igc2l0IGFtZXQsIGNvbnNlY3RldHVyIGFkaXBpc2NpbmcgZWxpdCwgc2VkIGRvIGVpdXNtb2QgdGVtcG9yIGluY2lkaWR1bnQgdXQgbGFib3JlIGV0IGRvbG9yZSBtYWduYSBhbGlxdWEuIFV0IGVuaW0gYWQgbWluaW0gdmVuaWFtLCBxdWlzIG5vc3RydWQgZXhlcmNpdGF0aW9uIHVsbGFtY28gbGFib3JpcyBuaXNpIHV0IGFsaXF1aXAgZXggZWEgY29tbW9kbyBjb25zZXF1YXQuIER1aXMgYXV0ZSBpcnVyZSBkb2xvciBpbiByZXByZWhlbmRlcml0IGluIHZvbHVwdGF0ZSB2ZWxpdCBlc3NlIGNpbGx1bSBkb2xvcmUgZXUgZnVnaWF0IG51bGxhIHBhcmlhdHVyPC9wPlwifX19XX0pLFN0YXRlUHJvdmlkZXJDb21wb25lbnQ9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3JldHVybiBudWxsIT09ZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIF9fZXh0ZW5kcyh0LGUpLHQucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIFJlYWN0X19kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoQnVpbGRlclN0b3JlQ29udGV4dC5Db25zdW1lcixudWxsLChmdW5jdGlvbih0KXtyZXR1cm4gUmVhY3RfX2RlZmF1bHQuY3JlYXRlRWxlbWVudChCdWlsZGVyU3RvcmVDb250ZXh0LlByb3ZpZGVyLHt2YWx1ZTpfX2Fzc2lnbihfX2Fzc2lnbih7fSx0KSx7c3RhdGU6X19hc3NpZ24oX19hc3NpZ24oe30sdC5zdGF0ZSksZS5wcm9wcy5zdGF0ZSksY29udGV4dDpfX2Fzc2lnbihfX2Fzc2lnbih7fSx0LmNvbnRleHQpLGUucHJvcHMuY29udGV4dCl9KX0sZS5wcm9wcy5idWlsZGVyQmxvY2smJmUucHJvcHMuYnVpbGRlckJsb2NrLmNoaWxkcmVuJiZlLnByb3BzLmJ1aWxkZXJCbG9jay5jaGlsZHJlbi5tYXAoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIFJlYWN0X19kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoQnVpbGRlckJsb2NrJDEse2Jsb2NrOmUsa2V5OmUuaWQsaW5kZXg6dCxjaGlsZDohMH0pfSkpLGUucHJvcHMuY2hpbGRyZW4pfSkpfSx0fShSZWFjdF9fZGVmYXVsdC5Db21wb25lbnQpLFN0YXRlUHJvdmlkZXI9d2l0aEJ1aWxkZXIoU3RhdGVQcm92aWRlckNvbXBvbmVudCx7bmFtZTpcIkJ1aWxkZXI6U3RhdGVQcm92aWRlclwiLGNhbkhhdmVDaGlsZHJlbjohMCxzdGF0aWM6ITAsbm9XcmFwOiEwLGhpZGVGcm9tSW5zZXJ0TWVudTohMH0pLHByZWZldGNoZWQ9bmV3IFNldDtmdW5jdGlvbiBzZWFyY2hUb09iamVjdChlKXt2YXIgdD0oZS5zZWFyY2h8fFwiXCIpLnN1YnN0cmluZygxKS5zcGxpdChcIiZcIiksbj17fTtmb3IodmFyIGkgaW4gdClpZih0W2ldJiZcInN0cmluZ1wiPT10eXBlb2YgdFtpXSl7dmFyIHI9dFtpXS5zcGxpdChcIj1cIik7bltkZWNvZGVVUklDb21wb25lbnQoclswXSldPWRlY29kZVVSSUNvbXBvbmVudChyWzFdKX1yZXR1cm4gbn12YXIgUm91dGVyQ29tcG9uZW50PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXt2YXIgdD1udWxsIT09ZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXM7cmV0dXJuIHQuYnVpbGRlcj1idWlsZGVyLHQucm91dGVkPSExLHQucHJlbG9hZFF1ZXVlPTAsdC5vblBvcFN0YXRlPWZ1bmN0aW9uKGUpe3QudXBkYXRlTG9jYXRpb25TdGF0ZSgpfSx0Lm9uTW91c2VPdmVyT3JUb3VjaFN0YXJ0PWZ1bmN0aW9uKGUpe2lmKCEodC5wcmVsb2FkUXVldWU+NCkmJiExIT09dC5wcm9wcy5wcmVsb2FkT25Ib3Zlcil7dmFyIG49dC5maW5kSHJlZlRhcmdldChlKTtpZihuKXt2YXIgaT1uLmdldEF0dHJpYnV0ZShcImhyZWZcIik7aWYoaSl7aWYoIXQuaXNSZWxhdGl2ZShpKSl7dmFyIHI9dC5jb252ZXJ0VG9SZWxhdGl2ZShpKTtpZighcilyZXR1cm47aT1yfWlmKCFpLnN0YXJ0c1dpdGgoXCIjXCIpJiYhcHJlZmV0Y2hlZC5oYXMoaSkpe3ByZWZldGNoZWQuYWRkKGkpO3ZhciBvPXQucGFyc2VVcmwoaSk7dC5wcmVsb2FkUXVldWUrKzt2YXIgYT1idWlsZGVyLmdldFVzZXJBdHRyaWJ1dGVzKCk7YS51cmxQYXRoPW8ucGF0aG5hbWUsYS5xdWVyeVN0cmluZz1vLnNlYXJjaDt2YXIgcz1idWlsZGVyLmdldCh0Lm1vZGVsLHt1c2VyQXR0cmlidXRlczphLGtleTp0Lm1vZGVsK1wiOlwiK28ucGF0aG5hbWUrby5zZWFyY2h9KS5zdWJzY3JpYmUoKGZ1bmN0aW9uKCl7dC5wcmVsb2FkUXVldWUtLSxzLnVuc3Vic2NyaWJlKCl9KSl9fX19fSx0Lm9uQ2xpY2s9ZnVuY3Rpb24oZSl7cmV0dXJuIF9fYXdhaXRlcih0LHZvaWQgMCx2b2lkIDAsKGZ1bmN0aW9uKCl7dmFyIHQsbixpLHI7cmV0dXJuIF9fZ2VuZXJhdG9yKHRoaXMsKGZ1bmN0aW9uKG8pe2lmKCExPT09dGhpcy5wcm9wcy5oYW5kbGVSb3V0aW5nKXJldHVyblsyXTtpZigwIT09ZS5idXR0b258fGUuY3RybEtleXx8ZS5kZWZhdWx0UHJldmVudGVkfHxlLm1ldGFLZXkpcmV0dXJuWzJdO2lmKCEodD10aGlzLmZpbmRIcmVmVGFyZ2V0KGUpKSlyZXR1cm5bMl07aWYodC50YXJnZXQmJlwiX2NsaWVudFwiIT09dC50YXJnZXQpcmV0dXJuWzJdO2lmKCEobj10LmdldEF0dHJpYnV0ZShcImhyZWZcIikpKXJldHVyblsyXTtpZih0aGlzLnByb3BzLm9uUm91dGUmJihpPXt1cmw6bixhbmNob3JOb2RlOnQscHJldmVudERlZmF1bHQ6ZnVuY3Rpb24oKXt0aGlzLmRlZmF1bHRQcmV2ZW50ZWQ9ITB9LGRlZmF1bHRQcmV2ZW50ZWQ6ITF9LHRoaXMucHJvcHMub25Sb3V0ZShpKSxpLmRlZmF1bHRQcmV2ZW50ZWQpKXJldHVyblsyXTtpZighdGhpcy5pc1JlbGF0aXZlKG4pKXtpZighKHI9dGhpcy5jb252ZXJ0VG9SZWxhdGl2ZShuKSkpcmV0dXJuWzJdO249cn1yZXR1cm4gbi5zdGFydHNXaXRoKFwiI1wiKXx8KGUucHJldmVudERlZmF1bHQoKSx0aGlzLnJvdXRlKG4pKSxbMl19KSl9KSl9LHQucHJpdmF0ZVN0YXRlPW51bGwsdH1yZXR1cm4gX19leHRlbmRzKHQsZSksdC5wcm90b3R5cGUucm91dGU9ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuIHRoaXMucm91dGVkPSEwLFwiZnVuY3Rpb25cIj09dHlwZW9mKG51bGw9PT0odD13aW5kb3cuaGlzdG9yeSl8fHZvaWQgMD09PXQ/dm9pZCAwOnQucHVzaFN0YXRlKT8oaGlzdG9yeS5wdXNoU3RhdGUobnVsbCxcIlwiLGUpLHRoaXMudXBkYXRlTG9jYXRpb25TdGF0ZSgpLCEwKToobG9jYXRpb24uaHJlZj1lLCExKX0sdC5wcm90b3R5cGUudXBkYXRlTG9jYXRpb25TdGF0ZT1mdW5jdGlvbigpe3RoaXMucHJpdmF0ZVN0YXRlJiZ0aGlzLnByaXZhdGVTdGF0ZS51cGRhdGUoKGZ1bmN0aW9uKGUpe2UubG9jYXRpb249X19hc3NpZ24oX19hc3NpZ24oe30sZS5sb2NhdGlvbikse3BhdGhuYW1lOmxvY2F0aW9uLnBhdGhuYW1lLHNlYXJjaDpsb2NhdGlvbi5zZWFyY2gscGF0aDpsb2NhdGlvbi5wYXRobmFtZS5zcGxpdChcIi9cIikuc2xpY2UoMSkscXVlcnk6c2VhcmNoVG9PYmplY3QobG9jYXRpb24pfSl9KSl9LE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcIm1vZGVsXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByb3BzLm1vZGVsfHxcInBhZ2VcIn0sZW51bWVyYWJsZTohMSxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5jb21wb25lbnREaWRNb3VudD1mdW5jdGlvbigpe1widW5kZWZpbmVkXCIhPXR5cGVvZiBkb2N1bWVudCYmKGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMub25DbGljayksd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJwb3BzdGF0ZVwiLHRoaXMub25Qb3BTdGF0ZSksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLHRoaXMub25Nb3VzZU92ZXJPclRvdWNoU3RhcnQpLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsdGhpcy5vbk1vdXNlT3Zlck9yVG91Y2hTdGFydCkpfSx0LnByb3RvdHlwZS5jb21wb25lbnRXaWxsVW5tb3VudD1mdW5jdGlvbigpe1widW5kZWZpbmVkXCIhPXR5cGVvZiBkb2N1bWVudCYmKGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLHRoaXMub25DbGljayksZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIm1vdXNlb3ZlclwiLHRoaXMub25Nb3VzZU92ZXJPclRvdWNoU3RhcnQpLHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFwicG9wc3RhdGVcIix0aGlzLm9uUG9wU3RhdGUpLGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsdGhpcy5vbk1vdXNlT3Zlck9yVG91Y2hTdGFydCkpfSx0LnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9dGhpcy5tb2RlbDtyZXR1cm4ganN4KEJ1aWxkZXJTdG9yZUNvbnRleHQuQ29uc3VtZXIsbnVsbCwoZnVuY3Rpb24obil7ZS5wcml2YXRlU3RhdGU9bjt2YXIgaT1uLnN0YXRlJiZuLnN0YXRlLmxvY2F0aW9uJiZuLnN0YXRlLmxvY2F0aW9uLnBhdGhuYW1lK24uc3RhdGUubG9jYXRpb24uc2VhcmNoO3JldHVybiBqc3goXCJkaXZcIix7Y2xhc3NOYW1lOlwiYnVpbGRlci1yb3V0ZXJcIixcImRhdGEtbW9kZWxcIjp0fSxqc3goXCJzdHlsZVwiLG51bGwsXCJcXG4gICAgICAgICAgICAgICAgQGtleWZyYW1lcyBidWlsZGVyTG9hZGluZ1NwaW5uZXIge1xcbiAgICAgICAgICAgICAgICAgIDAlIHtcXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDBkZWcpO1xcbiAgICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgICAgICAxMDAlIHtcXG4gICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7XFxuICAgICAgICAgICAgICAgICAgfVxcbiAgICAgICAgICAgICAgICB9XFxuICAgICAgICAgICAgICAgIC8qIFRPRE86IG92ZXJyaWRhYmxlIHRhZyAqL1xcbiAgICAgICAgICAgICAgICAuYnVpbGRlci1wYWdlLWxvYWRpbmcge1xcbiAgICAgICAgICAgICAgICAgIC13ZWJraXQtYW5pbWF0aW9uOiBidWlsZGVyTG9hZGluZ1NwaW5uZXIgMXMgaW5maW5pdGUgbGluZWFyO1xcbiAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbjogYnVpbGRlckxvYWRpbmdTcGlubmVyIDFzIGluZmluaXRlIGxpbmVhcjtcXG4gICAgICAgICAgICAgICAgICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTtcXG4gICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHRyYW5zbGF0ZVooMCk7XFxuICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xcbiAgICAgICAgICAgICAgICAgIHdpZHRoOiAzNnB4O1xcbiAgICAgICAgICAgICAgICAgIGhlaWdodDogMzZweDtcXG4gICAgICAgICAgICAgICAgICBtYXJnaW46IDZweCBhdXRvO1xcbiAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcXG4gICAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCB0cmFuc3BhcmVudDtcXG4gICAgICAgICAgICAgICAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkICM4MDgyODQ7XFxuICAgICAgICAgICAgICAgIH1cXG4gICAgICAgICAgICAgIFwiKSxqc3goQnVpbGRlckNvbXBvbmVudCx7a2V5OmksZGF0YTplLnByb3BzLmRhdGEsY29udGVudDplLnJvdXRlZD92b2lkIDA6ZS5wcm9wcy5jb250ZW50LG1vZGVsTmFtZTp0LG9wdGlvbnM6e2tleTpCdWlsZGVyLmlzRWRpdGluZz92b2lkIDA6ZS5tb2RlbCtcIjpcIitpfX0sZS5wcm9wcy5jaGlsZHJlbnx8anN4KFwiZGl2XCIse2Nzczp7ZGlzcGxheTpcImZsZXhcIn19LGpzeChcImRpdlwiLHtjc3M6e21hcmdpbjpcIjQwdmggYXV0b1wifSxjbGFzc05hbWU6XCJidWlsZGVyLXBhZ2UtbG9hZGluZ1wifSkpKSl9KSl9LHQucHJvdG90eXBlLmZpbmRIcmVmVGFyZ2V0PWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLnRhcmdldDt0Oyl7aWYodCBpbnN0YW5jZW9mIEhUTUxBbmNob3JFbGVtZW50JiZ0LmdldEF0dHJpYnV0ZShcImhyZWZcIikpcmV0dXJuIHQ7aWYodD09PWUuY3VycmVudFRhcmdldClicmVhazt0PXQucGFyZW50RWxlbWVudH1yZXR1cm4gbnVsbH0sdC5wcm90b3R5cGUuaXNSZWxhdGl2ZT1mdW5jdGlvbihlKXtyZXR1cm4hZS5tYXRjaCgvXihcXC9cXC98aHR0cHM/OlxcL1xcLykvaSl9LHQucHJvdG90eXBlLnBhcnNlVXJsPWZ1bmN0aW9uKGUpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhXCIpO3JldHVybiB0LmhyZWY9ZSx0fSx0LnByb3RvdHlwZS5jb252ZXJ0VG9SZWxhdGl2ZT1mdW5jdGlvbihlKXt2YXIgdD10aGlzLnBhcnNlVXJsKGxvY2F0aW9uLmhyZWYpLG49dGhpcy5wYXJzZVVybChlKTtpZih0Lmhvc3Q9PT1uLmhvc3Qpe3ZhciBpPW4ucGF0aG5hbWUrKG4uc2VhcmNoP24uc2VhcmNoOlwiXCIpO3JldHVybiBpLnN0YXJ0c1dpdGgoXCIjXCIpP251bGw6aXx8XCIvXCJ9cmV0dXJuIG51bGx9LHR9KFJlYWN0X19kZWZhdWx0LkNvbXBvbmVudCksUm91dGVyPXdpdGhCdWlsZGVyKFJvdXRlckNvbXBvbmVudCx7bmFtZTpcIkNvcmU6Um91dGVyXCIsaGlkZUZyb21JbnNlcnRNZW51OiEwLGlucHV0czpbe25hbWU6XCJtb2RlbFwiLHR5cGU6XCJzdHJpbmdcIixkZWZhdWx0VmFsdWU6XCJwYWdlXCIsYWR2YW5jZWQ6ITB9LHtuYW1lOlwiaGFuZGxlUm91dGluZ1wiLHR5cGU6XCJib29sZWFuXCIsZGVmYXVsdFZhbHVlOiEwLGFkdmFuY2VkOiEwfSx7bmFtZTpcInByZWxvYWRPbkhvdmVyXCIsdHlwZTpcImJvb2xlYW5cIixkZWZhdWx0VmFsdWU6ITAsYWR2YW5jZWQ6ITB9LHtuYW1lOlwib25Sb3V0ZVwiLHR5cGU6XCJmdW5jdGlvblwiLGFkdmFuY2VkOiEwfV19KTtmdW5jdGlvbiBNdXRhdGlvbihlKXt2YXIgdCxuLGk9UmVhY3RfX2RlZmF1bHQudXNlUmVmKG51bGwpO3VzZVdhaXRGb3JTZWxlY3RvcihlLnNlbGVjdG9yLChmdW5jdGlvbih0KXtcImFmdGVyRW5kXCIhPT1lLnR5cGUmJih0LmlubmVySFRNTD1cIlwiKSx0LmFwcGVuZENoaWxkKGkuY3VycmVudC5maXJzdEVsZW1lbnRDaGlsZCl9KSk7dmFyIHI9bnVsbD09PSh0PWUuYnVpbGRlckJsb2NrKXx8dm9pZCAwPT09dD92b2lkIDA6dC5jaGlsZHJlbjtyZXR1cm4ganN4KFwic3BhblwiLHtzdHlsZTp7ZGlzcGxheTpcIm5vbmVcIn0scmVmOml9LGpzeChCdWlsZGVyQmxvY2tzLHtzdHlsZTp7ZGlzcGxheTpcImlubGluZVwifSxjaGlsZDohMCxwYXJlbnRFbGVtZW50SWQ6bnVsbD09PShuPWUuYnVpbGRlckJsb2NrKXx8dm9pZCAwPT09bj92b2lkIDA6bi5pZCxkYXRhUGF0aDpcInRoaXMuY2hpbGRyZW5cIixibG9ja3M6cn0pKX1mdW5jdGlvbiB1c2VXYWl0Rm9yU2VsZWN0b3IoZSx0KXtSZWFjdF9fZGVmYXVsdC51c2VMYXlvdXRFZmZlY3QoKGZ1bmN0aW9uKCl7dHJ5e3ZhciBuPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZSk7aWYobilyZXR1cm4gdm9pZCB0KG4pfWNhdGNoKGUpe2NvbnNvbGUud2FybihlKX12YXIgaT1uZXcgTXV0YXRpb25PYnNlcnZlcigoZnVuY3Rpb24oKXt0cnl7dmFyIG49ZG9jdW1lbnQucXVlcnlTZWxlY3RvcihlKTtuJiYoaS5kaXNjb25uZWN0KCksdChuKSl9Y2F0Y2goZSl7Y29uc29sZS53YXJuKGUpfX0pKTtyZXR1cm4gaS5vYnNlcnZlKGRvY3VtZW50LmJvZHkse2F0dHJpYnV0ZXM6ITAsc3VidHJlZTohMCxjaGFyYWN0ZXJEYXRhOiEwfSksZnVuY3Rpb24oKXtpLmRpc2Nvbm5lY3QoKX19KSxbZV0pfUJ1aWxkZXIucmVnaXN0ZXJDb21wb25lbnQoTXV0YXRpb24se25hbWU6XCJCdWlsZGVyOk11dGF0aW9uXCIsY2FuSGF2ZUNoaWxkcmVuOiEwLG5vV3JhcDohMCxoaWRlRnJvbUluc2VydE1lbnU6ITAsaW5wdXRzOlt7bmFtZTpcInR5cGVcIix0eXBlOlwic3RyaW5nXCIsZGVmYXVsdFZhbHVlOlwicmVwbGFjZVwiLGVudW06W3tsYWJlbDpcIlJlcGxhY2VcIix2YWx1ZTpcInJlcGxhY2VcIixoZWxwZXJUZXh0OlwiUmVwbGFjZSB0aGUgY29udGVudHMgb2YgdGhpcyBzaXRlIHJlZ2lvbiB3aXRoIGNvbnRlbnQgZnJvbSBCdWlsZGVyXCJ9LHtsYWJlbDpcIkFwcGVuZFwiLHZhbHVlOlwiYWZ0ZXJFbmRcIixoZWxwZXJUZXh0OlwiQXBwZW5kIEJ1aWxkZXIgY29udGVudCBhZnRlciB0aGUgY2hvc2VuIHNpdGUgcmVnaW9uXCJ9XX0se25hbWU6XCJzZWxlY3RvclwiLHR5cGU6XCJidWlsZGVyOmRvbVNlbGVjdG9yXCJ9XX0pO3ZhciBnZXQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPVN0cmluZy5wcm90b3R5cGUuc3BsaXQuY2FsbCh0LC9bLFtcXF0uXSs/LykuZmlsdGVyKEJvb2xlYW4pLnJlZHVjZSgoZnVuY3Rpb24oZSx0KXtyZXR1cm4gbnVsbCE9ZT9lW3RdOmV9KSxlKTtyZXR1cm4gdm9pZCAwPT09aXx8aT09PWU/bjppfSxNVUxUSVBBUlRfQ09OVEVOVF9UWVBFPVwibXVsdGlwYXJ0L2Zvcm0tZGF0YVwiLEpTT05fQ09OVEVOVF9UWVBFPVwiYXBwbGljYXRpb24vanNvblwiLEVOQ09ERURfQ09OVEVOVF9UWVBFPVwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkXCIsRm9ybUNvbXBvbmVudD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7dmFyIHQ9bnVsbCE9PWUmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzO3JldHVybiB0LnJlZj1udWxsLHQuc3RhdGU9e3N0YXRlOlwidW5zdWJtaXR0ZWRcIixyZXNwb25zZURhdGE6bnVsbCxmb3JtRXJyb3JNZXNzYWdlOlwiXCJ9LHR9cmV0dXJuIF9fZXh0ZW5kcyh0LGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInN1Ym1pc3Npb25TdGF0ZVwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gQnVpbGRlci5pc0VkaXRpbmcmJnRoaXMucHJvcHMucHJldmlld1N0YXRlfHx0aGlzLnN0YXRlLnN0YXRlfSxlbnVtZXJhYmxlOiExLGNvbmZpZ3VyYWJsZTohMH0pLHQucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe3ZhciBlPXRoaXM7cmV0dXJuIGpzeChCdWlsZGVyU3RvcmVDb250ZXh0LkNvbnN1bWVyLG51bGwsKGZ1bmN0aW9uKHQpe3JldHVybiBqc3goQnVpbGRlclN0b3JlQ29udGV4dC5Qcm92aWRlcix7dmFsdWU6X19hc3NpZ24oX19hc3NpZ24oe30sdCkse3N0YXRlOl9fYXNzaWduKF9fYXNzaWduKHt9LHQuc3RhdGUpLHtmb3JtRXJyb3JNZXNzYWdlOmUuc3RhdGUuZm9ybUVycm9yTWVzc2FnZX0pfSl9LGpzeChcImZvcm1cIixfX2Fzc2lnbih7fSxlLnByb3BzLnZhbGlkYXRlP3t9Ontub1ZhbGlkYXRlOiEwfSx7cmVmOmZ1bmN0aW9uKHQpe3JldHVybiBlLnJlZj10fSxhY3Rpb246IWUucHJvcHMuc2VuZFdpdGhKcyYmZS5wcm9wcy5hY3Rpb24/ZS5wcm9wcy5hY3Rpb246dm9pZCAwLG1ldGhvZDplLnByb3BzLm1ldGhvZCxuYW1lOmUucHJvcHMubmFtZSxvblN1Ym1pdDpmdW5jdGlvbih0KXt2YXIgbixpPWUucHJvcHMuc2VuZFdpdGhKc3x8XCJlbWFpbFwiPT09ZS5wcm9wcy5zZW5kU3VibWlzc2lvbnNUbztpZihcInphcGllclwiPT09ZS5wcm9wcy5zZW5kU3VibWlzc2lvbnNUbyl0LnByZXZlbnREZWZhdWx0KCk7ZWxzZSBpZihpKXtpZighZS5wcm9wcy5hY3Rpb24mJlwiZW1haWxcIiE9PWUucHJvcHMuc2VuZFN1Ym1pc3Npb25zVG8pcmV0dXJuIHZvaWQgdC5wcmV2ZW50RGVmYXVsdCgpO3QucHJldmVudERlZmF1bHQoKTt2YXIgcj10LmN1cnJlbnRUYXJnZXQsbz1lLnByb3BzLmN1c3RvbUhlYWRlcnN8fHt9LGE9dm9pZCAwLHM9bmV3IEZvcm1EYXRhKHIpLGw9QXJyYXkuZnJvbSh0LmN1cnJlbnRUYXJnZXQucXVlcnlTZWxlY3RvckFsbChcImlucHV0LHNlbGVjdCx0ZXh0YXJlYVwiKSkuZmlsdGVyKChmdW5jdGlvbihlKXtyZXR1cm4hIWUubmFtZX0pKS5tYXAoKGZ1bmN0aW9uKGUpe3ZhciB0LG49ZS5uYW1lO2lmKGUgaW5zdGFuY2VvZiBIVE1MSW5wdXRFbGVtZW50KWlmKFwicmFkaW9cIj09PWUudHlwZSl7aWYoZS5jaGVja2VkKXJldHVybntrZXk6bix2YWx1ZTp0PWUubmFtZX19ZWxzZSBpZihcImNoZWNrYm94XCI9PT1lLnR5cGUpdD1lLmNoZWNrZWQ7ZWxzZSBpZihcIm51bWJlclwiPT09ZS50eXBlfHxcInJhbmdlXCI9PT1lLnR5cGUpe3ZhciBpPWUudmFsdWVBc051bWJlcjtpc05hTihpKXx8KHQ9aSl9ZWxzZSB0PVwiZmlsZVwiPT09ZS50eXBlP2UuZmlsZXM6ZS52YWx1ZTtlbHNlIHQ9ZS52YWx1ZTtyZXR1cm57a2V5Om4sdmFsdWU6dH19KSksdT1lLnByb3BzLmNvbnRlbnRUeXBlO2lmKFwiZW1haWxcIj09PWUucHJvcHMuc2VuZFN1Ym1pc3Npb25zVG8mJih1PU1VTFRJUEFSVF9DT05URU5UX1RZUEUpLEFycmF5LmZyb20obCkuZm9yRWFjaCgoZnVuY3Rpb24oZSl7dmFyIHQ9ZS52YWx1ZTsodCBpbnN0YW5jZW9mIEZpbGV8fEFycmF5LmlzQXJyYXkodCkmJnRbMF1pbnN0YW5jZW9mIEZpbGV8fHQgaW5zdGFuY2VvZiBGaWxlTGlzdCkmJih1PU1VTFRJUEFSVF9DT05URU5UX1RZUEUpfSkpLHU9PT1NVUxUSVBBUlRfQ09OVEVOVF9UWVBFKWE9cztlbHNlIGlmKHU9PT1KU09OX0NPTlRFTlRfVFlQRSl7dmFyIGQ9e307QXJyYXkuZnJvbShsKS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdD1lLnZhbHVlLG49ZS5rZXk7c2V0KGQsbix0KX0pKSxhPUpTT04uc3RyaW5naWZ5KGQpfWVsc2V7aWYodSE9PUVOQ09ERURfQ09OVEVOVF9UWVBFKXJldHVybiB2b2lkIGNvbnNvbGUuZXJyb3IoXCJVbnN1cHBvcnRlZCBjb250ZW50IHR5cGU6IFwiLHUpO2E9QXJyYXkuZnJvbShsKS5tYXAoKGZ1bmN0aW9uKGUpe3ZhciB0PWUudmFsdWUsbj1lLmtleTtyZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KG4pK1wiPVwiK2VuY29kZVVSSUNvbXBvbmVudCh0KX0pKS5qb2luKFwiJlwiKX11JiZ1IT09TVVMVElQQVJUX0NPTlRFTlRfVFlQRSYmKGkmJihudWxsPT09KG49ZS5wcm9wcy5hY3Rpb24pfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLmluY2x1ZGVzKFwiemFwaWVyLmNvbVwiKSl8fChvW1wiY29udGVudC10eXBlXCJdPXUpKTt2YXIgYz1uZXcgQ3VzdG9tRXZlbnQoXCJwcmVzdWJtaXRcIix7ZGV0YWlsOntib2R5OmF9fSk7aWYoZS5yZWYmJihlLnJlZi5kaXNwYXRjaEV2ZW50KGMpLGMuZGVmYXVsdFByZXZlbnRlZCkpcmV0dXJuO2Uuc2V0U3RhdGUoX19hc3NpZ24oX19hc3NpZ24oe30sZS5zdGF0ZSkse3N0YXRlOlwic2VuZGluZ1wifSkpO3ZhciBwPVwiXCIuY29uY2F0KFwiZGV2XCI9PT1idWlsZGVyLmVudj9cImh0dHA6Ly9sb2NhbGhvc3Q6NTAwMFwiOlwiaHR0cHM6Ly9idWlsZGVyLmlvXCIsXCIvYXBpL3YxL2Zvcm0tc3VibWl0P2FwaUtleT1cIikuY29uY2F0KGJ1aWxkZXIuYXBpS2V5LFwiJnRvPVwiKS5jb25jYXQoYnRvYShlLnByb3BzLnNlbmRTdWJtaXNzaW9uc1RvRW1haWx8fFwiXCIpLFwiJm5hbWU9XCIpLmNvbmNhdChlbmNvZGVVUklDb21wb25lbnQoZS5wcm9wcy5uYW1lfHxcIlwiKSk7ZmV0Y2goXCJlbWFpbFwiPT09ZS5wcm9wcy5zZW5kU3VibWlzc2lvbnNUbz9wOmUucHJvcHMuYWN0aW9uLHtib2R5OmEsaGVhZGVyczpvLG1ldGhvZDplLnByb3BzLm1ldGhvZHx8XCJwb3N0XCJ9KS50aGVuKChmdW5jdGlvbih0KXtyZXR1cm4gX19hd2FpdGVyKGUsdm9pZCAwLHZvaWQgMCwoZnVuY3Rpb24oKXt2YXIgZSxuLGkscixvO3JldHVybiBfX2dlbmVyYXRvcih0aGlzLChmdW5jdGlvbihhKXtzd2l0Y2goYS5sYWJlbCl7Y2FzZSAwOnJldHVybihuPXQuaGVhZGVycy5nZXQoXCJjb250ZW50LXR5cGVcIikpJiYtMSE9PW4uaW5kZXhPZihKU09OX0NPTlRFTlRfVFlQRSk/WzQsdC5qc29uKCldOlszLDJdO2Nhc2UgMTpyZXR1cm4gZT1hLnNlbnQoKSxbMyw0XTtjYXNlIDI6cmV0dXJuWzQsdC50ZXh0KCldO2Nhc2UgMzplPWEuc2VudCgpLGEubGFiZWw9NDtjYXNlIDQ6aWYoIXQub2smJnRoaXMucHJvcHMuZXJyb3JNZXNzYWdlUGF0aCYmKGk9Z2V0KGUsdGhpcy5wcm9wcy5lcnJvck1lc3NhZ2VQYXRoKSkmJihcInN0cmluZ1wiIT10eXBlb2YgaSYmKGk9SlNPTi5zdHJpbmdpZnkoaSkpLHRoaXMuc2V0U3RhdGUoX19hc3NpZ24oX19hc3NpZ24oe30sdGhpcy5zdGF0ZSkse2Zvcm1FcnJvck1lc3NhZ2U6aX0pKSksdGhpcy5zZXRTdGF0ZShfX2Fzc2lnbihfX2Fzc2lnbih7fSx0aGlzLnN0YXRlKSx7cmVzcG9uc2VEYXRhOmUsc3RhdGU6dC5vaz9cInN1Y2Nlc3NcIjpcImVycm9yXCJ9KSksdC5vayl7aWYocj1uZXcgQ3VzdG9tRXZlbnQoXCJzdWJtaXQ6c3VjY2Vzc1wiLHtkZXRhaWw6e3Jlczp0LGJvZHk6ZX19KSx0aGlzLnJlZil7aWYodGhpcy5yZWYuZGlzcGF0Y2hFdmVudChyKSxyLmRlZmF1bHRQcmV2ZW50ZWQpcmV0dXJuWzJdOyExIT09dGhpcy5wcm9wcy5yZXNldEZvcm1PblN1Ym1pdCYmdGhpcy5yZWYucmVzZXQoKX10aGlzLnByb3BzLnN1Y2Nlc3NVcmwmJih0aGlzLnJlZj8obz1uZXcgQ3VzdG9tRXZlbnQoXCJyb3V0ZVwiLHtkZXRhaWw6e3VybDp0aGlzLnByb3BzLnN1Y2Nlc3NVcmx9fSksdGhpcy5yZWYuZGlzcGF0Y2hFdmVudChvKSxvLmRlZmF1bHRQcmV2ZW50ZWR8fChsb2NhdGlvbi5ocmVmPXRoaXMucHJvcHMuc3VjY2Vzc1VybCkpOmxvY2F0aW9uLmhyZWY9dGhpcy5wcm9wcy5zdWNjZXNzVXJsKX1yZXR1cm5bMl19fSkpfSkpfSksKGZ1bmN0aW9uKHQpe3ZhciBuPW5ldyBDdXN0b21FdmVudChcInN1Ym1pdDplcnJvclwiLHtkZXRhaWw6e2Vycm9yOnR9fSk7ZS5yZWYmJihlLnJlZi5kaXNwYXRjaEV2ZW50KG4pLG4uZGVmYXVsdFByZXZlbnRlZCl8fGUuc2V0U3RhdGUoX19hc3NpZ24oX19hc3NpZ24oe30sZS5zdGF0ZSkse3Jlc3BvbnNlRGF0YTp0LHN0YXRlOlwiZXJyb3JcIn0pKX0pKX19fSxlLnByb3BzLmF0dHJpYnV0ZXMpLGUucHJvcHMuYnVpbGRlckJsb2NrJiZlLnByb3BzLmJ1aWxkZXJCbG9jay5jaGlsZHJlbiYmZS5wcm9wcy5idWlsZGVyQmxvY2suY2hpbGRyZW4ubWFwKChmdW5jdGlvbihlLHQpe3JldHVybiBqc3goQnVpbGRlckJsb2NrJDEse2tleTplLmlkLGJsb2NrOmV9KX0pKSxcImVycm9yXCI9PT1lLnN1Ym1pc3Npb25TdGF0ZSYmanN4KEJ1aWxkZXJCbG9ja3Mse2RhdGFQYXRoOlwiZXJyb3JNZXNzYWdlXCIsYmxvY2tzOmUucHJvcHMuZXJyb3JNZXNzYWdlfSksXCJzZW5kaW5nXCI9PT1lLnN1Ym1pc3Npb25TdGF0ZSYmanN4KEJ1aWxkZXJCbG9ja3Mse2RhdGFQYXRoOlwic2VuZGluZ01lc3NhZ2VcIixibG9ja3M6ZS5wcm9wcy5zZW5kaW5nTWVzc2FnZX0pLFwiZXJyb3JcIj09PWUuc3VibWlzc2lvblN0YXRlJiZlLnN0YXRlLnJlc3BvbnNlRGF0YSYmanN4KFwicHJlXCIse2NsYXNzTmFtZTpcImJ1aWxkZXItZm9ybS1lcnJvci10ZXh0XCIsY3NzOntwYWRkaW5nOjEwLGNvbG9yOlwicmVkXCIsdGV4dEFsaWduOlwiY2VudGVyXCJ9fSxKU09OLnN0cmluZ2lmeShlLnN0YXRlLnJlc3BvbnNlRGF0YSxudWxsLDIpKSxcInN1Y2Nlc3NcIj09PWUuc3VibWlzc2lvblN0YXRlJiZqc3goQnVpbGRlckJsb2Nrcyx7ZGF0YVBhdGg6XCJzdWNjZXNzTWVzc2FnZVwiLGJsb2NrczplLnByb3BzLnN1Y2Nlc3NNZXNzYWdlfSkpKX0pKX0sdH0oUmVhY3RfX2RlZmF1bHQuQ29tcG9uZW50KSxGb3JtPXdpdGhCdWlsZGVyKEZvcm1Db21wb25lbnQse25hbWU6XCJGb3JtOkZvcm1cIixkZWZhdWx0czp7cmVzcG9uc2l2ZVN0eWxlczp7bGFyZ2U6e21hcmdpblRvcDpcIjE1cHhcIixwYWRkaW5nQm90dG9tOlwiMTVweFwifX19LGltYWdlOlwiaHR0cHM6Ly9jZG4uYnVpbGRlci5pby9hcGkvdjEvaW1hZ2UvYXNzZXRzJTJGSXN4UEtNbzJnUFJSS2Vha1V6dGoxRDZ1cWVkMiUyRmVmMzZkMmE4NDYxMzQ5MTBiNjRiODhlNmQxOGM1Y2E1XCIsaW5wdXRzOlt7bmFtZTpcInNlbmRTdWJtaXNzaW9uc1RvXCIsdHlwZTpcInN0cmluZ1wiLGVudW06W3tsYWJlbDpcIlNlbmQgdG8gZW1haWxcIix2YWx1ZTpcImVtYWlsXCIsaGVscGVyVGV4dDpcIlNlbmQgZm9ybSBzdWJtaXNzaW9ucyB0byB0aGUgZW1haWwgYWRkcmVzcyBvZiB5b3VyIGNob29zaW5nXCJ9LHtsYWJlbDpcIkN1c3RvbVwiLHZhbHVlOlwiY3VzdG9tXCIsaGVscGVyVGV4dDpcIkhhbmRsZSB3aGVyZSB0aGUgZm9ybSByZXF1ZXN0cyBnbyBtYW51YWxseSB3aXRoIGEgbGl0dGxlIGNvZGUsIGUuZy4gdG8geW91ciBvd24gY3VzdG9tIGJhY2tlbmRcIn1dLGRlZmF1bHRWYWx1ZTpcImVtYWlsXCJ9LHtuYW1lOlwic2VuZFN1Ym1pc3Npb25zVG9FbWFpbFwiLHR5cGU6XCJzdHJpbmdcIixyZXF1aXJlZDohMCxkZWZhdWx0VmFsdWU6XCJ5b3VyQGVtYWlsLmNvbVwiLHNob3dJZjonb3B0aW9ucy5nZXQoXCJzZW5kU3VibWlzc2lvbnNUb1wiKSA9PT0gXCJlbWFpbFwiJ30se25hbWU6XCJzZW5kV2l0aEpzXCIsdHlwZTpcImJvb2xlYW5cIixoZWxwZXJUZXh0OlwiU2V0IHRvIGZhbHNlIHRvIHVzZSBiYXNpYyBodG1sIGZvcm0gYWN0aW9uXCIsZGVmYXVsdFZhbHVlOiEwLHNob3dJZjonb3B0aW9ucy5nZXQoXCJzZW5kU3VibWlzc2lvbnNUb1wiKSA9PT0gXCJjdXN0b21cIid9LHtuYW1lOlwibmFtZVwiLHR5cGU6XCJzdHJpbmdcIixkZWZhdWx0VmFsdWU6XCJNeSBmb3JtXCJ9LHtuYW1lOlwiYWN0aW9uXCIsdHlwZTpcInN0cmluZ1wiLGhlbHBlclRleHQ6XCJVUkwgdG8gc2VuZCB0aGUgZm9ybSBkYXRhIHRvXCIsc2hvd0lmOidvcHRpb25zLmdldChcInNlbmRTdWJtaXNzaW9uc1RvXCIpID09PSBcImN1c3RvbVwiJ30se25hbWU6XCJjb250ZW50VHlwZVwiLHR5cGU6XCJzdHJpbmdcIixkZWZhdWx0VmFsdWU6SlNPTl9DT05URU5UX1RZUEUsYWR2YW5jZWQ6ITAsZW51bTpbSlNPTl9DT05URU5UX1RZUEUsTVVMVElQQVJUX0NPTlRFTlRfVFlQRSxFTkNPREVEX0NPTlRFTlRfVFlQRV0sc2hvd0lmOidvcHRpb25zLmdldChcInNlbmRTdWJtaXNzaW9uc1RvXCIpID09PSBcImN1c3RvbVwiICYmIG9wdGlvbnMuZ2V0KFwic2VuZFdpdGhKc1wiKSA9PT0gdHJ1ZSd9LHtuYW1lOlwibWV0aG9kXCIsdHlwZTpcInN0cmluZ1wiLHNob3dJZjonb3B0aW9ucy5nZXQoXCJzZW5kU3VibWlzc2lvbnNUb1wiKSA9PT0gXCJjdXN0b21cIicsZGVmYXVsdFZhbHVlOlwiUE9TVFwiLGFkdmFuY2VkOiEwfSx7bmFtZTpcInByZXZpZXdTdGF0ZVwiLHR5cGU6XCJzdHJpbmdcIixlbnVtOltcInVuc3VibWl0dGVkXCIsXCJzZW5kaW5nXCIsXCJzdWNjZXNzXCIsXCJlcnJvclwiXSxkZWZhdWx0VmFsdWU6XCJ1bnN1Ym1pdHRlZFwiLGhlbHBlclRleHQ6J0Nob29zZSBhIHN0YXRlIHRvIGVkaXQsIGUuZy4gY2hvb3NlIFwic3VjY2Vzc1wiIHRvIHNob3cgd2hhdCB1c2VycyBzZWUgb24gc3VjY2VzcyBhbmQgZWRpdCB0aGUgbWVzc2FnZScsc2hvd0lmOidvcHRpb25zLmdldChcInNlbmRTdWJtaXNzaW9uc1RvXCIpICE9PSBcInphcGllclwiICYmIG9wdGlvbnMuZ2V0KFwic2VuZFdpdGhKc1wiKSA9PT0gdHJ1ZSd9LHtuYW1lOlwic3VjY2Vzc1VybFwiLHR5cGU6XCJ1cmxcIixoZWxwZXJUZXh0OlwiT3B0aW9uYWwgVVJMIHRvIHJlZGlyZWN0IHRoZSB1c2VyIHRvIG9uIGZvcm0gc3VibWlzc2lvbiBzdWNjZXNzXCIsc2hvd0lmOidvcHRpb25zLmdldChcInNlbmRTdWJtaXNzaW9uc1RvXCIpICE9PSBcInphcGllclwiICYmIG9wdGlvbnMuZ2V0KFwic2VuZFdpdGhKc1wiKSA9PT0gdHJ1ZSd9LHtuYW1lOlwicmVzZXRGb3JtT25TdWJtaXRcIix0eXBlOlwiYm9vbGVhblwiLHNob3dJZjpmdW5jdGlvbihlKXtyZXR1cm5cImN1c3RvbVwiPT09ZS5nZXQoXCJzZW5kU3VibWlzc2lvbnNUb1wiKSYmITA9PT1lLmdldChcInNlbmRXaXRoSnNcIil9LGFkdmFuY2VkOiEwfSx7bmFtZTpcInN1Y2Nlc3NNZXNzYWdlXCIsdHlwZTpcInVpQmxvY2tzXCIsaGlkZUZyb21VSTohMCxkZWZhdWx0VmFsdWU6W3tcIkB0eXBlXCI6XCJAYnVpbGRlci5pby9zZGs6RWxlbWVudFwiLHJlc3BvbnNpdmVTdHlsZXM6e2xhcmdlOnttYXJnaW5Ub3A6XCIxMHB4XCJ9fSxjb21wb25lbnQ6e25hbWU6XCJUZXh0XCIsb3B0aW9uczp7dGV4dDpcIjxzcGFuPlRoYW5rcyE8L3NwYW4+XCJ9fX1dfSx7bmFtZTpcInZhbGlkYXRlXCIsdHlwZTpcImJvb2xlYW5cIixkZWZhdWx0VmFsdWU6ITAsYWR2YW5jZWQ6ITB9LHtuYW1lOlwiZXJyb3JNZXNzYWdlUGF0aFwiLHR5cGU6XCJ0ZXh0XCIsYWR2YW5jZWQ6ITAsaGVscGVyVGV4dDonUGF0aCB0byB3aGVyZSB0byBnZXQgdGhlIGVycm9yIG1lc3NhZ2UgZnJvbSBpbiBhIEpTT04gcmVzcG9uc2UgdG8gZGlzcGxheSB0byB0aGUgdXNlciwgZS5nLiBcImVycm9yLm1lc3NhZ2VcIiBmb3IgYSByZXNwb25zZSBsaWtlIHsgXCJlcnJvclwiOiB7IFwibWVzc2FnZVwiOiBcInRoaXMgdXNlcm5hbWUgaXMgdGFrZW5cIiB9fSd9LHtuYW1lOlwiZXJyb3JNZXNzYWdlXCIsdHlwZTpcInVpQmxvY2tzXCIsaGlkZUZyb21VSTohMCxkZWZhdWx0VmFsdWU6W3tcIkB0eXBlXCI6XCJAYnVpbGRlci5pby9zZGs6RWxlbWVudFwiLHJlc3BvbnNpdmVTdHlsZXM6e2xhcmdlOnttYXJnaW5Ub3A6XCIxMHB4XCJ9fSxiaW5kaW5nczp7XCJjb21wb25lbnQub3B0aW9ucy50ZXh0XCI6XCJzdGF0ZS5mb3JtRXJyb3JNZXNzYWdlIHx8IGJsb2NrLmNvbXBvbmVudC5vcHRpb25zLnRleHRcIn0sY29tcG9uZW50OntuYW1lOlwiVGV4dFwiLG9wdGlvbnM6e3RleHQ6XCI8c3Bhbj5Gb3JtIHN1Ym1pc3Npb24gZXJyb3IgOiggUGxlYXNlIGNoZWNrIHlvdXIgYW5zd2VycyBhbmQgdHJ5IGFnYWluPC9zcGFuPlwifX19XX0se25hbWU6XCJzZW5kaW5nTWVzc2FnZVwiLHR5cGU6XCJ1aUJsb2Nrc1wiLGhpZGVGcm9tVUk6ITAsZGVmYXVsdFZhbHVlOlt7XCJAdHlwZVwiOlwiQGJ1aWxkZXIuaW8vc2RrOkVsZW1lbnRcIixyZXNwb25zaXZlU3R5bGVzOntsYXJnZTp7bWFyZ2luVG9wOlwiMTBweFwifX0sY29tcG9uZW50OntuYW1lOlwiVGV4dFwiLG9wdGlvbnM6e3RleHQ6XCI8c3Bhbj5TZW5kaW5nLi4uPC9zcGFuPlwifX19XX0sX19hc3NpZ24oX19hc3NpZ24oe25hbWU6XCJjdXN0b21IZWFkZXJzXCIsdHlwZTpcIm1hcFwifSx7dmFsdWVUeXBlOnt0eXBlOlwic3RyaW5nXCJ9fSkse2FkdmFuY2VkOiEwLHNob3dJZjonb3B0aW9ucy5nZXQoXCJzZW5kU3VibWlzc2lvbnNUb1wiKSA9PT0gXCJjdXN0b21cIiAmJiBvcHRpb25zLmdldChcInNlbmRXaXRoSnNcIikgPT09IHRydWUnfSldLG5vV3JhcDohMCxjYW5IYXZlQ2hpbGRyZW46ITAsZGVmYXVsdENoaWxkcmVuOlt7XCJAdHlwZVwiOlwiQGJ1aWxkZXIuaW8vc2RrOkVsZW1lbnRcIixyZXNwb25zaXZlU3R5bGVzOntsYXJnZTp7bWFyZ2luVG9wOlwiMTBweFwifX0sY29tcG9uZW50OntuYW1lOlwiVGV4dFwiLG9wdGlvbnM6e3RleHQ6XCI8c3Bhbj5FbnRlciB5b3VyIG5hbWU8L3NwYW4+XCJ9fX0se1wiQHR5cGVcIjpcIkBidWlsZGVyLmlvL3NkazpFbGVtZW50XCIscmVzcG9uc2l2ZVN0eWxlczp7bGFyZ2U6e21hcmdpblRvcDpcIjEwcHhcIn19LGNvbXBvbmVudDp7bmFtZTpcIkZvcm06SW5wdXRcIixvcHRpb25zOntuYW1lOlwibmFtZVwiLHBsYWNlaG9sZGVyOlwiSmFuZSBEb2VcIn19fSx7XCJAdHlwZVwiOlwiQGJ1aWxkZXIuaW8vc2RrOkVsZW1lbnRcIixyZXNwb25zaXZlU3R5bGVzOntsYXJnZTp7bWFyZ2luVG9wOlwiMTBweFwifX0sY29tcG9uZW50OntuYW1lOlwiVGV4dFwiLG9wdGlvbnM6e3RleHQ6XCI8c3Bhbj5FbnRlciB5b3VyIGVtYWlsPC9zcGFuPlwifX19LHtcIkB0eXBlXCI6XCJAYnVpbGRlci5pby9zZGs6RWxlbWVudFwiLHJlc3BvbnNpdmVTdHlsZXM6e2xhcmdlOnttYXJnaW5Ub3A6XCIxMHB4XCJ9fSxjb21wb25lbnQ6e25hbWU6XCJGb3JtOklucHV0XCIsb3B0aW9uczp7bmFtZTpcImVtYWlsXCIscGxhY2Vob2xkZXI6XCJqYW5lQGRvZS5jb21cIn19fSx7XCJAdHlwZVwiOlwiQGJ1aWxkZXIuaW8vc2RrOkVsZW1lbnRcIixyZXNwb25zaXZlU3R5bGVzOntsYXJnZTp7bWFyZ2luVG9wOlwiMTBweFwifX0sY29tcG9uZW50OntuYW1lOlwiRm9ybTpTdWJtaXRCdXR0b25cIixvcHRpb25zOnt0ZXh0OlwiU3VibWl0XCJ9fX1dfSksRm9ybUlucHV0Q29tcG9uZW50PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtyZXR1cm4gbnVsbCE9PWUmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiBfX2V4dGVuZHModCxlKSx0LnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXtyZXR1cm4gUmVhY3RfX2RlZmF1bHQuY3JlYXRlRWxlbWVudChcImlucHV0XCIsX19hc3NpZ24oe2tleTpCdWlsZGVyLmlzRWRpdGluZyYmdGhpcy5wcm9wcy5kZWZhdWx0VmFsdWU/dGhpcy5wcm9wcy5kZWZhdWx0VmFsdWU6XCJkZWZhdWx0LWtleVwiLHBsYWNlaG9sZGVyOnRoaXMucHJvcHMucGxhY2Vob2xkZXIsdHlwZTp0aGlzLnByb3BzLnR5cGUsbmFtZTp0aGlzLnByb3BzLm5hbWV9LHZvaWQgMD09PXRoaXMucHJvcHMudmFsdWU/e2RlZmF1bHRWYWx1ZTp0aGlzLnByb3BzLmRlZmF1bHRWYWx1ZX06e3ZhbHVlOnRoaXMucHJvcHMudmFsdWV9LHtyZXF1aXJlZDp0aGlzLnByb3BzLnJlcXVpcmVkfSx0aGlzLnByb3BzLmF0dHJpYnV0ZXMpKX0sdH0oUmVhY3RfX2RlZmF1bHQuQ29tcG9uZW50KSxGb3JtSW5wdXQ9d2l0aEJ1aWxkZXIoRm9ybUlucHV0Q29tcG9uZW50LHtuYW1lOlwiRm9ybTpJbnB1dFwiLGltYWdlOlwiaHR0cHM6Ly9jZG4uYnVpbGRlci5pby9hcGkvdjEvaW1hZ2UvYXNzZXRzJTJGSXN4UEtNbzJnUFJSS2Vha1V6dGoxRDZ1cWVkMiUyRmFkNmYzNzg4OWQ5ZTQwYmJiYmM3MmNkYjU4NzVkNmNhXCIsaW5wdXRzOlt7bmFtZTpcInR5cGVcIix0eXBlOlwidGV4dFwiLGVudW06W1widGV4dFwiLFwibnVtYmVyXCIsXCJlbWFpbFwiLFwidXJsXCIsXCJjaGVja2JveFwiLFwicmFkaW9cIixcInJhbmdlXCIsXCJkYXRlXCIsXCJkYXRldGltZS1sb2NhbFwiLFwic2VhcmNoXCIsXCJ0ZWxcIixcInRpbWVcIixcImZpbGVcIixcIm1vbnRoXCIsXCJ3ZWVrXCIsXCJwYXNzd29yZFwiLFwiY29sb3JcIixcImhpZGRlblwiXSxkZWZhdWx0VmFsdWU6XCJ0ZXh0XCJ9LHtuYW1lOlwibmFtZVwiLHR5cGU6XCJzdHJpbmdcIixyZXF1aXJlZDohMCxoZWxwZXJUZXh0OidFdmVyeSBpbnB1dCBpbiBhIGZvcm0gbmVlZHMgYSB1bmlxdWUgbmFtZSBkZXNjcmliaW5nIHdoYXQgaXQgdGFrZXMsIGUuZy4gXCJlbWFpbFwiJ30se25hbWU6XCJwbGFjZWhvbGRlclwiLHR5cGU6XCJzdHJpbmdcIixkZWZhdWx0VmFsdWU6XCJIZWxsbyB0aGVyZVwiLGhlbHBlclRleHQ6XCJUZXh0IHRvIGRpc3BsYXkgd2hlbiB0aGVyZSBpcyBubyB2YWx1ZVwifSx7bmFtZTpcImRlZmF1bHRWYWx1ZVwiLHR5cGU6XCJzdHJpbmdcIn0se25hbWU6XCJ2YWx1ZVwiLHR5cGU6XCJzdHJpbmdcIixhZHZhbmNlZDohMH0se25hbWU6XCJyZXF1aXJlZFwiLHR5cGU6XCJib29sZWFuXCIsaGVscGVyVGV4dDpcIklzIHRoaXMgaW5wdXQgcmVxdWlyZWQgdG8gYmUgZmlsbGVkIG91dCB0byBzdWJtaXQgYSBmb3JtXCIsZGVmYXVsdFZhbHVlOiExfV0sbm9XcmFwOiEwLHN0YXRpYzohMCxkZWZhdWx0U3R5bGVzOntwYWRkaW5nVG9wOlwiMTBweFwiLHBhZGRpbmdCb3R0b206XCIxMHB4XCIscGFkZGluZ0xlZnQ6XCIxMHB4XCIscGFkZGluZ1JpZ2h0OlwiMTBweFwiLGJvcmRlclJhZGl1czpcIjNweFwiLGJvcmRlcldpZHRoOlwiMXB4XCIsYm9yZGVyU3R5bGU6XCJzb2xpZFwiLGJvcmRlckNvbG9yOlwiI2NjY1wifX0pLEZvcm1TdWJtaXRCdXR0b25Db21wb25lbnQ9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3JldHVybiBudWxsIT09ZSYmZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl8fHRoaXN9cmV0dXJuIF9fZXh0ZW5kcyh0LGUpLHQucHJvdG90eXBlLnJlbmRlcj1mdW5jdGlvbigpe3JldHVybiBSZWFjdF9fZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIsX19hc3NpZ24oe3R5cGU6XCJzdWJtaXRcIn0sdGhpcy5wcm9wcy5hdHRyaWJ1dGVzKSx0aGlzLnByb3BzLnRleHQpfSx0fShSZWFjdF9fZGVmYXVsdC5Db21wb25lbnQpLEZvcm1TdWJtaXRCdXR0b249d2l0aEJ1aWxkZXIoRm9ybVN1Ym1pdEJ1dHRvbkNvbXBvbmVudCx7bmFtZTpcIkZvcm06U3VibWl0QnV0dG9uXCIsaW1hZ2U6XCJodHRwczovL2Nkbi5idWlsZGVyLmlvL2FwaS92MS9pbWFnZS9hc3NldHMlMkZJc3hQS01vMmdQUlJLZWFrVXp0ajFENnVxZWQyJTJGZGYyODIwZmZlZDFmNDM0OWE5NGM0MGIzMjIxZjViOThcIixkZWZhdWx0U3R5bGVzOnthcHBlYXJhbmNlOlwibm9uZVwiLHBhZGRpbmdUb3A6XCIxNXB4XCIscGFkZGluZ0JvdHRvbTpcIjE1cHhcIixwYWRkaW5nTGVmdDpcIjI1cHhcIixwYWRkaW5nUmlnaHQ6XCIyNXB4XCIsYmFja2dyb3VuZENvbG9yOlwiIzM4OThFQ1wiLGNvbG9yOlwid2hpdGVcIixib3JkZXJSYWRpdXM6XCI0cHhcIixjdXJzb3I6XCJwb2ludGVyXCJ9LGlucHV0czpbe25hbWU6XCJ0ZXh0XCIsdHlwZTpcInRleHRcIixkZWZhdWx0VmFsdWU6XCJDbGljayBtZVwifV0sc3RhdGljOiEwLG5vV3JhcDohMH0pLExhYmVsQ29tcG9uZW50PWZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoKXtyZXR1cm4gbnVsbCE9PWUmJmUuYXBwbHkodGhpcyxhcmd1bWVudHMpfHx0aGlzfXJldHVybiBfX2V4dGVuZHModCxlKSx0LnByb3RvdHlwZS5yZW5kZXI9ZnVuY3Rpb24oKXtyZXR1cm4gUmVhY3RfX2RlZmF1bHQuY3JlYXRlRWxlbWVudChcImxhYmVsXCIsX19hc3NpZ24oe2h0bWxGb3I6dGhpcy5wcm9wcy5mb3J9LHRoaXMucHJvcHMuYXR0cmlidXRlcyksdGhpcy5wcm9wcy50ZXh0JiZSZWFjdF9fZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLHtjbGFzc05hbWU6XCJidWlsZGVyLWxhYmVsLXRleHRcIixkYW5nZXJvdXNseVNldElubmVySFRNTDp7X19odG1sOnRoaXMucHJvcHMudGV4dH19KSx0aGlzLnByb3BzLmJ1aWxkZXJCbG9jayYmdGhpcy5wcm9wcy5idWlsZGVyQmxvY2suY2hpbGRyZW4mJnRoaXMucHJvcHMuYnVpbGRlckJsb2NrLmNoaWxkcmVuLm1hcCgoZnVuY3Rpb24oZSl7cmV0dXJuIFJlYWN0X19kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoQnVpbGRlckJsb2NrJDEse2tleTplLmlkLGJsb2NrOmV9KX0pKSl9LHR9KFJlYWN0X19kZWZhdWx0LkNvbXBvbmVudCksTGFiZWw9d2l0aEJ1aWxkZXIoTGFiZWxDb21wb25lbnQse25hbWU6XCJGb3JtOkxhYmVsXCIsaW1hZ2U6XCJodHRwczovL2Nkbi5idWlsZGVyLmlvL2FwaS92MS9pbWFnZS9hc3NldHMlMkZJc3hQS01vMmdQUlJLZWFrVXp0ajFENnVxZWQyJTJGOTMyMjM0MmYwNGI1NDVmYjlhODA5MWNkODAxZGZiNWJcIixpbnB1dHM6W3tuYW1lOlwidGV4dFwiLHR5cGU6XCJodG1sXCIscmljaFRleHQ6ITAsZGVmYXVsdFZhbHVlOlwiTGFiZWxcIn0se25hbWU6XCJmb3JcIix0eXBlOlwidGV4dFwiLGhlbHBlclRleHQ6XCJUaGUgbmFtZSBvZiB0aGUgaW5wdXQgdGhpcyBsYWJlbCBpcyBmb3JcIixhZHZhbmNlZDohMH1dLG5vV3JhcDohMCxzdGF0aWM6ITAsY2FuSGF2ZUNoaWxkcmVuOiEwfSksRm9ybVNlbGVjdENvbXBvbmVudD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIG51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gX19leHRlbmRzKHQsZSksdC5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wcm9wcy5vcHRpb25zO3JldHVybiBSZWFjdF9fZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIsX19hc3NpZ24oe3ZhbHVlOnRoaXMucHJvcHMudmFsdWUsa2V5OkJ1aWxkZXIuaXNFZGl0aW5nJiZ0aGlzLnByb3BzLmRlZmF1bHRWYWx1ZT90aGlzLnByb3BzLmRlZmF1bHRWYWx1ZTpcImRlZmF1bHQta2V5XCIsZGVmYXVsdFZhbHVlOnRoaXMucHJvcHMuZGVmYXVsdFZhbHVlLG5hbWU6dGhpcy5wcm9wcy5uYW1lLHJlcXVpcmVkOnRoaXMucHJvcHMucmVxdWlyZWR9LHRoaXMucHJvcHMuYXR0cmlidXRlcyksZSYmZS5tYXAoKGZ1bmN0aW9uKGUpe3JldHVybiBSZWFjdF9fZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwib3B0aW9uXCIse3ZhbHVlOmUudmFsdWV9LGUubmFtZXx8ZS52YWx1ZSl9KSkpfSx0fShSZWFjdF9fZGVmYXVsdC5Db21wb25lbnQpLEZvcm1TZWxlY3Q9d2l0aEJ1aWxkZXIoRm9ybVNlbGVjdENvbXBvbmVudCx7bmFtZTpcIkZvcm06U2VsZWN0XCIsaW1hZ2U6XCJodHRwczovL2Nkbi5idWlsZGVyLmlvL2FwaS92MS9pbWFnZS9hc3NldHMlMkZJc3hQS01vMmdQUlJLZWFrVXp0ajFENnVxZWQyJTJGODNhY2NhMDkzZmIyNGFhZjk0ZGVlMTM2ZTlhNGIwNDVcIixkZWZhdWx0U3R5bGVzOnthbGlnblNlbGY6XCJmbGV4LXN0YXJ0XCJ9LGlucHV0czpbe25hbWU6XCJvcHRpb25zXCIsdHlwZTpcImxpc3RcIixyZXF1aXJlZDohMCxzdWJGaWVsZHM6W3tuYW1lOlwidmFsdWVcIix0eXBlOlwidGV4dFwiLHJlcXVpcmVkOiEwfSx7bmFtZTpcIm5hbWVcIix0eXBlOlwidGV4dFwifV0sZGVmYXVsdFZhbHVlOlt7dmFsdWU6XCJvcHRpb24gMVwifSx7dmFsdWU6XCJvcHRpb24gMlwifV19LHtuYW1lOlwibmFtZVwiLHR5cGU6XCJzdHJpbmdcIixyZXF1aXJlZDohMCxoZWxwZXJUZXh0OidFdmVyeSBzZWxlY3QgaW4gYSBmb3JtIG5lZWRzIGEgdW5pcXVlIG5hbWUgZGVzY3JpYmluZyB3aGF0IGl0IGdldHMsIGUuZy4gXCJlbWFpbFwiJ30se25hbWU6XCJkZWZhdWx0VmFsdWVcIix0eXBlOlwic3RyaW5nXCJ9LHtuYW1lOlwidmFsdWVcIix0eXBlOlwic3RyaW5nXCIsYWR2YW5jZWQ6ITB9LHtuYW1lOlwicmVxdWlyZWRcIix0eXBlOlwiYm9vbGVhblwiLGRlZmF1bHRWYWx1ZTohMX1dLHN0YXRpYzohMCxub1dyYXA6ITB9KSxUZXh0QXJlYUNvbXBvbmVudD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIG51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gX19leHRlbmRzKHQsZSksdC5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKCl7cmV0dXJuIFJlYWN0X19kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJ0ZXh0YXJlYVwiLF9fYXNzaWduKHtwbGFjZWhvbGRlcjp0aGlzLnByb3BzLnBsYWNlaG9sZGVyLG5hbWU6dGhpcy5wcm9wcy5uYW1lLHZhbHVlOnRoaXMucHJvcHMudmFsdWUsZGVmYXVsdFZhbHVlOnRoaXMucHJvcHMuZGVmYXVsdFZhbHVlLHJlcXVpcmVkOnRoaXMucHJvcHMucmVxdWlyZWR9LHRoaXMucHJvcHMuYXR0cmlidXRlcykpfSx0fShSZWFjdF9fZGVmYXVsdC5Db21wb25lbnQpLFRleHRBcmVhPXdpdGhCdWlsZGVyKFRleHRBcmVhQ29tcG9uZW50LHtuYW1lOlwiRm9ybTpUZXh0QXJlYVwiLGltYWdlOlwiaHR0cHM6Ly9jZG4uYnVpbGRlci5pby9hcGkvdjEvaW1hZ2UvYXNzZXRzJTJGSXN4UEtNbzJnUFJSS2Vha1V6dGoxRDZ1cWVkMiUyRmY3NGEyZjNkZTU4YzRjM2U5MzkyMDRlNWI2YjhmNmMzXCIsaW5wdXRzOlt7YWR2YW5jZWQ6ITAsbmFtZTpcInZhbHVlXCIsdHlwZTpcInN0cmluZ1wifSx7bmFtZTpcIm5hbWVcIix0eXBlOlwic3RyaW5nXCIscmVxdWlyZWQ6ITAsaGVscGVyVGV4dDonRXZlcnkgaW5wdXQgaW4gYSBmb3JtIG5lZWRzIGEgdW5pcXVlIG5hbWUgZGVzY3JpYmluZyB3aGF0IGl0IGdldHMsIGUuZy4gXCJlbWFpbFwiJ30se25hbWU6XCJkZWZhdWx0VmFsdWVcIix0eXBlOlwic3RyaW5nXCJ9LHtuYW1lOlwicGxhY2Vob2xkZXJcIix0eXBlOlwic3RyaW5nXCIsZGVmYXVsdFZhbHVlOlwiSGVsbG8gdGhlcmVcIn0se25hbWU6XCJyZXF1aXJlZFwiLHR5cGU6XCJib29sZWFuXCIsZGVmYXVsdFZhbHVlOiExfV0sZGVmYXVsdFN0eWxlczp7cGFkZGluZ1RvcDpcIjEwcHhcIixwYWRkaW5nQm90dG9tOlwiMTBweFwiLHBhZGRpbmdMZWZ0OlwiMTBweFwiLHBhZGRpbmdSaWdodDpcIjEwcHhcIixib3JkZXJSYWRpdXM6XCIzcHhcIixib3JkZXJXaWR0aDpcIjFweFwiLGJvcmRlclN0eWxlOlwic29saWRcIixib3JkZXJDb2xvcjpcIiNjY2NcIn0sc3RhdGljOiEwLG5vV3JhcDohMH0pLEltZ0NvbXBvbmVudD1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7cmV0dXJuIG51bGwhPT1lJiZlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8dGhpc31yZXR1cm4gX19leHRlbmRzKHQsZSksdC5wcm90b3R5cGUucmVuZGVyPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wcm9wcy5hdHRyaWJ1dGVzfHx7fTtyZXR1cm4gUmVhY3RfX2RlZmF1bHQuY3JlYXRlRWxlbWVudChcImltZ1wiLF9fYXNzaWduKHt9LHRoaXMucHJvcHMuYXR0cmlidXRlcyx7c3JjOnRoaXMucHJvcHMuaW1hZ2V8fGUuc3JjfSkpfSx0fShSZWFjdF9fZGVmYXVsdC5Db21wb25lbnQpLEltZz13aXRoQnVpbGRlcihJbWdDb21wb25lbnQse25hbWU6XCJSYXc6SW1nXCIsaGlkZUZyb21JbnNlcnRNZW51OiEwLGltYWdlOlwiaHR0cHM6Ly9maXJlYmFzZXN0b3JhZ2UuZ29vZ2xlYXBpcy5jb20vdjAvYi9idWlsZGVyLTNiMGEyLmFwcHNwb3QuY29tL28vaW1hZ2VzJTJGYmFzZWxpbmUtaW5zZXJ0X3Bob3RvLTI0cHguc3ZnP2FsdD1tZWRpYSZ0b2tlbj00ZTVkMGVmNC1mNWU4LTRlNTctYjNhOS0zOGQ2M2E5YjlkYzRcIixpbnB1dHM6W3tuYW1lOlwiaW1hZ2VcIixidWJibGU6ITAsdHlwZTpcImZpbGVcIixhbGxvd2VkRmlsZVR5cGVzOklNQUdFX0ZJTEVfVFlQRVMscmVxdWlyZWQ6ITB9XSxub1dyYXA6ITAsc3RhdGljOiEwfSksUmF3VGV4dD1mdW5jdGlvbihlKXt2YXIgdD1lLmF0dHJpYnV0ZXN8fHt9O3JldHVybiBSZWFjdC5jcmVhdGVFbGVtZW50KFwic3BhblwiLHtjbGFzc05hbWU6KG51bGw9PXQ/dm9pZCAwOnQuY2xhc3MpfHwobnVsbD09dD92b2lkIDA6dC5jbGFzc05hbWUpLGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOntfX2h0bWw6ZS50ZXh0fHxcIlwifX0pfTtCdWlsZGVyLnJlZ2lzdGVyQ29tcG9uZW50KFJhd1RleHQse25hbWU6XCJCdWlsZGVyOlJhd1RleHRcIixoaWRlRnJvbUluc2VydE1lbnU6ITAsaW5wdXRzOlt7bmFtZTpcInRleHRcIixidWJibGU6ITAsdHlwZTpcImxvbmdUZXh0XCIscmVxdWlyZWQ6ITB9XX0pO3ZhciBmaWx0ZXJXaXRoQ3VzdG9tVGFyZ2V0aW5nU2NyaXB0PSdmdW5jdGlvbiBmaWx0ZXJXaXRoQ3VzdG9tVGFyZ2V0aW5nKGUsdCxuLHIpe3ZhciBpPXtxdWVyeTp0LHN0YXJ0RGF0ZTpuLGVuZERhdGU6cn0sbz1lLmRhdGUmJm5ldyBEYXRlKGUuZGF0ZSl8fG5ldyBEYXRlO3JldHVybiEoaS5zdGFydERhdGUmJm5ldyBEYXRlKGkuc3RhcnREYXRlKT5vKSYmKCEoaS5lbmREYXRlJiZuZXcgRGF0ZShpLmVuZERhdGUpPG8pJiYoIWkucXVlcnl8fCFpLnF1ZXJ5Lmxlbmd0aHx8aS5xdWVyeS5ldmVyeSgoZnVuY3Rpb24odCl7cmV0dXJuIG9iamVjdE1hdGNoZXNRdWVyeShlLHQpfSkpKSl9ZnVuY3Rpb24gaXNTdHJpbmcoZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGV9ZnVuY3Rpb24gaXNOdW1iZXIoZSl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIGV9ZnVuY3Rpb24gb2JqZWN0TWF0Y2hlc1F1ZXJ5KGUsdCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIG49dC5wcm9wZXJ0eSxyPXQub3BlcmF0b3IsaT10LnZhbHVlO2lmKHQmJlwidXJsUGF0aFwiPT09dC5wcm9wZXJ0eSYmdC52YWx1ZSYmXCJzdHJpbmdcIj09dHlwZW9mIHQudmFsdWUmJlwiL1wiIT09dC52YWx1ZSYmdC52YWx1ZS5lbmRzV2l0aChcIi9cIikmJihpPXQudmFsdWUuc2xpY2UoMCwtMSkpLCFufHwhcilyZXR1cm4hMDtpZihBcnJheS5pc0FycmF5KGkpKXJldHVyblwiaXNOb3RcIj09PXI/aS5ldmVyeSgoZnVuY3Rpb24odCl7cmV0dXJuIG9iamVjdE1hdGNoZXNRdWVyeShlLHtwcm9wZXJ0eTpuLG9wZXJhdG9yOnIsdmFsdWU6dH0pfSkpOiEhaS5maW5kKChmdW5jdGlvbih0KXtyZXR1cm4gb2JqZWN0TWF0Y2hlc1F1ZXJ5KGUse3Byb3BlcnR5Om4sb3BlcmF0b3I6cix2YWx1ZTp0fSl9KSk7dmFyIG89ZVtuXTtpZihBcnJheS5pc0FycmF5KG8pKXJldHVybiBvLmluY2x1ZGVzKGkpO3N3aXRjaChyKXtjYXNlXCJpc1wiOnJldHVybiBvPT09aTtjYXNlXCJpc05vdFwiOnJldHVybiBvIT09aTtjYXNlXCJjb250YWluc1wiOnJldHVybihpc1N0cmluZyhvKXx8QXJyYXkuaXNBcnJheShvKSkmJm8uaW5jbHVkZXMoU3RyaW5nKGkpKTtjYXNlXCJzdGFydHNXaXRoXCI6cmV0dXJuIGlzU3RyaW5nKG8pJiZvLnN0YXJ0c1dpdGgoU3RyaW5nKGkpKTtjYXNlXCJlbmRzV2l0aFwiOnJldHVybiBpc1N0cmluZyhvKSYmby5lbmRzV2l0aChTdHJpbmcoaSkpO2Nhc2VcImdyZWF0ZXJUaGFuXCI6cmV0dXJuIGlzTnVtYmVyKG8pJiZpc051bWJlcihpKSYmbz5pO2Nhc2VcImxlc3NUaGFuXCI6cmV0dXJuIGlzTnVtYmVyKG8pJiZpc051bWJlcihpKSYmbzxpO2Nhc2VcImdyZWF0ZXJUaGFuT3JFcXVhbFRvXCI6cmV0dXJuIGlzTnVtYmVyKG8pJiZpc051bWJlcihpKSYmbz49aTtjYXNlXCJsZXNzVGhhbk9yRXF1YWxUb1wiOnJldHVybiBpc051bWJlcihvKSYmaXNOdW1iZXIoaSkmJm88PWl9cmV0dXJuITF9KCl9JztmdW5jdGlvbiBmaWx0ZXJXaXRoQ3VzdG9tVGFyZ2V0aW5nKGUsdCxuLGkpe3ZhciByPXtxdWVyeTp0LHN0YXJ0RGF0ZTpuLGVuZERhdGU6aX0sbz1lLmRhdGUmJm5ldyBEYXRlKGUuZGF0ZSl8fG5ldyBEYXRlO3JldHVybiEoci5zdGFydERhdGUmJm5ldyBEYXRlKHIuc3RhcnREYXRlKT5vKSYmKCEoci5lbmREYXRlJiZuZXcgRGF0ZShyLmVuZERhdGUpPG8pJiYoIXIucXVlcnl8fCFyLnF1ZXJ5Lmxlbmd0aHx8ci5xdWVyeS5ldmVyeSgoZnVuY3Rpb24odCl7cmV0dXJuIG9iamVjdE1hdGNoZXNRdWVyeShlLHQpfSkpKSl9ZnVuY3Rpb24gaXNTdHJpbmcoZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGV9ZnVuY3Rpb24gaXNOdW1iZXIoZSl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIGV9ZnVuY3Rpb24gb2JqZWN0TWF0Y2hlc1F1ZXJ5KGUsdCl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIG49dC5wcm9wZXJ0eSxpPXQub3BlcmF0b3Iscj10LnZhbHVlO2lmKHQmJlwidXJsUGF0aFwiPT09dC5wcm9wZXJ0eSYmdC52YWx1ZSYmXCJzdHJpbmdcIj09dHlwZW9mIHQudmFsdWUmJlwiL1wiIT09dC52YWx1ZSYmdC52YWx1ZS5lbmRzV2l0aChcIi9cIikmJihyPXQudmFsdWUuc2xpY2UoMCwtMSkpLCFufHwhaSlyZXR1cm4hMDtpZihBcnJheS5pc0FycmF5KHIpKXJldHVyblwiaXNOb3RcIj09PWk/ci5ldmVyeSgoZnVuY3Rpb24odCl7cmV0dXJuIG9iamVjdE1hdGNoZXNRdWVyeShlLHtwcm9wZXJ0eTpuLG9wZXJhdG9yOmksdmFsdWU6dH0pfSkpOiEhci5maW5kKChmdW5jdGlvbih0KXtyZXR1cm4gb2JqZWN0TWF0Y2hlc1F1ZXJ5KGUse3Byb3BlcnR5Om4sb3BlcmF0b3I6aSx2YWx1ZTp0fSl9KSk7dmFyIG89ZVtuXTtpZihBcnJheS5pc0FycmF5KG8pKXJldHVybiBvLmluY2x1ZGVzKHIpO3N3aXRjaChpKXtjYXNlXCJpc1wiOnJldHVybiBvPT09cjtjYXNlXCJpc05vdFwiOnJldHVybiBvIT09cjtjYXNlXCJjb250YWluc1wiOnJldHVybihpc1N0cmluZyhvKXx8QXJyYXkuaXNBcnJheShvKSkmJm8uaW5jbHVkZXMoU3RyaW5nKHIpKTtjYXNlXCJzdGFydHNXaXRoXCI6cmV0dXJuIGlzU3RyaW5nKG8pJiZvLnN0YXJ0c1dpdGgoU3RyaW5nKHIpKTtjYXNlXCJlbmRzV2l0aFwiOnJldHVybiBpc1N0cmluZyhvKSYmby5lbmRzV2l0aChTdHJpbmcocikpO2Nhc2VcImdyZWF0ZXJUaGFuXCI6cmV0dXJuIGlzTnVtYmVyKG8pJiZpc051bWJlcihyKSYmbz5yO2Nhc2VcImxlc3NUaGFuXCI6cmV0dXJuIGlzTnVtYmVyKG8pJiZpc051bWJlcihyKSYmbzxyO2Nhc2VcImdyZWF0ZXJUaGFuT3JFcXVhbFRvXCI6cmV0dXJuIGlzTnVtYmVyKG8pJiZpc051bWJlcihyKSYmbz49cjtjYXNlXCJsZXNzVGhhbk9yRXF1YWxUb1wiOnJldHVybiBpc051bWJlcihvKSYmaXNOdW1iZXIocikmJm88PXJ9cmV0dXJuITF9KCl9ZnVuY3Rpb24gUGVyc29uYWxpemF0aW9uQ29udGFpbmVyKGUpe3ZhciB0LG4saSxyLG8sYSxzLGwsdSxkLGMscCxmLG0saCx2LGcsYix5LF8sUyx4PUJvb2xlYW4oQnVpbGRlci5pc0Jyb3dzZXImJihudWxsPT09KHQ9d2luZG93Ll9faHlkcmF0ZWQpfHx2b2lkIDA9PT10P3ZvaWQgMDp0W251bGw9PT0obj1lLmJ1aWxkZXJCbG9jayl8fHZvaWQgMD09PW4/dm9pZCAwOm4uaWRdKSksQj11c2VSZWYobnVsbCksaz11c2VTdGF0ZSh4KSx3PWtbMF0sQz1rWzFdLEU9dXNlU3RhdGUoMCksUj1FWzBdLFQ9RVsxXSxJPXVzZUNvbnRleHQoQnVpbGRlclN0b3JlQ29udGV4dCk7aWYodXNlRWZmZWN0KChmdW5jdGlvbigpe3ZhciBlO0MoITApO3ZhciB0PWJ1aWxkZXIudXNlckF0dHJpYnV0ZXNDaGFuZ2VkLnN1YnNjcmliZSgoZnVuY3Rpb24oKXtUKFIrMSl9KSksbj1bZnVuY3Rpb24oKXtyZXR1cm4gdC51bnN1YnNjcmliZSgpfV07aWYoIUJ1aWxkZXIuaXNFZGl0aW5nJiYhQnVpbGRlci5pc1ByZXZpZXdpbmcpe3ZhciBpPWpbMF07bnVsbD09PShlPUIuY3VycmVudCl8fHZvaWQgMD09PWV8fGUuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJidWlsZGVyLnZhcmlhbnRMb2FkZWRcIix7ZGV0YWlsOnt2YXJpYW50Oml8fFwiZGVmYXVsdFwiLGNvbnRlbnQ6SS5jb250ZW50fSxidWJibGVzOiEwfSkpO3ZhciByPW5ldyBJbnRlcnNlY3Rpb25PYnNlcnZlcigoZnVuY3Rpb24oZSl7ZS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgdDtlLmlzSW50ZXJzZWN0aW5nJiYobnVsbD09PSh0PUIuY3VycmVudCl8fHZvaWQgMD09PXR8fHQuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJidWlsZGVyLnZhcmlhbnREaXNwbGF5ZWRcIix7ZGV0YWlsOnt2YXJpYW50Oml8fFwiZGVmYXVsdFwiLGNvbnRlbnQ6SS5jb250ZW50fSxidWJibGVzOiEwfSkpKX0pKX0pKTtyLm9ic2VydmUoQi5jdXJyZW50KSxuLnB1c2goKGZ1bmN0aW9uKCl7cmV0dXJuIHIuZGlzY29ubmVjdCgpfSkpfXJldHVybiBmdW5jdGlvbigpe24uZm9yRWFjaCgoZnVuY3Rpb24oZSl7cmV0dXJuIGUoKX0pKX19KSxbXSksQnVpbGRlci5pc1NlcnZlcilyZXR1cm4gUmVhY3RfX2RlZmF1bHQuY3JlYXRlRWxlbWVudChSZWFjdF9fZGVmYXVsdC5GcmFnbWVudCxudWxsLFJlYWN0X19kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIixfX2Fzc2lnbih7fSxlLmF0dHJpYnV0ZXMse3N0eWxlOl9fYXNzaWduKHtvcGFjaXR5OjEsdHJhbnNpdGlvbjpcIm9wYWNpdHkgMC4ycyBlYXNlLWluLW91dFwifSxudWxsPT09KGk9ZS5hdHRyaWJ1dGVzKXx8dm9pZCAwPT09aT92b2lkIDA6aS5zdHlsZSksY2xhc3NOYW1lOlwiYnVpbGRlci1wZXJzb25hbGl6YXRpb24tY29udGFpbmVyIFwiLmNvbmNhdChlLmF0dHJpYnV0ZXMuY2xhc3NOYW1lKX0pLG51bGw9PT0ocj1lLnZhcmlhbnRzKXx8dm9pZCAwPT09cj92b2lkIDA6ci5tYXAoKGZ1bmN0aW9uKHQsbil7dmFyIGkscjtyZXR1cm4gUmVhY3RfX2RlZmF1bHQuY3JlYXRlRWxlbWVudChcInRlbXBsYXRlXCIse2tleTpuLFwiZGF0YS12YXJpYW50LWlkXCI6KG51bGw9PT0oaT1lLmJ1aWxkZXJCbG9jayl8fHZvaWQgMD09PWk/dm9pZCAwOmkuaWQpK259LFJlYWN0X19kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoQnVpbGRlckJsb2Nrcyx7YmxvY2tzOnQuYmxvY2tzLHBhcmVudEVsZW1lbnRJZDpudWxsPT09KHI9ZS5idWlsZGVyQmxvY2spfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLmlkLGRhdGFQYXRoOlwiY29tcG9uZW50Lm9wdGlvbnMudmFyaWFudHMuXCIuY29uY2F0KG4sXCIuYmxvY2tzXCIpLGNoaWxkOiEwfSkpfSkpLFJlYWN0X19kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIix7aWQ6XCJ2YXJpYW50cy1zY3JpcHQtXCIuY29uY2F0KG51bGw9PT0obz1lLmJ1aWxkZXJCbG9jayl8fHZvaWQgMD09PW8/dm9pZCAwOm8uaWQpLGRhbmdlcm91c2x5U2V0SW5uZXJIVE1MOntfX2h0bWw6Z2V0UGVyc29uYWxpemF0aW9uU2NyaXB0KGUudmFyaWFudHMsKG51bGw9PT0oYT1lLmJ1aWxkZXJCbG9jayl8fHZvaWQgMD09PWE/dm9pZCAwOmEuaWQpfHxcIm5vbmVcIixudWxsPT09KHM9ZS5idWlsZGVyU3RhdGUuc3RhdGUpfHx2b2lkIDA9PT1zP3ZvaWQgMDpzLmxvY2FsZSl9fSksUmVhY3RfX2RlZmF1bHQuY3JlYXRlRWxlbWVudChCdWlsZGVyQmxvY2tzLHtibG9ja3M6bnVsbD09PShsPWUuYnVpbGRlckJsb2NrKXx8dm9pZCAwPT09bD92b2lkIDA6bC5jaGlsZHJlbixwYXJlbnRFbGVtZW50SWQ6bnVsbD09PSh1PWUuYnVpbGRlckJsb2NrKXx8dm9pZCAwPT09dT92b2lkIDA6dS5pZCxkYXRhUGF0aDpcInRoaXMuY2hpbGRyZW5cIixjaGlsZDohMH0pKSxSZWFjdF9fZGVmYXVsdC5jcmVhdGVFbGVtZW50KFwic2NyaXB0XCIse2Rhbmdlcm91c2x5U2V0SW5uZXJIVE1MOntfX2h0bWw6XCJcXG4gICAgICAgICB3aW5kb3cuX19oeWRyYXRlZCA9IHdpbmRvdy5fX2h5ZHJhdGVkIHx8IHt9O1xcbiAgICAgICAgIHdpbmRvdy5fX2h5ZHJhdGVkWydcIi5jb25jYXQobnVsbD09PShkPWUuYnVpbGRlckJsb2NrKXx8dm9pZCAwPT09ZD92b2lkIDA6ZC5pZCxcIiddID0gdHJ1ZTtcXG4gICAgICAgIFwiKS5yZXBsYWNlKC9cXHMrL2csXCIgXCIpfX0pKTt2YXIgaj0oZS52YXJpYW50c3x8W10pLmZpbHRlcigoZnVuY3Rpb24odCl7dmFyIG47cmV0dXJuIGZpbHRlcldpdGhDdXN0b21UYXJnZXRpbmcoX19hc3NpZ24oX19hc3NpZ24oe30sKG51bGw9PT0obj1lLmJ1aWxkZXJTdGF0ZS5zdGF0ZSl8fHZvaWQgMD09PW4/dm9pZCAwOm4ubG9jYWxlKT97bG9jYWxlOmUuYnVpbGRlclN0YXRlLnN0YXRlLmxvY2FsZX06e30pLGJ1aWxkZXIuZ2V0VXNlckF0dHJpYnV0ZXMoKSksdC5xdWVyeSx0LnN0YXJ0RGF0ZSx0LmVuZERhdGUpfSkpO3JldHVybiBSZWFjdF9fZGVmYXVsdC5jcmVhdGVFbGVtZW50KFJlYWN0X19kZWZhdWx0LkZyYWdtZW50LG51bGwsUmVhY3RfX2RlZmF1bHQuY3JlYXRlRWxlbWVudChcImRpdlwiLF9fYXNzaWduKHtyZWY6Qn0sZS5hdHRyaWJ1dGVzLHtzdHlsZTpfX2Fzc2lnbih7b3BhY2l0eTp3PzE6MCx0cmFuc2l0aW9uOlwib3BhY2l0eSAwLjJzIGVhc2UtaW4tb3V0XCJ9LG51bGw9PT0oYz1lLmF0dHJpYnV0ZXMpfHx2b2lkIDA9PT1jP3ZvaWQgMDpjLnN0eWxlKSxjbGFzc05hbWU6XCJidWlsZGVyLXBlcnNvbmFsaXphdGlvbi1jb250YWluZXIgXCIuY29uY2F0KGUuYXR0cmlidXRlcy5jbGFzc05hbWUsXCIgXCIpLmNvbmNhdCh3P1wiXCI6XCJidWlsZGVyLXBlcnNvbmFsaXphdGlvbi1jb250YWluZXItbG9hZGluZ1wiKX0pLEJ1aWxkZXIuaXNFZGl0aW5nJiZcIm51bWJlclwiPT10eXBlb2YgZS5wcmV2aWV3aW5nSW5kZXgmJmUucHJldmlld2luZ0luZGV4PCgobnVsbD09PShwPWUudmFyaWFudHMpfHx2b2lkIDA9PT1wP3ZvaWQgMDpwLmxlbmd0aCl8fDApP1JlYWN0X19kZWZhdWx0LmNyZWF0ZUVsZW1lbnQoQnVpbGRlckJsb2Nrcyx7YmxvY2tzOm51bGw9PT0obT1udWxsPT09KGY9ZS52YXJpYW50cyl8fHZvaWQgMD09PWY/dm9pZCAwOmZbZS5wcmV2aWV3aW5nSW5kZXhdKXx8dm9pZCAwPT09bT92b2lkIDA6bS5ibG9ja3MscGFyZW50RWxlbWVudElkOm51bGw9PT0oaD1lLmJ1aWxkZXJCbG9jayl8fHZvaWQgMD09PWg/dm9pZCAwOmguaWQsZGF0YVBhdGg6XCJjb21wb25lbnQub3B0aW9ucy52YXJpYW50cy5cIi5jb25jYXQoZS5wcmV2aWV3aW5nSW5kZXgsXCIuYmxvY2tzXCIpLGNoaWxkOiEwfSk6QnVpbGRlci5pc0VkaXRpbmcmJlwibnVtYmVyXCIhPXR5cGVvZiBlLnByZXZpZXdpbmdJbmRleHx8IXd8fCFqLmxlbmd0aD9SZWFjdF9fZGVmYXVsdC5jcmVhdGVFbGVtZW50KEJ1aWxkZXJCbG9ja3Mse2Jsb2NrczpudWxsPT09KHY9ZS5idWlsZGVyQmxvY2spfHx2b2lkIDA9PT12P3ZvaWQgMDp2LmNoaWxkcmVuLHBhcmVudEVsZW1lbnRJZDpudWxsPT09KGc9ZS5idWlsZGVyQmxvY2spfHx2b2lkIDA9PT1nP3ZvaWQgMDpnLmlkLGRhdGFQYXRoOlwidGhpcy5jaGlsZHJlblwiLGNoaWxkOiEwfSk6UmVhY3RfX2RlZmF1bHQuY3JlYXRlRWxlbWVudChCdWlsZGVyQmxvY2tzLHtibG9ja3M6bnVsbD09PShiPWpbMF0pfHx2b2lkIDA9PT1iP3ZvaWQgMDpiLmJsb2NrcyxwYXJlbnRFbGVtZW50SWQ6bnVsbD09PSh5PWUuYnVpbGRlckJsb2NrKXx8dm9pZCAwPT09eT92b2lkIDA6eS5pZCxkYXRhUGF0aDpcImNvbXBvbmVudC5vcHRpb25zLnZhcmlhbnRzLlwiLmNvbmNhdChudWxsPT09KF89ZS52YXJpYW50cyl8fHZvaWQgMD09PV8/dm9pZCAwOl8uaW5kZXhPZihqWzBdKSxcIi5ibG9ja3NcIiksY2hpbGQ6ITB9KSksUmVhY3RfX2RlZmF1bHQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiLHtkYW5nZXJvdXNseVNldElubmVySFRNTDp7X19odG1sOlwiXFxuICAgICAgICAgd2luZG93Ll9faHlkcmF0ZWQgPSB3aW5kb3cuX19oeWRyYXRlZCB8fCB7fTtcXG4gICAgICAgICB3aW5kb3cuX19oeWRyYXRlZFsnXCIuY29uY2F0KG51bGw9PT0oUz1lLmJ1aWxkZXJCbG9jayl8fHZvaWQgMD09PVM/dm9pZCAwOlMuaWQsXCInXSA9IHRydWU7XFxuICAgICAgICBcIikucmVwbGFjZSgvXFxzKy9nLFwiIFwiKX19KSl9ZnVuY3Rpb24gZ2V0UGVyc29uYWxpemF0aW9uU2NyaXB0KGUsdCxuKXtyZXR1cm5cIlxcbiAgICAgIChmdW5jdGlvbigpIHtcXG4gICAgICAgIGZ1bmN0aW9uIGdldENvb2tpZShuYW1lKSB7XFxuICAgICAgICAgIHZhciBuYW1lRVEgPSBuYW1lICsgXFxcIj1cXFwiO1xcbiAgICAgICAgICB2YXIgY2EgPSBkb2N1bWVudC5jb29raWUuc3BsaXQoJzsnKTtcXG4gICAgICAgICAgZm9yKHZhciBpPTA7aSA8IGNhLmxlbmd0aDtpKyspIHtcXG4gICAgICAgICAgICAgIHZhciBjID0gY2FbaV07XFxuICAgICAgICAgICAgICB3aGlsZSAoYy5jaGFyQXQoMCk9PScgJykgYyA9IGMuc3Vic3RyaW5nKDEsYy5sZW5ndGgpO1xcbiAgICAgICAgICAgICAgaWYgKGMuaW5kZXhPZihuYW1lRVEpID09IDApIHJldHVybiBjLnN1YnN0cmluZyhuYW1lRVEubGVuZ3RoLGMubGVuZ3RoKTtcXG4gICAgICAgICAgfVxcbiAgICAgICAgICByZXR1cm4gbnVsbDtcXG4gICAgICAgIH1cXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZVZhcmlhbnRzKCkge1xcbiAgICAgICAgICB2YXJpYW50cy5mb3JFYWNoKGZ1bmN0aW9uICh0ZW1wbGF0ZSwgaW5kZXgpIHtcXG4gICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd0ZW1wbGF0ZVtkYXRhLXZhcmlhbnQtaWQ9XFxcIicgKyBcXFwiXCIuY29uY2F0KHQsXCJcXFwiICsgaW5kZXggKyAnXFxcIl0nKS5yZW1vdmUoKTtcXG4gICAgICAgICAgfSk7XFxuICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCd2YXJpYW50cy1zY3JpcHQtXCIpLmNvbmNhdCh0LFwiJykucmVtb3ZlKCk7XFxuICAgICAgICB9XFxuXFxuICAgICAgICB2YXIgYXR0cmlidXRlcyA9IEpTT04ucGFyc2UoZ2V0Q29va2llKFxcXCJcIikuY29uY2F0KEJ1aWxkZXIuYXR0cmlidXRlc0Nvb2tpZU5hbWUsJ1wiKSB8fCBcInt9XCIpO1xcbiAgICAgICAgJykuY29uY2F0KG4/J2F0dHJpYnV0ZXMubG9jYWxlID0gXCInLmNvbmNhdChuLCdcIjsnKTpcIlwiLFwiXFxuICAgICAgICB2YXIgdmFyaWFudHMgPSBcIikuY29uY2F0KEpTT04uc3RyaW5naWZ5KG51bGw9PWU/dm9pZCAwOmUubWFwKChmdW5jdGlvbihlKXtyZXR1cm57cXVlcnk6ZS5xdWVyeSxzdGFydERhdGU6ZS5zdGFydERhdGUsZW5kRGF0ZTplLmVuZERhdGV9fSkpKSxcIjtcXG4gICAgICAgIHZhciB3aW5uaW5nVmFyaWFudEluZGV4ID0gdmFyaWFudHMuZmluZEluZGV4KGZ1bmN0aW9uKHZhcmlhbnQpIHtcXG4gICAgICAgICAgcmV0dXJuIGZpbHRlcldpdGhDdXN0b21UYXJnZXRpbmcoXFxuICAgICAgICAgICAgYXR0cmlidXRlcyxcXG4gICAgICAgICAgICB2YXJpYW50LnF1ZXJ5LFxcbiAgICAgICAgICAgIHZhcmlhbnQuc3RhcnREYXRlLFxcbiAgICAgICAgICAgIHZhcmlhbnQuZW5kRGF0ZVxcbiAgICAgICAgICApO1xcbiAgICAgICAgfSk7XFxuICAgICAgICB2YXIgaXNEZWJ1ZyA9IGxvY2F0aW9uLmhyZWYuaW5jbHVkZXMoJ2J1aWxkZXIuZGVidWc9dHJ1ZScpO1xcbiAgICAgICAgaWYgKGlzRGVidWcpIHtcXG4gICAgICAgICAgY29uc29sZS5kZWJ1ZygnUGVyc29uYWxpemF0aW9uQ29udGFpbmVyJywge1xcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IGF0dHJpYnV0ZXMsXFxuICAgICAgICAgICAgdmFyaWFudHM6IHZhcmlhbnRzLFxcbiAgICAgICAgICAgIHdpbm5pbmdWYXJpYW50SW5kZXg6IHdpbm5pbmdWYXJpYW50SW5kZXgsXFxuICAgICAgICAgICAgfSk7XFxuICAgICAgICB9XFxuICAgICAgICBpZiAod2lubmluZ1ZhcmlhbnRJbmRleCAhPT0gLTEpIHtcXG4gICAgICAgICAgdmFyIHdpbm5pbmdWYXJpYW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndGVtcGxhdGVbZGF0YS12YXJpYW50LWlkPVxcXCInICsgXFxcIlwiKS5jb25jYXQodCxcIlxcXCIgKyB3aW5uaW5nVmFyaWFudEluZGV4ICsgJ1xcXCJdJyk7XFxuICAgICAgICAgIGlmICh3aW5uaW5nVmFyaWFudCkge1xcbiAgICAgICAgICAgIHZhciBwYXJlbnROb2RlID0gd2lubmluZ1ZhcmlhbnQucGFyZW50Tm9kZTtcXG4gICAgICAgICAgICB2YXIgbmV3UGFyZW50ID0gcGFyZW50Tm9kZS5jbG9uZU5vZGUoZmFsc2UpO1xcbiAgICAgICAgICAgIG5ld1BhcmVudC5hcHBlbmRDaGlsZCh3aW5uaW5nVmFyaWFudC5jb250ZW50LmZpcnN0Q2hpbGQpO1xcbiAgICAgICAgICAgIHBhcmVudE5vZGUucGFyZW50Tm9kZS5yZXBsYWNlQ2hpbGQobmV3UGFyZW50LCBwYXJlbnROb2RlKTtcXG4gICAgICAgICAgICBpZiAoaXNEZWJ1Zykge1xcbiAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygnUGVyc29uYWxpemF0aW9uQ29udGFpbmVyJywgJ1dpbm5pbmcgdmFyaWFudCBSZXBsYWNlZDonLCB3aW5uaW5nVmFyaWFudCk7XFxuICAgICAgICAgICAgfVxcbiAgICAgICAgICB9XFxuICAgICAgICB9IGVsc2UgaWYgKHZhcmlhbnRzLmxlbmd0aCA+IDApIHtcXG4gICAgICAgICAgcmVtb3ZlVmFyaWFudHMoKTtcXG4gICAgICAgIH1cXG4gICAgICAgIFwiKS5jb25jYXQoZmlsdGVyV2l0aEN1c3RvbVRhcmdldGluZ1NjcmlwdCxcIlxcbiAgICAgIH0pKCk7XFxuICAgIFwiKS5yZXBsYWNlKC9cXHMrL2csXCIgXCIpfWZ1bmN0aW9uIHVzZUlzUHJldmlld2luZygpe3ZhciBlPXVzZVN0YXRlKCExKSx0PWVbMF0sbj1lWzFdO3JldHVybiB1c2VFZmZlY3QoKGZ1bmN0aW9uKCl7KEJ1aWxkZXIuaXNFZGl0aW5nfHxCdWlsZGVyLmlzUHJldmlld2luZykmJm4oITApfSksW10pLHR9QnVpbGRlci5yZWdpc3RlckNvbXBvbmVudChQZXJzb25hbGl6YXRpb25Db250YWluZXIse25hbWU6XCJQZXJzb25hbGl6YXRpb25Db250YWluZXJcIixub1dyYXA6ITAsZnJpZW5kbHlOYW1lOlwiRHluYW1pYyBDb250YWluZXJcIixpbWFnZTpcImh0dHBzOi8vY2RuLmJ1aWxkZXIuaW8vYXBpL3YxL2ltYWdlL2Fzc2V0cyUyRllKSUdiNGkwMWp2dzBTUmRMNUJ0JTJGMzcyMjllZDMwZDhjNDFkZmIxMGI4Y2NhMTk5MjA1M2FcIixjYW5IYXZlQ2hpbGRyZW46ITAsaW5wdXRzOlt7bmFtZTpcInZhcmlhbnRzXCIsZGVmYXVsdFZhbHVlOltdLGJlaGF2aW9yOlwicGVyc29uYWxpemF0aW9uVmFyaWFudExpc3RcIix0eXBlOlwibGlzdFwiLHN1YkZpZWxkczpbe25hbWU6XCJuYW1lXCIsdHlwZTpcInRleHRcIixsb2NhbGl6ZWQ6ITF9LHtuYW1lOlwicXVlcnlcIixmcmllbmRseU5hbWU6XCJUYXJnZXRpbmcgcnVsZXNcIix0eXBlOlwiQnVpbGRlclF1ZXJ5XCIsZGVmYXVsdFZhbHVlOltdLGxvY2FsaXplZDohMX0se25hbWU6XCJzdGFydERhdGVcIix0eXBlOlwiZGF0ZVwiLGxvY2FsaXplZDohMX0se25hbWU6XCJlbmREYXRlXCIsdHlwZTpcImRhdGVcIixsb2NhbGl6ZWQ6ITF9LHtuYW1lOlwiYmxvY2tzXCIsdHlwZTpcIlVpQmxvY2tzXCIsaGlkZUZyb21VSTohMCxkZWZhdWx0VmFsdWU6W119XX1dfSksQnVpbGRlci5pc1JlYWN0PSEwLEJ1aWxkZXIuc2RrSW5mbz17bmFtZTpcInJlYWN0XCIsdmVyc2lvbjpTREtfVkVSU0lPTn07ZXhwb3J0e0J1aWxkZXJBc3luY1JlcXVlc3RzQ29udGV4dCxCdWlsZGVyQmxvY2ssQnVpbGRlckJsb2NrJDEgYXMgQnVpbGRlckJsb2NrQ29tcG9uZW50LEJ1aWxkZXJCbG9ja3MsQnVpbGRlckNvbXBvbmVudCxCdWlsZGVyQ29udGVudCxCdWlsZGVyTWV0YUNvbnRleHQsQnVpbGRlckNvbXBvbmVudCBhcyBCdWlsZGVyUGFnZSxCdWlsZGVyU3RvcmVDb250ZXh0LEJ1dHRvbixDb2x1bW5zLEJ1aWxkZXJDb21wb25lbnQgYXMgQ29udGVudCxDdXN0b21Db2RlLFNsb3QgYXMgRHJvcHpvbmUsRW1iZWQsRm9ybSxGb3JtSW5wdXQsRm9ybVNlbGVjdCxGb3JtU3VibWl0QnV0dG9uLEZyYWdtZW50LEltYWdlLEltZyxMYWJlbCxNdXRhdGlvbixQZXJzb25hbGl6YXRpb25Db250YWluZXIsUmF3VGV4dCxSb3V0ZXIsU2VjdGlvbixTdGF0ZVByb3ZpZGVyLFN5bWJvbCQxIGFzIFN5bWJvbCxUZXh0LFRleHRBcmVhLFZpZGVvLGdldFNyY1NldCxub1dyYXAsb25DaGFuZ2Usc3RyaW5nVG9GdW5jdGlvbix1cGRhdGVNZXRhZGF0YSx1c2VJc1ByZXZpZXdpbmcsd2l0aEJ1aWxkZXIsd2l0aENoaWxkcmVufTtcbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWJ1aWxkZXItcmVhY3QuZXM1LmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@builder.io/react/dist/builder-react.es5.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@builder.io/sdk/dist/index.esm.js":
/*!********************************************************!*\
  !*** ./node_modules/@builder.io/sdk/dist/index.esm.js ***!
  \********************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   BehaviorSubject: () => (/* binding */ BehaviorSubject),\n/* harmony export */   Builder: () => (/* binding */ Builder),\n/* harmony export */   BuilderComponent: () => (/* binding */ BuilderComponent),\n/* harmony export */   Subscription: () => (/* binding */ Subscription),\n/* harmony export */   builder: () => (/* binding */ builder),\n/* harmony export */   isBrowser: () => (/* binding */ isBrowser)\n/* harmony export */ });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tslib */ \"(ssr)/./node_modules/@builder.io/sdk/node_modules/tslib/tslib.es6.js\");\n/* harmony import */ var hash_sum__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! hash-sum */ \"(ssr)/./node_modules/hash-sum/hash-sum.js\");\n/* harmony import */ var hash_sum__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(hash_sum__WEBPACK_IMPORTED_MODULE_0__);\n\n\n\n(function () {\n  if (typeof window === 'undefined' || typeof window.CustomEvent === 'function') return false;\n\n  function CustomEvent(event, params) {\n    params = params || { bubbles: false, cancelable: false, detail: null };\n    var evt = document.createEvent('CustomEvent');\n    evt.initCustomEvent(event, params.bubbles, params.cancelable, params.detail);\n    return evt;\n  }\n\n  window.CustomEvent = CustomEvent;\n})();\n\nvar isSafari = typeof window !== 'undefined' &&\r\n    /^((?!chrome|android).)*safari/i.test(window.navigator.userAgent);\r\nvar isClient = typeof window !== 'undefined';\r\n// TODO: queue all of these in a debounceNextTick\r\nfunction nextTick(fn) {\r\n    // if (typeof process !== 'undefined' && process.nextTick) {\r\n    //   console.log('process.nextTick?');\r\n    //   process.nextTick(fn);\r\n    //   return;\r\n    // }\r\n    // FIXME: fix the real safari issue of this randomly not working\r\n    if (!isClient || isSafari || typeof MutationObserver === 'undefined') {\r\n        setTimeout(fn);\r\n        return;\r\n    }\r\n    var called = 0;\r\n    var observer = new MutationObserver(function () { return fn(); });\r\n    var element = document.createTextNode('');\r\n    observer.observe(element, {\r\n        characterData: true,\r\n    });\r\n    // tslint:disable-next-line\r\n    element.data = String((called = ++called));\r\n}\n\nvar PROPERTY_NAME_DENY_LIST = Object.freeze(['__proto__', 'prototype', 'constructor']);\r\n// TODO: unit tests\r\nvar QueryString = /** @class */ (function () {\r\n    function QueryString() {\r\n    }\r\n    QueryString.parseDeep = function (queryString) {\r\n        var obj = this.parse(queryString);\r\n        return this.deepen(obj);\r\n    };\r\n    QueryString.stringifyDeep = function (obj) {\r\n        var map = this.flatten(obj);\r\n        return this.stringify(map);\r\n    };\r\n    QueryString.parse = function (queryString) {\r\n        var query = {};\r\n        var pairs = (queryString[0] === '?' ? queryString.substr(1) : queryString).split('&');\r\n        for (var i = 0; i < pairs.length; i++) {\r\n            var pair = pairs[i].split('=');\r\n            // TODO: node support?\r\n            try {\r\n                query[decodeURIComponent(pair[0])] = decodeURIComponent(pair[1] || '');\r\n            }\r\n            catch (error) {\r\n                // Ignore malformed URI components\r\n            }\r\n        }\r\n        return query;\r\n    };\r\n    QueryString.stringify = function (map) {\r\n        var str = '';\r\n        for (var key in map) {\r\n            if (map.hasOwnProperty(key)) {\r\n                var value = map[key];\r\n                if (str) {\r\n                    str += '&';\r\n                }\r\n                str += encodeURIComponent(key) + '=' + encodeURIComponent(value);\r\n            }\r\n        }\r\n        return str;\r\n    };\r\n    QueryString.deepen = function (map) {\r\n        // FIXME; Should be type Tree = Record<string, string | Tree>\r\n        // requires a typescript upgrade.\r\n        var output = {};\r\n        for (var k in map) {\r\n            var t = output;\r\n            var parts = k.split('.');\r\n            var key = parts.pop();\r\n            for (var _i = 0, parts_1 = parts; _i < parts_1.length; _i++) {\r\n                var part = parts_1[_i];\r\n                assertAllowedPropertyName(part);\r\n                t = t[part] = t[part] || {};\r\n            }\r\n            t[key] = map[k];\r\n        }\r\n        return output;\r\n    };\r\n    QueryString.flatten = function (obj, _current, _res) {\r\n        if (_res === void 0) { _res = {}; }\r\n        for (var key in obj) {\r\n            var value = obj[key];\r\n            var newKey = _current ? _current + '.' + key : key;\r\n            if (value && typeof value === 'object') {\r\n                this.flatten(value, newKey, _res);\r\n            }\r\n            else {\r\n                _res[newKey] = value;\r\n            }\r\n        }\r\n        return _res;\r\n    };\r\n    return QueryString;\r\n}());\r\nfunction assertAllowedPropertyName(name) {\r\n    if (PROPERTY_NAME_DENY_LIST.indexOf(name) >= 0)\r\n        throw new Error(\"Property name \\\"\".concat(name, \"\\\" is not allowed\"));\r\n}\n\nvar Subscription = /** @class */ (function () {\r\n    function Subscription(listeners, listener) {\r\n        this.listeners = listeners;\r\n        this.listener = listener;\r\n        this.unsubscribed = false;\r\n        this.otherSubscriptions = [];\r\n    }\r\n    Object.defineProperty(Subscription.prototype, \"closed\", {\r\n        get: function () {\r\n            return this.unsubscribed;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Subscription.prototype.add = function (subscription) {\r\n        this.otherSubscriptions.push(subscription);\r\n    };\r\n    Subscription.prototype.unsubscribe = function () {\r\n        if (this.unsubscribed) {\r\n            return;\r\n        }\r\n        if (this.listener && this.listeners) {\r\n            var index = this.listeners.indexOf(this.listener);\r\n            if (index > -1) {\r\n                this.listeners.splice(index, 1);\r\n            }\r\n        }\r\n        this.otherSubscriptions.forEach(function (sub) { return sub.unsubscribe(); });\r\n        this.unsubscribed = true;\r\n    };\r\n    return Subscription;\r\n}());\r\n// TODO: follow minimal basic spec: https://github.com/tc39/proposal-observable\r\nvar BehaviorSubject = /** @class */ (function () {\r\n    function BehaviorSubject(value) {\r\n        var _this = this;\r\n        this.value = value;\r\n        this.listeners = [];\r\n        this.errorListeners = [];\r\n        this.then = function () {\r\n            var _a;\r\n            var args = [];\r\n            for (var _i = 0; _i < arguments.length; _i++) {\r\n                args[_i] = arguments[_i];\r\n            }\r\n            return (_a = _this.toPromise()).then.apply(_a, args);\r\n        };\r\n    }\r\n    BehaviorSubject.prototype.next = function (value) {\r\n        this.value = value;\r\n        for (var _i = 0, _a = this.listeners; _i < _a.length; _i++) {\r\n            var listener = _a[_i];\r\n            listener(value);\r\n        }\r\n    };\r\n    // TODO: implement this as PIPE instead\r\n    BehaviorSubject.prototype.map = function (fn) {\r\n        var newSubject = new BehaviorSubject(fn(this.value));\r\n        // TODO: on destroy delete these\r\n        this.subscribe(function (val) {\r\n            newSubject.next(fn(val));\r\n        });\r\n        this.catch(function (err) {\r\n            newSubject.error(err);\r\n        });\r\n        return newSubject;\r\n    };\r\n    BehaviorSubject.prototype.catch = function (errorListener) {\r\n        this.errorListeners.push(errorListener);\r\n        return new Subscription(this.errorListeners, errorListener);\r\n    };\r\n    BehaviorSubject.prototype.error = function (error) {\r\n        for (var _i = 0, _a = this.errorListeners; _i < _a.length; _i++) {\r\n            var listener = _a[_i];\r\n            listener(error);\r\n        }\r\n    };\r\n    BehaviorSubject.prototype.subscribe = function (listener, errorListener) {\r\n        this.listeners.push(listener);\r\n        if (errorListener) {\r\n            this.errorListeners.push(errorListener);\r\n        }\r\n        return new Subscription(this.listeners, listener);\r\n    };\r\n    BehaviorSubject.prototype.toPromise = function () {\r\n        var _this = this;\r\n        return new Promise(function (resolve, reject) {\r\n            var subscription = _this.subscribe(function (value) {\r\n                resolve(value);\r\n                subscription.unsubscribe();\r\n            }, function (err) {\r\n                reject(err);\r\n                subscription.unsubscribe();\r\n            });\r\n        });\r\n    };\r\n    BehaviorSubject.prototype.promise = function () {\r\n        return this.toPromise();\r\n    };\r\n    return BehaviorSubject;\r\n}());\n\nvar State = {\r\n    Pending: 'Pending',\r\n    Fulfilled: 'Fulfilled',\r\n    Rejected: 'Rejected',\r\n};\r\nfunction isFunction(val) {\r\n    return val && typeof val === 'function';\r\n}\r\nfunction isObject(val) {\r\n    return val && typeof val === 'object';\r\n}\r\nvar TinyPromise = /** @class */ (function () {\r\n    function TinyPromise(executor) {\r\n        this._state = State.Pending;\r\n        this._handlers = [];\r\n        this._value = null;\r\n        executor(this._resolve.bind(this), this._reject.bind(this));\r\n    }\r\n    TinyPromise.prototype._resolve = function (x) {\r\n        var _this = this;\r\n        if (x instanceof TinyPromise) {\r\n            x.then(this._resolve.bind(this), this._reject.bind(this));\r\n        }\r\n        else if (isObject(x) || isFunction(x)) {\r\n            var called_1 = false;\r\n            try {\r\n                var thenable = x.then;\r\n                if (isFunction(thenable)) {\r\n                    thenable.call(x, function (result) {\r\n                        if (!called_1)\r\n                            _this._resolve(result);\r\n                        called_1 = true;\r\n                        return undefined;\r\n                    }, function (error) {\r\n                        if (!called_1)\r\n                            _this._reject(error);\r\n                        called_1 = true;\r\n                        return undefined;\r\n                    });\r\n                }\r\n                else {\r\n                    this._fulfill(x);\r\n                }\r\n            }\r\n            catch (ex) {\r\n                if (!called_1) {\r\n                    this._reject(ex);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            this._fulfill(x);\r\n        }\r\n    };\r\n    TinyPromise.prototype._fulfill = function (result) {\r\n        var _this = this;\r\n        this._state = State.Fulfilled;\r\n        this._value = result;\r\n        this._handlers.forEach(function (handler) { return _this._callHandler(handler); });\r\n    };\r\n    TinyPromise.prototype._reject = function (error) {\r\n        var _this = this;\r\n        this._state = State.Rejected;\r\n        this._value = error;\r\n        this._handlers.forEach(function (handler) { return _this._callHandler(handler); });\r\n    };\r\n    TinyPromise.prototype._isPending = function () {\r\n        return this._state === State.Pending;\r\n    };\r\n    TinyPromise.prototype._isFulfilled = function () {\r\n        return this._state === State.Fulfilled;\r\n    };\r\n    TinyPromise.prototype._isRejected = function () {\r\n        return this._state === State.Rejected;\r\n    };\r\n    TinyPromise.prototype._addHandler = function (onFulfilled, onRejected) {\r\n        this._handlers.push({\r\n            onFulfilled: onFulfilled,\r\n            onRejected: onRejected,\r\n        });\r\n    };\r\n    TinyPromise.prototype._callHandler = function (handler) {\r\n        if (this._isFulfilled() && isFunction(handler.onFulfilled)) {\r\n            handler.onFulfilled(this._value);\r\n        }\r\n        else if (this._isRejected() && isFunction(handler.onRejected)) {\r\n            handler.onRejected(this._value);\r\n        }\r\n    };\r\n    TinyPromise.prototype.then = function (onFulfilled, onRejected) {\r\n        var _this = this;\r\n        switch (this._state) {\r\n            case State.Pending: {\r\n                return new TinyPromise(function (resolve, reject) {\r\n                    _this._addHandler(function (value) {\r\n                        nextTick(function () {\r\n                            try {\r\n                                if (isFunction(onFulfilled)) {\r\n                                    resolve(onFulfilled(value));\r\n                                }\r\n                                else {\r\n                                    resolve(value);\r\n                                }\r\n                            }\r\n                            catch (ex) {\r\n                                reject(ex);\r\n                            }\r\n                        });\r\n                    }, function (error) {\r\n                        nextTick(function () {\r\n                            try {\r\n                                if (isFunction(onRejected)) {\r\n                                    resolve(onRejected(error));\r\n                                }\r\n                                else {\r\n                                    reject(error);\r\n                                }\r\n                            }\r\n                            catch (ex) {\r\n                                reject(ex);\r\n                            }\r\n                        });\r\n                    });\r\n                });\r\n            }\r\n            case State.Fulfilled: {\r\n                return new TinyPromise(function (resolve, reject) {\r\n                    nextTick(function () {\r\n                        try {\r\n                            if (isFunction(onFulfilled)) {\r\n                                resolve(onFulfilled(_this._value));\r\n                            }\r\n                            else {\r\n                                resolve(_this._value);\r\n                            }\r\n                        }\r\n                        catch (ex) {\r\n                            reject(ex);\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n            case State.Rejected: {\r\n                return new TinyPromise(function (resolve, reject) {\r\n                    nextTick(function () {\r\n                        try {\r\n                            if (isFunction(onRejected)) {\r\n                                resolve(onRejected(_this._value));\r\n                            }\r\n                            else {\r\n                                reject(_this._value);\r\n                            }\r\n                        }\r\n                        catch (ex) {\r\n                            reject(ex);\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n        }\r\n    };\r\n    return TinyPromise;\r\n}());\r\nvar Promise$1 = (typeof Promise !== 'undefined' ? Promise : TinyPromise);\n\n// Webpack workaround to conditionally require certain external modules\r\n// only on the server and not bundle them on the client\r\nvar serverOnlyRequire;\r\ntry {\r\n    // tslint:disable-next-line:no-eval\r\n    serverOnlyRequire = eval('require');\r\n}\r\ncatch (err) {\r\n    // all good\r\n    serverOnlyRequire = (function () { return null; });\r\n}\r\nvar serverOnlyRequire$1 = serverOnlyRequire;\n\nfunction promiseResolve(value) {\r\n    return new Promise$1(function (resolve) { return resolve(value); });\r\n}\r\n// Adapted from https://raw.githubusercontent.com/developit/unfetch/master/src/index.mjs\r\nfunction tinyFetch(url, options) {\r\n    if (options === void 0) { options = {}; }\r\n    return new Promise$1(function (resolve, reject) {\r\n        var request = new XMLHttpRequest();\r\n        request.open(options.method || 'get', url, true);\r\n        if (options.headers) {\r\n            for (var i in options.headers) {\r\n                request.setRequestHeader(i, options.headers[i]);\r\n            }\r\n        }\r\n        request.withCredentials = options.credentials === 'include';\r\n        request.onload = function () {\r\n            resolve(response());\r\n        };\r\n        request.onerror = reject;\r\n        request.send(options.body);\r\n        function response() {\r\n            var keys = [];\r\n            var all = [];\r\n            var headers = {};\r\n            var header = undefined;\r\n            request\r\n                .getAllResponseHeaders()\r\n                .replace(/^(.*?):[^\\S\\n]*([\\s\\S]*?)$/gm, function (_match, _key, value) {\r\n                var key = _key;\r\n                keys.push((key = key.toLowerCase()));\r\n                all.push([key, value]);\r\n                header = headers[key];\r\n                headers[key] = header ? \"\".concat(header, \",\").concat(value) : value;\r\n                return '';\r\n            });\r\n            return {\r\n                ok: ((request.status / 100) | 0) === 2,\r\n                status: request.status,\r\n                statusText: request.statusText,\r\n                url: request.responseURL,\r\n                clone: response,\r\n                text: function () { return promiseResolve(request.responseText); },\r\n                json: function () { return promiseResolve(request.responseText).then(JSON.parse); },\r\n                blob: function () { return promiseResolve(new Blob([request.response])); },\r\n                headers: {\r\n                    keys: function () { return keys; },\r\n                    entries: function () { return all; },\r\n                    get: function (n) { return headers[n.toLowerCase()]; },\r\n                    has: function (n) { return n.toLowerCase() in headers; },\r\n                },\r\n            };\r\n        }\r\n    });\r\n}\r\nfunction getFetch() {\r\n    // If fetch is defined, in the browser, via polyfill, or in a Cloudflare worker, use it.\r\n    var _fetch = undefined;\r\n    if (globalThis.fetch) {\r\n        _fetch !== null && _fetch !== void 0 ? _fetch : (_fetch = globalThis.fetch);\r\n    }\r\n    else if (typeof window === 'undefined') {\r\n        // If fetch is not defined, in a Node.js environment, use node-fetch.\r\n        try {\r\n            // node-fetch@^3 is ESM only, and will throw error on require.\r\n            _fetch !== null && _fetch !== void 0 ? _fetch : (_fetch = serverOnlyRequire$1('node-fetch'));\r\n        }\r\n        catch (e) {\r\n            // If node-fetch is not installed, use tiny-fetch.\r\n            console.warn('node-fetch is not installed. consider polyfilling fetch or installing node-fetch.');\r\n            console.warn(e);\r\n        }\r\n    }\r\n    // Otherwise, use tiny-fetch.\r\n    return _fetch !== null && _fetch !== void 0 ? _fetch : tinyFetch;\r\n}\n\nfunction assign(target) {\r\n    var to = Object(target);\r\n    for (var index = 1; index < arguments.length; index++) {\r\n        var nextSource = arguments[index];\r\n        if (nextSource != null) {\r\n            // Skip over if undefined or null\r\n            for (var nextKey in nextSource) {\r\n                // Avoid bugs when hasOwnProperty is shadowed\r\n                if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\r\n                    to[nextKey] = nextSource[nextKey];\r\n                }\r\n            }\r\n        }\r\n    }\r\n    return to;\r\n}\n\nfunction throttle(func, wait, options) {\r\n    if (options === void 0) { options = {}; }\r\n    var context;\r\n    var args;\r\n    var result;\r\n    var timeout = null;\r\n    var previous = 0;\r\n    var later = function () {\r\n        previous = options.leading === false ? 0 : Date.now();\r\n        timeout = null;\r\n        result = func.apply(context, args);\r\n        if (!timeout)\r\n            context = args = null;\r\n    };\r\n    return function () {\r\n        var now = Date.now();\r\n        if (!previous && options.leading === false)\r\n            previous = now;\r\n        var remaining = wait - (now - previous);\r\n        context = this;\r\n        args = arguments;\r\n        if (remaining <= 0 || remaining > wait) {\r\n            if (timeout) {\r\n                clearTimeout(timeout);\r\n                timeout = null;\r\n            }\r\n            previous = now;\r\n            result = func.apply(context, args);\r\n            if (!timeout)\r\n                context = args = null;\r\n        }\r\n        else if (!timeout && options.trailing !== false) {\r\n            timeout = setTimeout(later, remaining);\r\n        }\r\n        return result;\r\n    };\r\n}\n\nvar camelCaseToKebabCase = function (str) {\r\n    return str ? str.replace(/([A-Z])/g, function (g) { return \"-\".concat(g[0].toLowerCase()); }) : '';\r\n};\r\nvar Animator = /** @class */ (function () {\r\n    function Animator() {\r\n    }\r\n    Animator.prototype.bindAnimations = function (animations) {\r\n        for (var _i = 0, animations_1 = animations; _i < animations_1.length; _i++) {\r\n            var animation = animations_1[_i];\r\n            switch (animation.trigger) {\r\n                case 'pageLoad':\r\n                    this.triggerAnimation(animation);\r\n                    break;\r\n                case 'hover':\r\n                    this.bindHoverAnimation(animation);\r\n                    break;\r\n                case 'scrollInView':\r\n                    this.bindScrollInViewAnimation(animation);\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n    Animator.prototype.warnElementNotPresent = function (id) {\r\n        console.warn(\"Cannot animate element: element with ID \".concat(id, \" not found!\"));\r\n    };\r\n    Animator.prototype.augmentAnimation = function (animation, element) {\r\n        var stylesUsed = this.getAllStylesUsed(animation);\r\n        var computedStyle = getComputedStyle(element);\r\n        // const computedStyle = getComputedStyle(element);\r\n        // // FIXME: this will break if original load is in one reponsive size then resize to another hmmm\r\n        // Need to use transform instead of left since left can change on screen sizes\r\n        var firstStyles = animation.steps[0].styles;\r\n        var lastStyles = animation.steps[animation.steps.length - 1].styles;\r\n        var bothStyles = [firstStyles, lastStyles];\r\n        // FIXME: this won't work as expected for augmented animations - may need the editor itself to manage this\r\n        for (var _i = 0, bothStyles_1 = bothStyles; _i < bothStyles_1.length; _i++) {\r\n            var styles = bothStyles_1[_i];\r\n            for (var _a = 0, stylesUsed_1 = stylesUsed; _a < stylesUsed_1.length; _a++) {\r\n                var style = stylesUsed_1[_a];\r\n                if (!(style in styles)) {\r\n                    styles[style] = computedStyle[style];\r\n                }\r\n            }\r\n        }\r\n    };\r\n    Animator.prototype.getAllStylesUsed = function (animation) {\r\n        var properties = [];\r\n        for (var _i = 0, _a = animation.steps; _i < _a.length; _i++) {\r\n            var step = _a[_i];\r\n            for (var key in step.styles) {\r\n                if (properties.indexOf(key) === -1) {\r\n                    properties.push(key);\r\n                }\r\n            }\r\n        }\r\n        return properties;\r\n    };\r\n    Animator.prototype.triggerAnimation = function (animation) {\r\n        var _this = this;\r\n        // TODO: do for ALL elements\r\n        var elements = Array.prototype.slice.call(document.getElementsByClassName(animation.elementId || animation.id || ''));\r\n        if (!elements.length) {\r\n            this.warnElementNotPresent(animation.elementId || animation.id || '');\r\n            return;\r\n        }\r\n        Array.from(elements).forEach(function (element) {\r\n            _this.augmentAnimation(animation, element);\r\n            // TODO: do this properly, may have other animations of different properties\r\n            // TODO: only override the properties\r\n            // TODO: if there is an entrance and hover animation, the transition duration will get effed\r\n            // element.setAttribute('style', '');\r\n            // const styledUsed = this.getAllStylesUsed(animation);\r\n            element.style.transition = 'none';\r\n            element.style.transitionDelay = '0';\r\n            assign(element.style, animation.steps[0].styles);\r\n            // TODO: queue/batch these timeouts\r\n            // TODO: only include properties explicitly set in the animation\r\n            // using Object.keys(styles)\r\n            setTimeout(function () {\r\n                element.style.transition = \"all \".concat(animation.duration, \"s \").concat(camelCaseToKebabCase(animation.easing));\r\n                if (animation.delay) {\r\n                    element.style.transitionDelay = animation.delay + 's';\r\n                }\r\n                assign(element.style, animation.steps[1].styles);\r\n                // TODO: maybe remove/reset transitoin property after animation duration\r\n                // TODO: queue timers\r\n                setTimeout(function () {\r\n                    // TODO: what if has other transition (reset back to what it was)\r\n                    element.style.transition = '';\r\n                    element.style.transitionDelay = '';\r\n                }, (animation.delay || 0) * 1000 + animation.duration * 1000 + 100);\r\n            });\r\n        });\r\n    };\r\n    Animator.prototype.bindHoverAnimation = function (animation) {\r\n        var _this = this;\r\n        // TODO: is it multiple binding when editing...?\r\n        // TODO: unbind on element remove\r\n        // TODO: apply to ALL elements\r\n        var elements = Array.prototype.slice.call(document.getElementsByClassName(animation.elementId || animation.id || ''));\r\n        if (!elements.length) {\r\n            this.warnElementNotPresent(animation.elementId || animation.id || '');\r\n            return;\r\n        }\r\n        Array.from(elements).forEach(function (element) {\r\n            _this.augmentAnimation(animation, element);\r\n            var defaultState = animation.steps[0].styles;\r\n            var hoverState = animation.steps[1].styles;\r\n            function attachDefaultState() {\r\n                assign(element.style, defaultState);\r\n            }\r\n            function attachHoverState() {\r\n                assign(element.style, hoverState);\r\n            }\r\n            attachDefaultState();\r\n            element.addEventListener('mouseenter', attachHoverState);\r\n            element.addEventListener('mouseleave', attachDefaultState);\r\n            // TODO: queue/batch these timeouts\r\n            setTimeout(function () {\r\n                element.style.transition = \"all \".concat(animation.duration, \"s \").concat(camelCaseToKebabCase(animation.easing));\r\n                if (animation.delay) {\r\n                    element.style.transitionDelay = animation.delay + 's';\r\n                }\r\n            });\r\n        });\r\n    };\r\n    // TODO: unbind on element remove\r\n    Animator.prototype.bindScrollInViewAnimation = function (animation) {\r\n        var _this = this;\r\n        // TODO: apply to ALL matching elements\r\n        var elements = Array.prototype.slice.call(document.getElementsByClassName(animation.elementId || animation.id || ''));\r\n        if (!elements.length) {\r\n            this.warnElementNotPresent(animation.elementId || animation.id || '');\r\n            return;\r\n        }\r\n        // TODO: if server side rendered and scrolled into view don't animate...\r\n        Array.from(elements).forEach(function (element) {\r\n            _this.augmentAnimation(animation, element);\r\n            var triggered = false;\r\n            var pendingAnimation = false;\r\n            function immediateOnScroll() {\r\n                if (!triggered && isScrolledIntoView(element)) {\r\n                    triggered = true;\r\n                    pendingAnimation = true;\r\n                    setTimeout(function () {\r\n                        assign(element.style, animation.steps[1].styles);\r\n                        if (!animation.repeat) {\r\n                            document.removeEventListener('scroll', onScroll);\r\n                        }\r\n                        setTimeout(function () {\r\n                            pendingAnimation = false;\r\n                            if (!animation.repeat) {\r\n                                element.style.transition = '';\r\n                                element.style.transitionDelay = '';\r\n                            }\r\n                        }, (animation.duration + (animation.delay || 0)) * 1000 + 100);\r\n                    });\r\n                }\r\n                else if (animation.repeat &&\r\n                    triggered &&\r\n                    !pendingAnimation &&\r\n                    !isScrolledIntoView(element)) {\r\n                    // we want to repeat the animation every time the the element is out of view and back again\r\n                    triggered = false;\r\n                    assign(element.style, animation.steps[0].styles);\r\n                }\r\n            }\r\n            // TODO: roll all of these in one for more efficiency of checking all the rects\r\n            var onScroll = throttle(immediateOnScroll, 200, { leading: false });\r\n            // TODO: fully in view or partially\r\n            function isScrolledIntoView(elem) {\r\n                var rect = elem.getBoundingClientRect();\r\n                var windowHeight = window.innerHeight;\r\n                var thresholdPercent = (animation.thresholdPercent || 0) / 100;\r\n                var threshold = thresholdPercent * windowHeight;\r\n                // TODO: partial in view? or what if element is larger than screen itself\r\n                return (rect.bottom > threshold && rect.top < windowHeight - threshold // Element is peeking top or bottom\r\n                // (rect.top > 0 && rect.bottom < window.innerHeight) || // element fits within the screen and is fully on screen (not hanging off at all)\r\n                // (rect.top < 0 && rect.bottom > window.innerHeight) // element is larger than the screen and hangs over the top and bottom\r\n                );\r\n            }\r\n            var defaultState = animation.steps[0].styles;\r\n            function attachDefaultState() {\r\n                assign(element.style, defaultState);\r\n            }\r\n            attachDefaultState();\r\n            // TODO: queue/batch these timeouts!\r\n            setTimeout(function () {\r\n                element.style.transition = \"all \".concat(animation.duration, \"s \").concat(camelCaseToKebabCase(animation.easing));\r\n                if (animation.delay) {\r\n                    element.style.transitionDelay = animation.delay + 's';\r\n                }\r\n            });\r\n            // TODO: one listener for everything\r\n            document.addEventListener('scroll', onScroll, { capture: true, passive: true });\r\n            // Do an initial check\r\n            immediateOnScroll();\r\n        });\r\n    };\r\n    return Animator;\r\n}());\n\n/**\r\n * RegExp to match field-content in RFC 7230 sec 3.2\r\n *\r\n * field-content = field-vchar [ 1*( SP / HTAB ) field-vchar ]\r\n * field-vchar   = VCHAR / obs-text\r\n * obs-text      = %x80-FF\r\n */\r\nvar fieldContentRegExp = /^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;\r\nvar Cookies = /** @class */ (function () {\r\n    function Cookies(request, response) {\r\n        this.request = request;\r\n        this.response = response;\r\n    }\r\n    Cookies.prototype.get = function (name) {\r\n        var header = this.request.headers['cookie'];\r\n        if (!header) {\r\n            return;\r\n        }\r\n        var match = header.match(getPattern(name));\r\n        if (!match) {\r\n            return;\r\n        }\r\n        var value = match[1];\r\n        return value;\r\n    };\r\n    Cookies.prototype.set = function (name, value, opts) {\r\n        var res = this.response;\r\n        var req = this.request;\r\n        var headers = res.getHeader('Set-Cookie') || [];\r\n        // TODO: just make this always true\r\n        var secure = this.secure !== undefined\r\n            ? !!this.secure\r\n            : req.protocol === 'https' || req.connection.encrypted;\r\n        var cookie = new Cookie(name, value, opts);\r\n        if (typeof headers === 'string') {\r\n            headers = [headers];\r\n        }\r\n        if (!secure && opts && opts.secure) {\r\n            throw new Error('Cannot send secure cookie over unencrypted connection');\r\n        }\r\n        cookie.secure = secure;\r\n        if (opts && 'secure' in opts) {\r\n            cookie.secure = !!opts.secure;\r\n        }\r\n        pushCookie(headers, cookie);\r\n        var setHeader = res.setHeader;\r\n        setHeader.call(res, 'Set-Cookie', headers);\r\n        return this;\r\n    };\r\n    return Cookies;\r\n}());\r\nvar Cookie = /** @class */ (function () {\r\n    function Cookie(name, value, attrs) {\r\n        this.path = '/';\r\n        this.domain = undefined;\r\n        this.httpOnly = true;\r\n        this.sameSite = false;\r\n        this.secure = false;\r\n        this.overwrite = false;\r\n        this.name = '';\r\n        this.value = '';\r\n        if (!fieldContentRegExp.test(name)) {\r\n            throw new TypeError('argument name is invalid');\r\n        }\r\n        if (value && !fieldContentRegExp.test(value)) {\r\n            throw new TypeError('argument value is invalid');\r\n        }\r\n        if (!value) {\r\n            this.expires = new Date(0);\r\n        }\r\n        this.name = name;\r\n        this.value = value || '';\r\n        if (attrs.expires) {\r\n            this.expires = attrs.expires;\r\n        }\r\n        if (attrs.secure) {\r\n            this.secure = attrs.secure;\r\n        }\r\n    }\r\n    Cookie.prototype.toString = function () {\r\n        return \"\".concat(this.name, \"=\").concat(this.value);\r\n    };\r\n    Cookie.prototype.toHeader = function () {\r\n        var header = this.toString();\r\n        if (this.maxAge) {\r\n            this.expires = new Date(Date.now() + this.maxAge);\r\n        }\r\n        if (this.path) {\r\n            header += \"; path=\".concat(this.path);\r\n        }\r\n        if (this.expires) {\r\n            header += \"; expires=\".concat(this.expires.toUTCString());\r\n        }\r\n        if (this.domain) {\r\n            header += \"; domain=\".concat(this.domain);\r\n        }\r\n        // TODO: samesite=none by default (?)\r\n        header += \"; SameSite=\".concat(this.sameSite === true ? 'strict' : 'None');\r\n        // TODO: On by default\r\n        if (this.secure) {\r\n            header += '; secure';\r\n        }\r\n        if (this.httpOnly) {\r\n            header += '; httponly';\r\n        }\r\n        return header;\r\n    };\r\n    return Cookie;\r\n}());\r\nfunction getPattern(name) {\r\n    return new RegExp(\"(?:^|;) *\".concat(name.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&'), \"=([^;]*)\"));\r\n}\r\nfunction pushCookie(headers, cookie) {\r\n    if (cookie.overwrite) {\r\n        for (var i = headers.length - 1; i >= 0; i--) {\r\n            if (headers[i].indexOf(\"\".concat(cookie.name, \"=\")) === 0) {\r\n                headers.splice(i, 1);\r\n            }\r\n        }\r\n    }\r\n    headers.push(cookie.toHeader());\r\n}\n\nfunction omit(obj) {\r\n    var values = [];\r\n    for (var _i = 1; _i < arguments.length; _i++) {\r\n        values[_i - 1] = arguments[_i];\r\n    }\r\n    var newObject = Object.assign({}, obj);\r\n    for (var _a = 0, values_1 = values; _a < values_1.length; _a++) {\r\n        var key = values_1[_a];\r\n        delete newObject[key];\r\n    }\r\n    return newObject;\r\n}\n\n/**\r\n * @credit https://stackoverflow.com/a/2117523\r\n */\r\nfunction uuidv4() {\r\n    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\r\n        var r = (Math.random() * 16) | 0, v = c == 'x' ? r : (r & 0x3) | 0x8;\r\n        return v.toString(16);\r\n    });\r\n}\r\n/**\r\n * Slightly cleaner and smaller UUIDs\r\n */\r\nfunction uuid() {\r\n    return uuidv4().replace(/-/g, '');\r\n}\n\nfunction emptyUrl() {\r\n    return {\r\n        query: null,\r\n        port: null,\r\n        auth: null,\r\n        hash: null,\r\n        host: null,\r\n        hostname: null,\r\n        href: null,\r\n        path: null,\r\n        pathname: null,\r\n        protocol: null,\r\n        search: null,\r\n        slashes: null,\r\n    };\r\n}\r\n// Replacement for `url.parse` using `URL` global object that works with relative paths.\r\n// Assumptions: this function operates in a NodeJS environment.\r\nfunction parse$1(url) {\r\n    var _a;\r\n    var out = emptyUrl();\r\n    var u;\r\n    var pathOnly = url === '' || url[0] === '/';\r\n    if (pathOnly) {\r\n        u = new URL(url, 'http://0.0.0.0/');\r\n        out.href = u.href;\r\n        out.href = (_a = out.href) === null || _a === void 0 ? void 0 : _a.slice(14); // remove 'http://0.0.0.0/'\r\n    }\r\n    else {\r\n        u = new URL(url);\r\n        out.href = u.href;\r\n        out.port = u.port === '' ? null : u.port;\r\n        out.hash = u.hash === '' ? null : u.hash;\r\n        out.host = u.host;\r\n        out.hostname = u.hostname;\r\n        out.href = u.href;\r\n        out.pathname = u.pathname;\r\n        out.protocol = u.protocol;\r\n        out.slashes = url[u.protocol.length] === '/'; // check if the mimetype is proceeded by a slash\r\n    }\r\n    out.search = u.search;\r\n    out.query = u.search.slice(1); // remove '?'\r\n    out.path = \"\".concat(u.pathname).concat(u.search);\r\n    out.pathname = u.pathname;\r\n    return out;\r\n}\n\n/**\r\n * Safe conversion to error type. Intended to be used in catch blocks where the\r\n *  value is not guaranteed to be an error.\r\n *\r\n *  @example\r\n *  try {\r\n *    throw new Error('Something went wrong')\r\n *  }\r\n *  catch (err: unknown) {\r\n *    const error: Error = toError(err)\r\n *  }\r\n */\r\nfunction toError(err) {\r\n    if (err instanceof Error)\r\n        return err;\r\n    return new Error(String(err));\r\n}\n\nvar DEFAULT_API_VERSION = 'v3';\n\nvar SDK_VERSION = '6.0.2';\n\nfunction datePlusMinutes(minutes) {\r\n    if (minutes === void 0) { minutes = 30; }\r\n    return new Date(Date.now() + minutes * 60000);\r\n}\r\nvar isPositiveNumber = function (thing) {\r\n    return typeof thing === 'number' && !isNaN(thing) && thing >= 0;\r\n};\r\nvar isReactNative = typeof navigator === 'object' && navigator.product === 'ReactNative';\r\nvar validEnvList = [\r\n    'production',\r\n    'qa',\r\n    'test',\r\n    'development',\r\n    'dev',\r\n    'cdn-qa',\r\n    'cloud',\r\n    'fast',\r\n    'cdn2',\r\n    'cdn-prod',\r\n];\r\nfunction getQueryParam(url, variable) {\r\n    var query = url.split('?')[1] || '';\r\n    var vars = query.split('&');\r\n    for (var i = 0; i < vars.length; i++) {\r\n        var pair = vars[i].split('=');\r\n        if (decodeURIComponent(pair[0]) === variable) {\r\n            return decodeURIComponent(pair[1]);\r\n        }\r\n    }\r\n    return null;\r\n}\r\nvar urlParser = {\r\n    parse: function (url) {\r\n        var el = document.createElement('a');\r\n        el.href = url;\r\n        var out = {};\r\n        var props = [\r\n            'username',\r\n            'password',\r\n            'host',\r\n            'hostname',\r\n            'port',\r\n            'protocol',\r\n            'origin',\r\n            'pathname',\r\n            'search',\r\n            'hash',\r\n        ];\r\n        for (var _i = 0, props_1 = props; _i < props_1.length; _i++) {\r\n            var prop = props_1[_i];\r\n            out[prop] = el[prop];\r\n        }\r\n        // IE 11 pathname handling workaround\r\n        // (IE omits preceeding '/', unlike other browsers)\r\n        if ((out.pathname || out.pathname === '') &&\r\n            typeof out.pathname === 'string' &&\r\n            out.pathname.indexOf('/') !== 0) {\r\n            out.pathname = '/' + out.pathname;\r\n        }\r\n        return out;\r\n    },\r\n};\r\nvar parse = isReactNative\r\n    ? function () { return emptyUrl(); }\r\n    : typeof window === 'object'\r\n        ? urlParser.parse\r\n        : parse$1;\r\nfunction setCookie(name, value, expires) {\r\n    try {\r\n        var expiresString = '';\r\n        // TODO: need to know if secure server side\r\n        if (expires) {\r\n            expiresString = '; expires=' + expires.toUTCString();\r\n        }\r\n        var secure = isBrowser ? location.protocol === 'https:' : true;\r\n        document.cookie =\r\n            name +\r\n                '=' +\r\n                (value || '') +\r\n                expiresString +\r\n                '; path=/' +\r\n                (secure ? '; secure; SameSite=None' : '');\r\n    }\r\n    catch (err) {\r\n        console.warn('Could not set cookie', err);\r\n    }\r\n}\r\nfunction getCookie(name) {\r\n    try {\r\n        return (decodeURIComponent(document.cookie.replace(new RegExp('(?:(?:^|.*;)\\\\s*' +\r\n            encodeURIComponent(name).replace(/[\\-\\.\\+\\*]/g, '\\\\$&') +\r\n            '\\\\s*\\\\=\\\\s*([^;]*).*$)|^.*$'), '$1')) || null);\r\n    }\r\n    catch (err) {\r\n        console.warn('Could not get cookie', err);\r\n    }\r\n}\r\nfunction size(object) {\r\n    return Object.keys(object).length;\r\n}\r\nfunction find(target, callback) {\r\n    var list = target;\r\n    // Makes sures is always has an positive integer as length.\r\n    var length = list.length >>> 0;\r\n    var thisArg = arguments[1];\r\n    for (var i = 0; i < length; i++) {\r\n        var element = list[i];\r\n        if (callback.call(thisArg, element, i, list)) {\r\n            return element;\r\n        }\r\n    }\r\n}\r\nvar sessionStorageKey = 'builderSessionId';\r\nvar localStorageKey = 'builderVisitorId';\r\nvar isBrowser = typeof window !== 'undefined' && !isReactNative;\r\nvar isIframe = isBrowser && window.top !== window.self;\r\nfunction BuilderComponent(info) {\r\n    if (info === void 0) { info = {}; }\r\n    return Builder.Component(info);\r\n}\r\nvar Builder = /** @class */ (function () {\r\n    function Builder(apiKey, request, response, forceNewInstance, authToken, apiVersion) {\r\n        if (apiKey === void 0) { apiKey = null; }\r\n        if (forceNewInstance === void 0) { forceNewInstance = false; }\r\n        if (authToken === void 0) { authToken = null; }\r\n        var _this = this;\r\n        this.request = request;\r\n        this.response = response;\r\n        this.eventsQueue = [];\r\n        this.throttledClearEventsQueue = throttle(function () {\r\n            _this.processEventsQueue();\r\n            // Extend the session cookie\r\n            _this.setCookie(sessionStorageKey, _this.sessionId, datePlusMinutes(30));\r\n        }, 5);\r\n        this.env = 'production';\r\n        this.sessionId = this.getSessionId();\r\n        this.targetContent = true;\r\n        this.contentPerRequest = 1;\r\n        // TODO: make array or function\r\n        this.allowCustomFonts = true;\r\n        this.cookies = null;\r\n        // TODO: api options object\r\n        this.cachebust = false;\r\n        this.overrideParams = '';\r\n        this.noCache = false;\r\n        this.preview = false;\r\n        /**\r\n         * Dictates which API endpoint is used when fetching content. Allows `'content'` and `'query'`.\r\n         * Defaults to `'query'`.\r\n         */\r\n        this.apiEndpoint$ = new BehaviorSubject('query');\r\n        this.apiVersion$ = new BehaviorSubject(undefined);\r\n        this.canTrack$ = new BehaviorSubject(!this.browserTrackingDisabled);\r\n        this.apiKey$ = new BehaviorSubject(null);\r\n        this.authToken$ = new BehaviorSubject(null);\r\n        this.userAttributesChanged = new BehaviorSubject(null);\r\n        this.editingMode$ = new BehaviorSubject(isIframe);\r\n        // TODO: decorator to do this stuff with the get/set (how do with typing too? compiler?)\r\n        this.editingModel$ = new BehaviorSubject(null);\r\n        this.userAgent = (typeof navigator === 'object' && navigator.userAgent) || '';\r\n        this.trackingHooks = [];\r\n        // Set this to control the userId\r\n        // TODO: allow changing it mid session and updating existing data to be associated\r\n        // e.g. for when a user navigates and then logs in\r\n        this.visitorId = this.getVisitorId();\r\n        this.autoTrack = !Builder.isBrowser\r\n            ? false\r\n            : !this.isDevelopmentEnv &&\r\n                !(Builder.isBrowser && location.search.indexOf('builder.preview=') !== -1);\r\n        this.trackingUserAttributes = {};\r\n        this.blockContentLoading = '';\r\n        this.observersByKey = {};\r\n        this.noEditorUpdates = {};\r\n        this.overrides = {};\r\n        this.queryOptions = {};\r\n        this.getContentQueue = null;\r\n        this.priorContentQueue = null;\r\n        this.testCookiePrefix = 'builder.tests';\r\n        this.cookieQueue = [];\r\n        // TODO: use a window variable for this perhaps, e.g. bc webcomponents may be loading builder twice\r\n        // with it's and react (use rollup build to fix)\r\n        if (Builder.isBrowser && !forceNewInstance && Builder.singletonInstance) {\r\n            return Builder.singletonInstance;\r\n        }\r\n        if (this.request && this.response) {\r\n            this.setUserAgent(this.request.headers['user-agent'] || '');\r\n            this.cookies = new Cookies(this.request, this.response);\r\n        }\r\n        if (apiKey) {\r\n            this.apiKey = apiKey;\r\n        }\r\n        if (apiVersion) {\r\n            this.apiVersion = apiVersion;\r\n        }\r\n        if (authToken) {\r\n            this.authToken = authToken;\r\n        }\r\n        if (isBrowser) {\r\n            if (Builder.isEditing) {\r\n                this.bindMessageListeners();\r\n                parent.postMessage({\r\n                    type: 'builder.animatorOptions',\r\n                    data: {\r\n                        options: {\r\n                            version: 2,\r\n                        },\r\n                    },\r\n                }, '*');\r\n            }\r\n            // TODO: postmessage to parent the builder info for every package\r\n            // type: 'builder.sdk', data: { name: '@builder.io/react', version: '0.1.23' }\r\n            // (window as any).BUILDER_VERSION = Builder.VERSION;\r\n            // Ensure always one Builder global singleton\r\n            // TODO: some people won't want this, e.g. rakuten\r\n            // Maybe hide this behind symbol or on document, etc\r\n            // if ((window as any).Builder) {\r\n            //   Builder.components = (window as any).Builder.components;\r\n            // } else {\r\n            //   (window as any).Builder = Builder;\r\n            // }\r\n        }\r\n        if (isIframe) {\r\n            this.messageFrameLoaded();\r\n        }\r\n        // TODO: on destroy clear subscription\r\n        this.canTrack$.subscribe(function (value) {\r\n            if (value) {\r\n                if (typeof sessionStorage !== 'undefined') {\r\n                    try {\r\n                        if (!sessionStorage.getItem(sessionStorageKey)) {\r\n                            sessionStorage.setItem(sessionStorageKey, _this.sessionId);\r\n                        }\r\n                    }\r\n                    catch (err) {\r\n                        console.debug('Session storage error', err);\r\n                    }\r\n                }\r\n                if (_this.eventsQueue.length) {\r\n                    _this.throttledClearEventsQueue();\r\n                }\r\n                if (_this.cookieQueue.length) {\r\n                    _this.cookieQueue.forEach(function (item) {\r\n                        _this.setCookie(item[0], item[1]);\r\n                    });\r\n                    _this.cookieQueue.length = 0;\r\n                }\r\n            }\r\n        });\r\n        if (isBrowser) {\r\n            // TODO: defer so subclass constructor runs and injects location service\r\n            this.setTestsFromUrl();\r\n            // TODO: do this on every request send?\r\n            this.getOverridesFromQueryString();\r\n            // cookies used in personalization container script, so need to set before hydration to match script result\r\n            var userAttrCookie = this.getCookie(Builder.attributesCookieName);\r\n            if (userAttrCookie) {\r\n                try {\r\n                    var attributes = JSON.parse(userAttrCookie);\r\n                    this.setUserAttributes(attributes);\r\n                }\r\n                catch (err) {\r\n                    console.debug('Error parsing user attributes cookie', err);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    Builder.register = function (type, info) {\r\n        if (type === 'plugin') {\r\n            info = this.serializeIncludingFunctions(info);\r\n        }\r\n        // TODO: all must have name and can't conflict?\r\n        var typeList = this.registry[type];\r\n        if (!typeList) {\r\n            typeList = this.registry[type] = [];\r\n        }\r\n        typeList.push(info);\r\n        if (Builder.isBrowser) {\r\n            var message = {\r\n                type: 'builder.register',\r\n                data: {\r\n                    type: type,\r\n                    info: info,\r\n                },\r\n            };\r\n            try {\r\n                parent.postMessage(message, '*');\r\n                if (parent !== window) {\r\n                    window.postMessage(message, '*');\r\n                }\r\n            }\r\n            catch (err) {\r\n                console.debug('Could not postmessage', err);\r\n            }\r\n        }\r\n        this.registryChange.next(this.registry);\r\n    };\r\n    Builder.registerEditor = function (info) {\r\n        if (Builder.isBrowser) {\r\n            window.postMessage({\r\n                type: 'builder.registerEditor',\r\n                data: omit(info, 'component'),\r\n            }, '*');\r\n            var hostname = location.hostname;\r\n            if (!Builder.isTrustedHost(hostname)) {\r\n                console.error('Builder.registerEditor() called in the wrong environment! You cannot load custom editors from your app, they must be loaded through the Builder.io app itself. Follow the readme here for more details: https://github.com/builderio/builder/tree/master/plugins/cloudinary or contact chat us in our Spectrum community for help: https://spectrum.chat/builder');\r\n            }\r\n        }\r\n        this.editors.push(info);\r\n    };\r\n    Builder.registerPlugin = function (info) {\r\n        this.plugins.push(info);\r\n    };\r\n    Builder.registerAction = function (action) {\r\n        this.actions.push(action);\r\n    };\r\n    Builder.registerTrustedHost = function (host) {\r\n        this.trustedHosts.push(host);\r\n    };\r\n    /**\r\n     * @param context @type {import('isolated-vm').Context}\r\n     * Use this function to control the execution context of custom code on the server.\r\n     * const ivm = require('isolated-vm');\r\n     * const isolate = new ivm.Isolate({ memoryLimit: 128 });\r\n     * const context = isolate.createContextSync();\r\n     * Builder.setServerContext(context);\r\n     */\r\n    Builder.setServerContext = function (context) {\r\n        this.serverContext = context;\r\n    };\r\n    Builder.isTrustedHost = function (hostname) {\r\n        var isTrusted = this.trustedHosts.findIndex(function (trustedHost) {\r\n            return trustedHost.startsWith('*.')\r\n                ? hostname.endsWith(trustedHost.slice(1))\r\n                : trustedHost === hostname;\r\n        }) > -1;\r\n        return isTrusted;\r\n    };\r\n    Builder.isTrustedHostForEvent = function (event) {\r\n        var url = parse(event.origin);\r\n        return url.hostname && Builder.isTrustedHost(url.hostname);\r\n    };\r\n    Builder.runAction = function (action) {\r\n        // TODO\r\n        var actionObject = typeof action === 'string' ? find(this.actions, function (item) { return item.name === action; }) : action;\r\n        if (!actionObject) {\r\n            throw new Error(\"Action not found: \".concat(action));\r\n        }\r\n    };\r\n    Builder.fields = function (name, fields) {\r\n        var _a;\r\n        (_a = window.parent) === null || _a === void 0 ? void 0 : _a.postMessage({\r\n            type: 'builder.fields',\r\n            data: { name: name, fields: fields },\r\n        }, '*');\r\n    };\r\n    /**\r\n     * @deprecated\r\n     * @hidden\r\n     *\r\n     * Use Builder.register('editor.settings', {}) instead.\r\n     */\r\n    Builder.set = function (settings) {\r\n        Builder.register('editor.settings', settings);\r\n    };\r\n    Builder.import = function (packageName) {\r\n        if (!Builder.isBrowser) {\r\n            // TODO: server side support *maybe*\r\n            console.warn('Builder.import used on the server - this should only be used in the browser');\r\n            return;\r\n        }\r\n        var System = window.System;\r\n        if (!System) {\r\n            console.warn('System.js not available. Please include System.js when using Builder.import');\r\n            return;\r\n        }\r\n        return System.import(\"https://cdn.builder.io/systemjs/\".concat(packageName));\r\n    };\r\n    Object.defineProperty(Builder, \"editingPage\", {\r\n        // useCdnApi = false;\r\n        get: function () {\r\n            return this._editingPage;\r\n        },\r\n        set: function (editingPage) {\r\n            this._editingPage = editingPage;\r\n            if (isBrowser && isIframe) {\r\n                if (editingPage) {\r\n                    document.body.classList.add('builder-editing-page');\r\n                }\r\n                else {\r\n                    document.body.classList.remove('builder-editing-page');\r\n                }\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Builder.serializeIncludingFunctions = function (info) {\r\n        var serializeFn = function (fnValue) {\r\n            var fnStr = fnValue.toString().trim();\r\n            // we need to account for a few different fn syntaxes:\r\n            // 1. `function name(args) => {code}`\r\n            // 2. `name(args) => {code}`\r\n            // 3. `(args) => {}`\r\n            // 4. `args => {}`\r\n            // 5. `async function(args) {code}`\r\n            // 6. `async (args) => {}`\r\n            // 7. `async args => {}`\r\n            var isArrowWithoutParens = /^[a-zA-Z0-9_]+\\s*=>/i.test(fnStr);\r\n            var appendFunction = !fnStr.startsWith('function') &&\r\n                !fnStr.startsWith('async') &&\r\n                !fnStr.startsWith('(') &&\r\n                !isArrowWithoutParens;\r\n            return \"return (\".concat(appendFunction ? 'function ' : '').concat(fnStr, \").apply(this, arguments)\");\r\n        };\r\n        return JSON.parse(JSON.stringify(info, function (key, value) {\r\n            if (typeof value === 'function') {\r\n                return serializeFn(value);\r\n            }\r\n            return value;\r\n        }));\r\n    };\r\n    Builder.prepareComponentSpecToSend = function (spec) {\r\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, this.serializeIncludingFunctions(spec)), { class: undefined });\r\n    };\r\n    Builder.registerBlock = function (component, options) {\r\n        this.registerComponent(component, options);\r\n    };\r\n    Builder.registerComponent = function (component, options) {\r\n        var _a;\r\n        var spec = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({ class: component }, component.builderOptions), options);\r\n        this.addComponent(spec);\r\n        var editable = options.models && this.singletonInstance.editingModel\r\n            ? isBrowser && options.models.includes(this.singletonInstance.editingModel)\r\n            : isBrowser;\r\n        if (editable) {\r\n            var sendSpec = this.prepareComponentSpecToSend(spec);\r\n            (_a = window.parent) === null || _a === void 0 ? void 0 : _a.postMessage({\r\n                type: 'builder.registerComponent',\r\n                data: sendSpec,\r\n            }, '*');\r\n        }\r\n    };\r\n    Builder.addComponent = function (component) {\r\n        var current = find(this.components, function (item) { return item.name === component.name; });\r\n        if (current) {\r\n            // FIXME: why does sometimes we get an extra post without class - probably\r\n            // from postMessage handler wrong in some place\r\n            if (current.class && !component.class) {\r\n                return;\r\n            }\r\n            this.components.splice(this.components.indexOf(current), 1, component);\r\n        }\r\n        else {\r\n            this.components.push(component);\r\n        }\r\n    };\r\n    // TODO: style guide, etc off this system as well?\r\n    Builder.component = function (info) {\r\n        var _this = this;\r\n        if (info === void 0) { info = {}; }\r\n        return function (component) {\r\n            var _a;\r\n            var spec = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, info), { class: component });\r\n            if (!spec.name) {\r\n                spec.name = component.name;\r\n            }\r\n            _this.addComponent(spec);\r\n            var sendSpec = _this.prepareComponentSpecToSend(spec);\r\n            // TODO: serialize component name and inputs\r\n            if (isBrowser) {\r\n                (_a = window.parent) === null || _a === void 0 ? void 0 : _a.postMessage({\r\n                    type: 'builder.registerComponent',\r\n                    data: sendSpec,\r\n                }, '*');\r\n            }\r\n            return component;\r\n        };\r\n    };\r\n    Object.defineProperty(Builder, \"Component\", {\r\n        get: function () {\r\n            return this.component;\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Builder.prototype.processEventsQueue = function () {\r\n        if (!this.eventsQueue.length) {\r\n            return;\r\n        }\r\n        var events = this.eventsQueue;\r\n        this.eventsQueue = [];\r\n        var fullUserAttributes = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, Builder.overrideUserAttributes), this.trackingUserAttributes);\r\n        for (var _i = 0, events_1 = events; _i < events_1.length; _i++) {\r\n            var event_1 = events_1[_i];\r\n            if (!event_1.data.metadata) {\r\n                event_1.data.metadata = {};\r\n            }\r\n            if (!event_1.data.metadata.user) {\r\n                event_1.data.metadata.user = {};\r\n            }\r\n            Object.assign(event_1.data.metadata.user, fullUserAttributes, event_1.data.metadata.user);\r\n        }\r\n        var host = this.host;\r\n        getFetch()(\"\".concat(host, \"/api/v1/track\"), {\r\n            method: 'POST',\r\n            body: JSON.stringify({ events: events }),\r\n            headers: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({ 'content-type': 'application/json' }, this.getSdkHeaders()),\r\n            mode: 'cors',\r\n        }).catch(function () {\r\n            // Not the end of the world\r\n        });\r\n    };\r\n    Object.defineProperty(Builder.prototype, \"browserTrackingDisabled\", {\r\n        get: function () {\r\n            return Builder.isBrowser && Boolean(window.builderNoTrack || !navigator.cookieEnabled);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Builder.prototype, \"canTrack\", {\r\n        get: function () {\r\n            return this.canTrack$.value;\r\n        },\r\n        set: function (canTrack) {\r\n            if (this.canTrack !== canTrack) {\r\n                this.canTrack$.next(canTrack);\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Builder.prototype, \"apiVersion\", {\r\n        get: function () {\r\n            return this.apiVersion$.value;\r\n        },\r\n        set: function (apiVersion) {\r\n            if (this.apiVersion !== apiVersion) {\r\n                this.apiVersion$.next(apiVersion);\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Builder.prototype, \"apiEndpoint\", {\r\n        get: function () {\r\n            return this.apiEndpoint$.value;\r\n        },\r\n        set: function (apiEndpoint) {\r\n            if (this.apiEndpoint !== apiEndpoint) {\r\n                this.apiEndpoint$.next(apiEndpoint);\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Builder.prototype, \"editingMode\", {\r\n        get: function () {\r\n            return this.editingMode$.value;\r\n        },\r\n        set: function (value) {\r\n            if (value !== this.editingMode) {\r\n                this.editingMode$.next(value);\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Builder.prototype, \"editingModel\", {\r\n        get: function () {\r\n            return this.editingModel$.value;\r\n        },\r\n        set: function (value) {\r\n            if (value !== this.editingModel) {\r\n                this.editingModel$.next(value);\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Builder.prototype.findParentElement = function (target, callback, checkElement) {\r\n        if (checkElement === void 0) { checkElement = true; }\r\n        if (!(target instanceof HTMLElement)) {\r\n            return null;\r\n        }\r\n        var parent = checkElement ? target : target.parentElement;\r\n        do {\r\n            if (!parent) {\r\n                return null;\r\n            }\r\n            var matches = callback(parent);\r\n            if (matches) {\r\n                return parent;\r\n            }\r\n        } while ((parent = parent.parentElement));\r\n        return null;\r\n    };\r\n    Builder.prototype.findBuilderParent = function (target) {\r\n        return this.findParentElement(target, function (el) {\r\n            var id = el.getAttribute('builder-id') || el.id;\r\n            return Boolean(id && id.indexOf('builder-') === 0);\r\n        });\r\n    };\r\n    Builder.prototype.setUserAgent = function (userAgent) {\r\n        this.userAgent = userAgent || '';\r\n    };\r\n    /**\r\n     * Set a hook to modify events being tracked from builder, such as impressions and clicks\r\n     *\r\n     * For example, to track the model ID of each event associated with content for querying\r\n     * by mode, you can do\r\n     *\r\n     *    builder.setTrackingHook((event, context) => {\r\n     *      if (context.content) {\r\n     *        event.data.metadata.modelId = context.content.modelId\r\n     *      }\r\n     *    })\r\n     */\r\n    Builder.prototype.setTrackingHook = function (hook) {\r\n        this.trackingHooks.push(hook);\r\n    };\r\n    Builder.prototype.track = function (eventName, properties, context) {\r\n        if (properties === void 0) { properties = {}; }\r\n        // TODO: queue up track requests and fire them off when canTrack set to true - otherwise may get lots of clicks with no impressions\r\n        if (isIframe || !isBrowser || Builder.isPreviewing) {\r\n            return;\r\n        }\r\n        var apiKey = this.apiKey;\r\n        if (!apiKey) {\r\n            console.error('Builder integration error: Looks like the Builder SDK has not been initialized properly (your API key has not been set). Make sure you are calling `builder.init(\"«YOUR-API-KEY»\");` as early as possible in your application\\'s code.');\r\n            return;\r\n        }\r\n        var eventData = JSON.parse(JSON.stringify({\r\n            type: eventName,\r\n            data: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, omit(properties, 'meta')), { metadata: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({ sdkVersion: Builder.VERSION, url: location.href }, properties.meta), properties.metadata), ownerId: apiKey, userAttributes: this.getUserAttributes(), sessionId: this.sessionId, visitorId: this.visitorId }),\r\n        }));\r\n        for (var _i = 0, _a = this.trackingHooks; _i < _a.length; _i++) {\r\n            var hook = _a[_i];\r\n            var returnValue = hook(eventData, context || {});\r\n            if (returnValue) {\r\n                eventData = returnValue;\r\n            }\r\n        }\r\n        // batch events\r\n        this.eventsQueue.push(eventData);\r\n        if (this.canTrack) {\r\n            this.throttledClearEventsQueue();\r\n        }\r\n    };\r\n    Builder.prototype.getSessionId = function () {\r\n        var _this = this;\r\n        var sessionId = null;\r\n        try {\r\n            if (Builder.isBrowser && typeof sessionStorage !== 'undefined') {\r\n                sessionId = this.getCookie(sessionStorageKey);\r\n            }\r\n        }\r\n        catch (err) {\r\n            console.debug('Session storage error', err);\r\n            // It's ok\r\n        }\r\n        if (!sessionId) {\r\n            sessionId = uuid();\r\n        }\r\n        // Give the app a second to start up and set canTrack to false if needed\r\n        if (Builder.isBrowser) {\r\n            setTimeout(function () {\r\n                try {\r\n                    if (_this.canTrack) {\r\n                        _this.setCookie(sessionStorageKey, sessionId, datePlusMinutes(30));\r\n                    }\r\n                }\r\n                catch (err) {\r\n                    console.debug('Cookie setting error', err);\r\n                }\r\n            });\r\n        }\r\n        return sessionId;\r\n    };\r\n    Builder.prototype.getVisitorId = function () {\r\n        var _this = this;\r\n        if (this.visitorId) {\r\n            return this.visitorId;\r\n        }\r\n        var visitorId = null;\r\n        try {\r\n            if (Builder.isBrowser && typeof localStorage !== 'undefined') {\r\n                // TODO: cookie instead?\r\n                visitorId = localStorage.getItem(localStorageKey);\r\n            }\r\n        }\r\n        catch (err) {\r\n            console.debug('Local storage error', err);\r\n            // It's ok\r\n        }\r\n        if (!visitorId) {\r\n            visitorId = uuid();\r\n        }\r\n        this.visitorId = visitorId;\r\n        // Give the app a second to start up and set canTrack to false if needed\r\n        if (Builder.isBrowser) {\r\n            setTimeout(function () {\r\n                try {\r\n                    if (_this.canTrack && typeof localStorage !== 'undefined' && visitorId) {\r\n                        localStorage.setItem(localStorageKey, visitorId);\r\n                    }\r\n                }\r\n                catch (err) {\r\n                    console.debug('Session storage error', err);\r\n                }\r\n            });\r\n        }\r\n        return visitorId;\r\n    };\r\n    Builder.prototype.trackImpression = function (contentId, variationId, properties, context) {\r\n        if (isIframe || !isBrowser || Builder.isPreviewing) {\r\n            return;\r\n        }\r\n        // TODO: use this.track method\r\n        this.track('impression', {\r\n            contentId: contentId,\r\n            variationId: variationId !== contentId ? variationId : undefined,\r\n            metadata: properties,\r\n        }, context);\r\n    };\r\n    Builder.prototype.trackConversion = function (amount, contentId, variationId, customProperties, context) {\r\n        if (isIframe || !isBrowser || Builder.isPreviewing) {\r\n            return;\r\n        }\r\n        var meta = typeof contentId === 'object' ? contentId : customProperties;\r\n        var useContentId = typeof contentId === 'string' ? contentId : undefined;\r\n        this.track('conversion', { amount: amount, variationId: variationId, meta: meta, contentId: useContentId }, context);\r\n    };\r\n    Object.defineProperty(Builder.prototype, \"isDevelopmentEnv\", {\r\n        // TODO: set this for QA\r\n        get: function () {\r\n            // Automatic determining of development environment\r\n            return (Builder.isIframe ||\r\n                (Builder.isBrowser && (location.hostname === 'localhost' || location.port !== '')) ||\r\n                this.env !== 'production');\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Builder.prototype.trackInteraction = function (contentId, variationId, alreadyTrackedOne, event, context) {\r\n        if (alreadyTrackedOne === void 0) { alreadyTrackedOne = false; }\r\n        if (isIframe || !isBrowser || Builder.isPreviewing) {\r\n            return;\r\n        }\r\n        var target = event && event.target;\r\n        var targetBuilderElement = target && this.findBuilderParent(target);\r\n        function round(num) {\r\n            return Math.round(num * 1000) / 1000;\r\n        }\r\n        var metadata = {};\r\n        if (event) {\r\n            var clientX = event.clientX, clientY = event.clientY;\r\n            if (target) {\r\n                var targetRect = target.getBoundingClientRect();\r\n                var xOffset = clientX - targetRect.left;\r\n                var yOffset = clientY - targetRect.top;\r\n                var xRatio = round(xOffset / targetRect.width);\r\n                var yRatio = round(yOffset / targetRect.height);\r\n                metadata.targetOffset = {\r\n                    x: xRatio,\r\n                    y: yRatio,\r\n                };\r\n            }\r\n            if (targetBuilderElement) {\r\n                var targetRect = targetBuilderElement.getBoundingClientRect();\r\n                var xOffset = clientX - targetRect.left;\r\n                var yOffset = clientY - targetRect.top;\r\n                var xRatio = round(xOffset / targetRect.width);\r\n                var yRatio = round(yOffset / targetRect.height);\r\n                metadata.builderTargetOffset = {\r\n                    x: xRatio,\r\n                    y: yRatio,\r\n                };\r\n            }\r\n        }\r\n        var builderId = targetBuilderElement &&\r\n            (targetBuilderElement.getAttribute('builder-id') || targetBuilderElement.id);\r\n        if (builderId && targetBuilderElement) {\r\n            metadata.builderElementIndex = [].slice\r\n                .call(document.getElementsByClassName(builderId))\r\n                .indexOf(targetBuilderElement);\r\n        }\r\n        this.track('click', {\r\n            contentId: contentId,\r\n            metadata: metadata,\r\n            variationId: variationId !== contentId ? variationId : undefined,\r\n            unique: !alreadyTrackedOne,\r\n            targetBuilderElement: builderId || undefined,\r\n        }, context);\r\n    };\r\n    Builder.prototype.component = function (info) {\r\n        if (info === void 0) { info = {}; }\r\n        return Builder.component(info);\r\n    };\r\n    Object.defineProperty(Builder.prototype, \"apiKey\", {\r\n        get: function () {\r\n            return this.apiKey$.value;\r\n        },\r\n        set: function (key) {\r\n            this.apiKey$.next(key);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(Builder.prototype, \"authToken\", {\r\n        get: function () {\r\n            return this.authToken$.value;\r\n        },\r\n        set: function (token) {\r\n            this.authToken$.next(token);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Builder.prototype.modifySearch = function (search) {\r\n        return search.replace(/(^|&|\\?)(builder_.*?)=/gi, function (_match, group1, group2) { return group1 + group2.replace(/_/g, '.') + '='; });\r\n    };\r\n    Builder.prototype.setTestsFromUrl = function () {\r\n        var search = this.getLocation().search;\r\n        try {\r\n            var params = QueryString.parseDeep(this.modifySearch(search || '').substr(1));\r\n            var tests = params.builder && params.builder.tests;\r\n            if (tests && typeof tests === 'object') {\r\n                for (var key in tests) {\r\n                    if (tests.hasOwnProperty(key)) {\r\n                        this.setTestCookie(key, tests[key]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            console.debug('Error parsing tests from URL', e);\r\n        }\r\n    };\r\n    Builder.prototype.resetOverrides = function () {\r\n        // Ugly - pass down instances per request instead using react context\r\n        // or use builder.get('foo', { req, res }) in react...........\r\n        Builder.overrideUserAttributes = {};\r\n        this.cachebust = false;\r\n        this.noCache = false;\r\n        this.preview = false;\r\n        this.editingModel = null;\r\n        this.overrides = {};\r\n        this.env = 'production';\r\n        this.userAgent = '';\r\n        this.request = undefined;\r\n        this.response = undefined;\r\n    };\r\n    Builder.prototype.getOverridesFromQueryString = function () {\r\n        var location = this.getLocation();\r\n        try {\r\n            var params = QueryString.parseDeep(this.modifySearch(location.search || '').substr(1));\r\n            var builder = params.builder;\r\n            if (builder) {\r\n                var userAttributes = builder.userAttributes, overrides = builder.overrides, env = builder.env, host = builder.host, api = builder.api, cachebust = builder.cachebust, noCache = builder.noCache, preview = builder.preview, editing = builder.editing, frameEditing = builder.frameEditing, options = builder.options, overrideParams = builder.params;\r\n                if (userAttributes) {\r\n                    this.setUserAttributes(userAttributes);\r\n                }\r\n                if (options) {\r\n                    // picking only locale, includeRefs, and enrich for now\r\n                    this.queryOptions = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, (options.locale && { locale: options.locale })), (options.includeRefs && { includeRefs: options.includeRefs })), (options.enrich && { enrich: options.enrich }));\r\n                }\r\n                if (overrides) {\r\n                    this.overrides = overrides;\r\n                }\r\n                if (validEnvList.indexOf(env || api) > -1) {\r\n                    this.env = env || api;\r\n                }\r\n                if (Builder.isEditing) {\r\n                    var editingModel = frameEditing || editing || preview;\r\n                    if (editingModel && editingModel !== 'true') {\r\n                        this.editingModel = editingModel;\r\n                    }\r\n                }\r\n                if (cachebust) {\r\n                    this.cachebust = true;\r\n                }\r\n                if (noCache) {\r\n                    this.noCache = true;\r\n                }\r\n                if (preview) {\r\n                    this.preview = true;\r\n                }\r\n                if (params) {\r\n                    this.overrideParams = overrideParams;\r\n                }\r\n            }\r\n        }\r\n        catch (e) {\r\n            console.debug('Error parsing overrides from URL', e);\r\n        }\r\n    };\r\n    Builder.prototype.messageFrameLoaded = function () {\r\n        var _a;\r\n        (_a = window.parent) === null || _a === void 0 ? void 0 : _a.postMessage({\r\n            type: 'builder.loaded',\r\n            data: {\r\n                value: true,\r\n            },\r\n        }, '*');\r\n    };\r\n    Builder.prototype.bindMessageListeners = function () {\r\n        var _this = this;\r\n        addEventListener('message', function (event) {\r\n            var _a, _b, _c, _d;\r\n            var isTrusted = Builder.isTrustedHostForEvent(event);\r\n            if (!isTrusted)\r\n                return;\r\n            var data = event.data;\r\n            if (data) {\r\n                switch (data.type) {\r\n                    case 'builder.ping': {\r\n                        (_a = window.parent) === null || _a === void 0 ? void 0 : _a.postMessage({\r\n                            type: 'builder.pong',\r\n                            data: {},\r\n                        }, '*');\r\n                        break;\r\n                    }\r\n                    case 'builder.register': {\r\n                        // TODO: possibly do this for all...\r\n                        if (event.source === window) {\r\n                            break;\r\n                        }\r\n                        var options = data.data;\r\n                        if (!options) {\r\n                            break;\r\n                        }\r\n                        var type = options.type, info = options.info;\r\n                        // TODO: all must have name and can't conflict?\r\n                        var typeList = Builder.registry[type];\r\n                        if (!typeList) {\r\n                            typeList = Builder.registry[type] = [];\r\n                        }\r\n                        typeList.push(info);\r\n                        Builder.registryChange.next(Builder.registry);\r\n                        break;\r\n                    }\r\n                    case 'builder.settingsChange': {\r\n                        // TODO: possibly do this for all...\r\n                        if (event.source === window) {\r\n                            break;\r\n                        }\r\n                        var settings = data.data;\r\n                        if (!settings) {\r\n                            break;\r\n                        }\r\n                        Object.assign(Builder.settings, settings);\r\n                        Builder.settingsChange.next(Builder.settings);\r\n                        break;\r\n                    }\r\n                    case 'builder.registerEditor': {\r\n                        // TODO: possibly do this for all...\r\n                        if (event.source === window) {\r\n                            break;\r\n                        }\r\n                        var info_1 = data.data;\r\n                        if (!info_1) {\r\n                            break;\r\n                        }\r\n                        var hasComponent_1 = !!info_1.component;\r\n                        Builder.editors.every(function (thisInfo, index) {\r\n                            if (info_1.name === thisInfo.name) {\r\n                                if (thisInfo.component && !hasComponent_1) {\r\n                                    return false;\r\n                                }\r\n                                else {\r\n                                    Builder.editors[index] = thisInfo;\r\n                                }\r\n                                return false;\r\n                            }\r\n                            return true;\r\n                        });\r\n                        break;\r\n                    }\r\n                    case 'builder.triggerAnimation': {\r\n                        Builder.animator.triggerAnimation(data.data);\r\n                        break;\r\n                    }\r\n                    case 'builder.contentUpdate':\r\n                        var key = data.data.key || data.data.alias || data.data.entry || data.data.modelName;\r\n                        var contentData = data.data.data; // hmmm...\r\n                        var observer = _this.observersByKey[key];\r\n                        if (observer && !_this.noEditorUpdates[key]) {\r\n                            observer.next([contentData]);\r\n                        }\r\n                        break;\r\n                    case 'builder.getComponents':\r\n                        (_b = window.parent) === null || _b === void 0 ? void 0 : _b.postMessage({\r\n                            type: 'builder.components',\r\n                            data: Builder.components.map(function (item) { return Builder.prepareComponentSpecToSend(item); }),\r\n                        }, '*');\r\n                        break;\r\n                    case 'builder.editingModel':\r\n                        _this.editingModel = data.data.model;\r\n                        break;\r\n                    case 'builder.registerComponent':\r\n                        var componentData = data.data;\r\n                        Builder.addComponent(componentData);\r\n                        break;\r\n                    case 'builder.blockContentLoading':\r\n                        if (typeof data.data.model === 'string') {\r\n                            _this.blockContentLoading = data.data.model;\r\n                        }\r\n                        break;\r\n                    case 'builder.editingMode':\r\n                        var editingMode = data.data;\r\n                        if (editingMode) {\r\n                            _this.editingMode = true;\r\n                            document.body.classList.add('builder-editing');\r\n                        }\r\n                        else {\r\n                            _this.editingMode = false;\r\n                            document.body.classList.remove('builder-editing');\r\n                        }\r\n                        break;\r\n                    case 'builder.editingPageMode':\r\n                        var editingPageMode = data.data;\r\n                        Builder.editingPage = editingPageMode;\r\n                        break;\r\n                    case 'builder.overrideUserAttributes':\r\n                        var userAttributes = data.data;\r\n                        assign(Builder.overrideUserAttributes, userAttributes);\r\n                        _this.flushGetContentQueue(true);\r\n                        // TODO: refetch too\r\n                        break;\r\n                    case 'builder.overrideTestGroup':\r\n                        var _e = data.data, variationId = _e.variationId, contentId = _e.contentId;\r\n                        if (variationId && contentId) {\r\n                            _this.setTestCookie(contentId, variationId);\r\n                            _this.flushGetContentQueue(true);\r\n                        }\r\n                        break;\r\n                    case 'builder.evaluate': {\r\n                        var text = data.data.text;\r\n                        var args = data.data.arguments || [];\r\n                        var id_1 = data.data.id;\r\n                        // tslint:disable-next-line:no-function-constructor-with-string-args\r\n                        var fn = new Function(text);\r\n                        var result = void 0;\r\n                        var error = null;\r\n                        try {\r\n                            result = fn.apply(_this, args);\r\n                        }\r\n                        catch (err) {\r\n                            error = toError(err);\r\n                        }\r\n                        if (error) {\r\n                            (_c = window.parent) === null || _c === void 0 ? void 0 : _c.postMessage({\r\n                                type: 'builder.evaluateError',\r\n                                data: { id: id_1, error: error.message },\r\n                            }, '*');\r\n                        }\r\n                        else {\r\n                            if (result && typeof result.then === 'function') {\r\n                                result\r\n                                    .then(function (finalResult) {\r\n                                    var _a;\r\n                                    (_a = window.parent) === null || _a === void 0 ? void 0 : _a.postMessage({\r\n                                        type: 'builder.evaluateResult',\r\n                                        data: { id: id_1, result: finalResult },\r\n                                    }, '*');\r\n                                })\r\n                                    .catch(console.error);\r\n                            }\r\n                            else {\r\n                                (_d = window.parent) === null || _d === void 0 ? void 0 : _d.postMessage({\r\n                                    type: 'builder.evaluateResult',\r\n                                    data: { result: result, id: id_1 },\r\n                                }, '*');\r\n                            }\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    };\r\n    Object.defineProperty(Builder.prototype, \"defaultCanTrack\", {\r\n        get: function () {\r\n            return Boolean(Builder.isBrowser &&\r\n                navigator.userAgent.trim() &&\r\n                !navigator.userAgent.match(/bot|crawler|spider|robot|crawling|prerender|google|baidu|bing|msn|duckduckbot|teoma|slurp|yandex|phantom|headless|selenium|puppeteer/i) &&\r\n                !this.browserTrackingDisabled);\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Builder.prototype.init = function (apiKey, canTrack, req, res, authToken, apiVersion) {\r\n        if (canTrack === void 0) { canTrack = this.defaultCanTrack; }\r\n        if (req) {\r\n            this.request = req;\r\n        }\r\n        if (res) {\r\n            this.response = res;\r\n        }\r\n        this.canTrack = canTrack;\r\n        this.apiKey = apiKey;\r\n        if (authToken) {\r\n            this.authToken = authToken;\r\n        }\r\n        if (apiVersion) {\r\n            this.apiVersion = apiVersion;\r\n        }\r\n        return this;\r\n    };\r\n    Object.defineProperty(Builder.prototype, \"previewingModel\", {\r\n        get: function () {\r\n            var search = this.getLocation().search;\r\n            var params = QueryString.parse((search || '').substr(1));\r\n            return params['builder.preview'];\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    // TODO: allow adding location object as property and/or in constructor\r\n    Builder.prototype.getLocation = function () {\r\n        var _a;\r\n        var parsedLocation = {};\r\n        // in ssr mode\r\n        if (this.request) {\r\n            parsedLocation = parse((_a = this.request.url) !== null && _a !== void 0 ? _a : '');\r\n        }\r\n        else if (typeof location === 'object') {\r\n            // in the browser\r\n            parsedLocation = parse(location.href);\r\n        }\r\n        // IE11 bug with parsed path being empty string\r\n        // causes issues with our user targeting\r\n        if (parsedLocation.pathname === '') {\r\n            parsedLocation.pathname = '/';\r\n        }\r\n        return parsedLocation;\r\n    };\r\n    Builder.prototype.getUserAttributes = function (userAgent) {\r\n        if (userAgent === void 0) { userAgent = this.userAgent || ''; }\r\n        var isMobile = {\r\n            Android: function () {\r\n                return userAgent.match(/Android/i);\r\n            },\r\n            BlackBerry: function () {\r\n                return userAgent.match(/BlackBerry/i);\r\n            },\r\n            iOS: function () {\r\n                return userAgent.match(/iPhone|iPod/i);\r\n            },\r\n            Opera: function () {\r\n                return userAgent.match(/Opera Mini/i);\r\n            },\r\n            Windows: function () {\r\n                return userAgent.match(/IEMobile/i) || userAgent.match(/WPDesktop/i);\r\n            },\r\n            any: function () {\r\n                return (isMobile.Android() ||\r\n                    isMobile.BlackBerry() ||\r\n                    isMobile.iOS() ||\r\n                    isMobile.Opera() ||\r\n                    isMobile.Windows());\r\n            },\r\n        };\r\n        var isTablet = userAgent.match(/Tablet|iPad/i);\r\n        var url = this.getLocation();\r\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({ urlPath: url.pathname, host: url.host || url.hostname, \r\n            // TODO: maybe an option to choose to target off of mobile/tablet/desktop or just mobile/desktop\r\n            device: isTablet ? 'tablet' : isMobile.any() ? 'mobile' : 'desktop' }, Builder.overrideUserAttributes);\r\n    };\r\n    Builder.prototype.setUserAttributes = function (options) {\r\n        assign(Builder.overrideUserAttributes, options);\r\n        if (this.canTrack) {\r\n            this.setCookie(Builder.attributesCookieName, JSON.stringify(this.getUserAttributes()));\r\n        }\r\n        this.userAttributesChanged.next(options);\r\n    };\r\n    /**\r\n     * Set user attributes just for tracking purposes.\r\n     *\r\n     * Do this so properties exist on event objects for querying insights, but\r\n     * won't affect targeting\r\n     *\r\n     * Use this when you want to track properties but don't need to target off\r\n     * of them to optimize cache efficiency\r\n     */\r\n    Builder.prototype.setTrackingUserAttributes = function (attributes) {\r\n        assign(this.trackingUserAttributes, attributes);\r\n    };\r\n    Builder.prototype.get = function (modelName, options) {\r\n        var _a;\r\n        if (options === void 0) { options = {}; }\r\n        var instance = this;\r\n        var finalLocale = options.locale || ((_a = options.userAttributes) === null || _a === void 0 ? void 0 : _a.locale) || this.getUserAttributes().locale;\r\n        if (!('noTraverse' in options)) {\r\n            options.noTraverse = false;\r\n        }\r\n        var finalOptions = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, options), (finalLocale && {\r\n            locale: String(finalLocale),\r\n            userAttributes: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({ locale: String(finalLocale) }, options.userAttributes),\r\n        }));\r\n        if (!Builder.isBrowser) {\r\n            instance = new Builder(options.apiKey || this.apiKey, options.req, options.res, undefined, options.authToken || this.authToken, options.apiVersion || this.apiVersion);\r\n            instance.apiEndpoint = this.apiEndpoint;\r\n            instance.setUserAttributes(this.getUserAttributes());\r\n        }\r\n        else {\r\n            // NOTE: All these are when .init is not called and the customer\r\n            // directly calls .get on the singleton instance of Builder\r\n            if (options.apiKey && !this.apiKey) {\r\n                this.apiKey = options.apiKey;\r\n            }\r\n            if (options.authToken && !this.authToken) {\r\n                this.authToken = options.authToken;\r\n            }\r\n            if (options.apiVersion && !this.apiVersion) {\r\n                this.apiVersion = options.apiVersion;\r\n            }\r\n        }\r\n        return instance.queueGetContent(modelName, finalOptions).map(\r\n        /* map( */ function (matches) {\r\n            var match = matches && matches[0];\r\n            if (Builder.isStatic) {\r\n                return match;\r\n            }\r\n            var matchData = match && match.data;\r\n            if (!matchData) {\r\n                return null;\r\n            }\r\n            if (typeof matchData.blocksString !== 'undefined') {\r\n                matchData.blocks = JSON.parse(matchData.blocksString);\r\n                delete matchData.blocksString;\r\n            }\r\n            return {\r\n                // TODO: add ab test info here and other high level stuff\r\n                data: matchData,\r\n                id: match.id,\r\n                variationId: match.testVariationId || match.variationId || null,\r\n                testVariationId: match.testVariationId || match.variationId || null,\r\n                testVariationName: match.testVariationName || null,\r\n                lastUpdated: match.lastUpdated || null,\r\n            };\r\n        });\r\n        // );\r\n    };\r\n    // TODO: entry id in options\r\n    Builder.prototype.queueGetContent = function (modelName, options) {\r\n        var _this = this;\r\n        if (options === void 0) { options = {}; }\r\n        // TODO: if query do modelName + query\r\n        var key = options.key ||\r\n            options.alias ||\r\n            // TODO: SDKs only pass entry key when given to them, and never when editing...\r\n            // options.entry ||\r\n            // TODO: this is ugly - instead of multiple of same model with different options are sent\r\n            // say requires key/alias. Or if not perhaps make a reliable hash of the options and use that.\r\n            // TODO: store last user state on last request and if user attributes different now\r\n            // give a warning that need to use keys to request new contente\r\n            // (options &&\r\n            //   Object.keys(options).filter(key => key !== 'model').length &&\r\n            //   JSON.stringify({ model: modelName, ...options, initialContent: undefined })) ||\r\n            modelName;\r\n        var isEditingThisModel = this.editingModel === modelName;\r\n        // TODO: include params in this key........\r\n        var currentObservable = this.observersByKey[key];\r\n        // if (options.query && options.query._id) {\r\n        //   this.flushGetContentQueue([options])\r\n        // }\r\n        if (this.apiKey === 'DEMO' && !this.overrides[key] && !options.initialContent) {\r\n            options.initialContent = [];\r\n        }\r\n        var initialContent = options.initialContent;\r\n        // TODO: refresh option in options\r\n        if (currentObservable && (!currentObservable.value || options.cache)) {\r\n            // TODO: test if this ran, otherwise on 404 some observers may never be called...\r\n            if (currentObservable.value) {\r\n                nextTick(function () {\r\n                    // TODO: return a new observable and only that one fires subscribers, don't refire for existing ones\r\n                    currentObservable.next(currentObservable.value);\r\n                });\r\n            }\r\n            return currentObservable;\r\n        }\r\n        if (isEditingThisModel) {\r\n            if (Builder.isBrowser) {\r\n                parent.postMessage({ type: 'builder.updateContent', data: { options: options } }, '*');\r\n            }\r\n        }\r\n        if (!initialContent /* || isEditingThisModel */) {\r\n            if (!this.getContentQueue) {\r\n                this.getContentQueue = [];\r\n            }\r\n            this.getContentQueue.push((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, options), { model: modelName, key: key }));\r\n            if (this.getContentQueue && this.getContentQueue.length >= this.contentPerRequest) {\r\n                var queue_1 = this.getContentQueue.slice();\r\n                this.getContentQueue = [];\r\n                nextTick(function () {\r\n                    _this.flushGetContentQueue(false, queue_1);\r\n                });\r\n            }\r\n            else {\r\n                nextTick(function () {\r\n                    _this.flushGetContentQueue();\r\n                });\r\n            }\r\n        }\r\n        var observable = new BehaviorSubject(null);\r\n        this.observersByKey[key] = observable;\r\n        if (options.noEditorUpdates) {\r\n            this.noEditorUpdates[key] = true;\r\n        }\r\n        if (initialContent) {\r\n            nextTick(function () {\r\n                // TODO: need to testModify this I think...?\r\n                observable.next(initialContent);\r\n            });\r\n        }\r\n        return observable;\r\n    };\r\n    // this is needed to satisfy the Angular SDK, which used to rely on the more complex version of `requestUrl`.\r\n    // even though we only use `fetch()` now, we prefer to keep the old behavior and use the `fetch` that comes from\r\n    // the core SDK for consistency\r\n    Builder.prototype.requestUrl = function (url, options) {\r\n        return getFetch()(url, this.addSdkHeaders(options)).then(function (res) { return res.json(); });\r\n    };\r\n    Object.defineProperty(Builder.prototype, \"host\", {\r\n        get: function () {\r\n            switch (this.env) {\r\n                case 'qa':\r\n                    return 'https://qa.builder.io';\r\n                case 'test':\r\n                    return 'https://builder-io-test.web.app';\r\n                case 'fast':\r\n                    return 'https://fast.builder.io';\r\n                case 'cloud':\r\n                    return 'https://cloud.builder.io';\r\n                case 'cdn2':\r\n                    return 'https://cdn2.builder.io';\r\n                case 'cdn-qa':\r\n                    return 'https://cdn-qa.builder.io';\r\n                case 'development':\r\n                case 'dev':\r\n                    return 'http://localhost:5000';\r\n                case 'cdn-prod':\r\n                    return 'https://cdn.builder.io';\r\n                default:\r\n                    return Builder.overrideHost || 'https://cdn.builder.io';\r\n            }\r\n        },\r\n        enumerable: false,\r\n        configurable: true\r\n    });\r\n    Builder.prototype.getSdkHeaders = function () {\r\n        if (!Builder.sdkInfo) {\r\n            return {};\r\n        }\r\n        return {\r\n            'X-Builder-SDK': Builder.sdkInfo.name,\r\n            'X-Builder-SDK-GEN': '1',\r\n            'X-Builder-SDK-Version': Builder.sdkInfo.version,\r\n        };\r\n    };\r\n    Builder.prototype.addSdkHeaders = function (fetchOptions) {\r\n        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, fetchOptions), { headers: (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, fetchOptions.headers), this.getSdkHeaders()) });\r\n    };\r\n    Builder.prototype.makeFetchApiCall = function (url, requestOptions) {\r\n        return getFetch()(url, this.addSdkHeaders(requestOptions));\r\n    };\r\n    Builder.prototype.flattenMongoQuery = function (obj, _current, _res) {\r\n        if (_res === void 0) { _res = {}; }\r\n        for (var key in obj) {\r\n            var value = obj[key];\r\n            var newKey = _current ? _current + '.' + key : key;\r\n            if (value &&\r\n                typeof value === 'object' &&\r\n                !Array.isArray(value) &&\r\n                !Object.keys(value).find(function (item) { return item.startsWith('$'); })) {\r\n                this.flattenMongoQuery(value, newKey, _res);\r\n            }\r\n            else {\r\n                _res[newKey] = value;\r\n            }\r\n        }\r\n        return _res;\r\n    };\r\n    Builder.prototype.flushGetContentQueue = function (usePastQueue, useQueue) {\r\n        var _this = this;\r\n        var _a;\r\n        if (usePastQueue === void 0) { usePastQueue = false; }\r\n        if (!this.apiKey) {\r\n            throw new Error(\"Fetching content failed, expected apiKey to be defined instead got: \".concat(this.apiKey));\r\n        }\r\n        if (this.apiVersion) {\r\n            if (!['v1', 'v3'].includes(this.apiVersion)) {\r\n                throw new Error(\"Invalid apiVersion: expected 'v1' or 'v3', received '\".concat(this.apiVersion, \"'\"));\r\n            }\r\n        }\r\n        else {\r\n            this.apiVersion = DEFAULT_API_VERSION;\r\n        }\r\n        if (!usePastQueue && !this.getContentQueue) {\r\n            return;\r\n        }\r\n        var queue = useQueue || (usePastQueue ? this.priorContentQueue : this.getContentQueue) || [];\r\n        // TODO: do this on every request send?\r\n        this.getOverridesFromQueryString();\r\n        var queryParams = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({ \r\n            // TODO: way to force a request to be in a separate queue. or just lower queue limit to be 1 by default\r\n            omit: queue[0].omit || 'meta.componentsUsed', apiKey: this.apiKey }, queue[0].options), this.queryOptions);\r\n        if (queue[0].locale) {\r\n            queryParams.locale = queue[0].locale;\r\n        }\r\n        if (queue[0].fields) {\r\n            queryParams.fields = queue[0].fields;\r\n        }\r\n        if (queue[0].format) {\r\n            queryParams.format = queue[0].format;\r\n        }\r\n        if ('noTraverse' in queue[0]) {\r\n            queryParams.noTraverse = queue[0].noTraverse;\r\n        }\r\n        if ('includeUnpublished' in queue[0]) {\r\n            queryParams.includeUnpublished = queue[0].includeUnpublished;\r\n        }\r\n        if (queue[0].sort) {\r\n            queryParams.sort = queue[0].sort;\r\n        }\r\n        var pageQueryParams = (typeof location !== 'undefined'\r\n            ? QueryString.parseDeep(location.search.substr(1))\r\n            : undefined) || {}; // TODO: WHAT about SSR (this.request) ?\r\n        var userAttributes = \r\n        // FIXME: HACK: only checks first in queue for user attributes overrides, should check all\r\n        // TODO: merge user attributes provided here with defaults and current user attiributes (?)\r\n        queue && queue[0].userAttributes\r\n            ? queue[0].userAttributes\r\n            : this.targetContent\r\n                ? this.getUserAttributes()\r\n                : {\r\n                    urlPath: this.getLocation().pathname,\r\n                };\r\n        var fullUrlQueueItem = queue.find(function (item) { return !!item.includeUrl; });\r\n        if (fullUrlQueueItem) {\r\n            var location_1 = this.getLocation();\r\n            if (location_1.origin) {\r\n                queryParams.url = \"\".concat(location_1.origin).concat(location_1.pathname).concat(location_1.search);\r\n            }\r\n        }\r\n        var urlQueueItem = useQueue === null || useQueue === void 0 ? void 0 : useQueue.find(function (item) { return item.url; });\r\n        if (urlQueueItem === null || urlQueueItem === void 0 ? void 0 : urlQueueItem.url) {\r\n            userAttributes.urlPath = urlQueueItem.url.split('?')[0];\r\n        }\r\n        // TODO: merge in the attribute from query string ones\r\n        // TODO: make this an option per component/request\r\n        queryParams.userAttributes = JSON.stringify(userAttributes);\r\n        if (!usePastQueue && !useQueue) {\r\n            this.priorContentQueue = queue;\r\n            this.getContentQueue = null;\r\n        }\r\n        var cachebust = this.cachebust ||\r\n            isIframe ||\r\n            pageQueryParams.cachebust ||\r\n            pageQueryParams['builder.cachebust'];\r\n        if (cachebust || this.env !== 'production') {\r\n            queryParams.cachebust = true;\r\n        }\r\n        if (Builder.isEditing) {\r\n            queryParams.isEditing = true;\r\n        }\r\n        if (this.noCache || this.env !== 'production') {\r\n            queryParams.noCache = true;\r\n        }\r\n        if (size(this.overrides)) {\r\n            for (var key in this.overrides) {\r\n                if (this.overrides.hasOwnProperty(key)) {\r\n                    queryParams[\"overrides.\".concat(key)] = this.overrides[key];\r\n                }\r\n            }\r\n        }\r\n        for (var _i = 0, queue_2 = queue; _i < queue_2.length; _i++) {\r\n            var options = queue_2[_i];\r\n            var format_1 = options.format;\r\n            if (format_1) {\r\n                queryParams.format = format_1;\r\n            }\r\n            // TODO: remove me and make permodel\r\n            if (options.static) {\r\n                queryParams.static = options.static;\r\n            }\r\n            if (options.cachebust) {\r\n                queryParams.cachebust = options.cachebust;\r\n            }\r\n            if (isPositiveNumber(options.cacheSeconds)) {\r\n                queryParams.cacheSeconds = options.cacheSeconds;\r\n            }\r\n            if (isPositiveNumber(options.staleCacheSeconds)) {\r\n                queryParams.staleCacheSeconds = options.staleCacheSeconds;\r\n            }\r\n            if (this.apiEndpoint === 'content') {\r\n                queryParams.includeRefs = true;\r\n            }\r\n            var properties = [\r\n                'prerender',\r\n                'extractCss',\r\n                'limit',\r\n                'offset',\r\n                'query',\r\n                'preview',\r\n                'model',\r\n                'entry',\r\n                'rev',\r\n                'static',\r\n                'includeRefs',\r\n            ];\r\n            for (var _b = 0, properties_1 = properties; _b < properties_1.length; _b++) {\r\n                var key = properties_1[_b];\r\n                var value = options[key];\r\n                if (value !== undefined) {\r\n                    if (this.apiEndpoint === 'query') {\r\n                        queryParams.options = queryParams.options || {};\r\n                        queryParams.options[options.key] = queryParams.options[options.key] || {};\r\n                        queryParams.options[options.key][key] = JSON.stringify(value);\r\n                    }\r\n                    else {\r\n                        queryParams[key] = JSON.stringify(value);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if (this.preview && this.previewingModel === ((_a = queue === null || queue === void 0 ? void 0 : queue[0]) === null || _a === void 0 ? void 0 : _a.model)) {\r\n            queryParams.preview = 'true';\r\n        }\r\n        var hasParams = Object.keys(queryParams).length > 0;\r\n        // TODO: option to force dev or qa api here\r\n        var host = this.host;\r\n        var keyNames = queue.map(function (item) { return encodeURIComponent(item.key); }).join(',');\r\n        if (this.overrideParams) {\r\n            var params = omit(QueryString.parse(this.overrideParams), 'apiKey');\r\n            assign(queryParams, params);\r\n        }\r\n        var format = queryParams.format;\r\n        var isApiCallForCodegen = format === 'solid' || format === 'react';\r\n        var isApiCallForCodegenOrQuery = isApiCallForCodegen || this.apiEndpoint === 'query';\r\n        if (this.apiEndpoint === 'content') {\r\n            if (queue[0].query) {\r\n                var flattened = this.flattenMongoQuery({ query: queue[0].query });\r\n                for (var key in flattened) {\r\n                    queryParams[key] = flattened[key];\r\n                }\r\n                delete queryParams.query;\r\n            }\r\n        }\r\n        var queryStr = QueryString.stringifyDeep(queryParams);\r\n        var fetchOptions = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({ headers: {} }, queue[0].fetchOptions);\r\n        if (this.authToken) {\r\n            fetchOptions.headers = (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, fetchOptions.headers), { Authorization: \"Bearer \".concat(this.authToken) });\r\n        }\r\n        var url;\r\n        if (isApiCallForCodegen) {\r\n            url = \"\".concat(host, \"/api/v1/codegen/\").concat(this.apiKey, \"/\").concat(keyNames);\r\n        }\r\n        else if (this.apiEndpoint === 'query') {\r\n            url = \"\".concat(host, \"/api/v3/query/\").concat(this.apiKey, \"/\").concat(keyNames);\r\n        }\r\n        else {\r\n            url = \"\".concat(host, \"/api/v3/content/\").concat(queue[0].model);\r\n        }\r\n        url = url + (queryParams && hasParams ? \"?\".concat(queryStr) : '');\r\n        var promise = this.makeFetchApiCall(url, fetchOptions)\r\n            .then(function (res) { return res.json(); })\r\n            .then(function (result) {\r\n            for (var _i = 0, queue_3 = queue; _i < queue_3.length; _i++) {\r\n                var options = queue_3[_i];\r\n                var keyName = options.key;\r\n                if (options.model === _this.blockContentLoading && !options.noEditorUpdates) {\r\n                    continue;\r\n                }\r\n                var isEditingThisModel = _this.editingModel === options.model;\r\n                if (isEditingThisModel && Builder.isEditing) {\r\n                    parent.postMessage({ type: 'builder.updateContent', data: { options: options } }, '*');\r\n                    // return;\r\n                }\r\n                var observer = _this.observersByKey[keyName];\r\n                if (!observer) {\r\n                    return;\r\n                }\r\n                var data = isApiCallForCodegenOrQuery ? result[keyName] : result.results;\r\n                var sorted = data; // sortBy(data, item => item.priority);\r\n                if (data) {\r\n                    var testModifiedResults = Builder.isServer\r\n                        ? sorted\r\n                        : _this.processResultsForTests(sorted);\r\n                    observer.next(testModifiedResults);\r\n                }\r\n                else {\r\n                    var search = _this.getLocation().search;\r\n                    if ((search || '').includes('builder.preview=' + options.model)) {\r\n                        var previewData = {\r\n                            id: 'preview',\r\n                            name: 'Preview',\r\n                            data: {},\r\n                        };\r\n                        observer.next([previewData]);\r\n                    }\r\n                    observer.next([]);\r\n                }\r\n            }\r\n        }, function (err) {\r\n            for (var _i = 0, queue_4 = queue; _i < queue_4.length; _i++) {\r\n                var options = queue_4[_i];\r\n                var observer = _this.observersByKey[options.key];\r\n                if (!observer) {\r\n                    return;\r\n                }\r\n                observer.error(err);\r\n            }\r\n        });\r\n        return promise;\r\n    };\r\n    Builder.prototype.processResultsForTests = function (results) {\r\n        var _this = this;\r\n        var _a;\r\n        var mappedResults = results.map(function (item) {\r\n            if (!item.variations) {\r\n                return item;\r\n            }\r\n            var cookieValue = _this.getTestCookie(item.id);\r\n            var cookieVariation = cookieValue === item.id ? item : item.variations[cookieValue];\r\n            if (cookieVariation) {\r\n                return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, item), { data: cookieVariation.data, variationId: cookieValue, testVariationId: cookieValue, testVariationName: cookieVariation.name });\r\n            }\r\n            if (_this.canTrack && item.variations && size(item.variations)) {\r\n                var n = 0;\r\n                var random = Math.random();\r\n                for (var id in item.variations) {\r\n                    var variation = item.variations[id];\r\n                    var testRatio = variation.testRatio;\r\n                    n += testRatio;\r\n                    if (random < n) {\r\n                        _this.setTestCookie(item.id, variation.id);\r\n                        var variationName = variation.name || (variation.id === item.id ? 'Default variation' : '');\r\n                        return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, item), { data: variation.data, variationId: variation.id, testVariationId: variation.id, variationName: variationName, testVariationName: variationName });\r\n                    }\r\n                }\r\n                _this.setTestCookie(item.id, item.id);\r\n            }\r\n            return (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({}, item), { variationId: item.id }), (item.variations &&\r\n                size(item.variations) && {\r\n                testVariationId: item.id,\r\n                testVariationName: 'Default variation',\r\n            }));\r\n        });\r\n        if (isIframe) {\r\n            (_a = window.parent) === null || _a === void 0 ? void 0 : _a.postMessage({ type: 'builder.contentResults', data: { results: mappedResults } }, '*');\r\n        }\r\n        return mappedResults;\r\n    };\r\n    Builder.prototype.getTestCookie = function (contentId) {\r\n        return this.getCookie(\"\".concat(this.testCookiePrefix, \".\").concat(contentId));\r\n    };\r\n    Builder.prototype.setTestCookie = function (contentId, variationId) {\r\n        if (!this.canTrack) {\r\n            this.cookieQueue.push([contentId, variationId]);\r\n            return;\r\n        }\r\n        // 30 days from now\r\n        var future = new Date();\r\n        future.setDate(future.getDate() + 30);\r\n        return this.setCookie(\"\".concat(this.testCookiePrefix, \".\").concat(contentId), variationId, future);\r\n    };\r\n    Builder.prototype.getCookie = function (name) {\r\n        if (this.cookies) {\r\n            return this.cookies.get(name);\r\n        }\r\n        return Builder.isBrowser && getCookie(name);\r\n    };\r\n    Builder.prototype.setCookie = function (name, value, expires) {\r\n        if (this.cookies && !(Builder.isServer && Builder.isStatic)) {\r\n            return this.cookies.set(name, value, {\r\n                expires: expires,\r\n                secure: this.getLocation().protocol === 'https:',\r\n            });\r\n        }\r\n        return Builder.isBrowser && setCookie(name, value, expires);\r\n    };\r\n    Builder.prototype.getContent = function (modelName, options) {\r\n        if (options === void 0) { options = {}; }\r\n        if (!this.apiKey) {\r\n            throw new Error(\"Fetching content from model \".concat(modelName, \" failed, expected apiKey to be defined instead got: \").concat(this.apiKey));\r\n        }\r\n        return this.queueGetContent(modelName, options);\r\n    };\r\n    Builder.prototype.getAll = function (modelName, options) {\r\n        if (options === void 0) { options = {}; }\r\n        var instance = this;\r\n        if (!Builder.isBrowser) {\r\n            instance = new Builder(options.apiKey || this.apiKey, options.req, options.res, false, options.authToken || this.authToken, options.apiVersion || this.apiVersion);\r\n            instance.setUserAttributes(this.getUserAttributes());\r\n        }\r\n        else {\r\n            // NOTE: All these are when .init is not called and the customer\r\n            // directly calls .get on the singleton instance of Builder\r\n            if (options.apiKey && !this.apiKey) {\r\n                this.apiKey = options.apiKey;\r\n            }\r\n            if (options.authToken && !this.authToken) {\r\n                this.authToken = options.authToken;\r\n            }\r\n            if (options.apiVersion && !this.apiVersion) {\r\n                this.apiVersion = options.apiVersion;\r\n            }\r\n        }\r\n        // Set noTraverse=true if NOT already passed by user, for query performance\r\n        if (!('noTraverse' in options)) {\r\n            options.noTraverse = true;\r\n        }\r\n        return instance\r\n            .getContent(modelName, (0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)((0,tslib__WEBPACK_IMPORTED_MODULE_1__.__assign)({ limit: 30 }, options), { key: options.key ||\r\n                // Make the key include all options, so we don't reuse cache for the same content fetched\r\n                // with different options\r\n                Builder.isBrowser\r\n                ? \"\".concat(modelName, \":\").concat(hash_sum__WEBPACK_IMPORTED_MODULE_0___default()(omit(options, 'initialContent', 'req', 'res')))\r\n                : undefined }))\r\n            .promise();\r\n    };\r\n    Builder.VERSION = SDK_VERSION;\r\n    Builder.components = [];\r\n    /**\r\n     * Makes it so that a/b tests generate code like {@link\r\n     * https://www.builder.io/blog/high-performance-no-code#__next:~:text=Static%20generated%20A%2FB%20testing}\r\n     * instead of the old way where we render only one test group at a time on the\r\n     * server. This is the preferred/better way not and we should ultimately make it\r\n     * the default\r\n     */\r\n    Builder.isStatic = true;\r\n    Builder.animator = new Animator();\r\n    Builder.nextTick = nextTick;\r\n    Builder.throttle = throttle;\r\n    Builder.editors = [];\r\n    Builder.trustedHosts = [\r\n        '*.beta.builder.io',\r\n        'beta.builder.io',\r\n        'builder.io',\r\n        'localhost',\r\n        'qa.builder.io',\r\n    ];\r\n    Builder.plugins = [];\r\n    Builder.actions = [];\r\n    Builder.registry = {};\r\n    Builder.attributesCookieName = 'builder.userAttributes';\r\n    Builder.registryChange = new BehaviorSubject({});\r\n    Builder._editingPage = false;\r\n    Builder.isIframe = isIframe;\r\n    Builder.isBrowser = isBrowser;\r\n    Builder.isReactNative = isReactNative;\r\n    Builder.isServer = !isBrowser && !isReactNative;\r\n    Builder.previewingModel = Builder.isBrowser && getQueryParam(location.href, 'builder.preview');\r\n    Builder.settings = {};\r\n    Builder.settingsChange = new BehaviorSubject({});\r\n    // TODO: this is quick and dirty, do better implementation later. Also can be unreliable\r\n    // if page 301s etc. Use a query param instead? also could have issues with redirects. Injecting var could\r\n    // work but is async...\r\n    Builder.isEditing = Boolean(isIframe &&\r\n        ((document.referrer && document.referrer.match(/builder\\.io|localhost:1234/)) ||\r\n            location.search.indexOf('builder.frameEditing=') !== -1));\r\n    Builder.isPreviewing = Boolean(isBrowser &&\r\n        (location.search.indexOf('builder.preview=') !== -1 ||\r\n            location.search.indexOf('builder.frameEditing=') !== -1));\r\n    Builder.isReact = false;\r\n    Builder.sdkInfo = undefined;\r\n    Builder.overrideUserAttributes = {};\r\n    return Builder;\r\n}());\n\nvar builder = new Builder(null, undefined, undefined, true);\r\nBuilder.singletonInstance = builder;\n\n\n//# sourceMappingURL=index.esm.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGJ1aWxkZXIuaW8vc2RrL2Rpc3QvaW5kZXguZXNtLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFpQztBQUNMOztBQUU1QjtBQUNBOztBQUVBO0FBQ0EseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRCxjQUFjO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3QkFBd0Isa0JBQWtCO0FBQzFDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhDQUE4QyxxQkFBcUI7QUFDbkU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQywrRUFBK0U7QUFDbEg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsNENBQTRDO0FBQzVDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsOEZBQThGLGtEQUFrRDtBQUNoSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsdUNBQXVDLFVBQVU7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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQywrQ0FBUSxDQUFDLCtDQUFRLEdBQUcsV0FBVyxjQUFjO0FBQ2hGO0FBQ0E7QUFDQTtBQUNBLG1EQUFtRCwrQ0FBSTtBQUN2RCw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNEQUFzRDtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQ7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtREFBbUQ7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7O0FBRXdGO0FBQ3hGIiwic291cmNlcyI6WyIvVXNlcnMvYXYvRGVza3RvcC9hdnN0dWRpby9hcnRpY2hva2UvYnVpbGRlci1hcHAvbm9kZV9tb2R1bGVzL0BidWlsZGVyLmlvL3Nkay9kaXN0L2luZGV4LmVzbS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBfX2Fzc2lnbiB9IGZyb20gJ3RzbGliJztcbmltcG9ydCBoYXNoIGZyb20gJ2hhc2gtc3VtJztcblxuKGZ1bmN0aW9uICgpIHtcbiAgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnIHx8IHR5cGVvZiB3aW5kb3cuQ3VzdG9tRXZlbnQgPT09ICdmdW5jdGlvbicpIHJldHVybiBmYWxzZTtcblxuICBmdW5jdGlvbiBDdXN0b21FdmVudChldmVudCwgcGFyYW1zKSB7XG4gICAgcGFyYW1zID0gcGFyYW1zIHx8IHsgYnViYmxlczogZmFsc2UsIGNhbmNlbGFibGU6IGZhbHNlLCBkZXRhaWw6IG51bGwgfTtcbiAgICB2YXIgZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XG4gICAgZXZ0LmluaXRDdXN0b21FdmVudChldmVudCwgcGFyYW1zLmJ1YmJsZXMsIHBhcmFtcy5jYW5jZWxhYmxlLCBwYXJhbXMuZGV0YWlsKTtcbiAgICByZXR1cm4gZXZ0O1xuICB9XG5cbiAgd2luZG93LkN1c3RvbUV2ZW50ID0gQ3VzdG9tRXZlbnQ7XG59KSgpO1xuXG52YXIgaXNTYWZhcmkgPSB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJlxyXG4gICAgL14oKD8hY2hyb21lfGFuZHJvaWQpLikqc2FmYXJpL2kudGVzdCh3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCk7XHJcbnZhciBpc0NsaWVudCA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnO1xyXG4vLyBUT0RPOiBxdWV1ZSBhbGwgb2YgdGhlc2UgaW4gYSBkZWJvdW5jZU5leHRUaWNrXHJcbmZ1bmN0aW9uIG5leHRUaWNrKGZuKSB7XHJcbiAgICAvLyBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3MubmV4dFRpY2spIHtcclxuICAgIC8vICAgY29uc29sZS5sb2coJ3Byb2Nlc3MubmV4dFRpY2s/Jyk7XHJcbiAgICAvLyAgIHByb2Nlc3MubmV4dFRpY2soZm4pO1xyXG4gICAgLy8gICByZXR1cm47XHJcbiAgICAvLyB9XHJcbiAgICAvLyBGSVhNRTogZml4IHRoZSByZWFsIHNhZmFyaSBpc3N1ZSBvZiB0aGlzIHJhbmRvbWx5IG5vdCB3b3JraW5nXHJcbiAgICBpZiAoIWlzQ2xpZW50IHx8IGlzU2FmYXJpIHx8IHR5cGVvZiBNdXRhdGlvbk9ic2VydmVyID09PSAndW5kZWZpbmVkJykge1xyXG4gICAgICAgIHNldFRpbWVvdXQoZm4pO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIHZhciBjYWxsZWQgPSAwO1xyXG4gICAgdmFyIG9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24gKCkgeyByZXR1cm4gZm4oKTsgfSk7XHJcbiAgICB2YXIgZWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKCcnKTtcclxuICAgIG9ic2VydmVyLm9ic2VydmUoZWxlbWVudCwge1xyXG4gICAgICAgIGNoYXJhY3RlckRhdGE6IHRydWUsXHJcbiAgICB9KTtcclxuICAgIC8vIHRzbGludDpkaXNhYmxlLW5leHQtbGluZVxyXG4gICAgZWxlbWVudC5kYXRhID0gU3RyaW5nKChjYWxsZWQgPSArK2NhbGxlZCkpO1xyXG59XG5cbnZhciBQUk9QRVJUWV9OQU1FX0RFTllfTElTVCA9IE9iamVjdC5mcmVlemUoWydfX3Byb3RvX18nLCAncHJvdG90eXBlJywgJ2NvbnN0cnVjdG9yJ10pO1xyXG4vLyBUT0RPOiB1bml0IHRlc3RzXHJcbnZhciBRdWVyeVN0cmluZyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFF1ZXJ5U3RyaW5nKCkge1xyXG4gICAgfVxyXG4gICAgUXVlcnlTdHJpbmcucGFyc2VEZWVwID0gZnVuY3Rpb24gKHF1ZXJ5U3RyaW5nKSB7XHJcbiAgICAgICAgdmFyIG9iaiA9IHRoaXMucGFyc2UocXVlcnlTdHJpbmcpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLmRlZXBlbihvYmopO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5U3RyaW5nLnN0cmluZ2lmeURlZXAgPSBmdW5jdGlvbiAob2JqKSB7XHJcbiAgICAgICAgdmFyIG1hcCA9IHRoaXMuZmxhdHRlbihvYmopO1xyXG4gICAgICAgIHJldHVybiB0aGlzLnN0cmluZ2lmeShtYXApO1xyXG4gICAgfTtcclxuICAgIFF1ZXJ5U3RyaW5nLnBhcnNlID0gZnVuY3Rpb24gKHF1ZXJ5U3RyaW5nKSB7XHJcbiAgICAgICAgdmFyIHF1ZXJ5ID0ge307XHJcbiAgICAgICAgdmFyIHBhaXJzID0gKHF1ZXJ5U3RyaW5nWzBdID09PSAnPycgPyBxdWVyeVN0cmluZy5zdWJzdHIoMSkgOiBxdWVyeVN0cmluZykuc3BsaXQoJyYnKTtcclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHBhaXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBwYWlyID0gcGFpcnNbaV0uc3BsaXQoJz0nKTtcclxuICAgICAgICAgICAgLy8gVE9ETzogbm9kZSBzdXBwb3J0P1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgcXVlcnlbZGVjb2RlVVJJQ29tcG9uZW50KHBhaXJbMF0pXSA9IGRlY29kZVVSSUNvbXBvbmVudChwYWlyWzFdIHx8ICcnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIC8vIElnbm9yZSBtYWxmb3JtZWQgVVJJIGNvbXBvbmVudHNcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcXVlcnk7XHJcbiAgICB9O1xyXG4gICAgUXVlcnlTdHJpbmcuc3RyaW5naWZ5ID0gZnVuY3Rpb24gKG1hcCkge1xyXG4gICAgICAgIHZhciBzdHIgPSAnJztcclxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gbWFwKSB7XHJcbiAgICAgICAgICAgIGlmIChtYXAuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gbWFwW2tleV07XHJcbiAgICAgICAgICAgICAgICBpZiAoc3RyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RyICs9ICcmJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHN0ciArPSBlbmNvZGVVUklDb21wb25lbnQoa2V5KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHN0cjtcclxuICAgIH07XHJcbiAgICBRdWVyeVN0cmluZy5kZWVwZW4gPSBmdW5jdGlvbiAobWFwKSB7XHJcbiAgICAgICAgLy8gRklYTUU7IFNob3VsZCBiZSB0eXBlIFRyZWUgPSBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBUcmVlPlxyXG4gICAgICAgIC8vIHJlcXVpcmVzIGEgdHlwZXNjcmlwdCB1cGdyYWRlLlxyXG4gICAgICAgIHZhciBvdXRwdXQgPSB7fTtcclxuICAgICAgICBmb3IgKHZhciBrIGluIG1hcCkge1xyXG4gICAgICAgICAgICB2YXIgdCA9IG91dHB1dDtcclxuICAgICAgICAgICAgdmFyIHBhcnRzID0gay5zcGxpdCgnLicpO1xyXG4gICAgICAgICAgICB2YXIga2V5ID0gcGFydHMucG9wKCk7XHJcbiAgICAgICAgICAgIGZvciAodmFyIF9pID0gMCwgcGFydHNfMSA9IHBhcnRzOyBfaSA8IHBhcnRzXzEubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFydCA9IHBhcnRzXzFbX2ldO1xyXG4gICAgICAgICAgICAgICAgYXNzZXJ0QWxsb3dlZFByb3BlcnR5TmFtZShwYXJ0KTtcclxuICAgICAgICAgICAgICAgIHQgPSB0W3BhcnRdID0gdFtwYXJ0XSB8fCB7fTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0W2tleV0gPSBtYXBba107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBvdXRwdXQ7XHJcbiAgICB9O1xyXG4gICAgUXVlcnlTdHJpbmcuZmxhdHRlbiA9IGZ1bmN0aW9uIChvYmosIF9jdXJyZW50LCBfcmVzKSB7XHJcbiAgICAgICAgaWYgKF9yZXMgPT09IHZvaWQgMCkgeyBfcmVzID0ge307IH1cclxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IG9ialtrZXldO1xyXG4gICAgICAgICAgICB2YXIgbmV3S2V5ID0gX2N1cnJlbnQgPyBfY3VycmVudCArICcuJyArIGtleSA6IGtleTtcclxuICAgICAgICAgICAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmxhdHRlbih2YWx1ZSwgbmV3S2V5LCBfcmVzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIF9yZXNbbmV3S2V5XSA9IHZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBfcmVzO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBRdWVyeVN0cmluZztcclxufSgpKTtcclxuZnVuY3Rpb24gYXNzZXJ0QWxsb3dlZFByb3BlcnR5TmFtZShuYW1lKSB7XHJcbiAgICBpZiAoUFJPUEVSVFlfTkFNRV9ERU5ZX0xJU1QuaW5kZXhPZihuYW1lKSA+PSAwKVxyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcIlByb3BlcnR5IG5hbWUgXFxcIlwiLmNvbmNhdChuYW1lLCBcIlxcXCIgaXMgbm90IGFsbG93ZWRcIikpO1xyXG59XG5cbnZhciBTdWJzY3JpcHRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTdWJzY3JpcHRpb24obGlzdGVuZXJzLCBsaXN0ZW5lcikge1xyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0gbGlzdGVuZXJzO1xyXG4gICAgICAgIHRoaXMubGlzdGVuZXIgPSBsaXN0ZW5lcjtcclxuICAgICAgICB0aGlzLnVuc3Vic2NyaWJlZCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMub3RoZXJTdWJzY3JpcHRpb25zID0gW107XHJcbiAgICB9XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoU3Vic2NyaXB0aW9uLnByb3RvdHlwZSwgXCJjbG9zZWRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy51bnN1YnNjcmliZWQ7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgU3Vic2NyaXB0aW9uLnByb3RvdHlwZS5hZGQgPSBmdW5jdGlvbiAoc3Vic2NyaXB0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5vdGhlclN1YnNjcmlwdGlvbnMucHVzaChzdWJzY3JpcHRpb24pO1xyXG4gICAgfTtcclxuICAgIFN1YnNjcmlwdGlvbi5wcm90b3R5cGUudW5zdWJzY3JpYmUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMudW5zdWJzY3JpYmVkKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMubGlzdGVuZXIgJiYgdGhpcy5saXN0ZW5lcnMpIHtcclxuICAgICAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5saXN0ZW5lcnMuaW5kZXhPZih0aGlzLmxpc3RlbmVyKTtcclxuICAgICAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5vdGhlclN1YnNjcmlwdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoc3ViKSB7IHJldHVybiBzdWIudW5zdWJzY3JpYmUoKTsgfSk7XHJcbiAgICAgICAgdGhpcy51bnN1YnNjcmliZWQgPSB0cnVlO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBTdWJzY3JpcHRpb247XHJcbn0oKSk7XHJcbi8vIFRPRE86IGZvbGxvdyBtaW5pbWFsIGJhc2ljIHNwZWM6IGh0dHBzOi8vZ2l0aHViLmNvbS90YzM5L3Byb3Bvc2FsLW9ic2VydmFibGVcclxudmFyIEJlaGF2aW9yU3ViamVjdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEJlaGF2aW9yU3ViamVjdCh2YWx1ZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgICAgIHRoaXMubGlzdGVuZXJzID0gW107XHJcbiAgICAgICAgdGhpcy5lcnJvckxpc3RlbmVycyA9IFtdO1xyXG4gICAgICAgIHRoaXMudGhlbiA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgICAgICB2YXIgYXJncyA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgYXJnc1tfaV0gPSBhcmd1bWVudHNbX2ldO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAoX2EgPSBfdGhpcy50b1Byb21pc2UoKSkudGhlbi5hcHBseShfYSwgYXJncyk7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuICAgIEJlaGF2aW9yU3ViamVjdC5wcm90b3R5cGUubmV4dCA9IGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5saXN0ZW5lcnM7IF9pIDwgX2EubGVuZ3RoOyBfaSsrKSB7XHJcbiAgICAgICAgICAgIHZhciBsaXN0ZW5lciA9IF9hW19pXTtcclxuICAgICAgICAgICAgbGlzdGVuZXIodmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBUT0RPOiBpbXBsZW1lbnQgdGhpcyBhcyBQSVBFIGluc3RlYWRcclxuICAgIEJlaGF2aW9yU3ViamVjdC5wcm90b3R5cGUubWFwID0gZnVuY3Rpb24gKGZuKSB7XHJcbiAgICAgICAgdmFyIG5ld1N1YmplY3QgPSBuZXcgQmVoYXZpb3JTdWJqZWN0KGZuKHRoaXMudmFsdWUpKTtcclxuICAgICAgICAvLyBUT0RPOiBvbiBkZXN0cm95IGRlbGV0ZSB0aGVzZVxyXG4gICAgICAgIHRoaXMuc3Vic2NyaWJlKGZ1bmN0aW9uICh2YWwpIHtcclxuICAgICAgICAgICAgbmV3U3ViamVjdC5uZXh0KGZuKHZhbCkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuY2F0Y2goZnVuY3Rpb24gKGVycikge1xyXG4gICAgICAgICAgICBuZXdTdWJqZWN0LmVycm9yKGVycik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIG5ld1N1YmplY3Q7XHJcbiAgICB9O1xyXG4gICAgQmVoYXZpb3JTdWJqZWN0LnByb3RvdHlwZS5jYXRjaCA9IGZ1bmN0aW9uIChlcnJvckxpc3RlbmVyKSB7XHJcbiAgICAgICAgdGhpcy5lcnJvckxpc3RlbmVycy5wdXNoKGVycm9yTGlzdGVuZXIpO1xyXG4gICAgICAgIHJldHVybiBuZXcgU3Vic2NyaXB0aW9uKHRoaXMuZXJyb3JMaXN0ZW5lcnMsIGVycm9yTGlzdGVuZXIpO1xyXG4gICAgfTtcclxuICAgIEJlaGF2aW9yU3ViamVjdC5wcm90b3R5cGUuZXJyb3IgPSBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIF9hID0gdGhpcy5lcnJvckxpc3RlbmVyczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGxpc3RlbmVyID0gX2FbX2ldO1xyXG4gICAgICAgICAgICBsaXN0ZW5lcihlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEJlaGF2aW9yU3ViamVjdC5wcm90b3R5cGUuc3Vic2NyaWJlID0gZnVuY3Rpb24gKGxpc3RlbmVyLCBlcnJvckxpc3RlbmVyKSB7XHJcbiAgICAgICAgdGhpcy5saXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XHJcbiAgICAgICAgaWYgKGVycm9yTGlzdGVuZXIpIHtcclxuICAgICAgICAgICAgdGhpcy5lcnJvckxpc3RlbmVycy5wdXNoKGVycm9yTGlzdGVuZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3IFN1YnNjcmlwdGlvbih0aGlzLmxpc3RlbmVycywgbGlzdGVuZXIpO1xyXG4gICAgfTtcclxuICAgIEJlaGF2aW9yU3ViamVjdC5wcm90b3R5cGUudG9Qcm9taXNlID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgdmFyIHN1YnNjcmlwdGlvbiA9IF90aGlzLnN1YnNjcmliZShmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHJlc29sdmUodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChlcnIpO1xyXG4gICAgICAgICAgICAgICAgc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIEJlaGF2aW9yU3ViamVjdC5wcm90b3R5cGUucHJvbWlzZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy50b1Byb21pc2UoKTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gQmVoYXZpb3JTdWJqZWN0O1xyXG59KCkpO1xuXG52YXIgU3RhdGUgPSB7XHJcbiAgICBQZW5kaW5nOiAnUGVuZGluZycsXHJcbiAgICBGdWxmaWxsZWQ6ICdGdWxmaWxsZWQnLFxyXG4gICAgUmVqZWN0ZWQ6ICdSZWplY3RlZCcsXHJcbn07XHJcbmZ1bmN0aW9uIGlzRnVuY3Rpb24odmFsKSB7XHJcbiAgICByZXR1cm4gdmFsICYmIHR5cGVvZiB2YWwgPT09ICdmdW5jdGlvbic7XHJcbn1cclxuZnVuY3Rpb24gaXNPYmplY3QodmFsKSB7XHJcbiAgICByZXR1cm4gdmFsICYmIHR5cGVvZiB2YWwgPT09ICdvYmplY3QnO1xyXG59XHJcbnZhciBUaW55UHJvbWlzZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIFRpbnlQcm9taXNlKGV4ZWN1dG9yKSB7XHJcbiAgICAgICAgdGhpcy5fc3RhdGUgPSBTdGF0ZS5QZW5kaW5nO1xyXG4gICAgICAgIHRoaXMuX2hhbmRsZXJzID0gW107XHJcbiAgICAgICAgdGhpcy5fdmFsdWUgPSBudWxsO1xyXG4gICAgICAgIGV4ZWN1dG9yKHRoaXMuX3Jlc29sdmUuYmluZCh0aGlzKSwgdGhpcy5fcmVqZWN0LmJpbmQodGhpcykpO1xyXG4gICAgfVxyXG4gICAgVGlueVByb21pc2UucHJvdG90eXBlLl9yZXNvbHZlID0gZnVuY3Rpb24gKHgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIGlmICh4IGluc3RhbmNlb2YgVGlueVByb21pc2UpIHtcclxuICAgICAgICAgICAgeC50aGVuKHRoaXMuX3Jlc29sdmUuYmluZCh0aGlzKSwgdGhpcy5fcmVqZWN0LmJpbmQodGhpcykpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmIChpc09iamVjdCh4KSB8fCBpc0Z1bmN0aW9uKHgpKSB7XHJcbiAgICAgICAgICAgIHZhciBjYWxsZWRfMSA9IGZhbHNlO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHRoZW5hYmxlID0geC50aGVuO1xyXG4gICAgICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24odGhlbmFibGUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhlbmFibGUuY2FsbCh4LCBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY2FsbGVkXzEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fcmVzb2x2ZShyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsZWRfMSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghY2FsbGVkXzEpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5fcmVqZWN0KGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGVkXzEgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZnVsZmlsbCh4KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXRjaCAoZXgpIHtcclxuICAgICAgICAgICAgICAgIGlmICghY2FsbGVkXzEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLl9yZWplY3QoZXgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9mdWxmaWxsKHgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBUaW55UHJvbWlzZS5wcm90b3R5cGUuX2Z1bGZpbGwgPSBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLl9zdGF0ZSA9IFN0YXRlLkZ1bGZpbGxlZDtcclxuICAgICAgICB0aGlzLl92YWx1ZSA9IHJlc3VsdDtcclxuICAgICAgICB0aGlzLl9oYW5kbGVycy5mb3JFYWNoKGZ1bmN0aW9uIChoYW5kbGVyKSB7IHJldHVybiBfdGhpcy5fY2FsbEhhbmRsZXIoaGFuZGxlcik7IH0pO1xyXG4gICAgfTtcclxuICAgIFRpbnlQcm9taXNlLnByb3RvdHlwZS5fcmVqZWN0ID0gZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLl9zdGF0ZSA9IFN0YXRlLlJlamVjdGVkO1xyXG4gICAgICAgIHRoaXMuX3ZhbHVlID0gZXJyb3I7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlcnMuZm9yRWFjaChmdW5jdGlvbiAoaGFuZGxlcikgeyByZXR1cm4gX3RoaXMuX2NhbGxIYW5kbGVyKGhhbmRsZXIpOyB9KTtcclxuICAgIH07XHJcbiAgICBUaW55UHJvbWlzZS5wcm90b3R5cGUuX2lzUGVuZGluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc3RhdGUgPT09IFN0YXRlLlBlbmRpbmc7XHJcbiAgICB9O1xyXG4gICAgVGlueVByb21pc2UucHJvdG90eXBlLl9pc0Z1bGZpbGxlZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5fc3RhdGUgPT09IFN0YXRlLkZ1bGZpbGxlZDtcclxuICAgIH07XHJcbiAgICBUaW55UHJvbWlzZS5wcm90b3R5cGUuX2lzUmVqZWN0ZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX3N0YXRlID09PSBTdGF0ZS5SZWplY3RlZDtcclxuICAgIH07XHJcbiAgICBUaW55UHJvbWlzZS5wcm90b3R5cGUuX2FkZEhhbmRsZXIgPSBmdW5jdGlvbiAob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcclxuICAgICAgICB0aGlzLl9oYW5kbGVycy5wdXNoKHtcclxuICAgICAgICAgICAgb25GdWxmaWxsZWQ6IG9uRnVsZmlsbGVkLFxyXG4gICAgICAgICAgICBvblJlamVjdGVkOiBvblJlamVjdGVkLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIFRpbnlQcm9taXNlLnByb3RvdHlwZS5fY2FsbEhhbmRsZXIgPSBmdW5jdGlvbiAoaGFuZGxlcikge1xyXG4gICAgICAgIGlmICh0aGlzLl9pc0Z1bGZpbGxlZCgpICYmIGlzRnVuY3Rpb24oaGFuZGxlci5vbkZ1bGZpbGxlZCkpIHtcclxuICAgICAgICAgICAgaGFuZGxlci5vbkZ1bGZpbGxlZCh0aGlzLl92YWx1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuX2lzUmVqZWN0ZWQoKSAmJiBpc0Z1bmN0aW9uKGhhbmRsZXIub25SZWplY3RlZCkpIHtcclxuICAgICAgICAgICAgaGFuZGxlci5vblJlamVjdGVkKHRoaXMuX3ZhbHVlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgVGlueVByb21pc2UucHJvdG90eXBlLnRoZW4gPSBmdW5jdGlvbiAob25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIHN3aXRjaCAodGhpcy5fc3RhdGUpIHtcclxuICAgICAgICAgICAgY2FzZSBTdGF0ZS5QZW5kaW5nOiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFRpbnlQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5fYWRkSGFuZGxlcihmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV4dFRpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihvbkZ1bGZpbGxlZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShvbkZ1bGZpbGxlZCh2YWx1ZSkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGV4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5leHRUaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzRnVuY3Rpb24ob25SZWplY3RlZCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShvblJlamVjdGVkKGVycm9yKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChleCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSBTdGF0ZS5GdWxmaWxsZWQ6IHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgVGlueVByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5leHRUaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpc0Z1bmN0aW9uKG9uRnVsZmlsbGVkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUob25GdWxmaWxsZWQoX3RoaXMuX3ZhbHVlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvbHZlKF90aGlzLl92YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2ggKGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWplY3QoZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlIFN0YXRlLlJlamVjdGVkOiB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbmV3IFRpbnlQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXh0VGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNGdW5jdGlvbihvblJlamVjdGVkKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc29sdmUob25SZWplY3RlZChfdGhpcy5fdmFsdWUpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlamVjdChfdGhpcy5fdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVqZWN0KGV4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFRpbnlQcm9taXNlO1xyXG59KCkpO1xyXG52YXIgUHJvbWlzZSQxID0gKHR5cGVvZiBQcm9taXNlICE9PSAndW5kZWZpbmVkJyA/IFByb21pc2UgOiBUaW55UHJvbWlzZSk7XG5cbi8vIFdlYnBhY2sgd29ya2Fyb3VuZCB0byBjb25kaXRpb25hbGx5IHJlcXVpcmUgY2VydGFpbiBleHRlcm5hbCBtb2R1bGVzXHJcbi8vIG9ubHkgb24gdGhlIHNlcnZlciBhbmQgbm90IGJ1bmRsZSB0aGVtIG9uIHRoZSBjbGllbnRcclxudmFyIHNlcnZlck9ubHlSZXF1aXJlO1xyXG50cnkge1xyXG4gICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWV2YWxcclxuICAgIHNlcnZlck9ubHlSZXF1aXJlID0gZXZhbCgncmVxdWlyZScpO1xyXG59XHJcbmNhdGNoIChlcnIpIHtcclxuICAgIC8vIGFsbCBnb29kXHJcbiAgICBzZXJ2ZXJPbmx5UmVxdWlyZSA9IChmdW5jdGlvbiAoKSB7IHJldHVybiBudWxsOyB9KTtcclxufVxyXG52YXIgc2VydmVyT25seVJlcXVpcmUkMSA9IHNlcnZlck9ubHlSZXF1aXJlO1xuXG5mdW5jdGlvbiBwcm9taXNlUmVzb2x2ZSh2YWx1ZSkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlJDEoZnVuY3Rpb24gKHJlc29sdmUpIHsgcmV0dXJuIHJlc29sdmUodmFsdWUpOyB9KTtcclxufVxyXG4vLyBBZGFwdGVkIGZyb20gaHR0cHM6Ly9yYXcuZ2l0aHVidXNlcmNvbnRlbnQuY29tL2RldmVsb3BpdC91bmZldGNoL21hc3Rlci9zcmMvaW5kZXgubWpzXHJcbmZ1bmN0aW9uIHRpbnlGZXRjaCh1cmwsIG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHt9OyB9XHJcbiAgICByZXR1cm4gbmV3IFByb21pc2UkMShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgdmFyIHJlcXVlc3QgPSBuZXcgWE1MSHR0cFJlcXVlc3QoKTtcclxuICAgICAgICByZXF1ZXN0Lm9wZW4ob3B0aW9ucy5tZXRob2QgfHwgJ2dldCcsIHVybCwgdHJ1ZSk7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMuaGVhZGVycykge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBpIGluIG9wdGlvbnMuaGVhZGVycykge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKGksIG9wdGlvbnMuaGVhZGVyc1tpXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmVxdWVzdC53aXRoQ3JlZGVudGlhbHMgPSBvcHRpb25zLmNyZWRlbnRpYWxzID09PSAnaW5jbHVkZSc7XHJcbiAgICAgICAgcmVxdWVzdC5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJlc29sdmUocmVzcG9uc2UoKSk7XHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXF1ZXN0Lm9uZXJyb3IgPSByZWplY3Q7XHJcbiAgICAgICAgcmVxdWVzdC5zZW5kKG9wdGlvbnMuYm9keSk7XHJcbiAgICAgICAgZnVuY3Rpb24gcmVzcG9uc2UoKSB7XHJcbiAgICAgICAgICAgIHZhciBrZXlzID0gW107XHJcbiAgICAgICAgICAgIHZhciBhbGwgPSBbXTtcclxuICAgICAgICAgICAgdmFyIGhlYWRlcnMgPSB7fTtcclxuICAgICAgICAgICAgdmFyIGhlYWRlciA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgcmVxdWVzdFxyXG4gICAgICAgICAgICAgICAgLmdldEFsbFJlc3BvbnNlSGVhZGVycygpXHJcbiAgICAgICAgICAgICAgICAucmVwbGFjZSgvXiguKj8pOlteXFxTXFxuXSooW1xcc1xcU10qPykkL2dtLCBmdW5jdGlvbiAoX21hdGNoLCBfa2V5LCB2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGtleSA9IF9rZXk7XHJcbiAgICAgICAgICAgICAgICBrZXlzLnB1c2goKGtleSA9IGtleS50b0xvd2VyQ2FzZSgpKSk7XHJcbiAgICAgICAgICAgICAgICBhbGwucHVzaChba2V5LCB2YWx1ZV0pO1xyXG4gICAgICAgICAgICAgICAgaGVhZGVyID0gaGVhZGVyc1trZXldO1xyXG4gICAgICAgICAgICAgICAgaGVhZGVyc1trZXldID0gaGVhZGVyID8gXCJcIi5jb25jYXQoaGVhZGVyLCBcIixcIikuY29uY2F0KHZhbHVlKSA6IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICcnO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIG9rOiAoKHJlcXVlc3Quc3RhdHVzIC8gMTAwKSB8IDApID09PSAyLFxyXG4gICAgICAgICAgICAgICAgc3RhdHVzOiByZXF1ZXN0LnN0YXR1cyxcclxuICAgICAgICAgICAgICAgIHN0YXR1c1RleHQ6IHJlcXVlc3Quc3RhdHVzVGV4dCxcclxuICAgICAgICAgICAgICAgIHVybDogcmVxdWVzdC5yZXNwb25zZVVSTCxcclxuICAgICAgICAgICAgICAgIGNsb25lOiByZXNwb25zZSxcclxuICAgICAgICAgICAgICAgIHRleHQ6IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHByb21pc2VSZXNvbHZlKHJlcXVlc3QucmVzcG9uc2VUZXh0KTsgfSxcclxuICAgICAgICAgICAgICAgIGpzb246IGZ1bmN0aW9uICgpIHsgcmV0dXJuIHByb21pc2VSZXNvbHZlKHJlcXVlc3QucmVzcG9uc2VUZXh0KS50aGVuKEpTT04ucGFyc2UpOyB9LFxyXG4gICAgICAgICAgICAgICAgYmxvYjogZnVuY3Rpb24gKCkgeyByZXR1cm4gcHJvbWlzZVJlc29sdmUobmV3IEJsb2IoW3JlcXVlc3QucmVzcG9uc2VdKSk7IH0sXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAga2V5czogZnVuY3Rpb24gKCkgeyByZXR1cm4ga2V5czsgfSxcclxuICAgICAgICAgICAgICAgICAgICBlbnRyaWVzOiBmdW5jdGlvbiAoKSB7IHJldHVybiBhbGw7IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZ2V0OiBmdW5jdGlvbiAobikgeyByZXR1cm4gaGVhZGVyc1tuLnRvTG93ZXJDYXNlKCldOyB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGhhczogZnVuY3Rpb24gKG4pIHsgcmV0dXJuIG4udG9Mb3dlckNhc2UoKSBpbiBoZWFkZXJzOyB9LFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5mdW5jdGlvbiBnZXRGZXRjaCgpIHtcclxuICAgIC8vIElmIGZldGNoIGlzIGRlZmluZWQsIGluIHRoZSBicm93c2VyLCB2aWEgcG9seWZpbGwsIG9yIGluIGEgQ2xvdWRmbGFyZSB3b3JrZXIsIHVzZSBpdC5cclxuICAgIHZhciBfZmV0Y2ggPSB1bmRlZmluZWQ7XHJcbiAgICBpZiAoZ2xvYmFsVGhpcy5mZXRjaCkge1xyXG4gICAgICAgIF9mZXRjaCAhPT0gbnVsbCAmJiBfZmV0Y2ggIT09IHZvaWQgMCA/IF9mZXRjaCA6IChfZmV0Y2ggPSBnbG9iYWxUaGlzLmZldGNoKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgLy8gSWYgZmV0Y2ggaXMgbm90IGRlZmluZWQsIGluIGEgTm9kZS5qcyBlbnZpcm9ubWVudCwgdXNlIG5vZGUtZmV0Y2guXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gbm9kZS1mZXRjaEBeMyBpcyBFU00gb25seSwgYW5kIHdpbGwgdGhyb3cgZXJyb3Igb24gcmVxdWlyZS5cclxuICAgICAgICAgICAgX2ZldGNoICE9PSBudWxsICYmIF9mZXRjaCAhPT0gdm9pZCAwID8gX2ZldGNoIDogKF9mZXRjaCA9IHNlcnZlck9ubHlSZXF1aXJlJDEoJ25vZGUtZmV0Y2gnKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIC8vIElmIG5vZGUtZmV0Y2ggaXMgbm90IGluc3RhbGxlZCwgdXNlIHRpbnktZmV0Y2guXHJcbiAgICAgICAgICAgIGNvbnNvbGUud2Fybignbm9kZS1mZXRjaCBpcyBub3QgaW5zdGFsbGVkLiBjb25zaWRlciBwb2x5ZmlsbGluZyBmZXRjaCBvciBpbnN0YWxsaW5nIG5vZGUtZmV0Y2guJyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBPdGhlcndpc2UsIHVzZSB0aW55LWZldGNoLlxyXG4gICAgcmV0dXJuIF9mZXRjaCAhPT0gbnVsbCAmJiBfZmV0Y2ggIT09IHZvaWQgMCA/IF9mZXRjaCA6IHRpbnlGZXRjaDtcclxufVxuXG5mdW5jdGlvbiBhc3NpZ24odGFyZ2V0KSB7XHJcbiAgICB2YXIgdG8gPSBPYmplY3QodGFyZ2V0KTtcclxuICAgIGZvciAodmFyIGluZGV4ID0gMTsgaW5kZXggPCBhcmd1bWVudHMubGVuZ3RoOyBpbmRleCsrKSB7XHJcbiAgICAgICAgdmFyIG5leHRTb3VyY2UgPSBhcmd1bWVudHNbaW5kZXhdO1xyXG4gICAgICAgIGlmIChuZXh0U291cmNlICE9IG51bGwpIHtcclxuICAgICAgICAgICAgLy8gU2tpcCBvdmVyIGlmIHVuZGVmaW5lZCBvciBudWxsXHJcbiAgICAgICAgICAgIGZvciAodmFyIG5leHRLZXkgaW4gbmV4dFNvdXJjZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gQXZvaWQgYnVncyB3aGVuIGhhc093blByb3BlcnR5IGlzIHNoYWRvd2VkXHJcbiAgICAgICAgICAgICAgICBpZiAoT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG5leHRTb3VyY2UsIG5leHRLZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdG9bbmV4dEtleV0gPSBuZXh0U291cmNlW25leHRLZXldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRvO1xyXG59XG5cbmZ1bmN0aW9uIHRocm90dGxlKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcclxuICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHt9OyB9XHJcbiAgICB2YXIgY29udGV4dDtcclxuICAgIHZhciBhcmdzO1xyXG4gICAgdmFyIHJlc3VsdDtcclxuICAgIHZhciB0aW1lb3V0ID0gbnVsbDtcclxuICAgIHZhciBwcmV2aW91cyA9IDA7XHJcbiAgICB2YXIgbGF0ZXIgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcHJldmlvdXMgPSBvcHRpb25zLmxlYWRpbmcgPT09IGZhbHNlID8gMCA6IERhdGUubm93KCk7XHJcbiAgICAgICAgdGltZW91dCA9IG51bGw7XHJcbiAgICAgICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcclxuICAgICAgICBpZiAoIXRpbWVvdXQpXHJcbiAgICAgICAgICAgIGNvbnRleHQgPSBhcmdzID0gbnVsbDtcclxuICAgIH07XHJcbiAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBub3cgPSBEYXRlLm5vdygpO1xyXG4gICAgICAgIGlmICghcHJldmlvdXMgJiYgb3B0aW9ucy5sZWFkaW5nID09PSBmYWxzZSlcclxuICAgICAgICAgICAgcHJldmlvdXMgPSBub3c7XHJcbiAgICAgICAgdmFyIHJlbWFpbmluZyA9IHdhaXQgLSAobm93IC0gcHJldmlvdXMpO1xyXG4gICAgICAgIGNvbnRleHQgPSB0aGlzO1xyXG4gICAgICAgIGFyZ3MgPSBhcmd1bWVudHM7XHJcbiAgICAgICAgaWYgKHJlbWFpbmluZyA8PSAwIHx8IHJlbWFpbmluZyA+IHdhaXQpIHtcclxuICAgICAgICAgICAgaWYgKHRpbWVvdXQpIHtcclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcclxuICAgICAgICAgICAgICAgIHRpbWVvdXQgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHByZXZpb3VzID0gbm93O1xyXG4gICAgICAgICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xyXG4gICAgICAgICAgICBpZiAoIXRpbWVvdXQpXHJcbiAgICAgICAgICAgICAgICBjb250ZXh0ID0gYXJncyA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKCF0aW1lb3V0ICYmIG9wdGlvbnMudHJhaWxpbmcgIT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCByZW1haW5pbmcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgfTtcclxufVxuXG52YXIgY2FtZWxDYXNlVG9LZWJhYkNhc2UgPSBmdW5jdGlvbiAoc3RyKSB7XHJcbiAgICByZXR1cm4gc3RyID8gc3RyLnJlcGxhY2UoLyhbQS1aXSkvZywgZnVuY3Rpb24gKGcpIHsgcmV0dXJuIFwiLVwiLmNvbmNhdChnWzBdLnRvTG93ZXJDYXNlKCkpOyB9KSA6ICcnO1xyXG59O1xyXG52YXIgQW5pbWF0b3IgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBBbmltYXRvcigpIHtcclxuICAgIH1cclxuICAgIEFuaW1hdG9yLnByb3RvdHlwZS5iaW5kQW5pbWF0aW9ucyA9IGZ1bmN0aW9uIChhbmltYXRpb25zKSB7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBhbmltYXRpb25zXzEgPSBhbmltYXRpb25zOyBfaSA8IGFuaW1hdGlvbnNfMS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGFuaW1hdGlvbiA9IGFuaW1hdGlvbnNfMVtfaV07XHJcbiAgICAgICAgICAgIHN3aXRjaCAoYW5pbWF0aW9uLnRyaWdnZXIpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3BhZ2VMb2FkJzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnRyaWdnZXJBbmltYXRpb24oYW5pbWF0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2hvdmVyJzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJpbmRIb3ZlckFuaW1hdGlvbihhbmltYXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnc2Nyb2xsSW5WaWV3JzpcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmJpbmRTY3JvbGxJblZpZXdBbmltYXRpb24oYW5pbWF0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBBbmltYXRvci5wcm90b3R5cGUud2FybkVsZW1lbnROb3RQcmVzZW50ID0gZnVuY3Rpb24gKGlkKSB7XHJcbiAgICAgICAgY29uc29sZS53YXJuKFwiQ2Fubm90IGFuaW1hdGUgZWxlbWVudDogZWxlbWVudCB3aXRoIElEIFwiLmNvbmNhdChpZCwgXCIgbm90IGZvdW5kIVwiKSk7XHJcbiAgICB9O1xyXG4gICAgQW5pbWF0b3IucHJvdG90eXBlLmF1Z21lbnRBbmltYXRpb24gPSBmdW5jdGlvbiAoYW5pbWF0aW9uLCBlbGVtZW50KSB7XHJcbiAgICAgICAgdmFyIHN0eWxlc1VzZWQgPSB0aGlzLmdldEFsbFN0eWxlc1VzZWQoYW5pbWF0aW9uKTtcclxuICAgICAgICB2YXIgY29tcHV0ZWRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XHJcbiAgICAgICAgLy8gY29uc3QgY29tcHV0ZWRTdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCk7XHJcbiAgICAgICAgLy8gLy8gRklYTUU6IHRoaXMgd2lsbCBicmVhayBpZiBvcmlnaW5hbCBsb2FkIGlzIGluIG9uZSByZXBvbnNpdmUgc2l6ZSB0aGVuIHJlc2l6ZSB0byBhbm90aGVyIGhtbW1cclxuICAgICAgICAvLyBOZWVkIHRvIHVzZSB0cmFuc2Zvcm0gaW5zdGVhZCBvZiBsZWZ0IHNpbmNlIGxlZnQgY2FuIGNoYW5nZSBvbiBzY3JlZW4gc2l6ZXNcclxuICAgICAgICB2YXIgZmlyc3RTdHlsZXMgPSBhbmltYXRpb24uc3RlcHNbMF0uc3R5bGVzO1xyXG4gICAgICAgIHZhciBsYXN0U3R5bGVzID0gYW5pbWF0aW9uLnN0ZXBzW2FuaW1hdGlvbi5zdGVwcy5sZW5ndGggLSAxXS5zdHlsZXM7XHJcbiAgICAgICAgdmFyIGJvdGhTdHlsZXMgPSBbZmlyc3RTdHlsZXMsIGxhc3RTdHlsZXNdO1xyXG4gICAgICAgIC8vIEZJWE1FOiB0aGlzIHdvbid0IHdvcmsgYXMgZXhwZWN0ZWQgZm9yIGF1Z21lbnRlZCBhbmltYXRpb25zIC0gbWF5IG5lZWQgdGhlIGVkaXRvciBpdHNlbGYgdG8gbWFuYWdlIHRoaXNcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGJvdGhTdHlsZXNfMSA9IGJvdGhTdHlsZXM7IF9pIDwgYm90aFN0eWxlc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgc3R5bGVzID0gYm90aFN0eWxlc18xW19pXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2EgPSAwLCBzdHlsZXNVc2VkXzEgPSBzdHlsZXNVc2VkOyBfYSA8IHN0eWxlc1VzZWRfMS5sZW5ndGg7IF9hKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBzdHlsZSA9IHN0eWxlc1VzZWRfMVtfYV07XHJcbiAgICAgICAgICAgICAgICBpZiAoIShzdHlsZSBpbiBzdHlsZXMpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3R5bGVzW3N0eWxlXSA9IGNvbXB1dGVkU3R5bGVbc3R5bGVdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEFuaW1hdG9yLnByb3RvdHlwZS5nZXRBbGxTdHlsZXNVc2VkID0gZnVuY3Rpb24gKGFuaW1hdGlvbikge1xyXG4gICAgICAgIHZhciBwcm9wZXJ0aWVzID0gW107XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IGFuaW1hdGlvbi5zdGVwczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIHN0ZXAgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBzdGVwLnN0eWxlcykge1xyXG4gICAgICAgICAgICAgICAgaWYgKHByb3BlcnRpZXMuaW5kZXhPZihrZXkpID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3BlcnRpZXMucHVzaChrZXkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwcm9wZXJ0aWVzO1xyXG4gICAgfTtcclxuICAgIEFuaW1hdG9yLnByb3RvdHlwZS50cmlnZ2VyQW5pbWF0aW9uID0gZnVuY3Rpb24gKGFuaW1hdGlvbikge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgLy8gVE9ETzogZG8gZm9yIEFMTCBlbGVtZW50c1xyXG4gICAgICAgIHZhciBlbGVtZW50cyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYW5pbWF0aW9uLmVsZW1lbnRJZCB8fCBhbmltYXRpb24uaWQgfHwgJycpKTtcclxuICAgICAgICBpZiAoIWVsZW1lbnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLndhcm5FbGVtZW50Tm90UHJlc2VudChhbmltYXRpb24uZWxlbWVudElkIHx8IGFuaW1hdGlvbi5pZCB8fCAnJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgQXJyYXkuZnJvbShlbGVtZW50cykuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICBfdGhpcy5hdWdtZW50QW5pbWF0aW9uKGFuaW1hdGlvbiwgZWxlbWVudCk7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IGRvIHRoaXMgcHJvcGVybHksIG1heSBoYXZlIG90aGVyIGFuaW1hdGlvbnMgb2YgZGlmZmVyZW50IHByb3BlcnRpZXNcclxuICAgICAgICAgICAgLy8gVE9ETzogb25seSBvdmVycmlkZSB0aGUgcHJvcGVydGllc1xyXG4gICAgICAgICAgICAvLyBUT0RPOiBpZiB0aGVyZSBpcyBhbiBlbnRyYW5jZSBhbmQgaG92ZXIgYW5pbWF0aW9uLCB0aGUgdHJhbnNpdGlvbiBkdXJhdGlvbiB3aWxsIGdldCBlZmZlZFxyXG4gICAgICAgICAgICAvLyBlbGVtZW50LnNldEF0dHJpYnV0ZSgnc3R5bGUnLCAnJyk7XHJcbiAgICAgICAgICAgIC8vIGNvbnN0IHN0eWxlZFVzZWQgPSB0aGlzLmdldEFsbFN0eWxlc1VzZWQoYW5pbWF0aW9uKTtcclxuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS50cmFuc2l0aW9uID0gJ25vbmUnO1xyXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zaXRpb25EZWxheSA9ICcwJztcclxuICAgICAgICAgICAgYXNzaWduKGVsZW1lbnQuc3R5bGUsIGFuaW1hdGlvbi5zdGVwc1swXS5zdHlsZXMpO1xyXG4gICAgICAgICAgICAvLyBUT0RPOiBxdWV1ZS9iYXRjaCB0aGVzZSB0aW1lb3V0c1xyXG4gICAgICAgICAgICAvLyBUT0RPOiBvbmx5IGluY2x1ZGUgcHJvcGVydGllcyBleHBsaWNpdGx5IHNldCBpbiB0aGUgYW5pbWF0aW9uXHJcbiAgICAgICAgICAgIC8vIHVzaW5nIE9iamVjdC5rZXlzKHN0eWxlcylcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zaXRpb24gPSBcImFsbCBcIi5jb25jYXQoYW5pbWF0aW9uLmR1cmF0aW9uLCBcInMgXCIpLmNvbmNhdChjYW1lbENhc2VUb0tlYmFiQ2FzZShhbmltYXRpb24uZWFzaW5nKSk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYW5pbWF0aW9uLmRlbGF5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS50cmFuc2l0aW9uRGVsYXkgPSBhbmltYXRpb24uZGVsYXkgKyAncyc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBhc3NpZ24oZWxlbWVudC5zdHlsZSwgYW5pbWF0aW9uLnN0ZXBzWzFdLnN0eWxlcyk7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBtYXliZSByZW1vdmUvcmVzZXQgdHJhbnNpdG9pbiBwcm9wZXJ0eSBhZnRlciBhbmltYXRpb24gZHVyYXRpb25cclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IHF1ZXVlIHRpbWVyc1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogd2hhdCBpZiBoYXMgb3RoZXIgdHJhbnNpdGlvbiAocmVzZXQgYmFjayB0byB3aGF0IGl0IHdhcylcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zaXRpb24gPSAnJztcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zaXRpb25EZWxheSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgfSwgKGFuaW1hdGlvbi5kZWxheSB8fCAwKSAqIDEwMDAgKyBhbmltYXRpb24uZHVyYXRpb24gKiAxMDAwICsgMTAwKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgQW5pbWF0b3IucHJvdG90eXBlLmJpbmRIb3ZlckFuaW1hdGlvbiA9IGZ1bmN0aW9uIChhbmltYXRpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIFRPRE86IGlzIGl0IG11bHRpcGxlIGJpbmRpbmcgd2hlbiBlZGl0aW5nLi4uP1xyXG4gICAgICAgIC8vIFRPRE86IHVuYmluZCBvbiBlbGVtZW50IHJlbW92ZVxyXG4gICAgICAgIC8vIFRPRE86IGFwcGx5IHRvIEFMTCBlbGVtZW50c1xyXG4gICAgICAgIHZhciBlbGVtZW50cyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYW5pbWF0aW9uLmVsZW1lbnRJZCB8fCBhbmltYXRpb24uaWQgfHwgJycpKTtcclxuICAgICAgICBpZiAoIWVsZW1lbnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLndhcm5FbGVtZW50Tm90UHJlc2VudChhbmltYXRpb24uZWxlbWVudElkIHx8IGFuaW1hdGlvbi5pZCB8fCAnJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgQXJyYXkuZnJvbShlbGVtZW50cykuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICBfdGhpcy5hdWdtZW50QW5pbWF0aW9uKGFuaW1hdGlvbiwgZWxlbWVudCk7XHJcbiAgICAgICAgICAgIHZhciBkZWZhdWx0U3RhdGUgPSBhbmltYXRpb24uc3RlcHNbMF0uc3R5bGVzO1xyXG4gICAgICAgICAgICB2YXIgaG92ZXJTdGF0ZSA9IGFuaW1hdGlvbi5zdGVwc1sxXS5zdHlsZXM7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGF0dGFjaERlZmF1bHRTdGF0ZSgpIHtcclxuICAgICAgICAgICAgICAgIGFzc2lnbihlbGVtZW50LnN0eWxlLCBkZWZhdWx0U3RhdGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGF0dGFjaEhvdmVyU3RhdGUoKSB7XHJcbiAgICAgICAgICAgICAgICBhc3NpZ24oZWxlbWVudC5zdHlsZSwgaG92ZXJTdGF0ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXR0YWNoRGVmYXVsdFN0YXRlKCk7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIGF0dGFjaEhvdmVyU3RhdGUpO1xyXG4gICAgICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBhdHRhY2hEZWZhdWx0U3RhdGUpO1xyXG4gICAgICAgICAgICAvLyBUT0RPOiBxdWV1ZS9iYXRjaCB0aGVzZSB0aW1lb3V0c1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUudHJhbnNpdGlvbiA9IFwiYWxsIFwiLmNvbmNhdChhbmltYXRpb24uZHVyYXRpb24sIFwicyBcIikuY29uY2F0KGNhbWVsQ2FzZVRvS2ViYWJDYXNlKGFuaW1hdGlvbi5lYXNpbmcpKTtcclxuICAgICAgICAgICAgICAgIGlmIChhbmltYXRpb24uZGVsYXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zaXRpb25EZWxheSA9IGFuaW1hdGlvbi5kZWxheSArICdzJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLy8gVE9ETzogdW5iaW5kIG9uIGVsZW1lbnQgcmVtb3ZlXHJcbiAgICBBbmltYXRvci5wcm90b3R5cGUuYmluZFNjcm9sbEluVmlld0FuaW1hdGlvbiA9IGZ1bmN0aW9uIChhbmltYXRpb24pIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSB0aGlzO1xyXG4gICAgICAgIC8vIFRPRE86IGFwcGx5IHRvIEFMTCBtYXRjaGluZyBlbGVtZW50c1xyXG4gICAgICAgIHZhciBlbGVtZW50cyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGRvY3VtZW50LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoYW5pbWF0aW9uLmVsZW1lbnRJZCB8fCBhbmltYXRpb24uaWQgfHwgJycpKTtcclxuICAgICAgICBpZiAoIWVsZW1lbnRzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLndhcm5FbGVtZW50Tm90UHJlc2VudChhbmltYXRpb24uZWxlbWVudElkIHx8IGFuaW1hdGlvbi5pZCB8fCAnJyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gVE9ETzogaWYgc2VydmVyIHNpZGUgcmVuZGVyZWQgYW5kIHNjcm9sbGVkIGludG8gdmlldyBkb24ndCBhbmltYXRlLi4uXHJcbiAgICAgICAgQXJyYXkuZnJvbShlbGVtZW50cykuZm9yRWFjaChmdW5jdGlvbiAoZWxlbWVudCkge1xyXG4gICAgICAgICAgICBfdGhpcy5hdWdtZW50QW5pbWF0aW9uKGFuaW1hdGlvbiwgZWxlbWVudCk7XHJcbiAgICAgICAgICAgIHZhciB0cmlnZ2VyZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgdmFyIHBlbmRpbmdBbmltYXRpb24gPSBmYWxzZTtcclxuICAgICAgICAgICAgZnVuY3Rpb24gaW1tZWRpYXRlT25TY3JvbGwoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXRyaWdnZXJlZCAmJiBpc1Njcm9sbGVkSW50b1ZpZXcoZWxlbWVudCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0cmlnZ2VyZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHBlbmRpbmdBbmltYXRpb24gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhc3NpZ24oZWxlbWVudC5zdHlsZSwgYW5pbWF0aW9uLnN0ZXBzWzFdLnN0eWxlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghYW5pbWF0aW9uLnJlcGVhdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgb25TY3JvbGwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGVuZGluZ0FuaW1hdGlvbiA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFhbmltYXRpb24ucmVwZWF0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS50cmFuc2l0aW9uID0gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS50cmFuc2l0aW9uRGVsYXkgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgKGFuaW1hdGlvbi5kdXJhdGlvbiArIChhbmltYXRpb24uZGVsYXkgfHwgMCkpICogMTAwMCArIDEwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIGlmIChhbmltYXRpb24ucmVwZWF0ICYmXHJcbiAgICAgICAgICAgICAgICAgICAgdHJpZ2dlcmVkICYmXHJcbiAgICAgICAgICAgICAgICAgICAgIXBlbmRpbmdBbmltYXRpb24gJiZcclxuICAgICAgICAgICAgICAgICAgICAhaXNTY3JvbGxlZEludG9WaWV3KGVsZW1lbnQpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gd2Ugd2FudCB0byByZXBlYXQgdGhlIGFuaW1hdGlvbiBldmVyeSB0aW1lIHRoZSB0aGUgZWxlbWVudCBpcyBvdXQgb2YgdmlldyBhbmQgYmFjayBhZ2FpblxyXG4gICAgICAgICAgICAgICAgICAgIHRyaWdnZXJlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGFzc2lnbihlbGVtZW50LnN0eWxlLCBhbmltYXRpb24uc3RlcHNbMF0uc3R5bGVzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBUT0RPOiByb2xsIGFsbCBvZiB0aGVzZSBpbiBvbmUgZm9yIG1vcmUgZWZmaWNpZW5jeSBvZiBjaGVja2luZyBhbGwgdGhlIHJlY3RzXHJcbiAgICAgICAgICAgIHZhciBvblNjcm9sbCA9IHRocm90dGxlKGltbWVkaWF0ZU9uU2Nyb2xsLCAyMDAsIHsgbGVhZGluZzogZmFsc2UgfSk7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IGZ1bGx5IGluIHZpZXcgb3IgcGFydGlhbGx5XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGlzU2Nyb2xsZWRJbnRvVmlldyhlbGVtKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVjdCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgd2luZG93SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgdmFyIHRocmVzaG9sZFBlcmNlbnQgPSAoYW5pbWF0aW9uLnRocmVzaG9sZFBlcmNlbnQgfHwgMCkgLyAxMDA7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGhyZXNob2xkID0gdGhyZXNob2xkUGVyY2VudCAqIHdpbmRvd0hlaWdodDtcclxuICAgICAgICAgICAgICAgIC8vIFRPRE86IHBhcnRpYWwgaW4gdmlldz8gb3Igd2hhdCBpZiBlbGVtZW50IGlzIGxhcmdlciB0aGFuIHNjcmVlbiBpdHNlbGZcclxuICAgICAgICAgICAgICAgIHJldHVybiAocmVjdC5ib3R0b20gPiB0aHJlc2hvbGQgJiYgcmVjdC50b3AgPCB3aW5kb3dIZWlnaHQgLSB0aHJlc2hvbGQgLy8gRWxlbWVudCBpcyBwZWVraW5nIHRvcCBvciBib3R0b21cclxuICAgICAgICAgICAgICAgIC8vIChyZWN0LnRvcCA+IDAgJiYgcmVjdC5ib3R0b20gPCB3aW5kb3cuaW5uZXJIZWlnaHQpIHx8IC8vIGVsZW1lbnQgZml0cyB3aXRoaW4gdGhlIHNjcmVlbiBhbmQgaXMgZnVsbHkgb24gc2NyZWVuIChub3QgaGFuZ2luZyBvZmYgYXQgYWxsKVxyXG4gICAgICAgICAgICAgICAgLy8gKHJlY3QudG9wIDwgMCAmJiByZWN0LmJvdHRvbSA+IHdpbmRvdy5pbm5lckhlaWdodCkgLy8gZWxlbWVudCBpcyBsYXJnZXIgdGhhbiB0aGUgc2NyZWVuIGFuZCBoYW5ncyBvdmVyIHRoZSB0b3AgYW5kIGJvdHRvbVxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgZGVmYXVsdFN0YXRlID0gYW5pbWF0aW9uLnN0ZXBzWzBdLnN0eWxlcztcclxuICAgICAgICAgICAgZnVuY3Rpb24gYXR0YWNoRGVmYXVsdFN0YXRlKCkge1xyXG4gICAgICAgICAgICAgICAgYXNzaWduKGVsZW1lbnQuc3R5bGUsIGRlZmF1bHRTdGF0ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXR0YWNoRGVmYXVsdFN0YXRlKCk7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IHF1ZXVlL2JhdGNoIHRoZXNlIHRpbWVvdXRzIVxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUudHJhbnNpdGlvbiA9IFwiYWxsIFwiLmNvbmNhdChhbmltYXRpb24uZHVyYXRpb24sIFwicyBcIikuY29uY2F0KGNhbWVsQ2FzZVRvS2ViYWJDYXNlKGFuaW1hdGlvbi5lYXNpbmcpKTtcclxuICAgICAgICAgICAgICAgIGlmIChhbmltYXRpb24uZGVsYXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zaXRpb25EZWxheSA9IGFuaW1hdGlvbi5kZWxheSArICdzJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IG9uZSBsaXN0ZW5lciBmb3IgZXZlcnl0aGluZ1xyXG4gICAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBvblNjcm9sbCwgeyBjYXB0dXJlOiB0cnVlLCBwYXNzaXZlOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAvLyBEbyBhbiBpbml0aWFsIGNoZWNrXHJcbiAgICAgICAgICAgIGltbWVkaWF0ZU9uU2Nyb2xsKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIEFuaW1hdG9yO1xyXG59KCkpO1xuXG4vKipcclxuICogUmVnRXhwIHRvIG1hdGNoIGZpZWxkLWNvbnRlbnQgaW4gUkZDIDcyMzAgc2VjIDMuMlxyXG4gKlxyXG4gKiBmaWVsZC1jb250ZW50ID0gZmllbGQtdmNoYXIgWyAxKiggU1AgLyBIVEFCICkgZmllbGQtdmNoYXIgXVxyXG4gKiBmaWVsZC12Y2hhciAgID0gVkNIQVIgLyBvYnMtdGV4dFxyXG4gKiBvYnMtdGV4dCAgICAgID0gJXg4MC1GRlxyXG4gKi9cclxudmFyIGZpZWxkQ29udGVudFJlZ0V4cCA9IC9eW1xcdTAwMDlcXHUwMDIwLVxcdTAwN2VcXHUwMDgwLVxcdTAwZmZdKyQvO1xyXG52YXIgQ29va2llcyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIENvb2tpZXMocmVxdWVzdCwgcmVzcG9uc2UpIHtcclxuICAgICAgICB0aGlzLnJlcXVlc3QgPSByZXF1ZXN0O1xyXG4gICAgICAgIHRoaXMucmVzcG9uc2UgPSByZXNwb25zZTtcclxuICAgIH1cclxuICAgIENvb2tpZXMucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uIChuYW1lKSB7XHJcbiAgICAgICAgdmFyIGhlYWRlciA9IHRoaXMucmVxdWVzdC5oZWFkZXJzWydjb29raWUnXTtcclxuICAgICAgICBpZiAoIWhlYWRlcikge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBtYXRjaCA9IGhlYWRlci5tYXRjaChnZXRQYXR0ZXJuKG5hbWUpKTtcclxuICAgICAgICBpZiAoIW1hdGNoKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHZhbHVlID0gbWF0Y2hbMV07XHJcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgfTtcclxuICAgIENvb2tpZXMucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSwgb3B0cykge1xyXG4gICAgICAgIHZhciByZXMgPSB0aGlzLnJlc3BvbnNlO1xyXG4gICAgICAgIHZhciByZXEgPSB0aGlzLnJlcXVlc3Q7XHJcbiAgICAgICAgdmFyIGhlYWRlcnMgPSByZXMuZ2V0SGVhZGVyKCdTZXQtQ29va2llJykgfHwgW107XHJcbiAgICAgICAgLy8gVE9ETzoganVzdCBtYWtlIHRoaXMgYWx3YXlzIHRydWVcclxuICAgICAgICB2YXIgc2VjdXJlID0gdGhpcy5zZWN1cmUgIT09IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICA/ICEhdGhpcy5zZWN1cmVcclxuICAgICAgICAgICAgOiByZXEucHJvdG9jb2wgPT09ICdodHRwcycgfHwgcmVxLmNvbm5lY3Rpb24uZW5jcnlwdGVkO1xyXG4gICAgICAgIHZhciBjb29raWUgPSBuZXcgQ29va2llKG5hbWUsIHZhbHVlLCBvcHRzKTtcclxuICAgICAgICBpZiAodHlwZW9mIGhlYWRlcnMgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgIGhlYWRlcnMgPSBbaGVhZGVyc107XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghc2VjdXJlICYmIG9wdHMgJiYgb3B0cy5zZWN1cmUpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3Qgc2VuZCBzZWN1cmUgY29va2llIG92ZXIgdW5lbmNyeXB0ZWQgY29ubmVjdGlvbicpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb29raWUuc2VjdXJlID0gc2VjdXJlO1xyXG4gICAgICAgIGlmIChvcHRzICYmICdzZWN1cmUnIGluIG9wdHMpIHtcclxuICAgICAgICAgICAgY29va2llLnNlY3VyZSA9ICEhb3B0cy5zZWN1cmU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHB1c2hDb29raWUoaGVhZGVycywgY29va2llKTtcclxuICAgICAgICB2YXIgc2V0SGVhZGVyID0gcmVzLnNldEhlYWRlcjtcclxuICAgICAgICBzZXRIZWFkZXIuY2FsbChyZXMsICdTZXQtQ29va2llJywgaGVhZGVycyk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENvb2tpZXM7XHJcbn0oKSk7XHJcbnZhciBDb29raWUgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBDb29raWUobmFtZSwgdmFsdWUsIGF0dHJzKSB7XHJcbiAgICAgICAgdGhpcy5wYXRoID0gJy8nO1xyXG4gICAgICAgIHRoaXMuZG9tYWluID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMuaHR0cE9ubHkgPSB0cnVlO1xyXG4gICAgICAgIHRoaXMuc2FtZVNpdGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnNlY3VyZSA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMub3ZlcndyaXRlID0gZmFsc2U7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gJyc7XHJcbiAgICAgICAgdGhpcy52YWx1ZSA9ICcnO1xyXG4gICAgICAgIGlmICghZmllbGRDb250ZW50UmVnRXhwLnRlc3QobmFtZSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignYXJndW1lbnQgbmFtZSBpcyBpbnZhbGlkJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh2YWx1ZSAmJiAhZmllbGRDb250ZW50UmVnRXhwLnRlc3QodmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2FyZ3VtZW50IHZhbHVlIGlzIGludmFsaWQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCF2YWx1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLmV4cGlyZXMgPSBuZXcgRGF0ZSgwKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWUgfHwgJyc7XHJcbiAgICAgICAgaWYgKGF0dHJzLmV4cGlyZXMpIHtcclxuICAgICAgICAgICAgdGhpcy5leHBpcmVzID0gYXR0cnMuZXhwaXJlcztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGF0dHJzLnNlY3VyZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNlY3VyZSA9IGF0dHJzLnNlY3VyZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBDb29raWUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHJldHVybiBcIlwiLmNvbmNhdCh0aGlzLm5hbWUsIFwiPVwiKS5jb25jYXQodGhpcy52YWx1ZSk7XHJcbiAgICB9O1xyXG4gICAgQ29va2llLnByb3RvdHlwZS50b0hlYWRlciA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaGVhZGVyID0gdGhpcy50b1N0cmluZygpO1xyXG4gICAgICAgIGlmICh0aGlzLm1heEFnZSkge1xyXG4gICAgICAgICAgICB0aGlzLmV4cGlyZXMgPSBuZXcgRGF0ZShEYXRlLm5vdygpICsgdGhpcy5tYXhBZ2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5wYXRoKSB7XHJcbiAgICAgICAgICAgIGhlYWRlciArPSBcIjsgcGF0aD1cIi5jb25jYXQodGhpcy5wYXRoKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZXhwaXJlcykge1xyXG4gICAgICAgICAgICBoZWFkZXIgKz0gXCI7IGV4cGlyZXM9XCIuY29uY2F0KHRoaXMuZXhwaXJlcy50b1VUQ1N0cmluZygpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuZG9tYWluKSB7XHJcbiAgICAgICAgICAgIGhlYWRlciArPSBcIjsgZG9tYWluPVwiLmNvbmNhdCh0aGlzLmRvbWFpbik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFRPRE86IHNhbWVzaXRlPW5vbmUgYnkgZGVmYXVsdCAoPylcclxuICAgICAgICBoZWFkZXIgKz0gXCI7IFNhbWVTaXRlPVwiLmNvbmNhdCh0aGlzLnNhbWVTaXRlID09PSB0cnVlID8gJ3N0cmljdCcgOiAnTm9uZScpO1xyXG4gICAgICAgIC8vIFRPRE86IE9uIGJ5IGRlZmF1bHRcclxuICAgICAgICBpZiAodGhpcy5zZWN1cmUpIHtcclxuICAgICAgICAgICAgaGVhZGVyICs9ICc7IHNlY3VyZSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLmh0dHBPbmx5KSB7XHJcbiAgICAgICAgICAgIGhlYWRlciArPSAnOyBodHRwb25seSc7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBoZWFkZXI7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIENvb2tpZTtcclxufSgpKTtcclxuZnVuY3Rpb24gZ2V0UGF0dGVybihuYW1lKSB7XHJcbiAgICByZXR1cm4gbmV3IFJlZ0V4cChcIig/Ol58OykgKlwiLmNvbmNhdChuYW1lLnJlcGxhY2UoL1stW1xcXXt9KCkqKz8uLFxcXFxeJHwjXFxzXS9nLCAnXFxcXCQmJyksIFwiPShbXjtdKilcIikpO1xyXG59XHJcbmZ1bmN0aW9uIHB1c2hDb29raWUoaGVhZGVycywgY29va2llKSB7XHJcbiAgICBpZiAoY29va2llLm92ZXJ3cml0ZSkge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSBoZWFkZXJzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XHJcbiAgICAgICAgICAgIGlmIChoZWFkZXJzW2ldLmluZGV4T2YoXCJcIi5jb25jYXQoY29va2llLm5hbWUsIFwiPVwiKSkgPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGhlYWRlcnMuc3BsaWNlKGksIDEpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaGVhZGVycy5wdXNoKGNvb2tpZS50b0hlYWRlcigpKTtcclxufVxuXG5mdW5jdGlvbiBvbWl0KG9iaikge1xyXG4gICAgdmFyIHZhbHVlcyA9IFtdO1xyXG4gICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICB2YWx1ZXNbX2kgLSAxXSA9IGFyZ3VtZW50c1tfaV07XHJcbiAgICB9XHJcbiAgICB2YXIgbmV3T2JqZWN0ID0gT2JqZWN0LmFzc2lnbih7fSwgb2JqKTtcclxuICAgIGZvciAodmFyIF9hID0gMCwgdmFsdWVzXzEgPSB2YWx1ZXM7IF9hIDwgdmFsdWVzXzEubGVuZ3RoOyBfYSsrKSB7XHJcbiAgICAgICAgdmFyIGtleSA9IHZhbHVlc18xW19hXTtcclxuICAgICAgICBkZWxldGUgbmV3T2JqZWN0W2tleV07XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbmV3T2JqZWN0O1xyXG59XG5cbi8qKlxyXG4gKiBAY3JlZGl0IGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMTE3NTIzXHJcbiAqL1xyXG5mdW5jdGlvbiB1dWlkdjQoKSB7XHJcbiAgICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCBmdW5jdGlvbiAoYykge1xyXG4gICAgICAgIHZhciByID0gKE1hdGgucmFuZG9tKCkgKiAxNikgfCAwLCB2ID0gYyA9PSAneCcgPyByIDogKHIgJiAweDMpIHwgMHg4O1xyXG4gICAgICAgIHJldHVybiB2LnRvU3RyaW5nKDE2KTtcclxuICAgIH0pO1xyXG59XHJcbi8qKlxyXG4gKiBTbGlnaHRseSBjbGVhbmVyIGFuZCBzbWFsbGVyIFVVSURzXHJcbiAqL1xyXG5mdW5jdGlvbiB1dWlkKCkge1xyXG4gICAgcmV0dXJuIHV1aWR2NCgpLnJlcGxhY2UoLy0vZywgJycpO1xyXG59XG5cbmZ1bmN0aW9uIGVtcHR5VXJsKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBxdWVyeTogbnVsbCxcclxuICAgICAgICBwb3J0OiBudWxsLFxyXG4gICAgICAgIGF1dGg6IG51bGwsXHJcbiAgICAgICAgaGFzaDogbnVsbCxcclxuICAgICAgICBob3N0OiBudWxsLFxyXG4gICAgICAgIGhvc3RuYW1lOiBudWxsLFxyXG4gICAgICAgIGhyZWY6IG51bGwsXHJcbiAgICAgICAgcGF0aDogbnVsbCxcclxuICAgICAgICBwYXRobmFtZTogbnVsbCxcclxuICAgICAgICBwcm90b2NvbDogbnVsbCxcclxuICAgICAgICBzZWFyY2g6IG51bGwsXHJcbiAgICAgICAgc2xhc2hlczogbnVsbCxcclxuICAgIH07XHJcbn1cclxuLy8gUmVwbGFjZW1lbnQgZm9yIGB1cmwucGFyc2VgIHVzaW5nIGBVUkxgIGdsb2JhbCBvYmplY3QgdGhhdCB3b3JrcyB3aXRoIHJlbGF0aXZlIHBhdGhzLlxyXG4vLyBBc3N1bXB0aW9uczogdGhpcyBmdW5jdGlvbiBvcGVyYXRlcyBpbiBhIE5vZGVKUyBlbnZpcm9ubWVudC5cclxuZnVuY3Rpb24gcGFyc2UkMSh1cmwpIHtcclxuICAgIHZhciBfYTtcclxuICAgIHZhciBvdXQgPSBlbXB0eVVybCgpO1xyXG4gICAgdmFyIHU7XHJcbiAgICB2YXIgcGF0aE9ubHkgPSB1cmwgPT09ICcnIHx8IHVybFswXSA9PT0gJy8nO1xyXG4gICAgaWYgKHBhdGhPbmx5KSB7XHJcbiAgICAgICAgdSA9IG5ldyBVUkwodXJsLCAnaHR0cDovLzAuMC4wLjAvJyk7XHJcbiAgICAgICAgb3V0LmhyZWYgPSB1LmhyZWY7XHJcbiAgICAgICAgb3V0LmhyZWYgPSAoX2EgPSBvdXQuaHJlZikgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNsaWNlKDE0KTsgLy8gcmVtb3ZlICdodHRwOi8vMC4wLjAuMC8nXHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICB1ID0gbmV3IFVSTCh1cmwpO1xyXG4gICAgICAgIG91dC5ocmVmID0gdS5ocmVmO1xyXG4gICAgICAgIG91dC5wb3J0ID0gdS5wb3J0ID09PSAnJyA/IG51bGwgOiB1LnBvcnQ7XHJcbiAgICAgICAgb3V0Lmhhc2ggPSB1Lmhhc2ggPT09ICcnID8gbnVsbCA6IHUuaGFzaDtcclxuICAgICAgICBvdXQuaG9zdCA9IHUuaG9zdDtcclxuICAgICAgICBvdXQuaG9zdG5hbWUgPSB1Lmhvc3RuYW1lO1xyXG4gICAgICAgIG91dC5ocmVmID0gdS5ocmVmO1xyXG4gICAgICAgIG91dC5wYXRobmFtZSA9IHUucGF0aG5hbWU7XHJcbiAgICAgICAgb3V0LnByb3RvY29sID0gdS5wcm90b2NvbDtcclxuICAgICAgICBvdXQuc2xhc2hlcyA9IHVybFt1LnByb3RvY29sLmxlbmd0aF0gPT09ICcvJzsgLy8gY2hlY2sgaWYgdGhlIG1pbWV0eXBlIGlzIHByb2NlZWRlZCBieSBhIHNsYXNoXHJcbiAgICB9XHJcbiAgICBvdXQuc2VhcmNoID0gdS5zZWFyY2g7XHJcbiAgICBvdXQucXVlcnkgPSB1LnNlYXJjaC5zbGljZSgxKTsgLy8gcmVtb3ZlICc/J1xyXG4gICAgb3V0LnBhdGggPSBcIlwiLmNvbmNhdCh1LnBhdGhuYW1lKS5jb25jYXQodS5zZWFyY2gpO1xyXG4gICAgb3V0LnBhdGhuYW1lID0gdS5wYXRobmFtZTtcclxuICAgIHJldHVybiBvdXQ7XHJcbn1cblxuLyoqXHJcbiAqIFNhZmUgY29udmVyc2lvbiB0byBlcnJvciB0eXBlLiBJbnRlbmRlZCB0byBiZSB1c2VkIGluIGNhdGNoIGJsb2NrcyB3aGVyZSB0aGVcclxuICogIHZhbHVlIGlzIG5vdCBndWFyYW50ZWVkIHRvIGJlIGFuIGVycm9yLlxyXG4gKlxyXG4gKiAgQGV4YW1wbGVcclxuICogIHRyeSB7XHJcbiAqICAgIHRocm93IG5ldyBFcnJvcignU29tZXRoaW5nIHdlbnQgd3JvbmcnKVxyXG4gKiAgfVxyXG4gKiAgY2F0Y2ggKGVycjogdW5rbm93bikge1xyXG4gKiAgICBjb25zdCBlcnJvcjogRXJyb3IgPSB0b0Vycm9yKGVycilcclxuICogIH1cclxuICovXHJcbmZ1bmN0aW9uIHRvRXJyb3IoZXJyKSB7XHJcbiAgICBpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IpXHJcbiAgICAgICAgcmV0dXJuIGVycjtcclxuICAgIHJldHVybiBuZXcgRXJyb3IoU3RyaW5nKGVycikpO1xyXG59XG5cbnZhciBERUZBVUxUX0FQSV9WRVJTSU9OID0gJ3YzJztcblxudmFyIFNES19WRVJTSU9OID0gJzYuMC4yJztcblxuZnVuY3Rpb24gZGF0ZVBsdXNNaW51dGVzKG1pbnV0ZXMpIHtcclxuICAgIGlmIChtaW51dGVzID09PSB2b2lkIDApIHsgbWludXRlcyA9IDMwOyB9XHJcbiAgICByZXR1cm4gbmV3IERhdGUoRGF0ZS5ub3coKSArIG1pbnV0ZXMgKiA2MDAwMCk7XHJcbn1cclxudmFyIGlzUG9zaXRpdmVOdW1iZXIgPSBmdW5jdGlvbiAodGhpbmcpIHtcclxuICAgIHJldHVybiB0eXBlb2YgdGhpbmcgPT09ICdudW1iZXInICYmICFpc05hTih0aGluZykgJiYgdGhpbmcgPj0gMDtcclxufTtcclxudmFyIGlzUmVhY3ROYXRpdmUgPSB0eXBlb2YgbmF2aWdhdG9yID09PSAnb2JqZWN0JyAmJiBuYXZpZ2F0b3IucHJvZHVjdCA9PT0gJ1JlYWN0TmF0aXZlJztcclxudmFyIHZhbGlkRW52TGlzdCA9IFtcclxuICAgICdwcm9kdWN0aW9uJyxcclxuICAgICdxYScsXHJcbiAgICAndGVzdCcsXHJcbiAgICAnZGV2ZWxvcG1lbnQnLFxyXG4gICAgJ2RldicsXHJcbiAgICAnY2RuLXFhJyxcclxuICAgICdjbG91ZCcsXHJcbiAgICAnZmFzdCcsXHJcbiAgICAnY2RuMicsXHJcbiAgICAnY2RuLXByb2QnLFxyXG5dO1xyXG5mdW5jdGlvbiBnZXRRdWVyeVBhcmFtKHVybCwgdmFyaWFibGUpIHtcclxuICAgIHZhciBxdWVyeSA9IHVybC5zcGxpdCgnPycpWzFdIHx8ICcnO1xyXG4gICAgdmFyIHZhcnMgPSBxdWVyeS5zcGxpdCgnJicpO1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YXJzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdmFyIHBhaXIgPSB2YXJzW2ldLnNwbGl0KCc9Jyk7XHJcbiAgICAgICAgaWYgKGRlY29kZVVSSUNvbXBvbmVudChwYWlyWzBdKSA9PT0gdmFyaWFibGUpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChwYWlyWzFdKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbnVsbDtcclxufVxyXG52YXIgdXJsUGFyc2VyID0ge1xyXG4gICAgcGFyc2U6IGZ1bmN0aW9uICh1cmwpIHtcclxuICAgICAgICB2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdhJyk7XHJcbiAgICAgICAgZWwuaHJlZiA9IHVybDtcclxuICAgICAgICB2YXIgb3V0ID0ge307XHJcbiAgICAgICAgdmFyIHByb3BzID0gW1xyXG4gICAgICAgICAgICAndXNlcm5hbWUnLFxyXG4gICAgICAgICAgICAncGFzc3dvcmQnLFxyXG4gICAgICAgICAgICAnaG9zdCcsXHJcbiAgICAgICAgICAgICdob3N0bmFtZScsXHJcbiAgICAgICAgICAgICdwb3J0JyxcclxuICAgICAgICAgICAgJ3Byb3RvY29sJyxcclxuICAgICAgICAgICAgJ29yaWdpbicsXHJcbiAgICAgICAgICAgICdwYXRobmFtZScsXHJcbiAgICAgICAgICAgICdzZWFyY2gnLFxyXG4gICAgICAgICAgICAnaGFzaCcsXHJcbiAgICAgICAgXTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHByb3BzXzEgPSBwcm9wczsgX2kgPCBwcm9wc18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgcHJvcCA9IHByb3BzXzFbX2ldO1xyXG4gICAgICAgICAgICBvdXRbcHJvcF0gPSBlbFtwcm9wXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSUUgMTEgcGF0aG5hbWUgaGFuZGxpbmcgd29ya2Fyb3VuZFxyXG4gICAgICAgIC8vIChJRSBvbWl0cyBwcmVjZWVkaW5nICcvJywgdW5saWtlIG90aGVyIGJyb3dzZXJzKVxyXG4gICAgICAgIGlmICgob3V0LnBhdGhuYW1lIHx8IG91dC5wYXRobmFtZSA9PT0gJycpICYmXHJcbiAgICAgICAgICAgIHR5cGVvZiBvdXQucGF0aG5hbWUgPT09ICdzdHJpbmcnICYmXHJcbiAgICAgICAgICAgIG91dC5wYXRobmFtZS5pbmRleE9mKCcvJykgIT09IDApIHtcclxuICAgICAgICAgICAgb3V0LnBhdGhuYW1lID0gJy8nICsgb3V0LnBhdGhuYW1lO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb3V0O1xyXG4gICAgfSxcclxufTtcclxudmFyIHBhcnNlID0gaXNSZWFjdE5hdGl2ZVxyXG4gICAgPyBmdW5jdGlvbiAoKSB7IHJldHVybiBlbXB0eVVybCgpOyB9XHJcbiAgICA6IHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnXHJcbiAgICAgICAgPyB1cmxQYXJzZXIucGFyc2VcclxuICAgICAgICA6IHBhcnNlJDE7XHJcbmZ1bmN0aW9uIHNldENvb2tpZShuYW1lLCB2YWx1ZSwgZXhwaXJlcykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICB2YXIgZXhwaXJlc1N0cmluZyA9ICcnO1xyXG4gICAgICAgIC8vIFRPRE86IG5lZWQgdG8ga25vdyBpZiBzZWN1cmUgc2VydmVyIHNpZGVcclxuICAgICAgICBpZiAoZXhwaXJlcykge1xyXG4gICAgICAgICAgICBleHBpcmVzU3RyaW5nID0gJzsgZXhwaXJlcz0nICsgZXhwaXJlcy50b1VUQ1N0cmluZygpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgc2VjdXJlID0gaXNCcm93c2VyID8gbG9jYXRpb24ucHJvdG9jb2wgPT09ICdodHRwczonIDogdHJ1ZTtcclxuICAgICAgICBkb2N1bWVudC5jb29raWUgPVxyXG4gICAgICAgICAgICBuYW1lICtcclxuICAgICAgICAgICAgICAgICc9JyArXHJcbiAgICAgICAgICAgICAgICAodmFsdWUgfHwgJycpICtcclxuICAgICAgICAgICAgICAgIGV4cGlyZXNTdHJpbmcgK1xyXG4gICAgICAgICAgICAgICAgJzsgcGF0aD0vJyArXHJcbiAgICAgICAgICAgICAgICAoc2VjdXJlID8gJzsgc2VjdXJlOyBTYW1lU2l0ZT1Ob25lJyA6ICcnKTtcclxuICAgIH1cclxuICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICBjb25zb2xlLndhcm4oJ0NvdWxkIG5vdCBzZXQgY29va2llJywgZXJyKTtcclxuICAgIH1cclxufVxyXG5mdW5jdGlvbiBnZXRDb29raWUobmFtZSkge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gKGRlY29kZVVSSUNvbXBvbmVudChkb2N1bWVudC5jb29raWUucmVwbGFjZShuZXcgUmVnRXhwKCcoPzooPzpefC4qOylcXFxccyonICtcclxuICAgICAgICAgICAgZW5jb2RlVVJJQ29tcG9uZW50KG5hbWUpLnJlcGxhY2UoL1tcXC1cXC5cXCtcXCpdL2csICdcXFxcJCYnKSArXHJcbiAgICAgICAgICAgICdcXFxccypcXFxcPVxcXFxzKihbXjtdKikuKiQpfF4uKiQnKSwgJyQxJykpIHx8IG51bGwpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycikge1xyXG4gICAgICAgIGNvbnNvbGUud2FybignQ291bGQgbm90IGdldCBjb29raWUnLCBlcnIpO1xyXG4gICAgfVxyXG59XHJcbmZ1bmN0aW9uIHNpemUob2JqZWN0KSB7XHJcbiAgICByZXR1cm4gT2JqZWN0LmtleXMob2JqZWN0KS5sZW5ndGg7XHJcbn1cclxuZnVuY3Rpb24gZmluZCh0YXJnZXQsIGNhbGxiYWNrKSB7XHJcbiAgICB2YXIgbGlzdCA9IHRhcmdldDtcclxuICAgIC8vIE1ha2VzIHN1cmVzIGlzIGFsd2F5cyBoYXMgYW4gcG9zaXRpdmUgaW50ZWdlciBhcyBsZW5ndGguXHJcbiAgICB2YXIgbGVuZ3RoID0gbGlzdC5sZW5ndGggPj4+IDA7XHJcbiAgICB2YXIgdGhpc0FyZyA9IGFyZ3VtZW50c1sxXTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICB2YXIgZWxlbWVudCA9IGxpc3RbaV07XHJcbiAgICAgICAgaWYgKGNhbGxiYWNrLmNhbGwodGhpc0FyZywgZWxlbWVudCwgaSwgbGlzdCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGVsZW1lbnQ7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbnZhciBzZXNzaW9uU3RvcmFnZUtleSA9ICdidWlsZGVyU2Vzc2lvbklkJztcclxudmFyIGxvY2FsU3RvcmFnZUtleSA9ICdidWlsZGVyVmlzaXRvcklkJztcclxudmFyIGlzQnJvd3NlciA9IHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmICFpc1JlYWN0TmF0aXZlO1xyXG52YXIgaXNJZnJhbWUgPSBpc0Jyb3dzZXIgJiYgd2luZG93LnRvcCAhPT0gd2luZG93LnNlbGY7XHJcbmZ1bmN0aW9uIEJ1aWxkZXJDb21wb25lbnQoaW5mbykge1xyXG4gICAgaWYgKGluZm8gPT09IHZvaWQgMCkgeyBpbmZvID0ge307IH1cclxuICAgIHJldHVybiBCdWlsZGVyLkNvbXBvbmVudChpbmZvKTtcclxufVxyXG52YXIgQnVpbGRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIGZ1bmN0aW9uIEJ1aWxkZXIoYXBpS2V5LCByZXF1ZXN0LCByZXNwb25zZSwgZm9yY2VOZXdJbnN0YW5jZSwgYXV0aFRva2VuLCBhcGlWZXJzaW9uKSB7XHJcbiAgICAgICAgaWYgKGFwaUtleSA9PT0gdm9pZCAwKSB7IGFwaUtleSA9IG51bGw7IH1cclxuICAgICAgICBpZiAoZm9yY2VOZXdJbnN0YW5jZSA9PT0gdm9pZCAwKSB7IGZvcmNlTmV3SW5zdGFuY2UgPSBmYWxzZTsgfVxyXG4gICAgICAgIGlmIChhdXRoVG9rZW4gPT09IHZvaWQgMCkgeyBhdXRoVG9rZW4gPSBudWxsOyB9XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICB0aGlzLnJlcXVlc3QgPSByZXF1ZXN0O1xyXG4gICAgICAgIHRoaXMucmVzcG9uc2UgPSByZXNwb25zZTtcclxuICAgICAgICB0aGlzLmV2ZW50c1F1ZXVlID0gW107XHJcbiAgICAgICAgdGhpcy50aHJvdHRsZWRDbGVhckV2ZW50c1F1ZXVlID0gdGhyb3R0bGUoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBfdGhpcy5wcm9jZXNzRXZlbnRzUXVldWUoKTtcclxuICAgICAgICAgICAgLy8gRXh0ZW5kIHRoZSBzZXNzaW9uIGNvb2tpZVxyXG4gICAgICAgICAgICBfdGhpcy5zZXRDb29raWUoc2Vzc2lvblN0b3JhZ2VLZXksIF90aGlzLnNlc3Npb25JZCwgZGF0ZVBsdXNNaW51dGVzKDMwKSk7XHJcbiAgICAgICAgfSwgNSk7XHJcbiAgICAgICAgdGhpcy5lbnYgPSAncHJvZHVjdGlvbic7XHJcbiAgICAgICAgdGhpcy5zZXNzaW9uSWQgPSB0aGlzLmdldFNlc3Npb25JZCgpO1xyXG4gICAgICAgIHRoaXMudGFyZ2V0Q29udGVudCA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5jb250ZW50UGVyUmVxdWVzdCA9IDE7XHJcbiAgICAgICAgLy8gVE9ETzogbWFrZSBhcnJheSBvciBmdW5jdGlvblxyXG4gICAgICAgIHRoaXMuYWxsb3dDdXN0b21Gb250cyA9IHRydWU7XHJcbiAgICAgICAgdGhpcy5jb29raWVzID0gbnVsbDtcclxuICAgICAgICAvLyBUT0RPOiBhcGkgb3B0aW9ucyBvYmplY3RcclxuICAgICAgICB0aGlzLmNhY2hlYnVzdCA9IGZhbHNlO1xyXG4gICAgICAgIHRoaXMub3ZlcnJpZGVQYXJhbXMgPSAnJztcclxuICAgICAgICB0aGlzLm5vQ2FjaGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnByZXZpZXcgPSBmYWxzZTtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBEaWN0YXRlcyB3aGljaCBBUEkgZW5kcG9pbnQgaXMgdXNlZCB3aGVuIGZldGNoaW5nIGNvbnRlbnQuIEFsbG93cyBgJ2NvbnRlbnQnYCBhbmQgYCdxdWVyeSdgLlxyXG4gICAgICAgICAqIERlZmF1bHRzIHRvIGAncXVlcnknYC5cclxuICAgICAgICAgKi9cclxuICAgICAgICB0aGlzLmFwaUVuZHBvaW50JCA9IG5ldyBCZWhhdmlvclN1YmplY3QoJ3F1ZXJ5Jyk7XHJcbiAgICAgICAgdGhpcy5hcGlWZXJzaW9uJCA9IG5ldyBCZWhhdmlvclN1YmplY3QodW5kZWZpbmVkKTtcclxuICAgICAgICB0aGlzLmNhblRyYWNrJCA9IG5ldyBCZWhhdmlvclN1YmplY3QoIXRoaXMuYnJvd3NlclRyYWNraW5nRGlzYWJsZWQpO1xyXG4gICAgICAgIHRoaXMuYXBpS2V5JCA9IG5ldyBCZWhhdmlvclN1YmplY3QobnVsbCk7XHJcbiAgICAgICAgdGhpcy5hdXRoVG9rZW4kID0gbmV3IEJlaGF2aW9yU3ViamVjdChudWxsKTtcclxuICAgICAgICB0aGlzLnVzZXJBdHRyaWJ1dGVzQ2hhbmdlZCA9IG5ldyBCZWhhdmlvclN1YmplY3QobnVsbCk7XHJcbiAgICAgICAgdGhpcy5lZGl0aW5nTW9kZSQgPSBuZXcgQmVoYXZpb3JTdWJqZWN0KGlzSWZyYW1lKTtcclxuICAgICAgICAvLyBUT0RPOiBkZWNvcmF0b3IgdG8gZG8gdGhpcyBzdHVmZiB3aXRoIHRoZSBnZXQvc2V0IChob3cgZG8gd2l0aCB0eXBpbmcgdG9vPyBjb21waWxlcj8pXHJcbiAgICAgICAgdGhpcy5lZGl0aW5nTW9kZWwkID0gbmV3IEJlaGF2aW9yU3ViamVjdChudWxsKTtcclxuICAgICAgICB0aGlzLnVzZXJBZ2VudCA9ICh0eXBlb2YgbmF2aWdhdG9yID09PSAnb2JqZWN0JyAmJiBuYXZpZ2F0b3IudXNlckFnZW50KSB8fCAnJztcclxuICAgICAgICB0aGlzLnRyYWNraW5nSG9va3MgPSBbXTtcclxuICAgICAgICAvLyBTZXQgdGhpcyB0byBjb250cm9sIHRoZSB1c2VySWRcclxuICAgICAgICAvLyBUT0RPOiBhbGxvdyBjaGFuZ2luZyBpdCBtaWQgc2Vzc2lvbiBhbmQgdXBkYXRpbmcgZXhpc3RpbmcgZGF0YSB0byBiZSBhc3NvY2lhdGVkXHJcbiAgICAgICAgLy8gZS5nLiBmb3Igd2hlbiBhIHVzZXIgbmF2aWdhdGVzIGFuZCB0aGVuIGxvZ3MgaW5cclxuICAgICAgICB0aGlzLnZpc2l0b3JJZCA9IHRoaXMuZ2V0VmlzaXRvcklkKCk7XHJcbiAgICAgICAgdGhpcy5hdXRvVHJhY2sgPSAhQnVpbGRlci5pc0Jyb3dzZXJcclxuICAgICAgICAgICAgPyBmYWxzZVxyXG4gICAgICAgICAgICA6ICF0aGlzLmlzRGV2ZWxvcG1lbnRFbnYgJiZcclxuICAgICAgICAgICAgICAgICEoQnVpbGRlci5pc0Jyb3dzZXIgJiYgbG9jYXRpb24uc2VhcmNoLmluZGV4T2YoJ2J1aWxkZXIucHJldmlldz0nKSAhPT0gLTEpO1xyXG4gICAgICAgIHRoaXMudHJhY2tpbmdVc2VyQXR0cmlidXRlcyA9IHt9O1xyXG4gICAgICAgIHRoaXMuYmxvY2tDb250ZW50TG9hZGluZyA9ICcnO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzQnlLZXkgPSB7fTtcclxuICAgICAgICB0aGlzLm5vRWRpdG9yVXBkYXRlcyA9IHt9O1xyXG4gICAgICAgIHRoaXMub3ZlcnJpZGVzID0ge307XHJcbiAgICAgICAgdGhpcy5xdWVyeU9wdGlvbnMgPSB7fTtcclxuICAgICAgICB0aGlzLmdldENvbnRlbnRRdWV1ZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5wcmlvckNvbnRlbnRRdWV1ZSA9IG51bGw7XHJcbiAgICAgICAgdGhpcy50ZXN0Q29va2llUHJlZml4ID0gJ2J1aWxkZXIudGVzdHMnO1xyXG4gICAgICAgIHRoaXMuY29va2llUXVldWUgPSBbXTtcclxuICAgICAgICAvLyBUT0RPOiB1c2UgYSB3aW5kb3cgdmFyaWFibGUgZm9yIHRoaXMgcGVyaGFwcywgZS5nLiBiYyB3ZWJjb21wb25lbnRzIG1heSBiZSBsb2FkaW5nIGJ1aWxkZXIgdHdpY2VcclxuICAgICAgICAvLyB3aXRoIGl0J3MgYW5kIHJlYWN0ICh1c2Ugcm9sbHVwIGJ1aWxkIHRvIGZpeClcclxuICAgICAgICBpZiAoQnVpbGRlci5pc0Jyb3dzZXIgJiYgIWZvcmNlTmV3SW5zdGFuY2UgJiYgQnVpbGRlci5zaW5nbGV0b25JbnN0YW5jZSkge1xyXG4gICAgICAgICAgICByZXR1cm4gQnVpbGRlci5zaW5nbGV0b25JbnN0YW5jZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMucmVxdWVzdCAmJiB0aGlzLnJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0VXNlckFnZW50KHRoaXMucmVxdWVzdC5oZWFkZXJzWyd1c2VyLWFnZW50J10gfHwgJycpO1xyXG4gICAgICAgICAgICB0aGlzLmNvb2tpZXMgPSBuZXcgQ29va2llcyh0aGlzLnJlcXVlc3QsIHRoaXMucmVzcG9uc2UpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYXBpS2V5KSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXBpS2V5ID0gYXBpS2V5O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYXBpVmVyc2lvbikge1xyXG4gICAgICAgICAgICB0aGlzLmFwaVZlcnNpb24gPSBhcGlWZXJzaW9uO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoYXV0aFRva2VuKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXV0aFRva2VuID0gYXV0aFRva2VuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNCcm93c2VyKSB7XHJcbiAgICAgICAgICAgIGlmIChCdWlsZGVyLmlzRWRpdGluZykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5iaW5kTWVzc2FnZUxpc3RlbmVycygpO1xyXG4gICAgICAgICAgICAgICAgcGFyZW50LnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYnVpbGRlci5hbmltYXRvck9wdGlvbnMnLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmVyc2lvbjogMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgfSwgJyonKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBUT0RPOiBwb3N0bWVzc2FnZSB0byBwYXJlbnQgdGhlIGJ1aWxkZXIgaW5mbyBmb3IgZXZlcnkgcGFja2FnZVxyXG4gICAgICAgICAgICAvLyB0eXBlOiAnYnVpbGRlci5zZGsnLCBkYXRhOiB7IG5hbWU6ICdAYnVpbGRlci5pby9yZWFjdCcsIHZlcnNpb246ICcwLjEuMjMnIH1cclxuICAgICAgICAgICAgLy8gKHdpbmRvdyBhcyBhbnkpLkJVSUxERVJfVkVSU0lPTiA9IEJ1aWxkZXIuVkVSU0lPTjtcclxuICAgICAgICAgICAgLy8gRW5zdXJlIGFsd2F5cyBvbmUgQnVpbGRlciBnbG9iYWwgc2luZ2xldG9uXHJcbiAgICAgICAgICAgIC8vIFRPRE86IHNvbWUgcGVvcGxlIHdvbid0IHdhbnQgdGhpcywgZS5nLiByYWt1dGVuXHJcbiAgICAgICAgICAgIC8vIE1heWJlIGhpZGUgdGhpcyBiZWhpbmQgc3ltYm9sIG9yIG9uIGRvY3VtZW50LCBldGNcclxuICAgICAgICAgICAgLy8gaWYgKCh3aW5kb3cgYXMgYW55KS5CdWlsZGVyKSB7XHJcbiAgICAgICAgICAgIC8vICAgQnVpbGRlci5jb21wb25lbnRzID0gKHdpbmRvdyBhcyBhbnkpLkJ1aWxkZXIuY29tcG9uZW50cztcclxuICAgICAgICAgICAgLy8gfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gICAod2luZG93IGFzIGFueSkuQnVpbGRlciA9IEJ1aWxkZXI7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzSWZyYW1lKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZUZyYW1lTG9hZGVkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFRPRE86IG9uIGRlc3Ryb3kgY2xlYXIgc3Vic2NyaXB0aW9uXHJcbiAgICAgICAgdGhpcy5jYW5UcmFjayQuc3Vic2NyaWJlKGZ1bmN0aW9uICh2YWx1ZSkge1xyXG4gICAgICAgICAgICBpZiAodmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2Ygc2Vzc2lvblN0b3JhZ2UgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKHNlc3Npb25TdG9yYWdlS2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShzZXNzaW9uU3RvcmFnZUtleSwgX3RoaXMuc2Vzc2lvbklkKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ1Nlc3Npb24gc3RvcmFnZSBlcnJvcicsIGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKF90aGlzLmV2ZW50c1F1ZXVlLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLnRocm90dGxlZENsZWFyRXZlbnRzUXVldWUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChfdGhpcy5jb29raWVRdWV1ZS5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5jb29raWVRdWV1ZS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLnNldENvb2tpZShpdGVtWzBdLCBpdGVtWzFdKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5jb29raWVRdWV1ZS5sZW5ndGggPSAwO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKGlzQnJvd3Nlcikge1xyXG4gICAgICAgICAgICAvLyBUT0RPOiBkZWZlciBzbyBzdWJjbGFzcyBjb25zdHJ1Y3RvciBydW5zIGFuZCBpbmplY3RzIGxvY2F0aW9uIHNlcnZpY2VcclxuICAgICAgICAgICAgdGhpcy5zZXRUZXN0c0Zyb21VcmwoKTtcclxuICAgICAgICAgICAgLy8gVE9ETzogZG8gdGhpcyBvbiBldmVyeSByZXF1ZXN0IHNlbmQ/XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0T3ZlcnJpZGVzRnJvbVF1ZXJ5U3RyaW5nKCk7XHJcbiAgICAgICAgICAgIC8vIGNvb2tpZXMgdXNlZCBpbiBwZXJzb25hbGl6YXRpb24gY29udGFpbmVyIHNjcmlwdCwgc28gbmVlZCB0byBzZXQgYmVmb3JlIGh5ZHJhdGlvbiB0byBtYXRjaCBzY3JpcHQgcmVzdWx0XHJcbiAgICAgICAgICAgIHZhciB1c2VyQXR0ckNvb2tpZSA9IHRoaXMuZ2V0Q29va2llKEJ1aWxkZXIuYXR0cmlidXRlc0Nvb2tpZU5hbWUpO1xyXG4gICAgICAgICAgICBpZiAodXNlckF0dHJDb29raWUpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGF0dHJpYnV0ZXMgPSBKU09OLnBhcnNlKHVzZXJBdHRyQ29va2llKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFVzZXJBdHRyaWJ1dGVzKGF0dHJpYnV0ZXMpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ0Vycm9yIHBhcnNpbmcgdXNlciBhdHRyaWJ1dGVzIGNvb2tpZScsIGVycik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBCdWlsZGVyLnJlZ2lzdGVyID0gZnVuY3Rpb24gKHR5cGUsIGluZm8pIHtcclxuICAgICAgICBpZiAodHlwZSA9PT0gJ3BsdWdpbicpIHtcclxuICAgICAgICAgICAgaW5mbyA9IHRoaXMuc2VyaWFsaXplSW5jbHVkaW5nRnVuY3Rpb25zKGluZm8pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUT0RPOiBhbGwgbXVzdCBoYXZlIG5hbWUgYW5kIGNhbid0IGNvbmZsaWN0P1xyXG4gICAgICAgIHZhciB0eXBlTGlzdCA9IHRoaXMucmVnaXN0cnlbdHlwZV07XHJcbiAgICAgICAgaWYgKCF0eXBlTGlzdCkge1xyXG4gICAgICAgICAgICB0eXBlTGlzdCA9IHRoaXMucmVnaXN0cnlbdHlwZV0gPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHlwZUxpc3QucHVzaChpbmZvKTtcclxuICAgICAgICBpZiAoQnVpbGRlci5pc0Jyb3dzZXIpIHtcclxuICAgICAgICAgICAgdmFyIG1lc3NhZ2UgPSB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnYnVpbGRlci5yZWdpc3RlcicsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogdHlwZSxcclxuICAgICAgICAgICAgICAgICAgICBpbmZvOiBpbmZvLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIHBhcmVudC5wb3N0TWVzc2FnZShtZXNzYWdlLCAnKicpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhcmVudCAhPT0gd2luZG93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LnBvc3RNZXNzYWdlKG1lc3NhZ2UsICcqJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygnQ291bGQgbm90IHBvc3RtZXNzYWdlJywgZXJyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnJlZ2lzdHJ5Q2hhbmdlLm5leHQodGhpcy5yZWdpc3RyeSk7XHJcbiAgICB9O1xyXG4gICAgQnVpbGRlci5yZWdpc3RlckVkaXRvciA9IGZ1bmN0aW9uIChpbmZvKSB7XHJcbiAgICAgICAgaWYgKEJ1aWxkZXIuaXNCcm93c2VyKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnYnVpbGRlci5yZWdpc3RlckVkaXRvcicsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiBvbWl0KGluZm8sICdjb21wb25lbnQnKSxcclxuICAgICAgICAgICAgfSwgJyonKTtcclxuICAgICAgICAgICAgdmFyIGhvc3RuYW1lID0gbG9jYXRpb24uaG9zdG5hbWU7XHJcbiAgICAgICAgICAgIGlmICghQnVpbGRlci5pc1RydXN0ZWRIb3N0KGhvc3RuYW1lKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQnVpbGRlci5yZWdpc3RlckVkaXRvcigpIGNhbGxlZCBpbiB0aGUgd3JvbmcgZW52aXJvbm1lbnQhIFlvdSBjYW5ub3QgbG9hZCBjdXN0b20gZWRpdG9ycyBmcm9tIHlvdXIgYXBwLCB0aGV5IG11c3QgYmUgbG9hZGVkIHRocm91Z2ggdGhlIEJ1aWxkZXIuaW8gYXBwIGl0c2VsZi4gRm9sbG93IHRoZSByZWFkbWUgaGVyZSBmb3IgbW9yZSBkZXRhaWxzOiBodHRwczovL2dpdGh1Yi5jb20vYnVpbGRlcmlvL2J1aWxkZXIvdHJlZS9tYXN0ZXIvcGx1Z2lucy9jbG91ZGluYXJ5IG9yIGNvbnRhY3QgY2hhdCB1cyBpbiBvdXIgU3BlY3RydW0gY29tbXVuaXR5IGZvciBoZWxwOiBodHRwczovL3NwZWN0cnVtLmNoYXQvYnVpbGRlcicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZWRpdG9ycy5wdXNoKGluZm8pO1xyXG4gICAgfTtcclxuICAgIEJ1aWxkZXIucmVnaXN0ZXJQbHVnaW4gPSBmdW5jdGlvbiAoaW5mbykge1xyXG4gICAgICAgIHRoaXMucGx1Z2lucy5wdXNoKGluZm8pO1xyXG4gICAgfTtcclxuICAgIEJ1aWxkZXIucmVnaXN0ZXJBY3Rpb24gPSBmdW5jdGlvbiAoYWN0aW9uKSB7XHJcbiAgICAgICAgdGhpcy5hY3Rpb25zLnB1c2goYWN0aW9uKTtcclxuICAgIH07XHJcbiAgICBCdWlsZGVyLnJlZ2lzdGVyVHJ1c3RlZEhvc3QgPSBmdW5jdGlvbiAoaG9zdCkge1xyXG4gICAgICAgIHRoaXMudHJ1c3RlZEhvc3RzLnB1c2goaG9zdCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAcGFyYW0gY29udGV4dCBAdHlwZSB7aW1wb3J0KCdpc29sYXRlZC12bScpLkNvbnRleHR9XHJcbiAgICAgKiBVc2UgdGhpcyBmdW5jdGlvbiB0byBjb250cm9sIHRoZSBleGVjdXRpb24gY29udGV4dCBvZiBjdXN0b20gY29kZSBvbiB0aGUgc2VydmVyLlxyXG4gICAgICogY29uc3QgaXZtID0gcmVxdWlyZSgnaXNvbGF0ZWQtdm0nKTtcclxuICAgICAqIGNvbnN0IGlzb2xhdGUgPSBuZXcgaXZtLklzb2xhdGUoeyBtZW1vcnlMaW1pdDogMTI4IH0pO1xyXG4gICAgICogY29uc3QgY29udGV4dCA9IGlzb2xhdGUuY3JlYXRlQ29udGV4dFN5bmMoKTtcclxuICAgICAqIEJ1aWxkZXIuc2V0U2VydmVyQ29udGV4dChjb250ZXh0KTtcclxuICAgICAqL1xyXG4gICAgQnVpbGRlci5zZXRTZXJ2ZXJDb250ZXh0ID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcclxuICAgICAgICB0aGlzLnNlcnZlckNvbnRleHQgPSBjb250ZXh0O1xyXG4gICAgfTtcclxuICAgIEJ1aWxkZXIuaXNUcnVzdGVkSG9zdCA9IGZ1bmN0aW9uIChob3N0bmFtZSkge1xyXG4gICAgICAgIHZhciBpc1RydXN0ZWQgPSB0aGlzLnRydXN0ZWRIb3N0cy5maW5kSW5kZXgoZnVuY3Rpb24gKHRydXN0ZWRIb3N0KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVzdGVkSG9zdC5zdGFydHNXaXRoKCcqLicpXHJcbiAgICAgICAgICAgICAgICA/IGhvc3RuYW1lLmVuZHNXaXRoKHRydXN0ZWRIb3N0LnNsaWNlKDEpKVxyXG4gICAgICAgICAgICAgICAgOiB0cnVzdGVkSG9zdCA9PT0gaG9zdG5hbWU7XHJcbiAgICAgICAgfSkgPiAtMTtcclxuICAgICAgICByZXR1cm4gaXNUcnVzdGVkO1xyXG4gICAgfTtcclxuICAgIEJ1aWxkZXIuaXNUcnVzdGVkSG9zdEZvckV2ZW50ID0gZnVuY3Rpb24gKGV2ZW50KSB7XHJcbiAgICAgICAgdmFyIHVybCA9IHBhcnNlKGV2ZW50Lm9yaWdpbik7XHJcbiAgICAgICAgcmV0dXJuIHVybC5ob3N0bmFtZSAmJiBCdWlsZGVyLmlzVHJ1c3RlZEhvc3QodXJsLmhvc3RuYW1lKTtcclxuICAgIH07XHJcbiAgICBCdWlsZGVyLnJ1bkFjdGlvbiA9IGZ1bmN0aW9uIChhY3Rpb24pIHtcclxuICAgICAgICAvLyBUT0RPXHJcbiAgICAgICAgdmFyIGFjdGlvbk9iamVjdCA9IHR5cGVvZiBhY3Rpb24gPT09ICdzdHJpbmcnID8gZmluZCh0aGlzLmFjdGlvbnMsIGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiBpdGVtLm5hbWUgPT09IGFjdGlvbjsgfSkgOiBhY3Rpb247XHJcbiAgICAgICAgaWYgKCFhY3Rpb25PYmplY3QpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiQWN0aW9uIG5vdCBmb3VuZDogXCIuY29uY2F0KGFjdGlvbikpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBCdWlsZGVyLmZpZWxkcyA9IGZ1bmN0aW9uIChuYW1lLCBmaWVsZHMpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgKF9hID0gd2luZG93LnBhcmVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgdHlwZTogJ2J1aWxkZXIuZmllbGRzJyxcclxuICAgICAgICAgICAgZGF0YTogeyBuYW1lOiBuYW1lLCBmaWVsZHM6IGZpZWxkcyB9LFxyXG4gICAgICAgIH0sICcqJyk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBAZGVwcmVjYXRlZFxyXG4gICAgICogQGhpZGRlblxyXG4gICAgICpcclxuICAgICAqIFVzZSBCdWlsZGVyLnJlZ2lzdGVyKCdlZGl0b3Iuc2V0dGluZ3MnLCB7fSkgaW5zdGVhZC5cclxuICAgICAqL1xyXG4gICAgQnVpbGRlci5zZXQgPSBmdW5jdGlvbiAoc2V0dGluZ3MpIHtcclxuICAgICAgICBCdWlsZGVyLnJlZ2lzdGVyKCdlZGl0b3Iuc2V0dGluZ3MnLCBzZXR0aW5ncyk7XHJcbiAgICB9O1xyXG4gICAgQnVpbGRlci5pbXBvcnQgPSBmdW5jdGlvbiAocGFja2FnZU5hbWUpIHtcclxuICAgICAgICBpZiAoIUJ1aWxkZXIuaXNCcm93c2VyKSB7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IHNlcnZlciBzaWRlIHN1cHBvcnQgKm1heWJlKlxyXG4gICAgICAgICAgICBjb25zb2xlLndhcm4oJ0J1aWxkZXIuaW1wb3J0IHVzZWQgb24gdGhlIHNlcnZlciAtIHRoaXMgc2hvdWxkIG9ubHkgYmUgdXNlZCBpbiB0aGUgYnJvd3NlcicpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBTeXN0ZW0gPSB3aW5kb3cuU3lzdGVtO1xyXG4gICAgICAgIGlmICghU3lzdGVtKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUud2FybignU3lzdGVtLmpzIG5vdCBhdmFpbGFibGUuIFBsZWFzZSBpbmNsdWRlIFN5c3RlbS5qcyB3aGVuIHVzaW5nIEJ1aWxkZXIuaW1wb3J0Jyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIFN5c3RlbS5pbXBvcnQoXCJodHRwczovL2Nkbi5idWlsZGVyLmlvL3N5c3RlbWpzL1wiLmNvbmNhdChwYWNrYWdlTmFtZSkpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCdWlsZGVyLCBcImVkaXRpbmdQYWdlXCIsIHtcclxuICAgICAgICAvLyB1c2VDZG5BcGkgPSBmYWxzZTtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2VkaXRpbmdQYWdlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoZWRpdGluZ1BhZ2UpIHtcclxuICAgICAgICAgICAgdGhpcy5fZWRpdGluZ1BhZ2UgPSBlZGl0aW5nUGFnZTtcclxuICAgICAgICAgICAgaWYgKGlzQnJvd3NlciAmJiBpc0lmcmFtZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVkaXRpbmdQYWdlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdidWlsZGVyLWVkaXRpbmctcGFnZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdidWlsZGVyLWVkaXRpbmctcGFnZScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgQnVpbGRlci5zZXJpYWxpemVJbmNsdWRpbmdGdW5jdGlvbnMgPSBmdW5jdGlvbiAoaW5mbykge1xyXG4gICAgICAgIHZhciBzZXJpYWxpemVGbiA9IGZ1bmN0aW9uIChmblZhbHVlKSB7XHJcbiAgICAgICAgICAgIHZhciBmblN0ciA9IGZuVmFsdWUudG9TdHJpbmcoKS50cmltKCk7XHJcbiAgICAgICAgICAgIC8vIHdlIG5lZWQgdG8gYWNjb3VudCBmb3IgYSBmZXcgZGlmZmVyZW50IGZuIHN5bnRheGVzOlxyXG4gICAgICAgICAgICAvLyAxLiBgZnVuY3Rpb24gbmFtZShhcmdzKSA9PiB7Y29kZX1gXHJcbiAgICAgICAgICAgIC8vIDIuIGBuYW1lKGFyZ3MpID0+IHtjb2RlfWBcclxuICAgICAgICAgICAgLy8gMy4gYChhcmdzKSA9PiB7fWBcclxuICAgICAgICAgICAgLy8gNC4gYGFyZ3MgPT4ge31gXHJcbiAgICAgICAgICAgIC8vIDUuIGBhc3luYyBmdW5jdGlvbihhcmdzKSB7Y29kZX1gXHJcbiAgICAgICAgICAgIC8vIDYuIGBhc3luYyAoYXJncykgPT4ge31gXHJcbiAgICAgICAgICAgIC8vIDcuIGBhc3luYyBhcmdzID0+IHt9YFxyXG4gICAgICAgICAgICB2YXIgaXNBcnJvd1dpdGhvdXRQYXJlbnMgPSAvXlthLXpBLVowLTlfXStcXHMqPT4vaS50ZXN0KGZuU3RyKTtcclxuICAgICAgICAgICAgdmFyIGFwcGVuZEZ1bmN0aW9uID0gIWZuU3RyLnN0YXJ0c1dpdGgoJ2Z1bmN0aW9uJykgJiZcclxuICAgICAgICAgICAgICAgICFmblN0ci5zdGFydHNXaXRoKCdhc3luYycpICYmXHJcbiAgICAgICAgICAgICAgICAhZm5TdHIuc3RhcnRzV2l0aCgnKCcpICYmXHJcbiAgICAgICAgICAgICAgICAhaXNBcnJvd1dpdGhvdXRQYXJlbnM7XHJcbiAgICAgICAgICAgIHJldHVybiBcInJldHVybiAoXCIuY29uY2F0KGFwcGVuZEZ1bmN0aW9uID8gJ2Z1bmN0aW9uICcgOiAnJykuY29uY2F0KGZuU3RyLCBcIikuYXBwbHkodGhpcywgYXJndW1lbnRzKVwiKTtcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGluZm8sIGZ1bmN0aW9uIChrZXksIHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZXJpYWxpemVGbih2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHZhbHVlO1xyXG4gICAgICAgIH0pKTtcclxuICAgIH07XHJcbiAgICBCdWlsZGVyLnByZXBhcmVDb21wb25lbnRTcGVjVG9TZW5kID0gZnVuY3Rpb24gKHNwZWMpIHtcclxuICAgICAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIHRoaXMuc2VyaWFsaXplSW5jbHVkaW5nRnVuY3Rpb25zKHNwZWMpKSwgeyBjbGFzczogdW5kZWZpbmVkIH0pO1xyXG4gICAgfTtcclxuICAgIEJ1aWxkZXIucmVnaXN0ZXJCbG9jayA9IGZ1bmN0aW9uIChjb21wb25lbnQsIG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQ29tcG9uZW50KGNvbXBvbmVudCwgb3B0aW9ucyk7XHJcbiAgICB9O1xyXG4gICAgQnVpbGRlci5yZWdpc3RlckNvbXBvbmVudCA9IGZ1bmN0aW9uIChjb21wb25lbnQsIG9wdGlvbnMpIHtcclxuICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgdmFyIHNwZWMgPSBfX2Fzc2lnbihfX2Fzc2lnbih7IGNsYXNzOiBjb21wb25lbnQgfSwgY29tcG9uZW50LmJ1aWxkZXJPcHRpb25zKSwgb3B0aW9ucyk7XHJcbiAgICAgICAgdGhpcy5hZGRDb21wb25lbnQoc3BlYyk7XHJcbiAgICAgICAgdmFyIGVkaXRhYmxlID0gb3B0aW9ucy5tb2RlbHMgJiYgdGhpcy5zaW5nbGV0b25JbnN0YW5jZS5lZGl0aW5nTW9kZWxcclxuICAgICAgICAgICAgPyBpc0Jyb3dzZXIgJiYgb3B0aW9ucy5tb2RlbHMuaW5jbHVkZXModGhpcy5zaW5nbGV0b25JbnN0YW5jZS5lZGl0aW5nTW9kZWwpXHJcbiAgICAgICAgICAgIDogaXNCcm93c2VyO1xyXG4gICAgICAgIGlmIChlZGl0YWJsZSkge1xyXG4gICAgICAgICAgICB2YXIgc2VuZFNwZWMgPSB0aGlzLnByZXBhcmVDb21wb25lbnRTcGVjVG9TZW5kKHNwZWMpO1xyXG4gICAgICAgICAgICAoX2EgPSB3aW5kb3cucGFyZW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICAgICAgdHlwZTogJ2J1aWxkZXIucmVnaXN0ZXJDb21wb25lbnQnLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogc2VuZFNwZWMsXHJcbiAgICAgICAgICAgIH0sICcqJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEJ1aWxkZXIuYWRkQ29tcG9uZW50ID0gZnVuY3Rpb24gKGNvbXBvbmVudCkge1xyXG4gICAgICAgIHZhciBjdXJyZW50ID0gZmluZCh0aGlzLmNvbXBvbmVudHMsIGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiBpdGVtLm5hbWUgPT09IGNvbXBvbmVudC5uYW1lOyB9KTtcclxuICAgICAgICBpZiAoY3VycmVudCkge1xyXG4gICAgICAgICAgICAvLyBGSVhNRTogd2h5IGRvZXMgc29tZXRpbWVzIHdlIGdldCBhbiBleHRyYSBwb3N0IHdpdGhvdXQgY2xhc3MgLSBwcm9iYWJseVxyXG4gICAgICAgICAgICAvLyBmcm9tIHBvc3RNZXNzYWdlIGhhbmRsZXIgd3JvbmcgaW4gc29tZSBwbGFjZVxyXG4gICAgICAgICAgICBpZiAoY3VycmVudC5jbGFzcyAmJiAhY29tcG9uZW50LmNsYXNzKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5jb21wb25lbnRzLnNwbGljZSh0aGlzLmNvbXBvbmVudHMuaW5kZXhPZihjdXJyZW50KSwgMSwgY29tcG9uZW50KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuY29tcG9uZW50cy5wdXNoKGNvbXBvbmVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vIFRPRE86IHN0eWxlIGd1aWRlLCBldGMgb2ZmIHRoaXMgc3lzdGVtIGFzIHdlbGw/XHJcbiAgICBCdWlsZGVyLmNvbXBvbmVudCA9IGZ1bmN0aW9uIChpbmZvKSB7XHJcbiAgICAgICAgdmFyIF90aGlzID0gdGhpcztcclxuICAgICAgICBpZiAoaW5mbyA9PT0gdm9pZCAwKSB7IGluZm8gPSB7fTsgfVxyXG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoY29tcG9uZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBfYTtcclxuICAgICAgICAgICAgdmFyIHNwZWMgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgaW5mbyksIHsgY2xhc3M6IGNvbXBvbmVudCB9KTtcclxuICAgICAgICAgICAgaWYgKCFzcGVjLm5hbWUpIHtcclxuICAgICAgICAgICAgICAgIHNwZWMubmFtZSA9IGNvbXBvbmVudC5uYW1lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF90aGlzLmFkZENvbXBvbmVudChzcGVjKTtcclxuICAgICAgICAgICAgdmFyIHNlbmRTcGVjID0gX3RoaXMucHJlcGFyZUNvbXBvbmVudFNwZWNUb1NlbmQoc3BlYyk7XHJcbiAgICAgICAgICAgIC8vIFRPRE86IHNlcmlhbGl6ZSBjb21wb25lbnQgbmFtZSBhbmQgaW5wdXRzXHJcbiAgICAgICAgICAgIGlmIChpc0Jyb3dzZXIpIHtcclxuICAgICAgICAgICAgICAgIChfYSA9IHdpbmRvdy5wYXJlbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2J1aWxkZXIucmVnaXN0ZXJDb21wb25lbnQnLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHNlbmRTcGVjLFxyXG4gICAgICAgICAgICAgICAgfSwgJyonKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gY29tcG9uZW50O1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1aWxkZXIsIFwiQ29tcG9uZW50XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29tcG9uZW50O1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIEJ1aWxkZXIucHJvdG90eXBlLnByb2Nlc3NFdmVudHNRdWV1ZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZiAoIXRoaXMuZXZlbnRzUXVldWUubGVuZ3RoKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGV2ZW50cyA9IHRoaXMuZXZlbnRzUXVldWU7XHJcbiAgICAgICAgdGhpcy5ldmVudHNRdWV1ZSA9IFtdO1xyXG4gICAgICAgIHZhciBmdWxsVXNlckF0dHJpYnV0ZXMgPSBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgQnVpbGRlci5vdmVycmlkZVVzZXJBdHRyaWJ1dGVzKSwgdGhpcy50cmFja2luZ1VzZXJBdHRyaWJ1dGVzKTtcclxuICAgICAgICBmb3IgKHZhciBfaSA9IDAsIGV2ZW50c18xID0gZXZlbnRzOyBfaSA8IGV2ZW50c18xLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICB2YXIgZXZlbnRfMSA9IGV2ZW50c18xW19pXTtcclxuICAgICAgICAgICAgaWYgKCFldmVudF8xLmRhdGEubWV0YWRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50XzEuZGF0YS5tZXRhZGF0YSA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghZXZlbnRfMS5kYXRhLm1ldGFkYXRhLnVzZXIpIHtcclxuICAgICAgICAgICAgICAgIGV2ZW50XzEuZGF0YS5tZXRhZGF0YS51c2VyID0ge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihldmVudF8xLmRhdGEubWV0YWRhdGEudXNlciwgZnVsbFVzZXJBdHRyaWJ1dGVzLCBldmVudF8xLmRhdGEubWV0YWRhdGEudXNlcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBob3N0ID0gdGhpcy5ob3N0O1xyXG4gICAgICAgIGdldEZldGNoKCkoXCJcIi5jb25jYXQoaG9zdCwgXCIvYXBpL3YxL3RyYWNrXCIpLCB7XHJcbiAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IGV2ZW50czogZXZlbnRzIH0pLFxyXG4gICAgICAgICAgICBoZWFkZXJzOiBfX2Fzc2lnbih7ICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24vanNvbicgfSwgdGhpcy5nZXRTZGtIZWFkZXJzKCkpLFxyXG4gICAgICAgICAgICBtb2RlOiAnY29ycycsXHJcbiAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyBOb3QgdGhlIGVuZCBvZiB0aGUgd29ybGRcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQnVpbGRlci5wcm90b3R5cGUsIFwiYnJvd3NlclRyYWNraW5nRGlzYWJsZWRcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gQnVpbGRlci5pc0Jyb3dzZXIgJiYgQm9vbGVhbih3aW5kb3cuYnVpbGRlck5vVHJhY2sgfHwgIW5hdmlnYXRvci5jb29raWVFbmFibGVkKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQnVpbGRlci5wcm90b3R5cGUsIFwiY2FuVHJhY2tcIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jYW5UcmFjayQudmFsdWU7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzZXQ6IGZ1bmN0aW9uIChjYW5UcmFjaykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5jYW5UcmFjayAhPT0gY2FuVHJhY2spIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2FuVHJhY2skLm5leHQoY2FuVHJhY2spO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1aWxkZXIucHJvdG90eXBlLCBcImFwaVZlcnNpb25cIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hcGlWZXJzaW9uJC52YWx1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKGFwaVZlcnNpb24pIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYXBpVmVyc2lvbiAhPT0gYXBpVmVyc2lvbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hcGlWZXJzaW9uJC5uZXh0KGFwaVZlcnNpb24pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1aWxkZXIucHJvdG90eXBlLCBcImFwaUVuZHBvaW50XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXBpRW5kcG9pbnQkLnZhbHVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAoYXBpRW5kcG9pbnQpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYXBpRW5kcG9pbnQgIT09IGFwaUVuZHBvaW50KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFwaUVuZHBvaW50JC5uZXh0KGFwaUVuZHBvaW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCdWlsZGVyLnByb3RvdHlwZSwgXCJlZGl0aW5nTW9kZVwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmVkaXRpbmdNb2RlJC52YWx1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdGhpcy5lZGl0aW5nTW9kZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nTW9kZSQubmV4dCh2YWx1ZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQnVpbGRlci5wcm90b3R5cGUsIFwiZWRpdGluZ01vZGVsXCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZWRpdGluZ01vZGVsJC52YWx1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gdGhpcy5lZGl0aW5nTW9kZWwpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZWRpdGluZ01vZGVsJC5uZXh0KHZhbHVlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIEJ1aWxkZXIucHJvdG90eXBlLmZpbmRQYXJlbnRFbGVtZW50ID0gZnVuY3Rpb24gKHRhcmdldCwgY2FsbGJhY2ssIGNoZWNrRWxlbWVudCkge1xyXG4gICAgICAgIGlmIChjaGVja0VsZW1lbnQgPT09IHZvaWQgMCkgeyBjaGVja0VsZW1lbnQgPSB0cnVlOyB9XHJcbiAgICAgICAgaWYgKCEodGFyZ2V0IGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcGFyZW50ID0gY2hlY2tFbGVtZW50ID8gdGFyZ2V0IDogdGFyZ2V0LnBhcmVudEVsZW1lbnQ7XHJcbiAgICAgICAgZG8ge1xyXG4gICAgICAgICAgICBpZiAoIXBhcmVudCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIG1hdGNoZXMgPSBjYWxsYmFjayhwYXJlbnQpO1xyXG4gICAgICAgICAgICBpZiAobWF0Y2hlcykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBhcmVudDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gd2hpbGUgKChwYXJlbnQgPSBwYXJlbnQucGFyZW50RWxlbWVudCkpO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfTtcclxuICAgIEJ1aWxkZXIucHJvdG90eXBlLmZpbmRCdWlsZGVyUGFyZW50ID0gZnVuY3Rpb24gKHRhcmdldCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmZpbmRQYXJlbnRFbGVtZW50KHRhcmdldCwgZnVuY3Rpb24gKGVsKSB7XHJcbiAgICAgICAgICAgIHZhciBpZCA9IGVsLmdldEF0dHJpYnV0ZSgnYnVpbGRlci1pZCcpIHx8IGVsLmlkO1xyXG4gICAgICAgICAgICByZXR1cm4gQm9vbGVhbihpZCAmJiBpZC5pbmRleE9mKCdidWlsZGVyLScpID09PSAwKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBCdWlsZGVyLnByb3RvdHlwZS5zZXRVc2VyQWdlbnQgPSBmdW5jdGlvbiAodXNlckFnZW50KSB7XHJcbiAgICAgICAgdGhpcy51c2VyQWdlbnQgPSB1c2VyQWdlbnQgfHwgJyc7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiBTZXQgYSBob29rIHRvIG1vZGlmeSBldmVudHMgYmVpbmcgdHJhY2tlZCBmcm9tIGJ1aWxkZXIsIHN1Y2ggYXMgaW1wcmVzc2lvbnMgYW5kIGNsaWNrc1xyXG4gICAgICpcclxuICAgICAqIEZvciBleGFtcGxlLCB0byB0cmFjayB0aGUgbW9kZWwgSUQgb2YgZWFjaCBldmVudCBhc3NvY2lhdGVkIHdpdGggY29udGVudCBmb3IgcXVlcnlpbmdcclxuICAgICAqIGJ5IG1vZGUsIHlvdSBjYW4gZG9cclxuICAgICAqXHJcbiAgICAgKiAgICBidWlsZGVyLnNldFRyYWNraW5nSG9vaygoZXZlbnQsIGNvbnRleHQpID0+IHtcclxuICAgICAqICAgICAgaWYgKGNvbnRleHQuY29udGVudCkge1xyXG4gICAgICogICAgICAgIGV2ZW50LmRhdGEubWV0YWRhdGEubW9kZWxJZCA9IGNvbnRleHQuY29udGVudC5tb2RlbElkXHJcbiAgICAgKiAgICAgIH1cclxuICAgICAqICAgIH0pXHJcbiAgICAgKi9cclxuICAgIEJ1aWxkZXIucHJvdG90eXBlLnNldFRyYWNraW5nSG9vayA9IGZ1bmN0aW9uIChob29rKSB7XHJcbiAgICAgICAgdGhpcy50cmFja2luZ0hvb2tzLnB1c2goaG9vayk7XHJcbiAgICB9O1xyXG4gICAgQnVpbGRlci5wcm90b3R5cGUudHJhY2sgPSBmdW5jdGlvbiAoZXZlbnROYW1lLCBwcm9wZXJ0aWVzLCBjb250ZXh0KSB7XHJcbiAgICAgICAgaWYgKHByb3BlcnRpZXMgPT09IHZvaWQgMCkgeyBwcm9wZXJ0aWVzID0ge307IH1cclxuICAgICAgICAvLyBUT0RPOiBxdWV1ZSB1cCB0cmFjayByZXF1ZXN0cyBhbmQgZmlyZSB0aGVtIG9mZiB3aGVuIGNhblRyYWNrIHNldCB0byB0cnVlIC0gb3RoZXJ3aXNlIG1heSBnZXQgbG90cyBvZiBjbGlja3Mgd2l0aCBubyBpbXByZXNzaW9uc1xyXG4gICAgICAgIGlmIChpc0lmcmFtZSB8fCAhaXNCcm93c2VyIHx8IEJ1aWxkZXIuaXNQcmV2aWV3aW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGFwaUtleSA9IHRoaXMuYXBpS2V5O1xyXG4gICAgICAgIGlmICghYXBpS2V5KSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0J1aWxkZXIgaW50ZWdyYXRpb24gZXJyb3I6IExvb2tzIGxpa2UgdGhlIEJ1aWxkZXIgU0RLIGhhcyBub3QgYmVlbiBpbml0aWFsaXplZCBwcm9wZXJseSAoeW91ciBBUEkga2V5IGhhcyBub3QgYmVlbiBzZXQpLiBNYWtlIHN1cmUgeW91IGFyZSBjYWxsaW5nIGBidWlsZGVyLmluaXQoXCLCq1lPVVItQVBJLUtFWcK7XCIpO2AgYXMgZWFybHkgYXMgcG9zc2libGUgaW4geW91ciBhcHBsaWNhdGlvblxcJ3MgY29kZS4nKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZXZlbnREYXRhID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgIHR5cGU6IGV2ZW50TmFtZSxcclxuICAgICAgICAgICAgZGF0YTogX19hc3NpZ24oX19hc3NpZ24oe30sIG9taXQocHJvcGVydGllcywgJ21ldGEnKSksIHsgbWV0YWRhdGE6IF9fYXNzaWduKF9fYXNzaWduKHsgc2RrVmVyc2lvbjogQnVpbGRlci5WRVJTSU9OLCB1cmw6IGxvY2F0aW9uLmhyZWYgfSwgcHJvcGVydGllcy5tZXRhKSwgcHJvcGVydGllcy5tZXRhZGF0YSksIG93bmVySWQ6IGFwaUtleSwgdXNlckF0dHJpYnV0ZXM6IHRoaXMuZ2V0VXNlckF0dHJpYnV0ZXMoKSwgc2Vzc2lvbklkOiB0aGlzLnNlc3Npb25JZCwgdmlzaXRvcklkOiB0aGlzLnZpc2l0b3JJZCB9KSxcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBfYSA9IHRoaXMudHJhY2tpbmdIb29rczsgX2kgPCBfYS5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIGhvb2sgPSBfYVtfaV07XHJcbiAgICAgICAgICAgIHZhciByZXR1cm5WYWx1ZSA9IGhvb2soZXZlbnREYXRhLCBjb250ZXh0IHx8IHt9KTtcclxuICAgICAgICAgICAgaWYgKHJldHVyblZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBldmVudERhdGEgPSByZXR1cm5WYWx1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBiYXRjaCBldmVudHNcclxuICAgICAgICB0aGlzLmV2ZW50c1F1ZXVlLnB1c2goZXZlbnREYXRhKTtcclxuICAgICAgICBpZiAodGhpcy5jYW5UcmFjaykge1xyXG4gICAgICAgICAgICB0aGlzLnRocm90dGxlZENsZWFyRXZlbnRzUXVldWUoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQnVpbGRlci5wcm90b3R5cGUuZ2V0U2Vzc2lvbklkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIHNlc3Npb25JZCA9IG51bGw7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKEJ1aWxkZXIuaXNCcm93c2VyICYmIHR5cGVvZiBzZXNzaW9uU3RvcmFnZSAhPT0gJ3VuZGVmaW5lZCcpIHtcclxuICAgICAgICAgICAgICAgIHNlc3Npb25JZCA9IHRoaXMuZ2V0Q29va2llKHNlc3Npb25TdG9yYWdlS2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ1Nlc3Npb24gc3RvcmFnZSBlcnJvcicsIGVycik7XHJcbiAgICAgICAgICAgIC8vIEl0J3Mgb2tcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFzZXNzaW9uSWQpIHtcclxuICAgICAgICAgICAgc2Vzc2lvbklkID0gdXVpZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBHaXZlIHRoZSBhcHAgYSBzZWNvbmQgdG8gc3RhcnQgdXAgYW5kIHNldCBjYW5UcmFjayB0byBmYWxzZSBpZiBuZWVkZWRcclxuICAgICAgICBpZiAoQnVpbGRlci5pc0Jyb3dzZXIpIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChfdGhpcy5jYW5UcmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRDb29raWUoc2Vzc2lvblN0b3JhZ2VLZXksIHNlc3Npb25JZCwgZGF0ZVBsdXNNaW51dGVzKDMwKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ0Nvb2tpZSBzZXR0aW5nIGVycm9yJywgZXJyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBzZXNzaW9uSWQ7XHJcbiAgICB9O1xyXG4gICAgQnVpbGRlci5wcm90b3R5cGUuZ2V0VmlzaXRvcklkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKHRoaXMudmlzaXRvcklkKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnZpc2l0b3JJZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIHZpc2l0b3JJZCA9IG51bGw7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgaWYgKEJ1aWxkZXIuaXNCcm93c2VyICYmIHR5cGVvZiBsb2NhbFN0b3JhZ2UgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBjb29raWUgaW5zdGVhZD9cclxuICAgICAgICAgICAgICAgIHZpc2l0b3JJZCA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKGxvY2FsU3RvcmFnZUtleSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdMb2NhbCBzdG9yYWdlIGVycm9yJywgZXJyKTtcclxuICAgICAgICAgICAgLy8gSXQncyBva1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXZpc2l0b3JJZCkge1xyXG4gICAgICAgICAgICB2aXNpdG9ySWQgPSB1dWlkKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudmlzaXRvcklkID0gdmlzaXRvcklkO1xyXG4gICAgICAgIC8vIEdpdmUgdGhlIGFwcCBhIHNlY29uZCB0byBzdGFydCB1cCBhbmQgc2V0IGNhblRyYWNrIHRvIGZhbHNlIGlmIG5lZWRlZFxyXG4gICAgICAgIGlmIChCdWlsZGVyLmlzQnJvd3Nlcikge1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKF90aGlzLmNhblRyYWNrICYmIHR5cGVvZiBsb2NhbFN0b3JhZ2UgIT09ICd1bmRlZmluZWQnICYmIHZpc2l0b3JJZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShsb2NhbFN0b3JhZ2VLZXksIHZpc2l0b3JJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY2F0Y2ggKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZGVidWcoJ1Nlc3Npb24gc3RvcmFnZSBlcnJvcicsIGVycik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdmlzaXRvcklkO1xyXG4gICAgfTtcclxuICAgIEJ1aWxkZXIucHJvdG90eXBlLnRyYWNrSW1wcmVzc2lvbiA9IGZ1bmN0aW9uIChjb250ZW50SWQsIHZhcmlhdGlvbklkLCBwcm9wZXJ0aWVzLCBjb250ZXh0KSB7XHJcbiAgICAgICAgaWYgKGlzSWZyYW1lIHx8ICFpc0Jyb3dzZXIgfHwgQnVpbGRlci5pc1ByZXZpZXdpbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUT0RPOiB1c2UgdGhpcy50cmFjayBtZXRob2RcclxuICAgICAgICB0aGlzLnRyYWNrKCdpbXByZXNzaW9uJywge1xyXG4gICAgICAgICAgICBjb250ZW50SWQ6IGNvbnRlbnRJZCxcclxuICAgICAgICAgICAgdmFyaWF0aW9uSWQ6IHZhcmlhdGlvbklkICE9PSBjb250ZW50SWQgPyB2YXJpYXRpb25JZCA6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgbWV0YWRhdGE6IHByb3BlcnRpZXMsXHJcbiAgICAgICAgfSwgY29udGV4dCk7XHJcbiAgICB9O1xyXG4gICAgQnVpbGRlci5wcm90b3R5cGUudHJhY2tDb252ZXJzaW9uID0gZnVuY3Rpb24gKGFtb3VudCwgY29udGVudElkLCB2YXJpYXRpb25JZCwgY3VzdG9tUHJvcGVydGllcywgY29udGV4dCkge1xyXG4gICAgICAgIGlmIChpc0lmcmFtZSB8fCAhaXNCcm93c2VyIHx8IEJ1aWxkZXIuaXNQcmV2aWV3aW5nKSB7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG1ldGEgPSB0eXBlb2YgY29udGVudElkID09PSAnb2JqZWN0JyA/IGNvbnRlbnRJZCA6IGN1c3RvbVByb3BlcnRpZXM7XHJcbiAgICAgICAgdmFyIHVzZUNvbnRlbnRJZCA9IHR5cGVvZiBjb250ZW50SWQgPT09ICdzdHJpbmcnID8gY29udGVudElkIDogdW5kZWZpbmVkO1xyXG4gICAgICAgIHRoaXMudHJhY2soJ2NvbnZlcnNpb24nLCB7IGFtb3VudDogYW1vdW50LCB2YXJpYXRpb25JZDogdmFyaWF0aW9uSWQsIG1ldGE6IG1ldGEsIGNvbnRlbnRJZDogdXNlQ29udGVudElkIH0sIGNvbnRleHQpO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCdWlsZGVyLnByb3RvdHlwZSwgXCJpc0RldmVsb3BtZW50RW52XCIsIHtcclxuICAgICAgICAvLyBUT0RPOiBzZXQgdGhpcyBmb3IgUUFcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8gQXV0b21hdGljIGRldGVybWluaW5nIG9mIGRldmVsb3BtZW50IGVudmlyb25tZW50XHJcbiAgICAgICAgICAgIHJldHVybiAoQnVpbGRlci5pc0lmcmFtZSB8fFxyXG4gICAgICAgICAgICAgICAgKEJ1aWxkZXIuaXNCcm93c2VyICYmIChsb2NhdGlvbi5ob3N0bmFtZSA9PT0gJ2xvY2FsaG9zdCcgfHwgbG9jYXRpb24ucG9ydCAhPT0gJycpKSB8fFxyXG4gICAgICAgICAgICAgICAgdGhpcy5lbnYgIT09ICdwcm9kdWN0aW9uJyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgQnVpbGRlci5wcm90b3R5cGUudHJhY2tJbnRlcmFjdGlvbiA9IGZ1bmN0aW9uIChjb250ZW50SWQsIHZhcmlhdGlvbklkLCBhbHJlYWR5VHJhY2tlZE9uZSwgZXZlbnQsIGNvbnRleHQpIHtcclxuICAgICAgICBpZiAoYWxyZWFkeVRyYWNrZWRPbmUgPT09IHZvaWQgMCkgeyBhbHJlYWR5VHJhY2tlZE9uZSA9IGZhbHNlOyB9XHJcbiAgICAgICAgaWYgKGlzSWZyYW1lIHx8ICFpc0Jyb3dzZXIgfHwgQnVpbGRlci5pc1ByZXZpZXdpbmcpIHtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdGFyZ2V0ID0gZXZlbnQgJiYgZXZlbnQudGFyZ2V0O1xyXG4gICAgICAgIHZhciB0YXJnZXRCdWlsZGVyRWxlbWVudCA9IHRhcmdldCAmJiB0aGlzLmZpbmRCdWlsZGVyUGFyZW50KHRhcmdldCk7XHJcbiAgICAgICAgZnVuY3Rpb24gcm91bmQobnVtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBNYXRoLnJvdW5kKG51bSAqIDEwMDApIC8gMTAwMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG1ldGFkYXRhID0ge307XHJcbiAgICAgICAgaWYgKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIHZhciBjbGllbnRYID0gZXZlbnQuY2xpZW50WCwgY2xpZW50WSA9IGV2ZW50LmNsaWVudFk7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXQpIHtcclxuICAgICAgICAgICAgICAgIHZhciB0YXJnZXRSZWN0ID0gdGFyZ2V0LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHhPZmZzZXQgPSBjbGllbnRYIC0gdGFyZ2V0UmVjdC5sZWZ0O1xyXG4gICAgICAgICAgICAgICAgdmFyIHlPZmZzZXQgPSBjbGllbnRZIC0gdGFyZ2V0UmVjdC50b3A7XHJcbiAgICAgICAgICAgICAgICB2YXIgeFJhdGlvID0gcm91bmQoeE9mZnNldCAvIHRhcmdldFJlY3Qud2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHlSYXRpbyA9IHJvdW5kKHlPZmZzZXQgLyB0YXJnZXRSZWN0LmhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICBtZXRhZGF0YS50YXJnZXRPZmZzZXQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgeDogeFJhdGlvLFxyXG4gICAgICAgICAgICAgICAgICAgIHk6IHlSYXRpbyxcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRhcmdldEJ1aWxkZXJFbGVtZW50KSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0UmVjdCA9IHRhcmdldEJ1aWxkZXJFbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHhPZmZzZXQgPSBjbGllbnRYIC0gdGFyZ2V0UmVjdC5sZWZ0O1xyXG4gICAgICAgICAgICAgICAgdmFyIHlPZmZzZXQgPSBjbGllbnRZIC0gdGFyZ2V0UmVjdC50b3A7XHJcbiAgICAgICAgICAgICAgICB2YXIgeFJhdGlvID0gcm91bmQoeE9mZnNldCAvIHRhcmdldFJlY3Qud2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHlSYXRpbyA9IHJvdW5kKHlPZmZzZXQgLyB0YXJnZXRSZWN0LmhlaWdodCk7XHJcbiAgICAgICAgICAgICAgICBtZXRhZGF0YS5idWlsZGVyVGFyZ2V0T2Zmc2V0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHg6IHhSYXRpbyxcclxuICAgICAgICAgICAgICAgICAgICB5OiB5UmF0aW8sXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBidWlsZGVySWQgPSB0YXJnZXRCdWlsZGVyRWxlbWVudCAmJlxyXG4gICAgICAgICAgICAodGFyZ2V0QnVpbGRlckVsZW1lbnQuZ2V0QXR0cmlidXRlKCdidWlsZGVyLWlkJykgfHwgdGFyZ2V0QnVpbGRlckVsZW1lbnQuaWQpO1xyXG4gICAgICAgIGlmIChidWlsZGVySWQgJiYgdGFyZ2V0QnVpbGRlckVsZW1lbnQpIHtcclxuICAgICAgICAgICAgbWV0YWRhdGEuYnVpbGRlckVsZW1lbnRJbmRleCA9IFtdLnNsaWNlXHJcbiAgICAgICAgICAgICAgICAuY2FsbChkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKGJ1aWxkZXJJZCkpXHJcbiAgICAgICAgICAgICAgICAuaW5kZXhPZih0YXJnZXRCdWlsZGVyRWxlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMudHJhY2soJ2NsaWNrJywge1xyXG4gICAgICAgICAgICBjb250ZW50SWQ6IGNvbnRlbnRJZCxcclxuICAgICAgICAgICAgbWV0YWRhdGE6IG1ldGFkYXRhLFxyXG4gICAgICAgICAgICB2YXJpYXRpb25JZDogdmFyaWF0aW9uSWQgIT09IGNvbnRlbnRJZCA/IHZhcmlhdGlvbklkIDogdW5kZWZpbmVkLFxyXG4gICAgICAgICAgICB1bmlxdWU6ICFhbHJlYWR5VHJhY2tlZE9uZSxcclxuICAgICAgICAgICAgdGFyZ2V0QnVpbGRlckVsZW1lbnQ6IGJ1aWxkZXJJZCB8fCB1bmRlZmluZWQsXHJcbiAgICAgICAgfSwgY29udGV4dCk7XHJcbiAgICB9O1xyXG4gICAgQnVpbGRlci5wcm90b3R5cGUuY29tcG9uZW50ID0gZnVuY3Rpb24gKGluZm8pIHtcclxuICAgICAgICBpZiAoaW5mbyA9PT0gdm9pZCAwKSB7IGluZm8gPSB7fTsgfVxyXG4gICAgICAgIHJldHVybiBCdWlsZGVyLmNvbXBvbmVudChpbmZvKTtcclxuICAgIH07XHJcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQnVpbGRlci5wcm90b3R5cGUsIFwiYXBpS2V5XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXBpS2V5JC52YWx1ZTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKGtleSkge1xyXG4gICAgICAgICAgICB0aGlzLmFwaUtleSQubmV4dChrZXkpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCdWlsZGVyLnByb3RvdHlwZSwgXCJhdXRoVG9rZW5cIiwge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5hdXRoVG9rZW4kLnZhbHVlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodG9rZW4pIHtcclxuICAgICAgICAgICAgdGhpcy5hdXRoVG9rZW4kLm5leHQodG9rZW4pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIEJ1aWxkZXIucHJvdG90eXBlLm1vZGlmeVNlYXJjaCA9IGZ1bmN0aW9uIChzZWFyY2gpIHtcclxuICAgICAgICByZXR1cm4gc2VhcmNoLnJlcGxhY2UoLyhefCZ8XFw/KShidWlsZGVyXy4qPyk9L2dpLCBmdW5jdGlvbiAoX21hdGNoLCBncm91cDEsIGdyb3VwMikgeyByZXR1cm4gZ3JvdXAxICsgZ3JvdXAyLnJlcGxhY2UoL18vZywgJy4nKSArICc9JzsgfSk7XHJcbiAgICB9O1xyXG4gICAgQnVpbGRlci5wcm90b3R5cGUuc2V0VGVzdHNGcm9tVXJsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBzZWFyY2ggPSB0aGlzLmdldExvY2F0aW9uKCkuc2VhcmNoO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSBRdWVyeVN0cmluZy5wYXJzZURlZXAodGhpcy5tb2RpZnlTZWFyY2goc2VhcmNoIHx8ICcnKS5zdWJzdHIoMSkpO1xyXG4gICAgICAgICAgICB2YXIgdGVzdHMgPSBwYXJhbXMuYnVpbGRlciAmJiBwYXJhbXMuYnVpbGRlci50ZXN0cztcclxuICAgICAgICAgICAgaWYgKHRlc3RzICYmIHR5cGVvZiB0ZXN0cyA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiB0ZXN0cykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ZXN0cy5oYXNPd25Qcm9wZXJ0eShrZXkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VGVzdENvb2tpZShrZXksIHRlc3RzW2tleV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmRlYnVnKCdFcnJvciBwYXJzaW5nIHRlc3RzIGZyb20gVVJMJywgZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIEJ1aWxkZXIucHJvdG90eXBlLnJlc2V0T3ZlcnJpZGVzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIFVnbHkgLSBwYXNzIGRvd24gaW5zdGFuY2VzIHBlciByZXF1ZXN0IGluc3RlYWQgdXNpbmcgcmVhY3QgY29udGV4dFxyXG4gICAgICAgIC8vIG9yIHVzZSBidWlsZGVyLmdldCgnZm9vJywgeyByZXEsIHJlcyB9KSBpbiByZWFjdC4uLi4uLi4uLi4uXHJcbiAgICAgICAgQnVpbGRlci5vdmVycmlkZVVzZXJBdHRyaWJ1dGVzID0ge307XHJcbiAgICAgICAgdGhpcy5jYWNoZWJ1c3QgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLm5vQ2FjaGUgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLnByZXZpZXcgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLmVkaXRpbmdNb2RlbCA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5vdmVycmlkZXMgPSB7fTtcclxuICAgICAgICB0aGlzLmVudiA9ICdwcm9kdWN0aW9uJztcclxuICAgICAgICB0aGlzLnVzZXJBZ2VudCA9ICcnO1xyXG4gICAgICAgIHRoaXMucmVxdWVzdCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB0aGlzLnJlc3BvbnNlID0gdW5kZWZpbmVkO1xyXG4gICAgfTtcclxuICAgIEJ1aWxkZXIucHJvdG90eXBlLmdldE92ZXJyaWRlc0Zyb21RdWVyeVN0cmluZyA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgbG9jYXRpb24gPSB0aGlzLmdldExvY2F0aW9uKCk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgdmFyIHBhcmFtcyA9IFF1ZXJ5U3RyaW5nLnBhcnNlRGVlcCh0aGlzLm1vZGlmeVNlYXJjaChsb2NhdGlvbi5zZWFyY2ggfHwgJycpLnN1YnN0cigxKSk7XHJcbiAgICAgICAgICAgIHZhciBidWlsZGVyID0gcGFyYW1zLmJ1aWxkZXI7XHJcbiAgICAgICAgICAgIGlmIChidWlsZGVyKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdXNlckF0dHJpYnV0ZXMgPSBidWlsZGVyLnVzZXJBdHRyaWJ1dGVzLCBvdmVycmlkZXMgPSBidWlsZGVyLm92ZXJyaWRlcywgZW52ID0gYnVpbGRlci5lbnYsIGhvc3QgPSBidWlsZGVyLmhvc3QsIGFwaSA9IGJ1aWxkZXIuYXBpLCBjYWNoZWJ1c3QgPSBidWlsZGVyLmNhY2hlYnVzdCwgbm9DYWNoZSA9IGJ1aWxkZXIubm9DYWNoZSwgcHJldmlldyA9IGJ1aWxkZXIucHJldmlldywgZWRpdGluZyA9IGJ1aWxkZXIuZWRpdGluZywgZnJhbWVFZGl0aW5nID0gYnVpbGRlci5mcmFtZUVkaXRpbmcsIG9wdGlvbnMgPSBidWlsZGVyLm9wdGlvbnMsIG92ZXJyaWRlUGFyYW1zID0gYnVpbGRlci5wYXJhbXM7XHJcbiAgICAgICAgICAgICAgICBpZiAodXNlckF0dHJpYnV0ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFVzZXJBdHRyaWJ1dGVzKHVzZXJBdHRyaWJ1dGVzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcGlja2luZyBvbmx5IGxvY2FsZSwgaW5jbHVkZVJlZnMsIGFuZCBlbnJpY2ggZm9yIG5vd1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucXVlcnlPcHRpb25zID0gX19hc3NpZ24oX19hc3NpZ24oX19hc3NpZ24oe30sIChvcHRpb25zLmxvY2FsZSAmJiB7IGxvY2FsZTogb3B0aW9ucy5sb2NhbGUgfSkpLCAob3B0aW9ucy5pbmNsdWRlUmVmcyAmJiB7IGluY2x1ZGVSZWZzOiBvcHRpb25zLmluY2x1ZGVSZWZzIH0pKSwgKG9wdGlvbnMuZW5yaWNoICYmIHsgZW5yaWNoOiBvcHRpb25zLmVucmljaCB9KSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAob3ZlcnJpZGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5vdmVycmlkZXMgPSBvdmVycmlkZXM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsaWRFbnZMaXN0LmluZGV4T2YoZW52IHx8IGFwaSkgPiAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZW52ID0gZW52IHx8IGFwaTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChCdWlsZGVyLmlzRWRpdGluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBlZGl0aW5nTW9kZWwgPSBmcmFtZUVkaXRpbmcgfHwgZWRpdGluZyB8fCBwcmV2aWV3O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlZGl0aW5nTW9kZWwgJiYgZWRpdGluZ01vZGVsICE9PSAndHJ1ZScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0aW5nTW9kZWwgPSBlZGl0aW5nTW9kZWw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGNhY2hlYnVzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuY2FjaGVidXN0ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChub0NhY2hlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ub0NhY2hlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChwcmV2aWV3KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcmV2aWV3ID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChwYXJhbXMpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLm92ZXJyaWRlUGFyYW1zID0gb3ZlcnJpZGVQYXJhbXM7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgY29uc29sZS5kZWJ1ZygnRXJyb3IgcGFyc2luZyBvdmVycmlkZXMgZnJvbSBVUkwnLCBlKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgQnVpbGRlci5wcm90b3R5cGUubWVzc2FnZUZyYW1lTG9hZGVkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICAoX2EgPSB3aW5kb3cucGFyZW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICB0eXBlOiAnYnVpbGRlci5sb2FkZWQnLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICB2YWx1ZTogdHJ1ZSxcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9LCAnKicpO1xyXG4gICAgfTtcclxuICAgIEJ1aWxkZXIucHJvdG90eXBlLmJpbmRNZXNzYWdlTGlzdGVuZXJzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgX2EsIF9iLCBfYywgX2Q7XHJcbiAgICAgICAgICAgIHZhciBpc1RydXN0ZWQgPSBCdWlsZGVyLmlzVHJ1c3RlZEhvc3RGb3JFdmVudChldmVudCk7XHJcbiAgICAgICAgICAgIGlmICghaXNUcnVzdGVkKVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB2YXIgZGF0YSA9IGV2ZW50LmRhdGE7XHJcbiAgICAgICAgICAgIGlmIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBzd2l0Y2ggKGRhdGEudHlwZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2J1aWxkZXIucGluZyc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgKF9hID0gd2luZG93LnBhcmVudCkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdidWlsZGVyLnBvbmcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge30sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sICcqJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdidWlsZGVyLnJlZ2lzdGVyJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBUT0RPOiBwb3NzaWJseSBkbyB0aGlzIGZvciBhbGwuLi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV2ZW50LnNvdXJjZSA9PT0gd2luZG93KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9ucyA9IGRhdGEuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFvcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHlwZSA9IG9wdGlvbnMudHlwZSwgaW5mbyA9IG9wdGlvbnMuaW5mbztcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogYWxsIG11c3QgaGF2ZSBuYW1lIGFuZCBjYW4ndCBjb25mbGljdD9cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR5cGVMaXN0ID0gQnVpbGRlci5yZWdpc3RyeVt0eXBlXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0eXBlTGlzdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZUxpc3QgPSBCdWlsZGVyLnJlZ2lzdHJ5W3R5cGVdID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZUxpc3QucHVzaChpbmZvKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQnVpbGRlci5yZWdpc3RyeUNoYW5nZS5uZXh0KEJ1aWxkZXIucmVnaXN0cnkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYnVpbGRlci5zZXR0aW5nc0NoYW5nZSc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogcG9zc2libHkgZG8gdGhpcyBmb3IgYWxsLi4uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5zb3VyY2UgPT09IHdpbmRvdykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHNldHRpbmdzID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXNldHRpbmdzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBPYmplY3QuYXNzaWduKEJ1aWxkZXIuc2V0dGluZ3MsIHNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQnVpbGRlci5zZXR0aW5nc0NoYW5nZS5uZXh0KEJ1aWxkZXIuc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYnVpbGRlci5yZWdpc3RlckVkaXRvcic6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogcG9zc2libHkgZG8gdGhpcyBmb3IgYWxsLi4uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudC5zb3VyY2UgPT09IHdpbmRvdykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGluZm9fMSA9IGRhdGEuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpbmZvXzEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoYXNDb21wb25lbnRfMSA9ICEhaW5mb18xLmNvbXBvbmVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQnVpbGRlci5lZGl0b3JzLmV2ZXJ5KGZ1bmN0aW9uICh0aGlzSW5mbywgaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpbmZvXzEubmFtZSA9PT0gdGhpc0luZm8ubmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzSW5mby5jb21wb25lbnQgJiYgIWhhc0NvbXBvbmVudF8xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIEJ1aWxkZXIuZWRpdG9yc1tpbmRleF0gPSB0aGlzSW5mbztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYnVpbGRlci50cmlnZ2VyQW5pbWF0aW9uJzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBCdWlsZGVyLmFuaW1hdG9yLnRyaWdnZXJBbmltYXRpb24oZGF0YS5kYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2J1aWxkZXIuY29udGVudFVwZGF0ZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBrZXkgPSBkYXRhLmRhdGEua2V5IHx8IGRhdGEuZGF0YS5hbGlhcyB8fCBkYXRhLmRhdGEuZW50cnkgfHwgZGF0YS5kYXRhLm1vZGVsTmFtZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvbnRlbnREYXRhID0gZGF0YS5kYXRhLmRhdGE7IC8vIGhtbW0uLi5cclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9ic2VydmVyID0gX3RoaXMub2JzZXJ2ZXJzQnlLZXlba2V5XTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG9ic2VydmVyICYmICFfdGhpcy5ub0VkaXRvclVwZGF0ZXNba2V5XSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dChbY29udGVudERhdGFdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdidWlsZGVyLmdldENvbXBvbmVudHMnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAoX2IgPSB3aW5kb3cucGFyZW50KSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IucG9zdE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2J1aWxkZXIuY29tcG9uZW50cycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiBCdWlsZGVyLmNvbXBvbmVudHMubWFwKGZ1bmN0aW9uIChpdGVtKSB7IHJldHVybiBCdWlsZGVyLnByZXBhcmVDb21wb25lbnRTcGVjVG9TZW5kKGl0ZW0pOyB9KSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgJyonKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYnVpbGRlci5lZGl0aW5nTW9kZWwnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5lZGl0aW5nTW9kZWwgPSBkYXRhLmRhdGEubW9kZWw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2J1aWxkZXIucmVnaXN0ZXJDb21wb25lbnQnOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29tcG9uZW50RGF0YSA9IGRhdGEuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQnVpbGRlci5hZGRDb21wb25lbnQoY29tcG9uZW50RGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2J1aWxkZXIuYmxvY2tDb250ZW50TG9hZGluZyc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0YS5kYXRhLm1vZGVsID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuYmxvY2tDb250ZW50TG9hZGluZyA9IGRhdGEuZGF0YS5tb2RlbDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdidWlsZGVyLmVkaXRpbmdNb2RlJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGVkaXRpbmdNb2RlID0gZGF0YS5kYXRhO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZWRpdGluZ01vZGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF90aGlzLmVkaXRpbmdNb2RlID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgnYnVpbGRlci1lZGl0aW5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5lZGl0aW5nTW9kZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKCdidWlsZGVyLWVkaXRpbmcnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICBjYXNlICdidWlsZGVyLmVkaXRpbmdQYWdlTW9kZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBlZGl0aW5nUGFnZU1vZGUgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIEJ1aWxkZXIuZWRpdGluZ1BhZ2UgPSBlZGl0aW5nUGFnZU1vZGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2J1aWxkZXIub3ZlcnJpZGVVc2VyQXR0cmlidXRlcyc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1c2VyQXR0cmlidXRlcyA9IGRhdGEuZGF0YTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzaWduKEJ1aWxkZXIub3ZlcnJpZGVVc2VyQXR0cmlidXRlcywgdXNlckF0dHJpYnV0ZXMpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5mbHVzaEdldENvbnRlbnRRdWV1ZSh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogcmVmZXRjaCB0b29cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYnVpbGRlci5vdmVycmlkZVRlc3RHcm91cCc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBfZSA9IGRhdGEuZGF0YSwgdmFyaWF0aW9uSWQgPSBfZS52YXJpYXRpb25JZCwgY29udGVudElkID0gX2UuY29udGVudElkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodmFyaWF0aW9uSWQgJiYgY29udGVudElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRUZXN0Q29va2llKGNvbnRlbnRJZCwgdmFyaWF0aW9uSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgX3RoaXMuZmx1c2hHZXRDb250ZW50UXVldWUodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnYnVpbGRlci5ldmFsdWF0ZSc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHRleHQgPSBkYXRhLmRhdGEudGV4dDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGFyZ3MgPSBkYXRhLmRhdGEuYXJndW1lbnRzIHx8IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaWRfMSA9IGRhdGEuZGF0YS5pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOm5vLWZ1bmN0aW9uLWNvbnN0cnVjdG9yLXdpdGgtc3RyaW5nLWFyZ3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZuID0gbmV3IEZ1bmN0aW9uKHRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzdWx0ID0gdm9pZCAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgZXJyb3IgPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ID0gZm4uYXBwbHkoX3RoaXMsIGFyZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoIChlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yID0gdG9FcnJvcihlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKF9jID0gd2luZG93LnBhcmVudCkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYnVpbGRlci5ldmFsdWF0ZUVycm9yJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGlkOiBpZF8xLCBlcnJvcjogZXJyb3IubWVzc2FnZSB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgJyonKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQgJiYgdHlwZW9mIHJlc3VsdC50aGVuID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uIChmaW5hbFJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgX2E7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIChfYSA9IHdpbmRvdy5wYXJlbnQpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5wb3N0TWVzc2FnZSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYnVpbGRlci5ldmFsdWF0ZVJlc3VsdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IGlkOiBpZF8xLCByZXN1bHQ6IGZpbmFsUmVzdWx0IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sICcqJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmNhdGNoKGNvbnNvbGUuZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKF9kID0gd2luZG93LnBhcmVudCkgPT09IG51bGwgfHwgX2QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9kLnBvc3RNZXNzYWdlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2J1aWxkZXIuZXZhbHVhdGVSZXN1bHQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7IHJlc3VsdDogcmVzdWx0LCBpZDogaWRfMSB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sICcqJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1aWxkZXIucHJvdG90eXBlLCBcImRlZmF1bHRDYW5UcmFja1wiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBCb29sZWFuKEJ1aWxkZXIuaXNCcm93c2VyICYmXHJcbiAgICAgICAgICAgICAgICBuYXZpZ2F0b3IudXNlckFnZW50LnRyaW0oKSAmJlxyXG4gICAgICAgICAgICAgICAgIW5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2JvdHxjcmF3bGVyfHNwaWRlcnxyb2JvdHxjcmF3bGluZ3xwcmVyZW5kZXJ8Z29vZ2xlfGJhaWR1fGJpbmd8bXNufGR1Y2tkdWNrYm90fHRlb21hfHNsdXJwfHlhbmRleHxwaGFudG9tfGhlYWRsZXNzfHNlbGVuaXVtfHB1cHBldGVlci9pKSAmJlxyXG4gICAgICAgICAgICAgICAgIXRoaXMuYnJvd3NlclRyYWNraW5nRGlzYWJsZWQpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXHJcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICB9KTtcclxuICAgIEJ1aWxkZXIucHJvdG90eXBlLmluaXQgPSBmdW5jdGlvbiAoYXBpS2V5LCBjYW5UcmFjaywgcmVxLCByZXMsIGF1dGhUb2tlbiwgYXBpVmVyc2lvbikge1xyXG4gICAgICAgIGlmIChjYW5UcmFjayA9PT0gdm9pZCAwKSB7IGNhblRyYWNrID0gdGhpcy5kZWZhdWx0Q2FuVHJhY2s7IH1cclxuICAgICAgICBpZiAocmVxKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVxdWVzdCA9IHJlcTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHJlcykge1xyXG4gICAgICAgICAgICB0aGlzLnJlc3BvbnNlID0gcmVzO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLmNhblRyYWNrID0gY2FuVHJhY2s7XHJcbiAgICAgICAgdGhpcy5hcGlLZXkgPSBhcGlLZXk7XHJcbiAgICAgICAgaWYgKGF1dGhUb2tlbikge1xyXG4gICAgICAgICAgICB0aGlzLmF1dGhUb2tlbiA9IGF1dGhUb2tlbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGFwaVZlcnNpb24pIHtcclxuICAgICAgICAgICAgdGhpcy5hcGlWZXJzaW9uID0gYXBpVmVyc2lvbjtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICB9O1xyXG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1aWxkZXIucHJvdG90eXBlLCBcInByZXZpZXdpbmdNb2RlbFwiLCB7XHJcbiAgICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWFyY2ggPSB0aGlzLmdldExvY2F0aW9uKCkuc2VhcmNoO1xyXG4gICAgICAgICAgICB2YXIgcGFyYW1zID0gUXVlcnlTdHJpbmcucGFyc2UoKHNlYXJjaCB8fCAnJykuc3Vic3RyKDEpKTtcclxuICAgICAgICAgICAgcmV0dXJuIHBhcmFtc1snYnVpbGRlci5wcmV2aWV3J107XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcclxuICAgICAgICBjb25maWd1cmFibGU6IHRydWVcclxuICAgIH0pO1xyXG4gICAgLy8gVE9ETzogYWxsb3cgYWRkaW5nIGxvY2F0aW9uIG9iamVjdCBhcyBwcm9wZXJ0eSBhbmQvb3IgaW4gY29uc3RydWN0b3JcclxuICAgIEJ1aWxkZXIucHJvdG90eXBlLmdldExvY2F0aW9uID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICB2YXIgcGFyc2VkTG9jYXRpb24gPSB7fTtcclxuICAgICAgICAvLyBpbiBzc3IgbW9kZVxyXG4gICAgICAgIGlmICh0aGlzLnJlcXVlc3QpIHtcclxuICAgICAgICAgICAgcGFyc2VkTG9jYXRpb24gPSBwYXJzZSgoX2EgPSB0aGlzLnJlcXVlc3QudXJsKSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAnJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHR5cGVvZiBsb2NhdGlvbiA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgLy8gaW4gdGhlIGJyb3dzZXJcclxuICAgICAgICAgICAgcGFyc2VkTG9jYXRpb24gPSBwYXJzZShsb2NhdGlvbi5ocmVmKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSUUxMSBidWcgd2l0aCBwYXJzZWQgcGF0aCBiZWluZyBlbXB0eSBzdHJpbmdcclxuICAgICAgICAvLyBjYXVzZXMgaXNzdWVzIHdpdGggb3VyIHVzZXIgdGFyZ2V0aW5nXHJcbiAgICAgICAgaWYgKHBhcnNlZExvY2F0aW9uLnBhdGhuYW1lID09PSAnJykge1xyXG4gICAgICAgICAgICBwYXJzZWRMb2NhdGlvbi5wYXRobmFtZSA9ICcvJztcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHBhcnNlZExvY2F0aW9uO1xyXG4gICAgfTtcclxuICAgIEJ1aWxkZXIucHJvdG90eXBlLmdldFVzZXJBdHRyaWJ1dGVzID0gZnVuY3Rpb24gKHVzZXJBZ2VudCkge1xyXG4gICAgICAgIGlmICh1c2VyQWdlbnQgPT09IHZvaWQgMCkgeyB1c2VyQWdlbnQgPSB0aGlzLnVzZXJBZ2VudCB8fCAnJzsgfVxyXG4gICAgICAgIHZhciBpc01vYmlsZSA9IHtcclxuICAgICAgICAgICAgQW5kcm9pZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJBZ2VudC5tYXRjaCgvQW5kcm9pZC9pKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgQmxhY2tCZXJyeTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHVzZXJBZ2VudC5tYXRjaCgvQmxhY2tCZXJyeS9pKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgaU9TOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXNlckFnZW50Lm1hdGNoKC9pUGhvbmV8aVBvZC9pKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgT3BlcmE6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1c2VyQWdlbnQubWF0Y2goL09wZXJhIE1pbmkvaSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIFdpbmRvd3M6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB1c2VyQWdlbnQubWF0Y2goL0lFTW9iaWxlL2kpIHx8IHVzZXJBZ2VudC5tYXRjaCgvV1BEZXNrdG9wL2kpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBhbnk6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAoaXNNb2JpbGUuQW5kcm9pZCgpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgaXNNb2JpbGUuQmxhY2tCZXJyeSgpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgaXNNb2JpbGUuaU9TKCkgfHxcclxuICAgICAgICAgICAgICAgICAgICBpc01vYmlsZS5PcGVyYSgpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgaXNNb2JpbGUuV2luZG93cygpKTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHZhciBpc1RhYmxldCA9IHVzZXJBZ2VudC5tYXRjaCgvVGFibGV0fGlQYWQvaSk7XHJcbiAgICAgICAgdmFyIHVybCA9IHRoaXMuZ2V0TG9jYXRpb24oKTtcclxuICAgICAgICByZXR1cm4gX19hc3NpZ24oeyB1cmxQYXRoOiB1cmwucGF0aG5hbWUsIGhvc3Q6IHVybC5ob3N0IHx8IHVybC5ob3N0bmFtZSwgXHJcbiAgICAgICAgICAgIC8vIFRPRE86IG1heWJlIGFuIG9wdGlvbiB0byBjaG9vc2UgdG8gdGFyZ2V0IG9mZiBvZiBtb2JpbGUvdGFibGV0L2Rlc2t0b3Agb3IganVzdCBtb2JpbGUvZGVza3RvcFxyXG4gICAgICAgICAgICBkZXZpY2U6IGlzVGFibGV0ID8gJ3RhYmxldCcgOiBpc01vYmlsZS5hbnkoKSA/ICdtb2JpbGUnIDogJ2Rlc2t0b3AnIH0sIEJ1aWxkZXIub3ZlcnJpZGVVc2VyQXR0cmlidXRlcyk7XHJcbiAgICB9O1xyXG4gICAgQnVpbGRlci5wcm90b3R5cGUuc2V0VXNlckF0dHJpYnV0ZXMgPSBmdW5jdGlvbiAob3B0aW9ucykge1xyXG4gICAgICAgIGFzc2lnbihCdWlsZGVyLm92ZXJyaWRlVXNlckF0dHJpYnV0ZXMsIG9wdGlvbnMpO1xyXG4gICAgICAgIGlmICh0aGlzLmNhblRyYWNrKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0Q29va2llKEJ1aWxkZXIuYXR0cmlidXRlc0Nvb2tpZU5hbWUsIEpTT04uc3RyaW5naWZ5KHRoaXMuZ2V0VXNlckF0dHJpYnV0ZXMoKSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnVzZXJBdHRyaWJ1dGVzQ2hhbmdlZC5uZXh0KG9wdGlvbnMpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICogU2V0IHVzZXIgYXR0cmlidXRlcyBqdXN0IGZvciB0cmFja2luZyBwdXJwb3Nlcy5cclxuICAgICAqXHJcbiAgICAgKiBEbyB0aGlzIHNvIHByb3BlcnRpZXMgZXhpc3Qgb24gZXZlbnQgb2JqZWN0cyBmb3IgcXVlcnlpbmcgaW5zaWdodHMsIGJ1dFxyXG4gICAgICogd29uJ3QgYWZmZWN0IHRhcmdldGluZ1xyXG4gICAgICpcclxuICAgICAqIFVzZSB0aGlzIHdoZW4geW91IHdhbnQgdG8gdHJhY2sgcHJvcGVydGllcyBidXQgZG9uJ3QgbmVlZCB0byB0YXJnZXQgb2ZmXHJcbiAgICAgKiBvZiB0aGVtIHRvIG9wdGltaXplIGNhY2hlIGVmZmljaWVuY3lcclxuICAgICAqL1xyXG4gICAgQnVpbGRlci5wcm90b3R5cGUuc2V0VHJhY2tpbmdVc2VyQXR0cmlidXRlcyA9IGZ1bmN0aW9uIChhdHRyaWJ1dGVzKSB7XHJcbiAgICAgICAgYXNzaWduKHRoaXMudHJhY2tpbmdVc2VyQXR0cmlidXRlcywgYXR0cmlidXRlcyk7XHJcbiAgICB9O1xyXG4gICAgQnVpbGRlci5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKG1vZGVsTmFtZSwgb3B0aW9ucykge1xyXG4gICAgICAgIHZhciBfYTtcclxuICAgICAgICBpZiAob3B0aW9ucyA9PT0gdm9pZCAwKSB7IG9wdGlvbnMgPSB7fTsgfVxyXG4gICAgICAgIHZhciBpbnN0YW5jZSA9IHRoaXM7XHJcbiAgICAgICAgdmFyIGZpbmFsTG9jYWxlID0gb3B0aW9ucy5sb2NhbGUgfHwgKChfYSA9IG9wdGlvbnMudXNlckF0dHJpYnV0ZXMpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5sb2NhbGUpIHx8IHRoaXMuZ2V0VXNlckF0dHJpYnV0ZXMoKS5sb2NhbGU7XHJcbiAgICAgICAgaWYgKCEoJ25vVHJhdmVyc2UnIGluIG9wdGlvbnMpKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMubm9UcmF2ZXJzZSA9IGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgZmluYWxPcHRpb25zID0gX19hc3NpZ24oX19hc3NpZ24oe30sIG9wdGlvbnMpLCAoZmluYWxMb2NhbGUgJiYge1xyXG4gICAgICAgICAgICBsb2NhbGU6IFN0cmluZyhmaW5hbExvY2FsZSksXHJcbiAgICAgICAgICAgIHVzZXJBdHRyaWJ1dGVzOiBfX2Fzc2lnbih7IGxvY2FsZTogU3RyaW5nKGZpbmFsTG9jYWxlKSB9LCBvcHRpb25zLnVzZXJBdHRyaWJ1dGVzKSxcclxuICAgICAgICB9KSk7XHJcbiAgICAgICAgaWYgKCFCdWlsZGVyLmlzQnJvd3Nlcikge1xyXG4gICAgICAgICAgICBpbnN0YW5jZSA9IG5ldyBCdWlsZGVyKG9wdGlvbnMuYXBpS2V5IHx8IHRoaXMuYXBpS2V5LCBvcHRpb25zLnJlcSwgb3B0aW9ucy5yZXMsIHVuZGVmaW5lZCwgb3B0aW9ucy5hdXRoVG9rZW4gfHwgdGhpcy5hdXRoVG9rZW4sIG9wdGlvbnMuYXBpVmVyc2lvbiB8fCB0aGlzLmFwaVZlcnNpb24pO1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5hcGlFbmRwb2ludCA9IHRoaXMuYXBpRW5kcG9pbnQ7XHJcbiAgICAgICAgICAgIGluc3RhbmNlLnNldFVzZXJBdHRyaWJ1dGVzKHRoaXMuZ2V0VXNlckF0dHJpYnV0ZXMoKSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBOT1RFOiBBbGwgdGhlc2UgYXJlIHdoZW4gLmluaXQgaXMgbm90IGNhbGxlZCBhbmQgdGhlIGN1c3RvbWVyXHJcbiAgICAgICAgICAgIC8vIGRpcmVjdGx5IGNhbGxzIC5nZXQgb24gdGhlIHNpbmdsZXRvbiBpbnN0YW5jZSBvZiBCdWlsZGVyXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmFwaUtleSAmJiAhdGhpcy5hcGlLZXkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXBpS2V5ID0gb3B0aW9ucy5hcGlLZXk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYXV0aFRva2VuICYmICF0aGlzLmF1dGhUb2tlbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hdXRoVG9rZW4gPSBvcHRpb25zLmF1dGhUb2tlbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5hcGlWZXJzaW9uICYmICF0aGlzLmFwaVZlcnNpb24pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXBpVmVyc2lvbiA9IG9wdGlvbnMuYXBpVmVyc2lvbjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaW5zdGFuY2UucXVldWVHZXRDb250ZW50KG1vZGVsTmFtZSwgZmluYWxPcHRpb25zKS5tYXAoXHJcbiAgICAgICAgLyogbWFwKCAqLyBmdW5jdGlvbiAobWF0Y2hlcykge1xyXG4gICAgICAgICAgICB2YXIgbWF0Y2ggPSBtYXRjaGVzICYmIG1hdGNoZXNbMF07XHJcbiAgICAgICAgICAgIGlmIChCdWlsZGVyLmlzU3RhdGljKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbWF0Y2g7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdmFyIG1hdGNoRGF0YSA9IG1hdGNoICYmIG1hdGNoLmRhdGE7XHJcbiAgICAgICAgICAgIGlmICghbWF0Y2hEYXRhKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodHlwZW9mIG1hdGNoRGF0YS5ibG9ja3NTdHJpbmcgIT09ICd1bmRlZmluZWQnKSB7XHJcbiAgICAgICAgICAgICAgICBtYXRjaERhdGEuYmxvY2tzID0gSlNPTi5wYXJzZShtYXRjaERhdGEuYmxvY2tzU3RyaW5nKTtcclxuICAgICAgICAgICAgICAgIGRlbGV0ZSBtYXRjaERhdGEuYmxvY2tzU3RyaW5nO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAvLyBUT0RPOiBhZGQgYWIgdGVzdCBpbmZvIGhlcmUgYW5kIG90aGVyIGhpZ2ggbGV2ZWwgc3R1ZmZcclxuICAgICAgICAgICAgICAgIGRhdGE6IG1hdGNoRGF0YSxcclxuICAgICAgICAgICAgICAgIGlkOiBtYXRjaC5pZCxcclxuICAgICAgICAgICAgICAgIHZhcmlhdGlvbklkOiBtYXRjaC50ZXN0VmFyaWF0aW9uSWQgfHwgbWF0Y2gudmFyaWF0aW9uSWQgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgIHRlc3RWYXJpYXRpb25JZDogbWF0Y2gudGVzdFZhcmlhdGlvbklkIHx8IG1hdGNoLnZhcmlhdGlvbklkIHx8IG51bGwsXHJcbiAgICAgICAgICAgICAgICB0ZXN0VmFyaWF0aW9uTmFtZTogbWF0Y2gudGVzdFZhcmlhdGlvbk5hbWUgfHwgbnVsbCxcclxuICAgICAgICAgICAgICAgIGxhc3RVcGRhdGVkOiBtYXRjaC5sYXN0VXBkYXRlZCB8fCBudWxsLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vICk7XHJcbiAgICB9O1xyXG4gICAgLy8gVE9ETzogZW50cnkgaWQgaW4gb3B0aW9uc1xyXG4gICAgQnVpbGRlci5wcm90b3R5cGUucXVldWVHZXRDb250ZW50ID0gZnVuY3Rpb24gKG1vZGVsTmFtZSwgb3B0aW9ucykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cclxuICAgICAgICAvLyBUT0RPOiBpZiBxdWVyeSBkbyBtb2RlbE5hbWUgKyBxdWVyeVxyXG4gICAgICAgIHZhciBrZXkgPSBvcHRpb25zLmtleSB8fFxyXG4gICAgICAgICAgICBvcHRpb25zLmFsaWFzIHx8XHJcbiAgICAgICAgICAgIC8vIFRPRE86IFNES3Mgb25seSBwYXNzIGVudHJ5IGtleSB3aGVuIGdpdmVuIHRvIHRoZW0sIGFuZCBuZXZlciB3aGVuIGVkaXRpbmcuLi5cclxuICAgICAgICAgICAgLy8gb3B0aW9ucy5lbnRyeSB8fFxyXG4gICAgICAgICAgICAvLyBUT0RPOiB0aGlzIGlzIHVnbHkgLSBpbnN0ZWFkIG9mIG11bHRpcGxlIG9mIHNhbWUgbW9kZWwgd2l0aCBkaWZmZXJlbnQgb3B0aW9ucyBhcmUgc2VudFxyXG4gICAgICAgICAgICAvLyBzYXkgcmVxdWlyZXMga2V5L2FsaWFzLiBPciBpZiBub3QgcGVyaGFwcyBtYWtlIGEgcmVsaWFibGUgaGFzaCBvZiB0aGUgb3B0aW9ucyBhbmQgdXNlIHRoYXQuXHJcbiAgICAgICAgICAgIC8vIFRPRE86IHN0b3JlIGxhc3QgdXNlciBzdGF0ZSBvbiBsYXN0IHJlcXVlc3QgYW5kIGlmIHVzZXIgYXR0cmlidXRlcyBkaWZmZXJlbnQgbm93XHJcbiAgICAgICAgICAgIC8vIGdpdmUgYSB3YXJuaW5nIHRoYXQgbmVlZCB0byB1c2Uga2V5cyB0byByZXF1ZXN0IG5ldyBjb250ZW50ZVxyXG4gICAgICAgICAgICAvLyAob3B0aW9ucyAmJlxyXG4gICAgICAgICAgICAvLyAgIE9iamVjdC5rZXlzKG9wdGlvbnMpLmZpbHRlcihrZXkgPT4ga2V5ICE9PSAnbW9kZWwnKS5sZW5ndGggJiZcclxuICAgICAgICAgICAgLy8gICBKU09OLnN0cmluZ2lmeSh7IG1vZGVsOiBtb2RlbE5hbWUsIC4uLm9wdGlvbnMsIGluaXRpYWxDb250ZW50OiB1bmRlZmluZWQgfSkpIHx8XHJcbiAgICAgICAgICAgIG1vZGVsTmFtZTtcclxuICAgICAgICB2YXIgaXNFZGl0aW5nVGhpc01vZGVsID0gdGhpcy5lZGl0aW5nTW9kZWwgPT09IG1vZGVsTmFtZTtcclxuICAgICAgICAvLyBUT0RPOiBpbmNsdWRlIHBhcmFtcyBpbiB0aGlzIGtleS4uLi4uLi4uXHJcbiAgICAgICAgdmFyIGN1cnJlbnRPYnNlcnZhYmxlID0gdGhpcy5vYnNlcnZlcnNCeUtleVtrZXldO1xyXG4gICAgICAgIC8vIGlmIChvcHRpb25zLnF1ZXJ5ICYmIG9wdGlvbnMucXVlcnkuX2lkKSB7XHJcbiAgICAgICAgLy8gICB0aGlzLmZsdXNoR2V0Q29udGVudFF1ZXVlKFtvcHRpb25zXSlcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgaWYgKHRoaXMuYXBpS2V5ID09PSAnREVNTycgJiYgIXRoaXMub3ZlcnJpZGVzW2tleV0gJiYgIW9wdGlvbnMuaW5pdGlhbENvbnRlbnQpIHtcclxuICAgICAgICAgICAgb3B0aW9ucy5pbml0aWFsQ29udGVudCA9IFtdO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgaW5pdGlhbENvbnRlbnQgPSBvcHRpb25zLmluaXRpYWxDb250ZW50O1xyXG4gICAgICAgIC8vIFRPRE86IHJlZnJlc2ggb3B0aW9uIGluIG9wdGlvbnNcclxuICAgICAgICBpZiAoY3VycmVudE9ic2VydmFibGUgJiYgKCFjdXJyZW50T2JzZXJ2YWJsZS52YWx1ZSB8fCBvcHRpb25zLmNhY2hlKSkge1xyXG4gICAgICAgICAgICAvLyBUT0RPOiB0ZXN0IGlmIHRoaXMgcmFuLCBvdGhlcndpc2Ugb24gNDA0IHNvbWUgb2JzZXJ2ZXJzIG1heSBuZXZlciBiZSBjYWxsZWQuLi5cclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRPYnNlcnZhYmxlLnZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICBuZXh0VGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVE9ETzogcmV0dXJuIGEgbmV3IG9ic2VydmFibGUgYW5kIG9ubHkgdGhhdCBvbmUgZmlyZXMgc3Vic2NyaWJlcnMsIGRvbid0IHJlZmlyZSBmb3IgZXhpc3Rpbmcgb25lc1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRPYnNlcnZhYmxlLm5leHQoY3VycmVudE9ic2VydmFibGUudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnRPYnNlcnZhYmxlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaXNFZGl0aW5nVGhpc01vZGVsKSB7XHJcbiAgICAgICAgICAgIGlmIChCdWlsZGVyLmlzQnJvd3Nlcikge1xyXG4gICAgICAgICAgICAgICAgcGFyZW50LnBvc3RNZXNzYWdlKHsgdHlwZTogJ2J1aWxkZXIudXBkYXRlQ29udGVudCcsIGRhdGE6IHsgb3B0aW9uczogb3B0aW9ucyB9IH0sICcqJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCFpbml0aWFsQ29udGVudCAvKiB8fCBpc0VkaXRpbmdUaGlzTW9kZWwgKi8pIHtcclxuICAgICAgICAgICAgaWYgKCF0aGlzLmdldENvbnRlbnRRdWV1ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRDb250ZW50UXVldWUgPSBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLmdldENvbnRlbnRRdWV1ZS5wdXNoKF9fYXNzaWduKF9fYXNzaWduKHt9LCBvcHRpb25zKSwgeyBtb2RlbDogbW9kZWxOYW1lLCBrZXk6IGtleSB9KSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmdldENvbnRlbnRRdWV1ZSAmJiB0aGlzLmdldENvbnRlbnRRdWV1ZS5sZW5ndGggPj0gdGhpcy5jb250ZW50UGVyUmVxdWVzdCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHF1ZXVlXzEgPSB0aGlzLmdldENvbnRlbnRRdWV1ZS5zbGljZSgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5nZXRDb250ZW50UXVldWUgPSBbXTtcclxuICAgICAgICAgICAgICAgIG5leHRUaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5mbHVzaEdldENvbnRlbnRRdWV1ZShmYWxzZSwgcXVldWVfMSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIG5leHRUaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5mbHVzaEdldENvbnRlbnRRdWV1ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIG9ic2VydmFibGUgPSBuZXcgQmVoYXZpb3JTdWJqZWN0KG51bGwpO1xyXG4gICAgICAgIHRoaXMub2JzZXJ2ZXJzQnlLZXlba2V5XSA9IG9ic2VydmFibGU7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMubm9FZGl0b3JVcGRhdGVzKSB7XHJcbiAgICAgICAgICAgIHRoaXMubm9FZGl0b3JVcGRhdGVzW2tleV0gPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaW5pdGlhbENvbnRlbnQpIHtcclxuICAgICAgICAgICAgbmV4dFRpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gVE9ETzogbmVlZCB0byB0ZXN0TW9kaWZ5IHRoaXMgSSB0aGluay4uLj9cclxuICAgICAgICAgICAgICAgIG9ic2VydmFibGUubmV4dChpbml0aWFsQ29udGVudCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gb2JzZXJ2YWJsZTtcclxuICAgIH07XHJcbiAgICAvLyB0aGlzIGlzIG5lZWRlZCB0byBzYXRpc2Z5IHRoZSBBbmd1bGFyIFNESywgd2hpY2ggdXNlZCB0byByZWx5IG9uIHRoZSBtb3JlIGNvbXBsZXggdmVyc2lvbiBvZiBgcmVxdWVzdFVybGAuXHJcbiAgICAvLyBldmVuIHRob3VnaCB3ZSBvbmx5IHVzZSBgZmV0Y2goKWAgbm93LCB3ZSBwcmVmZXIgdG8ga2VlcCB0aGUgb2xkIGJlaGF2aW9yIGFuZCB1c2UgdGhlIGBmZXRjaGAgdGhhdCBjb21lcyBmcm9tXHJcbiAgICAvLyB0aGUgY29yZSBTREsgZm9yIGNvbnNpc3RlbmN5XHJcbiAgICBCdWlsZGVyLnByb3RvdHlwZS5yZXF1ZXN0VXJsID0gZnVuY3Rpb24gKHVybCwgb3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiBnZXRGZXRjaCgpKHVybCwgdGhpcy5hZGRTZGtIZWFkZXJzKG9wdGlvbnMpKS50aGVuKGZ1bmN0aW9uIChyZXMpIHsgcmV0dXJuIHJlcy5qc29uKCk7IH0pO1xyXG4gICAgfTtcclxuICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShCdWlsZGVyLnByb3RvdHlwZSwgXCJob3N0XCIsIHtcclxuICAgICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgc3dpdGNoICh0aGlzLmVudikge1xyXG4gICAgICAgICAgICAgICAgY2FzZSAncWEnOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnaHR0cHM6Ly9xYS5idWlsZGVyLmlvJztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ3Rlc3QnOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnaHR0cHM6Ly9idWlsZGVyLWlvLXRlc3Qud2ViLmFwcCc7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdmYXN0JzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2h0dHBzOi8vZmFzdC5idWlsZGVyLmlvJztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2Nsb3VkJzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2h0dHBzOi8vY2xvdWQuYnVpbGRlci5pbyc7XHJcbiAgICAgICAgICAgICAgICBjYXNlICdjZG4yJzpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ2h0dHBzOi8vY2RuMi5idWlsZGVyLmlvJztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2Nkbi1xYSc6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdodHRwczovL2Nkbi1xYS5idWlsZGVyLmlvJztcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2RldmVsb3BtZW50JzpcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2Rldic6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdodHRwOi8vbG9jYWxob3N0OjUwMDAnO1xyXG4gICAgICAgICAgICAgICAgY2FzZSAnY2RuLXByb2QnOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnaHR0cHM6Ly9jZG4uYnVpbGRlci5pbyc7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBCdWlsZGVyLm92ZXJyaWRlSG9zdCB8fCAnaHR0cHM6Ly9jZG4uYnVpbGRlci5pbyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxyXG4gICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZVxyXG4gICAgfSk7XHJcbiAgICBCdWlsZGVyLnByb3RvdHlwZS5nZXRTZGtIZWFkZXJzID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICghQnVpbGRlci5zZGtJbmZvKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7fTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgJ1gtQnVpbGRlci1TREsnOiBCdWlsZGVyLnNka0luZm8ubmFtZSxcclxuICAgICAgICAgICAgJ1gtQnVpbGRlci1TREstR0VOJzogJzEnLFxyXG4gICAgICAgICAgICAnWC1CdWlsZGVyLVNESy1WZXJzaW9uJzogQnVpbGRlci5zZGtJbmZvLnZlcnNpb24sXHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcbiAgICBCdWlsZGVyLnByb3RvdHlwZS5hZGRTZGtIZWFkZXJzID0gZnVuY3Rpb24gKGZldGNoT3B0aW9ucykge1xyXG4gICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZmV0Y2hPcHRpb25zKSwgeyBoZWFkZXJzOiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgZmV0Y2hPcHRpb25zLmhlYWRlcnMpLCB0aGlzLmdldFNka0hlYWRlcnMoKSkgfSk7XHJcbiAgICB9O1xyXG4gICAgQnVpbGRlci5wcm90b3R5cGUubWFrZUZldGNoQXBpQ2FsbCA9IGZ1bmN0aW9uICh1cmwsIHJlcXVlc3RPcHRpb25zKSB7XHJcbiAgICAgICAgcmV0dXJuIGdldEZldGNoKCkodXJsLCB0aGlzLmFkZFNka0hlYWRlcnMocmVxdWVzdE9wdGlvbnMpKTtcclxuICAgIH07XHJcbiAgICBCdWlsZGVyLnByb3RvdHlwZS5mbGF0dGVuTW9uZ29RdWVyeSA9IGZ1bmN0aW9uIChvYmosIF9jdXJyZW50LCBfcmVzKSB7XHJcbiAgICAgICAgaWYgKF9yZXMgPT09IHZvaWQgMCkgeyBfcmVzID0ge307IH1cclxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IG9ialtrZXldO1xyXG4gICAgICAgICAgICB2YXIgbmV3S2V5ID0gX2N1cnJlbnQgPyBfY3VycmVudCArICcuJyArIGtleSA6IGtleTtcclxuICAgICAgICAgICAgaWYgKHZhbHVlICYmXHJcbiAgICAgICAgICAgICAgICB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmXHJcbiAgICAgICAgICAgICAgICAhQXJyYXkuaXNBcnJheSh2YWx1ZSkgJiZcclxuICAgICAgICAgICAgICAgICFPYmplY3Qua2V5cyh2YWx1ZSkuZmluZChmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gaXRlbS5zdGFydHNXaXRoKCckJyk7IH0pKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmZsYXR0ZW5Nb25nb1F1ZXJ5KHZhbHVlLCBuZXdLZXksIF9yZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgX3Jlc1tuZXdLZXldID0gdmFsdWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIF9yZXM7XHJcbiAgICB9O1xyXG4gICAgQnVpbGRlci5wcm90b3R5cGUuZmx1c2hHZXRDb250ZW50UXVldWUgPSBmdW5jdGlvbiAodXNlUGFzdFF1ZXVlLCB1c2VRdWV1ZSkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIGlmICh1c2VQYXN0UXVldWUgPT09IHZvaWQgMCkgeyB1c2VQYXN0UXVldWUgPSBmYWxzZTsgfVxyXG4gICAgICAgIGlmICghdGhpcy5hcGlLZXkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiRmV0Y2hpbmcgY29udGVudCBmYWlsZWQsIGV4cGVjdGVkIGFwaUtleSB0byBiZSBkZWZpbmVkIGluc3RlYWQgZ290OiBcIi5jb25jYXQodGhpcy5hcGlLZXkpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuYXBpVmVyc2lvbikge1xyXG4gICAgICAgICAgICBpZiAoIVsndjEnLCAndjMnXS5pbmNsdWRlcyh0aGlzLmFwaVZlcnNpb24pKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGFwaVZlcnNpb246IGV4cGVjdGVkICd2MScgb3IgJ3YzJywgcmVjZWl2ZWQgJ1wiLmNvbmNhdCh0aGlzLmFwaVZlcnNpb24sIFwiJ1wiKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMuYXBpVmVyc2lvbiA9IERFRkFVTFRfQVBJX1ZFUlNJT047XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghdXNlUGFzdFF1ZXVlICYmICF0aGlzLmdldENvbnRlbnRRdWV1ZSkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBxdWV1ZSA9IHVzZVF1ZXVlIHx8ICh1c2VQYXN0UXVldWUgPyB0aGlzLnByaW9yQ29udGVudFF1ZXVlIDogdGhpcy5nZXRDb250ZW50UXVldWUpIHx8IFtdO1xyXG4gICAgICAgIC8vIFRPRE86IGRvIHRoaXMgb24gZXZlcnkgcmVxdWVzdCBzZW5kP1xyXG4gICAgICAgIHRoaXMuZ2V0T3ZlcnJpZGVzRnJvbVF1ZXJ5U3RyaW5nKCk7XHJcbiAgICAgICAgdmFyIHF1ZXJ5UGFyYW1zID0gX19hc3NpZ24oX19hc3NpZ24oeyBcclxuICAgICAgICAgICAgLy8gVE9ETzogd2F5IHRvIGZvcmNlIGEgcmVxdWVzdCB0byBiZSBpbiBhIHNlcGFyYXRlIHF1ZXVlLiBvciBqdXN0IGxvd2VyIHF1ZXVlIGxpbWl0IHRvIGJlIDEgYnkgZGVmYXVsdFxyXG4gICAgICAgICAgICBvbWl0OiBxdWV1ZVswXS5vbWl0IHx8ICdtZXRhLmNvbXBvbmVudHNVc2VkJywgYXBpS2V5OiB0aGlzLmFwaUtleSB9LCBxdWV1ZVswXS5vcHRpb25zKSwgdGhpcy5xdWVyeU9wdGlvbnMpO1xyXG4gICAgICAgIGlmIChxdWV1ZVswXS5sb2NhbGUpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbXMubG9jYWxlID0gcXVldWVbMF0ubG9jYWxlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAocXVldWVbMF0uZmllbGRzKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1zLmZpZWxkcyA9IHF1ZXVlWzBdLmZpZWxkcztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHF1ZXVlWzBdLmZvcm1hdCkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtcy5mb3JtYXQgPSBxdWV1ZVswXS5mb3JtYXQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgnbm9UcmF2ZXJzZScgaW4gcXVldWVbMF0pIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbXMubm9UcmF2ZXJzZSA9IHF1ZXVlWzBdLm5vVHJhdmVyc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgnaW5jbHVkZVVucHVibGlzaGVkJyBpbiBxdWV1ZVswXSkge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtcy5pbmNsdWRlVW5wdWJsaXNoZWQgPSBxdWV1ZVswXS5pbmNsdWRlVW5wdWJsaXNoZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChxdWV1ZVswXS5zb3J0KSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1zLnNvcnQgPSBxdWV1ZVswXS5zb3J0O1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgcGFnZVF1ZXJ5UGFyYW1zID0gKHR5cGVvZiBsb2NhdGlvbiAhPT0gJ3VuZGVmaW5lZCdcclxuICAgICAgICAgICAgPyBRdWVyeVN0cmluZy5wYXJzZURlZXAobG9jYXRpb24uc2VhcmNoLnN1YnN0cigxKSlcclxuICAgICAgICAgICAgOiB1bmRlZmluZWQpIHx8IHt9OyAvLyBUT0RPOiBXSEFUIGFib3V0IFNTUiAodGhpcy5yZXF1ZXN0KSA/XHJcbiAgICAgICAgdmFyIHVzZXJBdHRyaWJ1dGVzID0gXHJcbiAgICAgICAgLy8gRklYTUU6IEhBQ0s6IG9ubHkgY2hlY2tzIGZpcnN0IGluIHF1ZXVlIGZvciB1c2VyIGF0dHJpYnV0ZXMgb3ZlcnJpZGVzLCBzaG91bGQgY2hlY2sgYWxsXHJcbiAgICAgICAgLy8gVE9ETzogbWVyZ2UgdXNlciBhdHRyaWJ1dGVzIHByb3ZpZGVkIGhlcmUgd2l0aCBkZWZhdWx0cyBhbmQgY3VycmVudCB1c2VyIGF0dGlyaWJ1dGVzICg/KVxyXG4gICAgICAgIHF1ZXVlICYmIHF1ZXVlWzBdLnVzZXJBdHRyaWJ1dGVzXHJcbiAgICAgICAgICAgID8gcXVldWVbMF0udXNlckF0dHJpYnV0ZXNcclxuICAgICAgICAgICAgOiB0aGlzLnRhcmdldENvbnRlbnRcclxuICAgICAgICAgICAgICAgID8gdGhpcy5nZXRVc2VyQXR0cmlidXRlcygpXHJcbiAgICAgICAgICAgICAgICA6IHtcclxuICAgICAgICAgICAgICAgICAgICB1cmxQYXRoOiB0aGlzLmdldExvY2F0aW9uKCkucGF0aG5hbWUsXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgIHZhciBmdWxsVXJsUXVldWVJdGVtID0gcXVldWUuZmluZChmdW5jdGlvbiAoaXRlbSkgeyByZXR1cm4gISFpdGVtLmluY2x1ZGVVcmw7IH0pO1xyXG4gICAgICAgIGlmIChmdWxsVXJsUXVldWVJdGVtKSB7XHJcbiAgICAgICAgICAgIHZhciBsb2NhdGlvbl8xID0gdGhpcy5nZXRMb2NhdGlvbigpO1xyXG4gICAgICAgICAgICBpZiAobG9jYXRpb25fMS5vcmlnaW4pIHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zLnVybCA9IFwiXCIuY29uY2F0KGxvY2F0aW9uXzEub3JpZ2luKS5jb25jYXQobG9jYXRpb25fMS5wYXRobmFtZSkuY29uY2F0KGxvY2F0aW9uXzEuc2VhcmNoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdXJsUXVldWVJdGVtID0gdXNlUXVldWUgPT09IG51bGwgfHwgdXNlUXVldWUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHVzZVF1ZXVlLmZpbmQoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIGl0ZW0udXJsOyB9KTtcclxuICAgICAgICBpZiAodXJsUXVldWVJdGVtID09PSBudWxsIHx8IHVybFF1ZXVlSXRlbSA9PT0gdm9pZCAwID8gdm9pZCAwIDogdXJsUXVldWVJdGVtLnVybCkge1xyXG4gICAgICAgICAgICB1c2VyQXR0cmlidXRlcy51cmxQYXRoID0gdXJsUXVldWVJdGVtLnVybC5zcGxpdCgnPycpWzBdO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBUT0RPOiBtZXJnZSBpbiB0aGUgYXR0cmlidXRlIGZyb20gcXVlcnkgc3RyaW5nIG9uZXNcclxuICAgICAgICAvLyBUT0RPOiBtYWtlIHRoaXMgYW4gb3B0aW9uIHBlciBjb21wb25lbnQvcmVxdWVzdFxyXG4gICAgICAgIHF1ZXJ5UGFyYW1zLnVzZXJBdHRyaWJ1dGVzID0gSlNPTi5zdHJpbmdpZnkodXNlckF0dHJpYnV0ZXMpO1xyXG4gICAgICAgIGlmICghdXNlUGFzdFF1ZXVlICYmICF1c2VRdWV1ZSkge1xyXG4gICAgICAgICAgICB0aGlzLnByaW9yQ29udGVudFF1ZXVlID0gcXVldWU7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0Q29udGVudFF1ZXVlID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGNhY2hlYnVzdCA9IHRoaXMuY2FjaGVidXN0IHx8XHJcbiAgICAgICAgICAgIGlzSWZyYW1lIHx8XHJcbiAgICAgICAgICAgIHBhZ2VRdWVyeVBhcmFtcy5jYWNoZWJ1c3QgfHxcclxuICAgICAgICAgICAgcGFnZVF1ZXJ5UGFyYW1zWydidWlsZGVyLmNhY2hlYnVzdCddO1xyXG4gICAgICAgIGlmIChjYWNoZWJ1c3QgfHwgdGhpcy5lbnYgIT09ICdwcm9kdWN0aW9uJykge1xyXG4gICAgICAgICAgICBxdWVyeVBhcmFtcy5jYWNoZWJ1c3QgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoQnVpbGRlci5pc0VkaXRpbmcpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbXMuaXNFZGl0aW5nID0gdHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMubm9DYWNoZSB8fCB0aGlzLmVudiAhPT0gJ3Byb2R1Y3Rpb24nKSB7XHJcbiAgICAgICAgICAgIHF1ZXJ5UGFyYW1zLm5vQ2FjaGUgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoc2l6ZSh0aGlzLm92ZXJyaWRlcykpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMub3ZlcnJpZGVzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5vdmVycmlkZXMuaGFzT3duUHJvcGVydHkoa2V5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW1wib3ZlcnJpZGVzLlwiLmNvbmNhdChrZXkpXSA9IHRoaXMub3ZlcnJpZGVzW2tleV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBxdWV1ZV8yID0gcXVldWU7IF9pIDwgcXVldWVfMi5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSBxdWV1ZV8yW19pXTtcclxuICAgICAgICAgICAgdmFyIGZvcm1hdF8xID0gb3B0aW9ucy5mb3JtYXQ7XHJcbiAgICAgICAgICAgIGlmIChmb3JtYXRfMSkge1xyXG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbXMuZm9ybWF0ID0gZm9ybWF0XzE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gVE9ETzogcmVtb3ZlIG1lIGFuZCBtYWtlIHBlcm1vZGVsXHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLnN0YXRpYykge1xyXG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbXMuc3RhdGljID0gb3B0aW9ucy5zdGF0aWM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuY2FjaGVidXN0KSB7XHJcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtcy5jYWNoZWJ1c3QgPSBvcHRpb25zLmNhY2hlYnVzdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaXNQb3NpdGl2ZU51bWJlcihvcHRpb25zLmNhY2hlU2Vjb25kcykpIHtcclxuICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zLmNhY2hlU2Vjb25kcyA9IG9wdGlvbnMuY2FjaGVTZWNvbmRzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChpc1Bvc2l0aXZlTnVtYmVyKG9wdGlvbnMuc3RhbGVDYWNoZVNlY29uZHMpKSB7XHJcbiAgICAgICAgICAgICAgICBxdWVyeVBhcmFtcy5zdGFsZUNhY2hlU2Vjb25kcyA9IG9wdGlvbnMuc3RhbGVDYWNoZVNlY29uZHM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuYXBpRW5kcG9pbnQgPT09ICdjb250ZW50Jykge1xyXG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbXMuaW5jbHVkZVJlZnMgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBwcm9wZXJ0aWVzID0gW1xyXG4gICAgICAgICAgICAgICAgJ3ByZXJlbmRlcicsXHJcbiAgICAgICAgICAgICAgICAnZXh0cmFjdENzcycsXHJcbiAgICAgICAgICAgICAgICAnbGltaXQnLFxyXG4gICAgICAgICAgICAgICAgJ29mZnNldCcsXHJcbiAgICAgICAgICAgICAgICAncXVlcnknLFxyXG4gICAgICAgICAgICAgICAgJ3ByZXZpZXcnLFxyXG4gICAgICAgICAgICAgICAgJ21vZGVsJyxcclxuICAgICAgICAgICAgICAgICdlbnRyeScsXHJcbiAgICAgICAgICAgICAgICAncmV2JyxcclxuICAgICAgICAgICAgICAgICdzdGF0aWMnLFxyXG4gICAgICAgICAgICAgICAgJ2luY2x1ZGVSZWZzJyxcclxuICAgICAgICAgICAgXTtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2IgPSAwLCBwcm9wZXJ0aWVzXzEgPSBwcm9wZXJ0aWVzOyBfYiA8IHByb3BlcnRpZXNfMS5sZW5ndGg7IF9iKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBrZXkgPSBwcm9wZXJ0aWVzXzFbX2JdO1xyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gb3B0aW9uc1trZXldO1xyXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5hcGlFbmRwb2ludCA9PT0gJ3F1ZXJ5Jykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBxdWVyeVBhcmFtcy5vcHRpb25zID0gcXVlcnlQYXJhbXMub3B0aW9ucyB8fCB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlQYXJhbXMub3B0aW9uc1tvcHRpb25zLmtleV0gPSBxdWVyeVBhcmFtcy5vcHRpb25zW29wdGlvbnMua2V5XSB8fCB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcXVlcnlQYXJhbXMub3B0aW9uc1tvcHRpb25zLmtleV1ba2V5XSA9IEpTT04uc3RyaW5naWZ5KHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHF1ZXJ5UGFyYW1zW2tleV0gPSBKU09OLnN0cmluZ2lmeSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLnByZXZpZXcgJiYgdGhpcy5wcmV2aWV3aW5nTW9kZWwgPT09ICgoX2EgPSBxdWV1ZSA9PT0gbnVsbCB8fCBxdWV1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcXVldWVbMF0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tb2RlbCkpIHtcclxuICAgICAgICAgICAgcXVlcnlQYXJhbXMucHJldmlldyA9ICd0cnVlJztcclxuICAgICAgICB9XHJcbiAgICAgICAgdmFyIGhhc1BhcmFtcyA9IE9iamVjdC5rZXlzKHF1ZXJ5UGFyYW1zKS5sZW5ndGggPiAwO1xyXG4gICAgICAgIC8vIFRPRE86IG9wdGlvbiB0byBmb3JjZSBkZXYgb3IgcWEgYXBpIGhlcmVcclxuICAgICAgICB2YXIgaG9zdCA9IHRoaXMuaG9zdDtcclxuICAgICAgICB2YXIga2V5TmFtZXMgPSBxdWV1ZS5tYXAoZnVuY3Rpb24gKGl0ZW0pIHsgcmV0dXJuIGVuY29kZVVSSUNvbXBvbmVudChpdGVtLmtleSk7IH0pLmpvaW4oJywnKTtcclxuICAgICAgICBpZiAodGhpcy5vdmVycmlkZVBhcmFtcykge1xyXG4gICAgICAgICAgICB2YXIgcGFyYW1zID0gb21pdChRdWVyeVN0cmluZy5wYXJzZSh0aGlzLm92ZXJyaWRlUGFyYW1zKSwgJ2FwaUtleScpO1xyXG4gICAgICAgICAgICBhc3NpZ24ocXVlcnlQYXJhbXMsIHBhcmFtcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBmb3JtYXQgPSBxdWVyeVBhcmFtcy5mb3JtYXQ7XHJcbiAgICAgICAgdmFyIGlzQXBpQ2FsbEZvckNvZGVnZW4gPSBmb3JtYXQgPT09ICdzb2xpZCcgfHwgZm9ybWF0ID09PSAncmVhY3QnO1xyXG4gICAgICAgIHZhciBpc0FwaUNhbGxGb3JDb2RlZ2VuT3JRdWVyeSA9IGlzQXBpQ2FsbEZvckNvZGVnZW4gfHwgdGhpcy5hcGlFbmRwb2ludCA9PT0gJ3F1ZXJ5JztcclxuICAgICAgICBpZiAodGhpcy5hcGlFbmRwb2ludCA9PT0gJ2NvbnRlbnQnKSB7XHJcbiAgICAgICAgICAgIGlmIChxdWV1ZVswXS5xdWVyeSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGZsYXR0ZW5lZCA9IHRoaXMuZmxhdHRlbk1vbmdvUXVlcnkoeyBxdWVyeTogcXVldWVbMF0ucXVlcnkgfSk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBrZXkgaW4gZmxhdHRlbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcXVlcnlQYXJhbXNba2V5XSA9IGZsYXR0ZW5lZFtrZXldO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZGVsZXRlIHF1ZXJ5UGFyYW1zLnF1ZXJ5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBxdWVyeVN0ciA9IFF1ZXJ5U3RyaW5nLnN0cmluZ2lmeURlZXAocXVlcnlQYXJhbXMpO1xyXG4gICAgICAgIHZhciBmZXRjaE9wdGlvbnMgPSBfX2Fzc2lnbih7IGhlYWRlcnM6IHt9IH0sIHF1ZXVlWzBdLmZldGNoT3B0aW9ucyk7XHJcbiAgICAgICAgaWYgKHRoaXMuYXV0aFRva2VuKSB7XHJcbiAgICAgICAgICAgIGZldGNoT3B0aW9ucy5oZWFkZXJzID0gX19hc3NpZ24oX19hc3NpZ24oe30sIGZldGNoT3B0aW9ucy5oZWFkZXJzKSwgeyBBdXRob3JpemF0aW9uOiBcIkJlYXJlciBcIi5jb25jYXQodGhpcy5hdXRoVG9rZW4pIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgdXJsO1xyXG4gICAgICAgIGlmIChpc0FwaUNhbGxGb3JDb2RlZ2VuKSB7XHJcbiAgICAgICAgICAgIHVybCA9IFwiXCIuY29uY2F0KGhvc3QsIFwiL2FwaS92MS9jb2RlZ2VuL1wiKS5jb25jYXQodGhpcy5hcGlLZXksIFwiL1wiKS5jb25jYXQoa2V5TmFtZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLmFwaUVuZHBvaW50ID09PSAncXVlcnknKSB7XHJcbiAgICAgICAgICAgIHVybCA9IFwiXCIuY29uY2F0KGhvc3QsIFwiL2FwaS92My9xdWVyeS9cIikuY29uY2F0KHRoaXMuYXBpS2V5LCBcIi9cIikuY29uY2F0KGtleU5hbWVzKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgIHVybCA9IFwiXCIuY29uY2F0KGhvc3QsIFwiL2FwaS92My9jb250ZW50L1wiKS5jb25jYXQocXVldWVbMF0ubW9kZWwpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB1cmwgPSB1cmwgKyAocXVlcnlQYXJhbXMgJiYgaGFzUGFyYW1zID8gXCI/XCIuY29uY2F0KHF1ZXJ5U3RyKSA6ICcnKTtcclxuICAgICAgICB2YXIgcHJvbWlzZSA9IHRoaXMubWFrZUZldGNoQXBpQ2FsbCh1cmwsIGZldGNoT3B0aW9ucylcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlcykgeyByZXR1cm4gcmVzLmpzb24oKTsgfSlcclxuICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICBmb3IgKHZhciBfaSA9IDAsIHF1ZXVlXzMgPSBxdWV1ZTsgX2kgPCBxdWV1ZV8zLmxlbmd0aDsgX2krKykge1xyXG4gICAgICAgICAgICAgICAgdmFyIG9wdGlvbnMgPSBxdWV1ZV8zW19pXTtcclxuICAgICAgICAgICAgICAgIHZhciBrZXlOYW1lID0gb3B0aW9ucy5rZXk7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucy5tb2RlbCA9PT0gX3RoaXMuYmxvY2tDb250ZW50TG9hZGluZyAmJiAhb3B0aW9ucy5ub0VkaXRvclVwZGF0ZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciBpc0VkaXRpbmdUaGlzTW9kZWwgPSBfdGhpcy5lZGl0aW5nTW9kZWwgPT09IG9wdGlvbnMubW9kZWw7XHJcbiAgICAgICAgICAgICAgICBpZiAoaXNFZGl0aW5nVGhpc01vZGVsICYmIEJ1aWxkZXIuaXNFZGl0aW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyZW50LnBvc3RNZXNzYWdlKHsgdHlwZTogJ2J1aWxkZXIudXBkYXRlQ29udGVudCcsIGRhdGE6IHsgb3B0aW9uczogb3B0aW9ucyB9IH0sICcqJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIG9ic2VydmVyID0gX3RoaXMub2JzZXJ2ZXJzQnlLZXlba2V5TmFtZV07XHJcbiAgICAgICAgICAgICAgICBpZiAoIW9ic2VydmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdmFyIGRhdGEgPSBpc0FwaUNhbGxGb3JDb2RlZ2VuT3JRdWVyeSA/IHJlc3VsdFtrZXlOYW1lXSA6IHJlc3VsdC5yZXN1bHRzO1xyXG4gICAgICAgICAgICAgICAgdmFyIHNvcnRlZCA9IGRhdGE7IC8vIHNvcnRCeShkYXRhLCBpdGVtID0+IGl0ZW0ucHJpb3JpdHkpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGVzdE1vZGlmaWVkUmVzdWx0cyA9IEJ1aWxkZXIuaXNTZXJ2ZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBzb3J0ZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBfdGhpcy5wcm9jZXNzUmVzdWx0c0ZvclRlc3RzKHNvcnRlZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgb2JzZXJ2ZXIubmV4dCh0ZXN0TW9kaWZpZWRSZXN1bHRzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBzZWFyY2ggPSBfdGhpcy5nZXRMb2NhdGlvbigpLnNlYXJjaDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoKHNlYXJjaCB8fCAnJykuaW5jbHVkZXMoJ2J1aWxkZXIucHJldmlldz0nICsgb3B0aW9ucy5tb2RlbCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHByZXZpZXdEYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6ICdwcmV2aWV3JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdQcmV2aWV3JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHt9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5uZXh0KFtwcmV2aWV3RGF0YV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBvYnNlcnZlci5uZXh0KFtdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0sIGZ1bmN0aW9uIChlcnIpIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgX2kgPSAwLCBxdWV1ZV80ID0gcXVldWU7IF9pIDwgcXVldWVfNC5sZW5ndGg7IF9pKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBvcHRpb25zID0gcXVldWVfNFtfaV07XHJcbiAgICAgICAgICAgICAgICB2YXIgb2JzZXJ2ZXIgPSBfdGhpcy5vYnNlcnZlcnNCeUtleVtvcHRpb25zLmtleV07XHJcbiAgICAgICAgICAgICAgICBpZiAoIW9ic2VydmVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgb2JzZXJ2ZXIuZXJyb3IoZXJyKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBwcm9taXNlO1xyXG4gICAgfTtcclxuICAgIEJ1aWxkZXIucHJvdG90eXBlLnByb2Nlc3NSZXN1bHRzRm9yVGVzdHMgPSBmdW5jdGlvbiAocmVzdWx0cykge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IHRoaXM7XHJcbiAgICAgICAgdmFyIF9hO1xyXG4gICAgICAgIHZhciBtYXBwZWRSZXN1bHRzID0gcmVzdWx0cy5tYXAoZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgaWYgKCFpdGVtLnZhcmlhdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBpdGVtO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHZhciBjb29raWVWYWx1ZSA9IF90aGlzLmdldFRlc3RDb29raWUoaXRlbS5pZCk7XHJcbiAgICAgICAgICAgIHZhciBjb29raWVWYXJpYXRpb24gPSBjb29raWVWYWx1ZSA9PT0gaXRlbS5pZCA/IGl0ZW0gOiBpdGVtLnZhcmlhdGlvbnNbY29va2llVmFsdWVdO1xyXG4gICAgICAgICAgICBpZiAoY29va2llVmFyaWF0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gX19hc3NpZ24oX19hc3NpZ24oe30sIGl0ZW0pLCB7IGRhdGE6IGNvb2tpZVZhcmlhdGlvbi5kYXRhLCB2YXJpYXRpb25JZDogY29va2llVmFsdWUsIHRlc3RWYXJpYXRpb25JZDogY29va2llVmFsdWUsIHRlc3RWYXJpYXRpb25OYW1lOiBjb29raWVWYXJpYXRpb24ubmFtZSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoX3RoaXMuY2FuVHJhY2sgJiYgaXRlbS52YXJpYXRpb25zICYmIHNpemUoaXRlbS52YXJpYXRpb25zKSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIG4gPSAwO1xyXG4gICAgICAgICAgICAgICAgdmFyIHJhbmRvbSA9IE1hdGgucmFuZG9tKCk7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpZCBpbiBpdGVtLnZhcmlhdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdmFyaWF0aW9uID0gaXRlbS52YXJpYXRpb25zW2lkXTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGVzdFJhdGlvID0gdmFyaWF0aW9uLnRlc3RSYXRpbztcclxuICAgICAgICAgICAgICAgICAgICBuICs9IHRlc3RSYXRpbztcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmFuZG9tIDwgbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5zZXRUZXN0Q29va2llKGl0ZW0uaWQsIHZhcmlhdGlvbi5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2YXJpYXRpb25OYW1lID0gdmFyaWF0aW9uLm5hbWUgfHwgKHZhcmlhdGlvbi5pZCA9PT0gaXRlbS5pZCA/ICdEZWZhdWx0IHZhcmlhdGlvbicgOiAnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbih7fSwgaXRlbSksIHsgZGF0YTogdmFyaWF0aW9uLmRhdGEsIHZhcmlhdGlvbklkOiB2YXJpYXRpb24uaWQsIHRlc3RWYXJpYXRpb25JZDogdmFyaWF0aW9uLmlkLCB2YXJpYXRpb25OYW1lOiB2YXJpYXRpb25OYW1lLCB0ZXN0VmFyaWF0aW9uTmFtZTogdmFyaWF0aW9uTmFtZSB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBfdGhpcy5zZXRUZXN0Q29va2llKGl0ZW0uaWQsIGl0ZW0uaWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBfX2Fzc2lnbihfX2Fzc2lnbihfX2Fzc2lnbih7fSwgaXRlbSksIHsgdmFyaWF0aW9uSWQ6IGl0ZW0uaWQgfSksIChpdGVtLnZhcmlhdGlvbnMgJiZcclxuICAgICAgICAgICAgICAgIHNpemUoaXRlbS52YXJpYXRpb25zKSAmJiB7XHJcbiAgICAgICAgICAgICAgICB0ZXN0VmFyaWF0aW9uSWQ6IGl0ZW0uaWQsXHJcbiAgICAgICAgICAgICAgICB0ZXN0VmFyaWF0aW9uTmFtZTogJ0RlZmF1bHQgdmFyaWF0aW9uJyxcclxuICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChpc0lmcmFtZSkge1xyXG4gICAgICAgICAgICAoX2EgPSB3aW5kb3cucGFyZW50KSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucG9zdE1lc3NhZ2UoeyB0eXBlOiAnYnVpbGRlci5jb250ZW50UmVzdWx0cycsIGRhdGE6IHsgcmVzdWx0czogbWFwcGVkUmVzdWx0cyB9IH0sICcqJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBtYXBwZWRSZXN1bHRzO1xyXG4gICAgfTtcclxuICAgIEJ1aWxkZXIucHJvdG90eXBlLmdldFRlc3RDb29raWUgPSBmdW5jdGlvbiAoY29udGVudElkKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZ2V0Q29va2llKFwiXCIuY29uY2F0KHRoaXMudGVzdENvb2tpZVByZWZpeCwgXCIuXCIpLmNvbmNhdChjb250ZW50SWQpKTtcclxuICAgIH07XHJcbiAgICBCdWlsZGVyLnByb3RvdHlwZS5zZXRUZXN0Q29va2llID0gZnVuY3Rpb24gKGNvbnRlbnRJZCwgdmFyaWF0aW9uSWQpIHtcclxuICAgICAgICBpZiAoIXRoaXMuY2FuVHJhY2spIHtcclxuICAgICAgICAgICAgdGhpcy5jb29raWVRdWV1ZS5wdXNoKFtjb250ZW50SWQsIHZhcmlhdGlvbklkXSk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gMzAgZGF5cyBmcm9tIG5vd1xyXG4gICAgICAgIHZhciBmdXR1cmUgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIGZ1dHVyZS5zZXREYXRlKGZ1dHVyZS5nZXREYXRlKCkgKyAzMCk7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0Q29va2llKFwiXCIuY29uY2F0KHRoaXMudGVzdENvb2tpZVByZWZpeCwgXCIuXCIpLmNvbmNhdChjb250ZW50SWQpLCB2YXJpYXRpb25JZCwgZnV0dXJlKTtcclxuICAgIH07XHJcbiAgICBCdWlsZGVyLnByb3RvdHlwZS5nZXRDb29raWUgPSBmdW5jdGlvbiAobmFtZSkge1xyXG4gICAgICAgIGlmICh0aGlzLmNvb2tpZXMpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29va2llcy5nZXQobmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBCdWlsZGVyLmlzQnJvd3NlciAmJiBnZXRDb29raWUobmFtZSk7XHJcbiAgICB9O1xyXG4gICAgQnVpbGRlci5wcm90b3R5cGUuc2V0Q29va2llID0gZnVuY3Rpb24gKG5hbWUsIHZhbHVlLCBleHBpcmVzKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuY29va2llcyAmJiAhKEJ1aWxkZXIuaXNTZXJ2ZXIgJiYgQnVpbGRlci5pc1N0YXRpYykpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY29va2llcy5zZXQobmFtZSwgdmFsdWUsIHtcclxuICAgICAgICAgICAgICAgIGV4cGlyZXM6IGV4cGlyZXMsXHJcbiAgICAgICAgICAgICAgICBzZWN1cmU6IHRoaXMuZ2V0TG9jYXRpb24oKS5wcm90b2NvbCA9PT0gJ2h0dHBzOicsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gQnVpbGRlci5pc0Jyb3dzZXIgJiYgc2V0Q29va2llKG5hbWUsIHZhbHVlLCBleHBpcmVzKTtcclxuICAgIH07XHJcbiAgICBCdWlsZGVyLnByb3RvdHlwZS5nZXRDb250ZW50ID0gZnVuY3Rpb24gKG1vZGVsTmFtZSwgb3B0aW9ucykge1xyXG4gICAgICAgIGlmIChvcHRpb25zID09PSB2b2lkIDApIHsgb3B0aW9ucyA9IHt9OyB9XHJcbiAgICAgICAgaWYgKCF0aGlzLmFwaUtleSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJGZXRjaGluZyBjb250ZW50IGZyb20gbW9kZWwgXCIuY29uY2F0KG1vZGVsTmFtZSwgXCIgZmFpbGVkLCBleHBlY3RlZCBhcGlLZXkgdG8gYmUgZGVmaW5lZCBpbnN0ZWFkIGdvdDogXCIpLmNvbmNhdCh0aGlzLmFwaUtleSkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdGhpcy5xdWV1ZUdldENvbnRlbnQobW9kZWxOYW1lLCBvcHRpb25zKTtcclxuICAgIH07XHJcbiAgICBCdWlsZGVyLnByb3RvdHlwZS5nZXRBbGwgPSBmdW5jdGlvbiAobW9kZWxOYW1lLCBvcHRpb25zKSB7XHJcbiAgICAgICAgaWYgKG9wdGlvbnMgPT09IHZvaWQgMCkgeyBvcHRpb25zID0ge307IH1cclxuICAgICAgICB2YXIgaW5zdGFuY2UgPSB0aGlzO1xyXG4gICAgICAgIGlmICghQnVpbGRlci5pc0Jyb3dzZXIpIHtcclxuICAgICAgICAgICAgaW5zdGFuY2UgPSBuZXcgQnVpbGRlcihvcHRpb25zLmFwaUtleSB8fCB0aGlzLmFwaUtleSwgb3B0aW9ucy5yZXEsIG9wdGlvbnMucmVzLCBmYWxzZSwgb3B0aW9ucy5hdXRoVG9rZW4gfHwgdGhpcy5hdXRoVG9rZW4sIG9wdGlvbnMuYXBpVmVyc2lvbiB8fCB0aGlzLmFwaVZlcnNpb24pO1xyXG4gICAgICAgICAgICBpbnN0YW5jZS5zZXRVc2VyQXR0cmlidXRlcyh0aGlzLmdldFVzZXJBdHRyaWJ1dGVzKCkpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgLy8gTk9URTogQWxsIHRoZXNlIGFyZSB3aGVuIC5pbml0IGlzIG5vdCBjYWxsZWQgYW5kIHRoZSBjdXN0b21lclxyXG4gICAgICAgICAgICAvLyBkaXJlY3RseSBjYWxscyAuZ2V0IG9uIHRoZSBzaW5nbGV0b24gaW5zdGFuY2Ugb2YgQnVpbGRlclxyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5hcGlLZXkgJiYgIXRoaXMuYXBpS2V5KSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFwaUtleSA9IG9wdGlvbnMuYXBpS2V5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChvcHRpb25zLmF1dGhUb2tlbiAmJiAhdGhpcy5hdXRoVG9rZW4pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYXV0aFRva2VuID0gb3B0aW9ucy5hdXRoVG9rZW47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMuYXBpVmVyc2lvbiAmJiAhdGhpcy5hcGlWZXJzaW9uKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFwaVZlcnNpb24gPSBvcHRpb25zLmFwaVZlcnNpb247XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gU2V0IG5vVHJhdmVyc2U9dHJ1ZSBpZiBOT1QgYWxyZWFkeSBwYXNzZWQgYnkgdXNlciwgZm9yIHF1ZXJ5IHBlcmZvcm1hbmNlXHJcbiAgICAgICAgaWYgKCEoJ25vVHJhdmVyc2UnIGluIG9wdGlvbnMpKSB7XHJcbiAgICAgICAgICAgIG9wdGlvbnMubm9UcmF2ZXJzZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpbnN0YW5jZVxyXG4gICAgICAgICAgICAuZ2V0Q29udGVudChtb2RlbE5hbWUsIF9fYXNzaWduKF9fYXNzaWduKHsgbGltaXQ6IDMwIH0sIG9wdGlvbnMpLCB7IGtleTogb3B0aW9ucy5rZXkgfHxcclxuICAgICAgICAgICAgICAgIC8vIE1ha2UgdGhlIGtleSBpbmNsdWRlIGFsbCBvcHRpb25zLCBzbyB3ZSBkb24ndCByZXVzZSBjYWNoZSBmb3IgdGhlIHNhbWUgY29udGVudCBmZXRjaGVkXHJcbiAgICAgICAgICAgICAgICAvLyB3aXRoIGRpZmZlcmVudCBvcHRpb25zXHJcbiAgICAgICAgICAgICAgICBCdWlsZGVyLmlzQnJvd3NlclxyXG4gICAgICAgICAgICAgICAgPyBcIlwiLmNvbmNhdChtb2RlbE5hbWUsIFwiOlwiKS5jb25jYXQoaGFzaChvbWl0KG9wdGlvbnMsICdpbml0aWFsQ29udGVudCcsICdyZXEnLCAncmVzJykpKVxyXG4gICAgICAgICAgICAgICAgOiB1bmRlZmluZWQgfSkpXHJcbiAgICAgICAgICAgIC5wcm9taXNlKCk7XHJcbiAgICB9O1xyXG4gICAgQnVpbGRlci5WRVJTSU9OID0gU0RLX1ZFUlNJT047XHJcbiAgICBCdWlsZGVyLmNvbXBvbmVudHMgPSBbXTtcclxuICAgIC8qKlxyXG4gICAgICogTWFrZXMgaXQgc28gdGhhdCBhL2IgdGVzdHMgZ2VuZXJhdGUgY29kZSBsaWtlIHtAbGlua1xyXG4gICAgICogaHR0cHM6Ly93d3cuYnVpbGRlci5pby9ibG9nL2hpZ2gtcGVyZm9ybWFuY2Utbm8tY29kZSNfX25leHQ6fjp0ZXh0PVN0YXRpYyUyMGdlbmVyYXRlZCUyMEElMkZCJTIwdGVzdGluZ31cclxuICAgICAqIGluc3RlYWQgb2YgdGhlIG9sZCB3YXkgd2hlcmUgd2UgcmVuZGVyIG9ubHkgb25lIHRlc3QgZ3JvdXAgYXQgYSB0aW1lIG9uIHRoZVxyXG4gICAgICogc2VydmVyLiBUaGlzIGlzIHRoZSBwcmVmZXJyZWQvYmV0dGVyIHdheSBub3QgYW5kIHdlIHNob3VsZCB1bHRpbWF0ZWx5IG1ha2UgaXRcclxuICAgICAqIHRoZSBkZWZhdWx0XHJcbiAgICAgKi9cclxuICAgIEJ1aWxkZXIuaXNTdGF0aWMgPSB0cnVlO1xyXG4gICAgQnVpbGRlci5hbmltYXRvciA9IG5ldyBBbmltYXRvcigpO1xyXG4gICAgQnVpbGRlci5uZXh0VGljayA9IG5leHRUaWNrO1xyXG4gICAgQnVpbGRlci50aHJvdHRsZSA9IHRocm90dGxlO1xyXG4gICAgQnVpbGRlci5lZGl0b3JzID0gW107XHJcbiAgICBCdWlsZGVyLnRydXN0ZWRIb3N0cyA9IFtcclxuICAgICAgICAnKi5iZXRhLmJ1aWxkZXIuaW8nLFxyXG4gICAgICAgICdiZXRhLmJ1aWxkZXIuaW8nLFxyXG4gICAgICAgICdidWlsZGVyLmlvJyxcclxuICAgICAgICAnbG9jYWxob3N0JyxcclxuICAgICAgICAncWEuYnVpbGRlci5pbycsXHJcbiAgICBdO1xyXG4gICAgQnVpbGRlci5wbHVnaW5zID0gW107XHJcbiAgICBCdWlsZGVyLmFjdGlvbnMgPSBbXTtcclxuICAgIEJ1aWxkZXIucmVnaXN0cnkgPSB7fTtcclxuICAgIEJ1aWxkZXIuYXR0cmlidXRlc0Nvb2tpZU5hbWUgPSAnYnVpbGRlci51c2VyQXR0cmlidXRlcyc7XHJcbiAgICBCdWlsZGVyLnJlZ2lzdHJ5Q2hhbmdlID0gbmV3IEJlaGF2aW9yU3ViamVjdCh7fSk7XHJcbiAgICBCdWlsZGVyLl9lZGl0aW5nUGFnZSA9IGZhbHNlO1xyXG4gICAgQnVpbGRlci5pc0lmcmFtZSA9IGlzSWZyYW1lO1xyXG4gICAgQnVpbGRlci5pc0Jyb3dzZXIgPSBpc0Jyb3dzZXI7XHJcbiAgICBCdWlsZGVyLmlzUmVhY3ROYXRpdmUgPSBpc1JlYWN0TmF0aXZlO1xyXG4gICAgQnVpbGRlci5pc1NlcnZlciA9ICFpc0Jyb3dzZXIgJiYgIWlzUmVhY3ROYXRpdmU7XHJcbiAgICBCdWlsZGVyLnByZXZpZXdpbmdNb2RlbCA9IEJ1aWxkZXIuaXNCcm93c2VyICYmIGdldFF1ZXJ5UGFyYW0obG9jYXRpb24uaHJlZiwgJ2J1aWxkZXIucHJldmlldycpO1xyXG4gICAgQnVpbGRlci5zZXR0aW5ncyA9IHt9O1xyXG4gICAgQnVpbGRlci5zZXR0aW5nc0NoYW5nZSA9IG5ldyBCZWhhdmlvclN1YmplY3Qoe30pO1xyXG4gICAgLy8gVE9ETzogdGhpcyBpcyBxdWljayBhbmQgZGlydHksIGRvIGJldHRlciBpbXBsZW1lbnRhdGlvbiBsYXRlci4gQWxzbyBjYW4gYmUgdW5yZWxpYWJsZVxyXG4gICAgLy8gaWYgcGFnZSAzMDFzIGV0Yy4gVXNlIGEgcXVlcnkgcGFyYW0gaW5zdGVhZD8gYWxzbyBjb3VsZCBoYXZlIGlzc3VlcyB3aXRoIHJlZGlyZWN0cy4gSW5qZWN0aW5nIHZhciBjb3VsZFxyXG4gICAgLy8gd29yayBidXQgaXMgYXN5bmMuLi5cclxuICAgIEJ1aWxkZXIuaXNFZGl0aW5nID0gQm9vbGVhbihpc0lmcmFtZSAmJlxyXG4gICAgICAgICgoZG9jdW1lbnQucmVmZXJyZXIgJiYgZG9jdW1lbnQucmVmZXJyZXIubWF0Y2goL2J1aWxkZXJcXC5pb3xsb2NhbGhvc3Q6MTIzNC8pKSB8fFxyXG4gICAgICAgICAgICBsb2NhdGlvbi5zZWFyY2guaW5kZXhPZignYnVpbGRlci5mcmFtZUVkaXRpbmc9JykgIT09IC0xKSk7XHJcbiAgICBCdWlsZGVyLmlzUHJldmlld2luZyA9IEJvb2xlYW4oaXNCcm93c2VyICYmXHJcbiAgICAgICAgKGxvY2F0aW9uLnNlYXJjaC5pbmRleE9mKCdidWlsZGVyLnByZXZpZXc9JykgIT09IC0xIHx8XHJcbiAgICAgICAgICAgIGxvY2F0aW9uLnNlYXJjaC5pbmRleE9mKCdidWlsZGVyLmZyYW1lRWRpdGluZz0nKSAhPT0gLTEpKTtcclxuICAgIEJ1aWxkZXIuaXNSZWFjdCA9IGZhbHNlO1xyXG4gICAgQnVpbGRlci5zZGtJbmZvID0gdW5kZWZpbmVkO1xyXG4gICAgQnVpbGRlci5vdmVycmlkZVVzZXJBdHRyaWJ1dGVzID0ge307XHJcbiAgICByZXR1cm4gQnVpbGRlcjtcclxufSgpKTtcblxudmFyIGJ1aWxkZXIgPSBuZXcgQnVpbGRlcihudWxsLCB1bmRlZmluZWQsIHVuZGVmaW5lZCwgdHJ1ZSk7XHJcbkJ1aWxkZXIuc2luZ2xldG9uSW5zdGFuY2UgPSBidWlsZGVyO1xuXG5leHBvcnQgeyBCZWhhdmlvclN1YmplY3QsIEJ1aWxkZXIsIEJ1aWxkZXJDb21wb25lbnQsIFN1YnNjcmlwdGlvbiwgYnVpbGRlciwgaXNCcm93c2VyIH07XG4vLyMgc291cmNlTWFwcGluZ1VSTD1pbmRleC5lc20uanMubWFwXG4iXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbMF0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@builder.io/sdk/dist/index.esm.js\n");

/***/ }),

/***/ "(ssr)/./node_modules/@builder.io/sdk/node_modules/tslib/tslib.es6.js":
/*!**********************************************************************!*\
  !*** ./node_modules/@builder.io/sdk/node_modules/tslib/tslib.es6.js ***!
  \**********************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   __assign: () => (/* binding */ __assign),\n/* harmony export */   __asyncDelegator: () => (/* binding */ __asyncDelegator),\n/* harmony export */   __asyncGenerator: () => (/* binding */ __asyncGenerator),\n/* harmony export */   __asyncValues: () => (/* binding */ __asyncValues),\n/* harmony export */   __await: () => (/* binding */ __await),\n/* harmony export */   __awaiter: () => (/* binding */ __awaiter),\n/* harmony export */   __classPrivateFieldGet: () => (/* binding */ __classPrivateFieldGet),\n/* harmony export */   __classPrivateFieldSet: () => (/* binding */ __classPrivateFieldSet),\n/* harmony export */   __createBinding: () => (/* binding */ __createBinding),\n/* harmony export */   __decorate: () => (/* binding */ __decorate),\n/* harmony export */   __exportStar: () => (/* binding */ __exportStar),\n/* harmony export */   __extends: () => (/* binding */ __extends),\n/* harmony export */   __generator: () => (/* binding */ __generator),\n/* harmony export */   __importDefault: () => (/* binding */ __importDefault),\n/* harmony export */   __importStar: () => (/* binding */ __importStar),\n/* harmony export */   __makeTemplateObject: () => (/* binding */ __makeTemplateObject),\n/* harmony export */   __metadata: () => (/* binding */ __metadata),\n/* harmony export */   __param: () => (/* binding */ __param),\n/* harmony export */   __read: () => (/* binding */ __read),\n/* harmony export */   __rest: () => (/* binding */ __rest),\n/* harmony export */   __spread: () => (/* binding */ __spread),\n/* harmony export */   __spreadArrays: () => (/* binding */ __spreadArrays),\n/* harmony export */   __values: () => (/* binding */ __values)\n/* harmony export */ });\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nfunction __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nvar __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nfunction __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nfunction __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nfunction __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nfunction __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nfunction __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nfunction __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nfunction __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nfunction __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nfunction __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nfunction __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nfunction __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nfunction __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nfunction __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nfunction __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nfunction __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nfunction __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nfunction __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nfunction __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nfunction __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nfunction __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQGJ1aWxkZXIuaW8vc2RrL25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLGdCQUFnQixzQ0FBc0Msa0JBQWtCO0FBQ25GLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQSxpREFBaUQsT0FBTztBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RCxjQUFjO0FBQzNFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLDZDQUE2QyxRQUFRO0FBQ3JEO0FBQ0E7QUFDQTtBQUNPO0FBQ1Asb0NBQW9DO0FBQ3BDO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNPO0FBQ1AsNEJBQTRCLCtEQUErRCxpQkFBaUI7QUFDNUc7QUFDQSxvQ0FBb0MsTUFBTSwrQkFBK0IsWUFBWTtBQUNyRixtQ0FBbUMsTUFBTSxtQ0FBbUMsWUFBWTtBQUN4RixnQ0FBZ0M7QUFDaEM7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNPO0FBQ1AsY0FBYyw2QkFBNkIsMEJBQTBCLGNBQWMscUJBQXFCO0FBQ3hHLGlCQUFpQixvREFBb0QscUVBQXFFLGNBQWM7QUFDeEosdUJBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0M7QUFDeEMsbUNBQW1DLFNBQVM7QUFDNUMsbUNBQW1DLFdBQVcsVUFBVTtBQUN4RCwwQ0FBMEMsY0FBYztBQUN4RDtBQUNBLDhHQUE4RyxPQUFPO0FBQ3JILGlGQUFpRixpQkFBaUI7QUFDbEcseURBQXlELGdCQUFnQixRQUFRO0FBQ2pGLCtDQUErQyxnQkFBZ0IsZ0JBQWdCO0FBQy9FO0FBQ0Esa0NBQWtDO0FBQ2xDO0FBQ0E7QUFDQSxVQUFVLFlBQVksYUFBYSxTQUFTLFVBQVU7QUFDdEQsb0NBQW9DLFNBQVM7QUFDN0M7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG9CQUFvQixNQUFNO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCw2QkFBNkIsc0JBQXNCO0FBQ25EO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxrREFBa0QsUUFBUTtBQUMxRCx5Q0FBeUMsUUFBUTtBQUNqRCx5REFBeUQsUUFBUTtBQUNqRTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EsaUJBQWlCLHVGQUF1RixjQUFjO0FBQ3RILHVCQUF1QixnQ0FBZ0MscUNBQXFDLDJDQUEyQztBQUN2SSw0QkFBNEIsTUFBTSxpQkFBaUIsWUFBWTtBQUMvRCx1QkFBdUI7QUFDdkIsOEJBQThCO0FBQzlCLDZCQUE2QjtBQUM3Qiw0QkFBNEI7QUFDNUI7QUFDQTtBQUNPO0FBQ1A7QUFDQSxpQkFBaUIsNkNBQTZDLFVBQVUsc0RBQXNELGNBQWM7QUFDNUksMEJBQTBCLDZCQUE2QixvQkFBb0IsZ0RBQWdELGtCQUFrQjtBQUM3STtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0EsMkdBQTJHLHVGQUF1RixjQUFjO0FBQ2hOLHVCQUF1Qiw4QkFBOEIsZ0RBQWdELHdEQUF3RDtBQUM3Siw2Q0FBNkMsc0NBQXNDLFVBQVUsbUJBQW1CLElBQUk7QUFDcEg7QUFDQTtBQUNPO0FBQ1AsaUNBQWlDLHVDQUF1QyxZQUFZLEtBQUssT0FBTztBQUNoRztBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIi9Vc2Vycy9hdi9EZXNrdG9wL2F2c3R1ZGlvL2FydGljaG9rZS9idWlsZGVyLWFwcC9ub2RlX21vZHVsZXMvQGJ1aWxkZXIuaW8vc2RrL25vZGVfbW9kdWxlcy90c2xpYi90c2xpYi5lczYuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyohICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqXHJcbkNvcHlyaWdodCAoYykgTWljcm9zb2Z0IENvcnBvcmF0aW9uLlxyXG5cclxuUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55XHJcbnB1cnBvc2Ugd2l0aCBvciB3aXRob3V0IGZlZSBpcyBoZXJlYnkgZ3JhbnRlZC5cclxuXHJcblRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCBcIkFTIElTXCIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEhcclxuUkVHQVJEIFRPIFRISVMgU09GVFdBUkUgSU5DTFVESU5HIEFMTCBJTVBMSUVEIFdBUlJBTlRJRVMgT0YgTUVSQ0hBTlRBQklMSVRZXHJcbkFORCBGSVRORVNTLiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SIEJFIExJQUJMRSBGT1IgQU5ZIFNQRUNJQUwsIERJUkVDVCxcclxuSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NXHJcbkxPU1MgT0YgVVNFLCBEQVRBIE9SIFBST0ZJVFMsIFdIRVRIRVIgSU4gQU4gQUNUSU9OIE9GIENPTlRSQUNULCBORUdMSUdFTkNFIE9SXHJcbk9USEVSIFRPUlRJT1VTIEFDVElPTiwgQVJJU0lORyBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBVU0UgT1JcclxuUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS5cclxuKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKiogKi9cclxuLyogZ2xvYmFsIFJlZmxlY3QsIFByb21pc2UgKi9cclxuXHJcbnZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24oZCwgYikge1xyXG4gICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG59O1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXh0ZW5kcyhkLCBiKSB7XHJcbiAgICBleHRlbmRTdGF0aWNzKGQsIGIpO1xyXG4gICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbn1cclxuXHJcbmV4cG9ydCB2YXIgX19hc3NpZ24gPSBmdW5jdGlvbigpIHtcclxuICAgIF9fYXNzaWduID0gT2JqZWN0LmFzc2lnbiB8fCBmdW5jdGlvbiBfX2Fzc2lnbih0KSB7XHJcbiAgICAgICAgZm9yICh2YXIgcywgaSA9IDEsIG4gPSBhcmd1bWVudHMubGVuZ3RoOyBpIDwgbjsgaSsrKSB7XHJcbiAgICAgICAgICAgIHMgPSBhcmd1bWVudHNbaV07XHJcbiAgICAgICAgICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSkgdFtwXSA9IHNbcF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIF9fYXNzaWduLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3Jlc3QocywgZSkge1xyXG4gICAgdmFyIHQgPSB7fTtcclxuICAgIGZvciAodmFyIHAgaW4gcykgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChzLCBwKSAmJiBlLmluZGV4T2YocCkgPCAwKVxyXG4gICAgICAgIHRbcF0gPSBzW3BdO1xyXG4gICAgaWYgKHMgIT0gbnVsbCAmJiB0eXBlb2YgT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyA9PT0gXCJmdW5jdGlvblwiKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwLCBwID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhzKTsgaSA8IHAubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKGUuaW5kZXhPZihwW2ldKSA8IDAgJiYgT2JqZWN0LnByb3RvdHlwZS5wcm9wZXJ0eUlzRW51bWVyYWJsZS5jYWxsKHMsIHBbaV0pKVxyXG4gICAgICAgICAgICAgICAgdFtwW2ldXSA9IHNbcFtpXV07XHJcbiAgICAgICAgfVxyXG4gICAgcmV0dXJuIHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2RlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKSB7XHJcbiAgICB2YXIgYyA9IGFyZ3VtZW50cy5sZW5ndGgsIHIgPSBjIDwgMyA/IHRhcmdldCA6IGRlc2MgPT09IG51bGwgPyBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0YXJnZXQsIGtleSkgOiBkZXNjLCBkO1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0LmRlY29yYXRlID09PSBcImZ1bmN0aW9uXCIpIHIgPSBSZWZsZWN0LmRlY29yYXRlKGRlY29yYXRvcnMsIHRhcmdldCwga2V5LCBkZXNjKTtcclxuICAgIGVsc2UgZm9yICh2YXIgaSA9IGRlY29yYXRvcnMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIGlmIChkID0gZGVjb3JhdG9yc1tpXSkgciA9IChjIDwgMyA/IGQocikgOiBjID4gMyA/IGQodGFyZ2V0LCBrZXksIHIpIDogZCh0YXJnZXQsIGtleSkpIHx8IHI7XHJcbiAgICByZXR1cm4gYyA+IDMgJiYgciAmJiBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBrZXksIHIpLCByO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19wYXJhbShwYXJhbUluZGV4LCBkZWNvcmF0b3IpIHtcclxuICAgIHJldHVybiBmdW5jdGlvbiAodGFyZ2V0LCBrZXkpIHsgZGVjb3JhdG9yKHRhcmdldCwga2V5LCBwYXJhbUluZGV4KTsgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19tZXRhZGF0YShtZXRhZGF0YUtleSwgbWV0YWRhdGFWYWx1ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBSZWZsZWN0Lm1ldGFkYXRhID09PSBcImZ1bmN0aW9uXCIpIHJldHVybiBSZWZsZWN0Lm1ldGFkYXRhKG1ldGFkYXRhS2V5LCBtZXRhZGF0YVZhbHVlKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXdhaXRlcih0aGlzQXJnLCBfYXJndW1lbnRzLCBQLCBnZW5lcmF0b3IpIHtcclxuICAgIGZ1bmN0aW9uIGFkb3B0KHZhbHVlKSB7IHJldHVybiB2YWx1ZSBpbnN0YW5jZW9mIFAgPyB2YWx1ZSA6IG5ldyBQKGZ1bmN0aW9uIChyZXNvbHZlKSB7IHJlc29sdmUodmFsdWUpOyB9KTsgfVxyXG4gICAgcmV0dXJuIG5ldyAoUCB8fCAoUCA9IFByb21pc2UpKShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XHJcbiAgICAgICAgZnVuY3Rpb24gZnVsZmlsbGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yLm5leHQodmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHJlamVjdGVkKHZhbHVlKSB7IHRyeSB7IHN0ZXAoZ2VuZXJhdG9yW1widGhyb3dcIl0odmFsdWUpKTsgfSBjYXRjaCAoZSkgeyByZWplY3QoZSk7IH0gfVxyXG4gICAgICAgIGZ1bmN0aW9uIHN0ZXAocmVzdWx0KSB7IHJlc3VsdC5kb25lID8gcmVzb2x2ZShyZXN1bHQudmFsdWUpIDogYWRvcHQocmVzdWx0LnZhbHVlKS50aGVuKGZ1bGZpbGxlZCwgcmVqZWN0ZWQpOyB9XHJcbiAgICAgICAgc3RlcCgoZ2VuZXJhdG9yID0gZ2VuZXJhdG9yLmFwcGx5KHRoaXNBcmcsIF9hcmd1bWVudHMgfHwgW10pKS5uZXh0KCkpO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2dlbmVyYXRvcih0aGlzQXJnLCBib2R5KSB7XHJcbiAgICB2YXIgXyA9IHsgbGFiZWw6IDAsIHNlbnQ6IGZ1bmN0aW9uKCkgeyBpZiAodFswXSAmIDEpIHRocm93IHRbMV07IHJldHVybiB0WzFdOyB9LCB0cnlzOiBbXSwgb3BzOiBbXSB9LCBmLCB5LCB0LCBnO1xyXG4gICAgcmV0dXJuIGcgPSB7IG5leHQ6IHZlcmIoMCksIFwidGhyb3dcIjogdmVyYigxKSwgXCJyZXR1cm5cIjogdmVyYigyKSB9LCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgJiYgKGdbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkgeyByZXR1cm4gdGhpczsgfSksIGc7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgcmV0dXJuIGZ1bmN0aW9uICh2KSB7IHJldHVybiBzdGVwKFtuLCB2XSk7IH07IH1cclxuICAgIGZ1bmN0aW9uIHN0ZXAob3ApIHtcclxuICAgICAgICBpZiAoZikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7XHJcbiAgICAgICAgd2hpbGUgKF8pIHRyeSB7XHJcbiAgICAgICAgICAgIGlmIChmID0gMSwgeSAmJiAodCA9IG9wWzBdICYgMiA/IHlbXCJyZXR1cm5cIl0gOiBvcFswXSA/IHlbXCJ0aHJvd1wiXSB8fCAoKHQgPSB5W1wicmV0dXJuXCJdKSAmJiB0LmNhbGwoeSksIDApIDogeS5uZXh0KSAmJiAhKHQgPSB0LmNhbGwoeSwgb3BbMV0pKS5kb25lKSByZXR1cm4gdDtcclxuICAgICAgICAgICAgaWYgKHkgPSAwLCB0KSBvcCA9IFtvcFswXSAmIDIsIHQudmFsdWVdO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKG9wWzBdKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6IGNhc2UgMTogdCA9IG9wOyBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgNDogXy5sYWJlbCsrOyByZXR1cm4geyB2YWx1ZTogb3BbMV0sIGRvbmU6IGZhbHNlIH07XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6IF8ubGFiZWwrKzsgeSA9IG9wWzFdOyBvcCA9IFswXTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6IG9wID0gXy5vcHMucG9wKCk7IF8udHJ5cy5wb3AoKTsgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghKHQgPSBfLnRyeXMsIHQgPSB0Lmxlbmd0aCA+IDAgJiYgdFt0Lmxlbmd0aCAtIDFdKSAmJiAob3BbMF0gPT09IDYgfHwgb3BbMF0gPT09IDIpKSB7IF8gPSAwOyBjb250aW51ZTsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvcFswXSA9PT0gMyAmJiAoIXQgfHwgKG9wWzFdID4gdFswXSAmJiBvcFsxXSA8IHRbM10pKSkgeyBfLmxhYmVsID0gb3BbMV07IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9wWzBdID09PSA2ICYmIF8ubGFiZWwgPCB0WzFdKSB7IF8ubGFiZWwgPSB0WzFdOyB0ID0gb3A7IGJyZWFrOyB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHQgJiYgXy5sYWJlbCA8IHRbMl0pIHsgXy5sYWJlbCA9IHRbMl07IF8ub3BzLnB1c2gob3ApOyBicmVhazsgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0WzJdKSBfLm9wcy5wb3AoKTtcclxuICAgICAgICAgICAgICAgICAgICBfLnRyeXMucG9wKCk7IGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wID0gYm9keS5jYWxsKHRoaXNBcmcsIF8pO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHsgb3AgPSBbNiwgZV07IHkgPSAwOyB9IGZpbmFsbHkgeyBmID0gdCA9IDA7IH1cclxuICAgICAgICBpZiAob3BbMF0gJiA1KSB0aHJvdyBvcFsxXTsgcmV0dXJuIHsgdmFsdWU6IG9wWzBdID8gb3BbMV0gOiB2b2lkIDAsIGRvbmU6IHRydWUgfTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fY3JlYXRlQmluZGluZyhvLCBtLCBrLCBrMikge1xyXG4gICAgaWYgKGsyID09PSB1bmRlZmluZWQpIGsyID0gaztcclxuICAgIG9bazJdID0gbVtrXTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fZXhwb3J0U3RhcihtLCBleHBvcnRzKSB7XHJcbiAgICBmb3IgKHZhciBwIGluIG0pIGlmIChwICE9PSBcImRlZmF1bHRcIiAmJiAhZXhwb3J0cy5oYXNPd25Qcm9wZXJ0eShwKSkgZXhwb3J0c1twXSA9IG1bcF07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3ZhbHVlcyhvKSB7XHJcbiAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwO1xyXG4gICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7XHJcbiAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09IFwibnVtYmVyXCIpIHJldHVybiB7XHJcbiAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwO1xyXG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/IFwiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS5cIiA6IFwiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fcmVhZChvLCBuKSB7XHJcbiAgICB2YXIgbSA9IHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl07XHJcbiAgICBpZiAoIW0pIHJldHVybiBvO1xyXG4gICAgdmFyIGkgPSBtLmNhbGwobyksIHIsIGFyID0gW10sIGU7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIHdoaWxlICgobiA9PT0gdm9pZCAwIHx8IG4tLSA+IDApICYmICEociA9IGkubmV4dCgpKS5kb25lKSBhci5wdXNoKHIudmFsdWUpO1xyXG4gICAgfVxyXG4gICAgY2F0Y2ggKGVycm9yKSB7IGUgPSB7IGVycm9yOiBlcnJvciB9OyB9XHJcbiAgICBmaW5hbGx5IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAociAmJiAhci5kb25lICYmIChtID0gaVtcInJldHVyblwiXSkpIG0uY2FsbChpKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZmluYWxseSB7IGlmIChlKSB0aHJvdyBlLmVycm9yOyB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYXI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX3NwcmVhZCgpIHtcclxuICAgIGZvciAodmFyIGFyID0gW10sIGkgPSAwOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKVxyXG4gICAgICAgIGFyID0gYXIuY29uY2F0KF9fcmVhZChhcmd1bWVudHNbaV0pKTtcclxuICAgIHJldHVybiBhcjtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fc3ByZWFkQXJyYXlzKCkge1xyXG4gICAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSBzICs9IGFyZ3VtZW50c1tpXS5sZW5ndGg7XHJcbiAgICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspXHJcbiAgICAgICAgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspXHJcbiAgICAgICAgICAgIHJba10gPSBhW2pdO1xyXG4gICAgcmV0dXJuIHI7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19hd2FpdCh2KSB7XHJcbiAgICByZXR1cm4gdGhpcyBpbnN0YW5jZW9mIF9fYXdhaXQgPyAodGhpcy52ID0gdiwgdGhpcykgOiBuZXcgX19hd2FpdCh2KTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNHZW5lcmF0b3IodGhpc0FyZywgX2FyZ3VtZW50cywgZ2VuZXJhdG9yKSB7XHJcbiAgICBpZiAoIVN5bWJvbC5hc3luY0l0ZXJhdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3ltYm9sLmFzeW5jSXRlcmF0b3IgaXMgbm90IGRlZmluZWQuXCIpO1xyXG4gICAgdmFyIGcgPSBnZW5lcmF0b3IuYXBwbHkodGhpc0FyZywgX2FyZ3VtZW50cyB8fCBbXSksIGksIHEgPSBbXTtcclxuICAgIHJldHVybiBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobikgeyBpZiAoZ1tuXSkgaVtuXSA9IGZ1bmN0aW9uICh2KSB7IHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAoYSwgYikgeyBxLnB1c2goW24sIHYsIGEsIGJdKSA+IDEgfHwgcmVzdW1lKG4sIHYpOyB9KTsgfTsgfVxyXG4gICAgZnVuY3Rpb24gcmVzdW1lKG4sIHYpIHsgdHJ5IHsgc3RlcChnW25dKHYpKTsgfSBjYXRjaCAoZSkgeyBzZXR0bGUocVswXVszXSwgZSk7IH0gfVxyXG4gICAgZnVuY3Rpb24gc3RlcChyKSB7IHIudmFsdWUgaW5zdGFuY2VvZiBfX2F3YWl0ID8gUHJvbWlzZS5yZXNvbHZlKHIudmFsdWUudikudGhlbihmdWxmaWxsLCByZWplY3QpIDogc2V0dGxlKHFbMF1bMl0sIHIpOyB9XHJcbiAgICBmdW5jdGlvbiBmdWxmaWxsKHZhbHVlKSB7IHJlc3VtZShcIm5leHRcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiByZWplY3QodmFsdWUpIHsgcmVzdW1lKFwidGhyb3dcIiwgdmFsdWUpOyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUoZiwgdikgeyBpZiAoZih2KSwgcS5zaGlmdCgpLCBxLmxlbmd0aCkgcmVzdW1lKHFbMF1bMF0sIHFbMF1bMV0pOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2FzeW5jRGVsZWdhdG9yKG8pIHtcclxuICAgIHZhciBpLCBwO1xyXG4gICAgcmV0dXJuIGkgPSB7fSwgdmVyYihcIm5leHRcIiksIHZlcmIoXCJ0aHJvd1wiLCBmdW5jdGlvbiAoZSkgeyB0aHJvdyBlOyB9KSwgdmVyYihcInJldHVyblwiKSwgaVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaTtcclxuICAgIGZ1bmN0aW9uIHZlcmIobiwgZikgeyBpW25dID0gb1tuXSA/IGZ1bmN0aW9uICh2KSB7IHJldHVybiAocCA9ICFwKSA/IHsgdmFsdWU6IF9fYXdhaXQob1tuXSh2KSksIGRvbmU6IG4gPT09IFwicmV0dXJuXCIgfSA6IGYgPyBmKHYpIDogdjsgfSA6IGY7IH1cclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIF9fYXN5bmNWYWx1ZXMobykge1xyXG4gICAgaWYgKCFTeW1ib2wuYXN5bmNJdGVyYXRvcikgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN5bWJvbC5hc3luY0l0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLlwiKTtcclxuICAgIHZhciBtID0gb1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0sIGk7XHJcbiAgICByZXR1cm4gbSA/IG0uY2FsbChvKSA6IChvID0gdHlwZW9mIF9fdmFsdWVzID09PSBcImZ1bmN0aW9uXCIgPyBfX3ZhbHVlcyhvKSA6IG9bU3ltYm9sLml0ZXJhdG9yXSgpLCBpID0ge30sIHZlcmIoXCJuZXh0XCIpLCB2ZXJiKFwidGhyb3dcIiksIHZlcmIoXCJyZXR1cm5cIiksIGlbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID0gZnVuY3Rpb24gKCkgeyByZXR1cm4gdGhpczsgfSwgaSk7XHJcbiAgICBmdW5jdGlvbiB2ZXJiKG4pIHsgaVtuXSA9IG9bbl0gJiYgZnVuY3Rpb24gKHYpIHsgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsgdiA9IG9bbl0odiksIHNldHRsZShyZXNvbHZlLCByZWplY3QsIHYuZG9uZSwgdi52YWx1ZSk7IH0pOyB9OyB9XHJcbiAgICBmdW5jdGlvbiBzZXR0bGUocmVzb2x2ZSwgcmVqZWN0LCBkLCB2KSB7IFByb21pc2UucmVzb2x2ZSh2KS50aGVuKGZ1bmN0aW9uKHYpIHsgcmVzb2x2ZSh7IHZhbHVlOiB2LCBkb25lOiBkIH0pOyB9LCByZWplY3QpOyB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX21ha2VUZW1wbGF0ZU9iamVjdChjb29rZWQsIHJhdykge1xyXG4gICAgaWYgKE9iamVjdC5kZWZpbmVQcm9wZXJ0eSkgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoY29va2VkLCBcInJhd1wiLCB7IHZhbHVlOiByYXcgfSk7IH0gZWxzZSB7IGNvb2tlZC5yYXcgPSByYXc7IH1cclxuICAgIHJldHVybiBjb29rZWQ7XHJcbn07XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19pbXBvcnRTdGFyKG1vZCkge1xyXG4gICAgaWYgKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgcmV0dXJuIG1vZDtcclxuICAgIHZhciByZXN1bHQgPSB7fTtcclxuICAgIGlmIChtb2QgIT0gbnVsbCkgZm9yICh2YXIgayBpbiBtb2QpIGlmIChPYmplY3QuaGFzT3duUHJvcGVydHkuY2FsbChtb2QsIGspKSByZXN1bHRba10gPSBtb2Rba107XHJcbiAgICByZXN1bHQuZGVmYXVsdCA9IG1vZDtcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2ltcG9ydERlZmF1bHQobW9kKSB7XHJcbiAgICByZXR1cm4gKG1vZCAmJiBtb2QuX19lc01vZHVsZSkgPyBtb2QgOiB7IGRlZmF1bHQ6IG1vZCB9O1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gX19jbGFzc1ByaXZhdGVGaWVsZEdldChyZWNlaXZlciwgcHJpdmF0ZU1hcCkge1xyXG4gICAgaWYgKCFwcml2YXRlTWFwLmhhcyhyZWNlaXZlcikpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIGdldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtcclxuICAgIH1cclxuICAgIHJldHVybiBwcml2YXRlTWFwLmdldChyZWNlaXZlcik7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0KHJlY2VpdmVyLCBwcml2YXRlTWFwLCB2YWx1ZSkge1xyXG4gICAgaWYgKCFwcml2YXRlTWFwLmhhcyhyZWNlaXZlcikpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFwiYXR0ZW1wdGVkIHRvIHNldCBwcml2YXRlIGZpZWxkIG9uIG5vbi1pbnN0YW5jZVwiKTtcclxuICAgIH1cclxuICAgIHByaXZhdGVNYXAuc2V0KHJlY2VpdmVyLCB2YWx1ZSk7XHJcbiAgICByZXR1cm4gdmFsdWU7XHJcbn1cclxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6WzBdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@builder.io/sdk/node_modules/tslib/tslib.es6.js\n");

/***/ })

};
;